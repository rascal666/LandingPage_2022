function ObjectEventListener(e){this.objectToListen=e,this._eventsRouter={}}function _log(e){if(_canLog){var t=Array.prototype.slice.apply(arguments,[1]),i=new Date,s=i.getHours()+":"+i.getMinutes()+":"+i.getSeconds()+"."+i.getMilliseconds();t[0]=s+" - "+t[0];try{switch(e){case"info":window.console.info.apply(window.console,t);break;case"warn":window.console.warn.apply(window.console,t);break;default:window.console.log.apply(window.console,t)}}catch(e){window.console||(_canLog=!1)}}}function logMsg(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)}function createPopupCover(){var e=$(".js-cover-all");return e.length||(e=$("<div>").addClass("cover-all js-cover-all").appendTo("body")),e.show(),e}function showPopup(e,t,i,s){var n,a,o=$("string"==typeof e?"#"+e:e);$("#popup-content, #popup-container").stop(!0,!0),$("#popup-content").removeAttr("style"),$doc.data("currentPopup")&&(hidePopup($doc.data("currentPopup"),!0),$doc.removeData("currentPopup")),n=$doc.scrollTop()+($win.height()-o.height())/2,n=Math.max(n,$doc.scrollTop()+10),a=$doc.scrollLeft()+($win.width()-o.width())/2,a=Math.max(a,$doc.scrollLeft()+10),o.css({top:n,left:a}).show(),$doc.data("currentPopup",o[0]),t&&createPopupCover(),i&&(i.source&&i.destination&&$("#"+i.destination).val($("#"+i.source).val()),i.focus&&$("#"+i.focus).focus()),$doc.data("on_hide_popup",s||null),$body.addClass("hide-hor-scroll"),$doc.trigger("showpopup")}function hidePopup(e,t,i){$("string"==typeof e?"#"+e:e).hide(),$(".js-cover-all").hide(),$doc.data("currentPopup")&&$doc.removeData("currentPopup"),$doc.data("on_hide_popup")&&($doc.data("on_hide_popup")(),$doc.removeData("on_hide_popup")),$body.removeClass("hide-hor-scroll"),$("#popup-content, #popup-container").stop(!0,!0).removeClass("ov"),t||$doc.trigger("closepopup"),i||$body.removeClass("oh")}function closeAllPopup(){var e,t=$(".ui-dialog-content");t.dialog&&t.dialog("close"),$doc.data("currentPopup")||$(".ui-widget-content").length?hidePopup($doc.data("currentPopup")):(e=["login","auth","popup-container","password-reset","popup-treeview-container"],$.each(e,function(e,t){$("#"+t).hide()})),$(".js-cover-all, .ui-widget-overlay, .pic-template-tiu").hide(),$(".text-generator input").prop("disabled",!1)}function u_reRenderPopup(e,t,i){var s=$win.height()-50,n=$("#popup-content"),a=$(".popup-new"),o=$($doc.data("currentPopup")||"#popup-container"),r=$(t),l=$(i||"#popup-container #popup-inner"),c=$("#popup-close"),h=!n.data("withScroll")&&r.length&&r.height()<=s?r.height():r.length&&n.data("withScroll")?s:!n.data("withScroll")||l.height()<=s?l.height():s,d=l.width(),u=($win.height()-(h+2*parseInt(a.css("padding-top"))))/2+$win.scrollTop(),p=($win.width()-(d+2*parseInt(a.css("padding-left"))))/2+$win.scrollLeft();n.data("withScroll")||(u=Math.max(u,$doc.scrollTop()+10),p=Math.max(p,$doc.scrollLeft()+10)),n.data("withScroll")&&(r.length&&r.height()>s||l.height()>s)?n.addClass("with-scroll"):n.removeClass("with-scroll"),o.stop(!0,!0).animate({left:p,top:u},300),n.stop(!0,!0).animate({width:d,height:h},300,function(){n.addClass("ov")}),0==c.css("opacity")&&c.fadeTo(300,1),$("body.hide-hor-scroll").length||$body.addClass("hide-hor-scroll"),$(".js-length-check").length&&$(".js-length-check").keyup(),n.find(".l").hide()}function u_showLoading(){var e=$("#popup-container"),t=$("#popup-content"),i=t.find(".l");t.removeClass("with-scroll"),$doc.data("currentPopup")&&(hidePopup($doc.data("currentPopup"),!0,!0),$doc.removeData("currentPopup")),$("#popup-close").css("opacity",0),t.children().wrapAll($("<div>").css({position:"absolute",left:-1e3})).hide(),i.length?i.show():(t.append($("<div>").addClass(t.data("noResize")?"big-l":"l")),t.data("noResize")||t.css({width:"20px",height:"19px"})),e.css({top:$doc.scrollTop()+($win.height()-e.height())/2,left:$doc.scrollLeft()+($win.width()-e.width())/2}).show(),$doc.data("currentPopup",e[0]),createPopupCover()}function closePopupAndReload(e){if(e&&e.delay)var t=setTimeout(function(){hidePopup("popup-container")},e.delay);$doc.on("closepopup",function(){e&&e.href?location.href=e.href:location.reload(),e&&e.delay&&clearTimeout(t)})}function openStaticPopup(e,t){var i,s,n=$("#popup-content");s="object"==typeof e?e:$("."+e),n.find(s).length||n.data("$initContainer",s).html(s.show()),t&&(i=$("#popup-container"),n.data("zIndex",i.css("zIndex")),i.css("z-index",t)),showPopup("popup-container",!0)}function closeStaticPopup(){var e=$("#popup-content"),t=e.data("$initContainer"),i=e.data("zIndex");t&&t.appendTo("body").hide(),i&&$("#popup-container").css("zIndex",i)}function lazyClosePopup(){setTimeout(function(){location.reload()},1e4),$doc.on("closepopup",function(){location.reload()})}function showRegionSelector(e,t,i,s,n,a){$.get(e,{no_follow:i},function(e){var i,o,r=$(n);$("#"+t).html(e),s&&createPopupCover(),$doc.data("region_popup_"+t)||($doc.data("region_popup_"+t,$("#"+t)),$doc.data("region_popup_"+t).appendTo("body")),n?"center"==n?(i="string"==typeof t?$("#"+t):$(t),o=i.children("div"),i.show().css({top:$doc.scrollTop()+($win.height()-o.height())/2,left:$doc.scrollLeft()+($win.width()-o.width())/2}),$doc.data("currentPopup",i[0])):(n.blur(),$doc.data("region_popup_"+t).css({left:r.offset().left+~~a,top:r.offset().top+r.outerHeight()}).show()):$doc.data("region_popup_"+t).css({left:0,top:18}).show()})}function jShowRegions(e,t,i,s){t||(t="regions");var n,a,o,r,l=jShowRegions.arguments;return $doc.data("region_popup_"+t)||($doc.data("region_popup_"+t,$("#"+t)),$doc.data("region_popup_"+t).appendTo("body")),s&&createPopupCover(),e?"center"==e?(n="string"==typeof t?$("#"+t):$(t),a=n.children("div"),n.css({top:$doc.scrollTop()+($win.height()-393)/2,left:$doc.scrollLeft()+($win.width()-a.width())/2}).show(),$doc.data("currentPopup",n[0])):(o=$(e),isNaN(l[3])?(e.blur(),$doc.data("region_popup_"+t).css({left:o.offset().left,top:o.offset().top+o.outerHeight()}).show()):(e.blur(),r=l[3],$doc.data("region_popup_"+t).css({left:o.offset().left+r,top:o.offset().top+o.outerHeight()}).show())):$doc.data("region_popup_"+t).css({left:0,top:18}).show(),!1}function selectCity(){$(".js-regions .cities a").click(function(){var e=$(this),t=e.data("region-id"),i=e.text(),s=$(".js-regions .selected").index(),n=["\u0420\u041e\u0421\u0421\u0418\u042f","\u0423\u041a\u0420\u0410\u0418\u041d\u0410","\u041a\u0410\u0417\u0410\u0425\u0421\u0422\u0410\u041d","\u0411\u0415\u041b\u0410\u0420\u0423\u0421\u042c","\u0421\u0422\u0420\u0410\u041d\u042b-\u0418\u041c\u041f\u041e\u0420\u0422\u0415\u0420\u042b"],a=$(".js-ps-option-country"),o=$(".js-ps-option-city"),r=function(){$(".js-ps-content").text($(".js-ps-option:selected").text())},l=function(e){return!!e.filter(function(){return $(this).text()==i}).length};if($("body").data("unbinded"))return e.is(".wholeregion")?(i=n[s],l(a)?$(".js-ps-option-country:contains("+i+")").prop("selected",!0):(a.last().after("<option value="+t+' class="js-ps-option js-ps-option-country">'+i+"</option>"),$(".js-ps-option-country").last().prop("selected",!0)),r()):(l(o)?$(".js-ps-option-city:contains("+i+")").prop("selected",!0):o.length?(o.last().after("<option value="+t+' class="js-ps-option js-ps-option-city">'+i+"</option>"),$(".js-ps-option-city").last().prop("selected",!0)):(a.last().after("<option value="+t+' class="js-ps-option js-ps-option-city">'+i+"</option>"),o.prop("selected",!0)),r()),$("#popup-container, .js-cover-all").hide(),!1})}function checkTextareaLength(e,t,i,s){var n=$(e),a=n.val(),o=a.length;if("keydown"==s)o>i?n.val(a.substring(0,i)):(n.data("lengthBefore",a.length),n.data("text",a));else if("keyup"==s&&n.val().length>i){var r=parseInt(n.data("lengthBefore"));r+1<i?n.val(a.substring(0,i)):n.val(n.data("text"))}else"focusout"==s&&o>i&&n.val(a.substring(0,i));o=i-n.val().length,o<0&&(o=0),$(t).html(o<i/4?'<span class="symbol-left">'+o+"</span>":o)}function autoResizeTextarea(e,t){var i,s=$(e),n=15,a=~~t;e.scrollHeight>e.offsetHeight?(i=e.scrollHeight+n,s.height(i)):e.offsetHeight>a&&(i=e.offsetHeight-2*n,s.height(i),e.scrollHeight>e.offsetHeight&&autoResizeTextarea(e),a>0&&e.offsetHeight<t&&s.height(t))}function autoResizeAndCheckLengthTextarea(e,t,i,s){var n=checkTextareaLength(e,t,i);return autoResizeTextarea(e,s),n}function urlencode(e){var t=encodeURIComponent(e),i=[[/!/g,"%21"],[/'/g,"%27"],[/\(/g,"%28"],[/\)/g,"%29"],[/\*/g,"%2A"],[/%20/g,"+"],[/~/g,"%7E"]];return $.each(i,function(){t=t.replace(this[0],this[1])}),t}function urldecode(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))}function getUrlParam(e,t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+t+"=([^&#]*)",s=new RegExp(i),n=s.exec(e);return null==n?"":urldecode(n[1])}function fromSearchEngine(){var e=document.referrer.match(/(google|yandex)/);return null!=e&&e[1]}function searchEngineQuery(){var e=fromSearchEngine(),t="";return e?("google"==e?t="q":"yandex"==e&&(t="text"),getUrlParam(document.referrer,t)||""):""}function pulscenSortable(e){var t=e.listSelector.replace("#",".")+"_positions",i="prevValues",s="sorting-initialize",n="js-notmove",a=$(e.listSelector),o=a.children().attr("class"),r=e.sortItemClass||o&&o.split(" ")[0],l=r?"."+r:"li";if(e.listSelector){if(a.data("itemsArray",[]),"update"===e.action)return void updateSortableItemsArray($(e.listSelector),l);$doc.on("mouseenter",e.listSelector+" "+l+":not(."+n+")",function(){$(this).closest(e.listSelector).hasClass("ui-sortable")||a.sortable({helper:"clone",axis:"y",start:function(){var e=$(this),s=e.find(t).map(function(){return $(this).val()});e.data(i,$.makeArray(s))},update:function(){var s=$(this),n=s.data(i);s.removeData(i),e.updateAlarm&&$(e.updateAlarm).trigger("click"),n&&s.find(t).each(function(e,t){$(t).val(n[e])})},items:"."+s+":not(."+n+")"})}),updateSortableItemsArray(a,l),$doc.on("updateItemsArray",function(e,t,i){updateSortableItemsArray(t,i)}),$doc.on("mousemove",function(e){var t,i=e.clientY+$win.scrollTop();$(l+":not(."+s+")").length&&(t=a.data("itemsArray"))&&$.each(t,function(e){if(!t[e][2].hasClass(s)&&i>t[e][0]&&i<t[e][1]){t[e][2].addClass(s);try{a.sortable("refresh")}catch(e){}}})})}}function updateSortableItemsArray(e,t){e.data("itemsArray")&&e.find(t).each(function(){var t=$(this),i=t.offset().top;e.data("itemsArray").push([i,i+t.outerHeight(),t])})}function declOfNum(e,t){var i=1,s=Math.abs(e),n=s%10,a=s%100;return 1==n&&11!=a?i=0:n>=2&&n<=4&&n%1==0&&(a<12||a>14)?i=1:(0==n||n>=5&&n<=9&&n%1==0||a>=11&&a<=14&&a%1==0)&&(i=2),t[i]}function createBookmarkLink(e,t){if(window.sidebar)window.sidebar.addPanel(t,e,"");else if(window.external)window.external.AddFavorite(e,t);else if(window.opera&&window.print)return!0}function isEventCtrlPressed(e){return e.ctrlKey&&!e.altKey&&!e.shiftKey}function textareaCheck(e,t){e.click(function(){if("required"!=t.next().attr("class")&&t.after("<span class='required'></span>"),""==t.val())return t.next().text("\u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c"),u_reRenderPopup(),!1})}function hideText(){$("[data-hidden-text]").each(function(){var e=$(this);e.text(e.data("hidden-text"))})}function toggleText(e,t,i,s){s.text(i==t?e:t)}function beforeSelectLoading(e,t){var i=$("#"+t);i.length&&(i.find("select:first").prop("disabled",!0),i.parents(":eq(2)").addClass("loading"))}function completeSelectLoading(e,t){$("#"+t).parents(":eq(2)").removeClass("loading")}function flip_visible(e){var t=document.getElementById(e);if(t){if("visible"==t.className)return t.className="invisible",!1;if("invisible"==t.className)return t.className="visible",!1}return!0}function flipInnerHtml(e,t,i){var s=$("#"+e);s.length&&s.html(s.html()==t?i:t)}function toggleInfoMessage(e,t){$("#"+t).css({top:e.offsetHeight+2+e.offsetTop+"px",left:e.offsetWidth+e.offsetLeft-t.offsetWidth+95+"px"}).toggle()}function showHideBox(e,t,i,s,n){e.click(function(){e.toggleClass(n),t.toggle(),toggleText(s,i,e.text(),e)})}function cutText(e,t){var i=e,s=[],n=[],a=1e3;i.each(function(){var e=$(this),o=e.text(),r=i.index(e);o.length>a&&(e.addClass("points"==t?"points":"big"),s[r]=o,n[r]=s[r].slice(0,a),"points"==t&&(n[r]=s[r].slice(0,n[r].lastIndexOf(" "))),e.text(n[r]).append('<span class="back"><a class="more" href="#"><span>\u0434\u0430\u043b\u0435\u0435</span></a></span>'),e.find(".more").parent().before("<em></em>"))}),i.find(".more").toggle(function(){var e=$(this),t=e.parent().parent(),n=i.index(t);return t.removeClass("big points"),t.contents().filter(function(){return 1!=this.nodeType}).remove(),e.addClass("up").children().text("\u0441\u043a\u0440\u044b\u0442\u044c").parent().parent().before(s[n]),e.parent().prev().remove(),$doc.trigger("rewiew.toggle",e),!1},function(){var e=$(this),s=e.parent().parent(),a=i.index(s);return s.addClass("points"==t?"points":"big"),s.contents().filter(function(){return 1!=this.nodeType}).remove(),e.removeClass("up").children().text("\u0434\u0430\u043b\u0435\u0435").parent().parent().before(n[a]),e.parent().before("<em></em>"),$doc.trigger("rewiew.toggle",e),!1})}function makeBigLetter(e){var t=e.val().replace(/^./,function(e){return e.toUpperCase()});e.val(t)}function injectInternalUrls(e){var t=app.config.mainHost.replace("www.","")+"|"+shortHost.replace("www.",""),i=new RegExp("(\\b(https?|ftp|file):\\/\\/.+?("+t.replace(/\\./g,"\\$&")+").*?(\\s|$))","ig");return e.replace(i,'<a href="$1">$1</a>')}function makeTextareaPlaceHolder(e){var t=e&&e.$selector||$(".js-with-placeholder"),i=t.parent(),s=e&&e.$placeholder||$("<div>").addClass("textarea-placeholder"),n=e&&e.html||"",a=function(){var e=$.trim(t.val()).length;e||i.find(s).length?e||s.show():i.prepend(s.html(n).show())};a(),t.on("focus",function(){s.hide()}),s.click(function(){$(this).hide(),t.trigger("focus")}),t.focusout(function(){a()})}function makePlaceholder(e,t,i,s){var n,a="object"==typeof e?e:$(e),o=a.attr(s?"data-placeholder":"placeholder"),r="<label class="+i+" for ="+t+">"+o+"</label>",n=a.next("label");n.length&&n.remove(),a.attr("id",t).after(r),n=a.next("label").hide(),a.val()||n.show(),a.on("reset focusout",function(){$(this).val()||n.show()}).on("change focus",function(){n.hide()})}function limitCheckbox(e,t,i){var s=$(i),n=$(t).length;$(e).parents(":eq(1)").find("label").toggleClass("checked"),3==n&&s.not(":checked").prop("disabled",!0),n<3&&s.prop("disabled",!1)}function checkLabel(e){var t,i=$(e),s=i.parents(":eq(2)"),n=s.find("label.checked").length,a=s.find("input"),o=i.parents(":eq(1)").find("input");i.hasClass("checked")?i.removeClass("checked"):3!=n?i.addClass("checked"):n=4,o.prop("checked")?o.prop("checked",!1):4!=n&&o.prop("checked",!0),t=s.find("input:checked").length,3==t&&a.not(":checked").prop("disabled",!0),t<3&&a.prop("disabled",!1)}function changeTab(e,t){var i=e.parent(),s=i.index(),n=i.parent().siblings("form");return i.addClass("selected").siblings().removeClass("selected"),n.hide().eq(s).show(),t&&u_reRenderPopup(),!1}function changeContent(e,t,i,s,n,a,o){var r=$(e),l=$("#"+t),i=$("#"+i).html();if(s){if(!$(s).length)return alert("\u041d\u0435 \u043e\u0442\u043c\u0435\u0447\u0435\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u0430"),!1;formSubmitter.disableButtons(r),$.getJSON(n,r.serialize(),function(e){var t=e.result;l.html(i),$(a).text(t),$(".text-generator input").prop("disabled",!1),checkTextareaLength(a,$(a).next().children(),255),$(".js-length-check").trigger("keydown"),o&&u_reRenderPopup()})}else l.html(i),o&&u_reRenderPopup();return!1}function copyGeneratedText(e,t,i,s){var n=$(e).find("textarea").val();$(i).val(n).keyup(),$(".js-bcm-attention").hide(),s||hidePopup("popup-container")}function setSelection(e){var t,i;document.createRange?(t=document.createRange(),t.selectNode(e),i=window.getSelection(),i.removeAllRanges(),i.addRange(t)):(t=document.body.createTextRange(),t.moveToElementText(e),t.select())}function checkItAll(e,t,i,s){function n(e){e.parent().prepend(s),e.parent().find(".ugolok-img").css({display:"block",opacity:"0"}).animate({opacity:"1"},1e3).animate({opacity:"1"},2e3).animate({opacity:"0"},1e3,function(){$(this).remove()})}var a=$(e),o=$(t);a.prop("checked",!$(t).not(":checked").length),a.click(function(){i&&$(this).is(":checked")&&n($(this)),$(this).is(":checked")?(o.prop("checked",!0),a.prop("checked",!0)):(o.prop("checked",!1),a.prop("checked",!1))}),o.click(function(){i&&$(this).is(":checked")&&$(t+":checked").length<=2&&n($(this)),a.prop("checked",!$(t).not(":checked").length)})}function alertCheckWindow(e,t,i,s,n){function a(){return h.length?h.html(s):($("body").prepend(s),h=$(i),h.hide()),r=h.find("p strong.amount").text().replace(/N/,function(){return l+"&nbsp;"+declOfNum(l,["\u0442\u043e\u0432\u0430\u0440","\u0442\u043e\u0432\u0430\u0440\u0430","\u0442\u043e\u0432\u0430\u0440\u043e\u0432"])}),h.find("p strong.amount").html(r),$("#popup-content").html(h.html()),showPopup($("#popup-container"),!0),$(".return").attr("OnClick","hidePopup('popup-container'); return false;"),$(".continue").attr("href",o),!1}var o,r,l,c,h=$(i),n=n;return t?(c=e+":not("+t+")",$(c).click(function(){if($doc.trigger("showAlertCheckWindow"),l=$(n+":checked").length)return o=$(this).attr("href"),a(),!1}),!1):(l=$(n+":checked").length,o=$(e).attr("href"),a(),!1)}function exitButton(e,t){var i=$(e),s=i.next().clone();$(t).click(function(){i.next().remove(),$(t+":checked").length?i.after("<a href="+s.attr("href")+' class="'+s.attr("class")+'"><i class="tl-icon tl-icon-exit"></i>\u0412\u044b\u0439\u0442\u0438</a>'):i.after(s).next().html('<i class="tl-icon tl-icon-exit"></i>\u0412\u044b\u0439\u0442\u0438')}),$(document).on("click",".js-toolbar-link-exit",function(){if($("#products-list input:checked").length){return alertCheckWindow("a","","#alert-message",'<div id="alert-message"><div class="alert-message clearfix"><h1 class="rate-header">\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!</h1><div class="blue-box"><p>\u0412\u044b \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f <strong class="amount">N.</strong></p><p>\u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0435 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.</p><p><strong>\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0439\u0442\u0438 \u0441\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b?</strong></p></div><div class="spisok"><ul><li>&larr;&nbsp;<a href="#" class="return" onclick = "hidePopup(\'popup-container\'); return false;"  >\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e</a></li><li class="last"><a href="#" class="spisok-link spisok-link-right continue">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c</a>&nbsp;&rarr;</li></ul></div></div></div>',".prod-cb-edit input"),$(".return").parent().next().html(s).children().text("\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c").removeClass().addClass("spisok-link spisok-link-right continue").after("&nbsp;&rarr;"),!1}})}function synhronyse(e,t,i){var s,n,a,o=[e,t];$.each(o,function(e,t){t.change(function(){s=$.inArray(t,o),n=0!=s&&i?0:1,""==o[n].attr("value")&&(a=$("#"+o[s].attr("id")+" option:selected").attr("value"),$("#"+o[n].attr("id")+" [value="+a+"]").prop("selected",!0))})})}function chooseOne(e){e.click(function(){var t=$(this),i=e.index(t);t.parents(":eq(5)").next().show().children().eq(i).siblings().hide().end().show()})}function showRubricTree(){return RubricSearcher.lock(),$("#rubric_title").val("\u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0440\u0443\u0431\u0440\u0438\u043a\u0430\u0442\u043e\u0440\u0443").attr("class","uf-t empty"),$("#tree_rubric").show(),$("#rubric_search_result").hide(),!1}function inputLengthCheck(){$(document).on("keyup focusout keydown",".js-length-check",function(e){var t=$(this),i=t.data("counter");i&&checkTextareaLength(this,$("."+i),t.attr("maxlength")||t.data("maxlength")||255,e.type)}),$(".js-length-check").keyup()}function qtipMessageS(e,t,i){var s,n="object"==typeof e?e:$(e);switch(i){case"default":s={show:"focus",hide:"blur keypress",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{tip:{corner:"topLeft",color:"#fce59d"}}};break;case"topRight":s={show:"focus",hide:"blur keypress",position:{corner:{target:"topRight",tooltip:"bottomLeft"}},style:{tip:{corner:"bottomLeft",color:"#fce59d"}}};break;case"hover":s={show:"mouseover",hide:"mouseout keypress",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{tip:{corner:"topLeft",color:"#fce59d"}}};break;case"click":s={show:"click",hide:"mouseout",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{tip:{corner:"topLeft",color:"#fce59d"}}};break;case"click-1":s={show:"click",hide:"click",position:{corner:{target:"bottomRight",tooltip:"topRight"}},style:{tip:{corner:"topRight",color:"#fce59d"}}};break;case"click-2":s={show:"click",hide:"click",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{classes:{tooltip:"js-qtip"},width:440,"font-size":11,tip:{corner:"topLeft",color:"#fce59d"}}};break;case"click-3":s={show:"click",hide:"click",position:{corner:{target:"bottomLeft",tooltip:"topRight"},adjust:{screen:!0}},style:{width:440,tip:{corner:"topRight",color:"#fce59d"}}};break;case"click-4":s={show:"click",hide:"click",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{width:440,tip:{corner:"topLeft",color:"#fce59d"}}};break;case"click-5":s={show:"click",hide:"click",position:{corner:{target:"bottomRight",tooltip:"topLeft"}},style:{classes:{tooltip:"custom"},width:250,padding:"15px 10px 10px",background:"#fff",border:{color:"#ccc",width:1},tip:{corner:"topLeft",color:"#fce59d",size:{x:10,y:10}},"font-size":11},api:{beforeShow:function(){$doc.trigger("click")}}};break;case"click-6":s={show:"click",hide:"click",position:{corner:{target:"bottomLeft",tooltip:"topRight"}},style:{classes:{tooltip:"custom top-right-arrow"},width:250,padding:"15px 5px 5px",background:"#fff",border:{color:"#ccc",width:1},tip:{corner:"topRight",color:"#fce59d",size:{x:10,y:10}},"font-size":11},api:{beforeShow:function(){$doc.trigger("click")}}};break;case"clickBlock":s={show:"focus click",hide:"mouseout blur keypress",position:{corner:{target:"topLeft",tooltip:"bottomLeft"}},style:{tip:{corner:"bottomLeft",color:"#fce59d"}}};break;case"dnd":s={show:"mouseenter",hide:"mousedown mouseleave click",position:{corner:{target:"topRight",tooltip:"bottomLeft"}},style:{tip:{corner:"bottomLeft",color:"#fce59d"}}};break;case"bottomLeftHover":s={show:"mouseover",hide:"mouseout keypress",position:{corner:{target:"bottomRight",tooltip:"topRight"}},style:{width:250,name:"cream",color:"#000",border:{color:"#fce59d"},tip:{corner:"topRight",color:"#fce59d"}}};break;case"hoverModernBottom":s={show:{when:"mouseover",delay:300},hide:{when:"mouseout",fixed:!0,delay:200},position:{corner:{target:"bottomMiddle",tooltip:"topMiddle"}},style:{classes:{tooltip:"modern-qtip under js-modern-qtip"},border:"0",background:"#fff",width:166,tip:{corner:"topMiddle"}}};break;case"hoverModern":s={show:{when:"mouseover",delay:300},hide:{when:"mouseout",fixed:!0,delay:200},position:{adjust:{screen:!0,y:-10},corner:{target:"topMiddle",tooltip:"bottomMiddle"}},style:{classes:{tooltip:"modern-qtip js-modern-qtip"},border:"0",background:"#fff",width:166,tip:{corner:"topMiddle"}},api:{beforeShow:function(e){var t=$(e.target).closest(".js-fullness-edit"),i=$("[qtip = "+t.data("qtip").interfaces[0].id+"]");i.find(".qtip-content").empty(),$doc.trigger("showModernQtip",[t,i])}}};break;case"instantMenuError":s={content:t,show:{ready:!0},hide:!1,position:{corner:{target:"topRight",tooltip:"bottomLeft"},adjust:{y:-6}},style:{width:250,name:"cream",color:"#000",border:{color:"#fce59d"},tip:{corner:"bottomLeft",color:"#fce59d"}}}}s.content=t,s.style.name="cream",s.style.color="#000",s.style.border=s.style.border||{color:"#fce59d"},s.style.background=s.style.background||"#ffc",n.qtip(s),~i.indexOf("click")&&n.click(function(){return!1}),$doc.on("click scroll",function(){n.qtip("hide")})}function qtipMessage(e,t,i){qtipMessageS("#"+e,t,i)}function checkBrowser(e){e||(e=new Object),e.chromeLink||(e.chromeLink="http://www.google.com/chrome/eula.html"),e.safariLink||(e.safariLink="http://www.apple.com/ru/safari/download/"),e.msieLink||(e.msieLink="http://www.microsoft.com/rus/windows/internet-explorer/"),e.operaLink||(e.operaLink="http://ru.opera.com/download/"),e.firefoxLink||(e.firefoxLink="http://www.mozilla-russia.org/products/firefox/"),e.yandexLink||(e.yandexLink="http://browser.yandex.ru/"),e.warning?e.warning+="\r\n\r\n":e.warning="\u0443\u0441\u0442\u0430\u0440\u0435\u043b\u0430!\r\n\r\n",e.question||(e.question="\u0425\u043e\u0442\u0438\u0442\u0435 \u043b\u0438 \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0432\u0435\u0440\u0441\u0438\u044e \u0441\u0432\u043e\u0435\u0433\u043e \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430?"),e.message?e.message+="\r\n\r\n":e.message="",e.chrome||(e.chrome=11),e.safari||(e.safari=5),e.msie||(e.msie=6),e.opera||(e.opera=10.5),e.firefox||(e.firefox=3.5),e.yandex||(e.yandex=1.7);var t=getBrowser(1),i=t[0],s=t[1],n=t[2],s=parseFloat(s+"."+n);e.warning,e.message,e.question;switch(i){case"YaBrowser":if(s>=e.yandex)return!1;e.yandexLink;break;case"Chrome":if(s>=e.chrome)return!1;e.chromeLink;break;case"Safari":if(s>=e.safari)return!1;e.safariLink;break;case"MSIE":if(s>=e.msie)return!1;e.msieLink;break;case"Opera":if(s>=e.opera)return!1;e.operaLink;break;case"Firefox":if(s>=e.firefox)return!1;e.firefoxLink;break;default:return!1}if("detected"!=$.cookie("old_browser")){$(".js-top-helper").after($("<div>").addClass("b-browser-warning").append($("<span>").addClass("b-browser-warning-content").text("\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435! \u0412\u0430\u0448\u0430 \u0432\u0435\u0440\u0441\u0438\u044f \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0430 \u0443\u0441\u0442\u0430\u0440\u0435\u043b\u0430..."),$("<a>").addClass("b-browser-warning-link").attr({href:"http://www.pulscen.ru/about/browser",target:"_blank"}).text("\u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435").append($("<i>").addClass("right-link-icon").text("\u2192"))));var a=location.hostname.replace(/^([^.]+\.)/,""),o="."+a;$(".b-browser-warning-link").click(function(){$.cookie("old_browser","detected",{expires:90,path:"/",domain:o})})}}function browserDetectNav(e){var t=window.navigator.userAgent,i=/Opera[ \/]+\w+\.\w+/i,s=/Version[ \/]+\w+\.\w+/i,n=/Firefox\/\w+\.\w+/i,a=/Chrome\/\w+\.\w+/i,o=/Version\/\w+\.\w+/i,r=/MSIE *\d+\.\w+/i,l=/YaBrowser\/\w+\.\w+/i,c=/Safari\/\w+\.\w+/i,h=new Array,d=/[ \/\.]/i,s=t.match(s),u=t.match(n),p=t.match(a),f=t.match(o),c=t.match(c),m=t.match(r),l=t.match(l),g=t.match(i);""==!g&""==!s?h[0]=s[0].replace(/Version/,"Opera"):""==!g?h[0]=g[0]:""==!m?h[0]=m[0]:""==!u?h[0]=u[0]:""==!l?h[0]=l[0]:""==!p?h[0]=p[0]:""==!f&&""==!c&&(h[0]=f[0].replace("Version","Safari"));var v;return null!=h[0]&&(v=h[0].split(d)),(null==e|0==e)&null!=v?(e=v[2].length,v[2]=v[2].substring(0,e),v):!(null==e||!v)&&(v[2]=v[2].substr(0,e),v)}function browserDetectJS(){var e=new Array;return window.opera?(e[0]="Opera",e[1]=window.opera.version()):window.chrome?e[0]="Chrome":window.sidebar?e[0]="Firefox":window.external||"Opera"===e[0]?window.ActiveXObject&&(e[0]="MSIE",window.navigator.userProfile?e[1]="6":window.Storage?e[1]="8":window.Storage||window.navigator.userProfile?e[1]="Unknown":e[1]="7"):e[0]="Safari",e||!1}function getBrowser(e){var t=browserDetectNav(e),i=browserDetectJS();return"YaBrowser"===t[0]||t[0]==i[0]?t:t[0]!=i[0]&&i}function isItBrowser(e,t,i){var s;switch(i){case 1:s=browserDetectNav();break;case 2:s=browserDetectJS();break;default:s=getBrowser()}return!!(e==s[0]&t==s[1])||!!(e==s[0]&(null==t||0==t))}function tryShowNoticePopup(){$("#notice-popup").attr("class")?showPopup($("notice-popup"),!0):closeAllPopup()}function Tree(e){var t={},i=[],s=function(){$.each(i,function(){this._disabled=!1})},n=function(e){s();var n=new TreeNode(e);return!(t.show_context_menu&&!t.show_context_menu(n))&&i};this.getText=function(t){return $(e).jstree("get_text",t)},this.contextMenu={},this.contextMenu.addItem=function(e){i.push({label:e.caption,action:e.action})},this.contextMenu.hideItem=function(e){for(var t in i)i[t].label==e&&(i[t]._disabled=!0)},this.contextMenu.addSeparator=function(){i[i.length-1].separator_after=!0},this.bind=function(e,i){t[e]=i},this.deleteNode=function(t){$(e).jstree("delete_node",t)},this.showSearch=function(){var i=$('<div style="display:block;">'),s=$('<input type="text">'),n=$('<input type="button">').val("\u2192");i.append(s,n),s.keyup(function(e){13!=e.keyCode||n.prop("disabled")||n.click()}),n.click(function(){var e=s.val();e.length>=3&&t.rubric_search&&(t.rubric_search(e,$(this).data("nodeId"),s,n),$(this).data("nodeId",""))}),$(e).before(i)},this.render=function(i){$(e).jstree({plugins:$.merge(["themes","html_data","dnd","crrm","ui"],i&&i.plugins||[]),crrm:{move:{check_move:function(e){var t=e.np.attr("data-id");return t==e.op.attr("data-id")&&t!=e.r.attr("data-id")}}},ui:{select_limit:1,select_multiple_modifier:"ctrl",selected_parent_close:"select_parent"},core:{animation:0},html_data:{data:$(e+" ul").html(),ajax:{url:function(e){var i=new TreeNode(e);return!!t.expand&&t.expand(i)}}},contextmenu:{items:n},checkbox:{real_checkboxes:!0,two_state:!0}}).bind("move_node.jstree",function(e,i){if(t.move){var s=i.inst._get_move(),n=s.o,a=s.p,o=s.r,r=$(s.op[0]).parents("ul").size(),l=$(s.np[0]).parents("ul").size();t.move(n,o,a,i,r,l)}}).bind("select_node.jstree",function(i,s){if(t.select_node){var n=new TreeNode(s.rslt.obj);t.select_node(n,$.trim(s.rslt.obj.children("a").text()),s.rslt.obj.children("a"))||$(e).jstree("deselect_node",s.rslt.obj)}}).bind("deselect_node.jstree",function(i,s){if(t.deselect_node){var n=new TreeNode(s.rslt.obj);t.deselect_node(n,$.trim(s.rslt.obj.children("a").text()))||$(e).jstree("select_node",s.rslt.obj)}}).bind("dblclick.jstree",function(e){var i=$(e.target).closest("li"),s=i.data("jstree"),n=new TreeNode(i);t.dblclick_node&&t.dblclick_node(n,s)}).bind("change_state.jstree",function(e,i){t.change_state&&!t.change_state($(i.rslt),i.args[1])&&i.inst.uncheck_node(i.rslt[0])}).bind("load_node.jstree",function(e,i){t.load_node&&t.load_node(i)})},this.getSelectedNodes=function(){var t={id:[],name:[],level:[]};return $(e).jstree("get_selected").each(function(){var e=$(this),i=e.data("id");if(-1!=$.inArray(i,t.id))return!0;t.id.push(i),t.name.push($.trim(e.children("a").text())),t.level.push(e.parents("ul").length)}),t},this.refresh=function(){$(e).jstree("refresh")},this.selectNode=function(t){$(e).jstree("select_node",t,!0)}}function TreeNode(e){this.id=e.data("id"),this.title=$.trim(e.children("a").text()),this.isHidden=function(){return e.is(".invisible")},this.isPublic=function(){return!this.isHidden()},this.isSymlink=function(){return e.is(".symlink")},this.isRubric=function(){return!this.isSymlink()},this.hasChildren=function(){return!e.is(".jstree-leaf")}}function getNoun(e,t){return e=Math.abs(e),(e%=100)>=5&&e<=20?t[2]:(e%=10,1===e?t[0]:e>=2&&e<=4?t[1]:t[2])}function Barmen(e){function t(e,t){return $.ajax({url:v.apiUrl+e,data:t,dataType:"jsonp"})}function i(){var e={wmode:"transparent"};$.each(y,function(t,i){var s=$("#"+i).data();swfobject.embedSWF(s.swf,i,s.width,s.height,"8.0.0",null,{link1:s.url.replace(/&/g,"%26")},e)}),y=[]}function s(e){return e+ +new Date+Math.floor(999999*Math.random())}function n(e,t){return $.each(e,function(e,i){var s=i.public_url;t=t.replace(new RegExp(s,"g"),a(s))}),t}function a(e){var t=$.param({rubric_id:m?0:f,region_id:p});return e+(/\?/.test(e)?"&":"?")+t}function o(){var e,t,i=$(this),s=$("<div>");s[0].innerHTML=i.data().html,t=s.find("script").remove(),e=this.contentWindow.document,e.open(),e.write(s.html()),t.each(function(t,i){i.src?e.write('<script type="text/javascript" src="'+i.src+'"></script>'):e.write('<script type="text/javascript">'+$(i).html()+"</script>")}),e.close(),i.contents().find("body").css({margin:0,overflow:"hidden"}),$doc.trigger("renderIframe:barmen",[i.attr("id")])}function r(e,t,i){switch(e.type){case"BannerShapes::Image":var r,l,c=e.banner_shape_link,h=e.banner_shape_image;if(!h)return;if(l=$("<img>").css({width:e.width+(e.percent_width?"%":""),height:e.height+(e.percent_height?"%":"")}).attr({src:h.public_url}),!c){r=l;break}r=$("<a>").attr({
href:a(c.public_url),target:"_blank"}).addClass(v.className).append(l);break;case"BannerShapes::Html":if(!e.html)return;id=s("iframe-barmen-"),b.push(id),r=$iframe=$("<iframe>").addClass(v.className).attr({id:id}).css({width:e.width+(e.percent_width?"%":""),height:e.height+(e.percent_height?"%":"")}).data({html:n(e.banner_shape_links,e.html)}).one("load onreadystatechange",o).on("barmen:refresh",o);break;case"BannerShapes::Flash":if(!e.banner_shape_file)return;id=s("flash-barmen-"),y.push(id),r=$("<div>").addClass(v.className).attr({id:id}).data({width:e.width+(e.percent_width?"%":""),height:e.height+(e.percent_height?"%":""),url:e.banner_shape_link&&a(e.banner_shape_link.public_url),swf:e.banner_shape_file.public_url}).addClass("js-flash-barmen");break;case"BannerShapes::Showcase":var d,u;e.url=a(e.banner_shape_link.public_url),i&&(u="preview"===i.slug,$.extend(e,{companyId:i.companyId,bannerId:i.bannerId,showPreview:u})),d=(app.config.barmenTemplate||(u?"barmen_client/showcase_"+app.config.barmenShowcase.templatePostfix:"barmen_client/showcase"))+(v.isMobile?"_mobile":""),r=HandlebarsTemplates[d](e)}return $("<div>").data({id:t}).append(r)}function l(e,t){for(var i,s,n=e.length;n;i=parseInt(Math.random()*n),s=e[--n],e[n]=e[i],e[i]=s);return k[t]=!0,!0}function c(){var e=$(v.statSelector);e.length&&t(g.SHARE.BANNERS_STAT,{"id[]":$.map(e,function(e){return $(e).data(v.dataStatUUIDName)}),region_id:p,rubric_id:f})}function h(e,t){t=t||0;var i=e.getBoundingClientRect().top<window.innerHeight+t,s=e.getBoundingClientRect().bottom>-t;return i&&s}function d(e,t,i,s){var n;return app.config.showcase&&app.config.showcase.fixedPosition&&s?(n=s-1,e.filter(function(e,i){return i>=n&&i<n+t})):e.splice(0,t||1)}function u(e,t){var i=$(e).data(),s=$(t).data();return e=i.order||0,t=s.order||0,e<t?-1:e>t?1:i.index<s.index?-1:i.index>s.index?1:0}var p,f,m,g={SHARE:{BANNERS:"/share/banners/",BANNERS_STAT:"/share/statistics/banners/views/"}},v={},_={className:"barmen",classEmpty:"barmen-empty",classLoaded:"js-barmen-loaded",autoStart:!0,dataName:"barmen",dataUUIDName:"uuid",dataStatUUIDName:"barmen-uuid",dataCount:"count",dataNum:"num",selector:"[data-barmen]",statSelector:"[data-barmen-uuid]",isMobile:!1},b=[],y=[],w={},k={};this.getBanners=function(e){var t={uuids:[],slugs:{types:[],limits:{}}};return $(v.selector).each(function(){var i,s,n=$(this);!e&&n.hasClass(v.classLoaded)||(n.data(v.dataUUIDName)?t.uuids.push(n.data(v.dataName)):(i=parseInt(t.slugs.limits[n.data(v.dataName)])||0,s=parseInt(n.data(v.dataCount))||1,t.slugs.limits[n.data(v.dataName)]=i+s,t.slugs.types.push(n.data(v.dataName))))}),t},this.load=function(e){var s=this,n=$.Deferred(),a=$.Deferred(),o=s.getBanners(e);o.slugs.types.length?t(g.SHARE.BANNERS,$.extend(o.slugs,{placement:m||(f?"catalogue":"main_page"),"filters[rubric_id]":f,"filters[region_id]":p})).then(function(t){w=t,Object.keys(w).length?(s.replace(o.slugs,e),$doc.on("scroll",s.makeThrottleReplace(o.slugs,e,100))):$(v.selector).addClass(v.classEmpty),n.resolve()}):n.resolve(),o.uuids.length?t(g.SHARE.BANNERS,{uuids:o.uuids}).then(function(e){$.each(e,function(e,t){$("[data-"+v.dataName+'="'+t.uuid+'"]').html(r(t.banner_shape,t.uuid,{companyId:t.company_id})).addClass(v.classLoaded)}),a.resolve()}):a.resolve(),$.when(n,a).done(function(){y.length&&i(),c(),$(document).trigger("Loaded:Barmen")})},this.loadOne=function(e,i){return t(g.SHARE.BANNERS+e).then(function(e){w[i]=e})},this.create=function(e,t,i){var s,n,a=w[e];return!!a&&(s=$("<div>"),$.isArray(a)?k[e]||l(a,e):a=[a],$.each(d(a,t,e,i),function(t,i){n={companyId:i.company_id,slug:e,bannerId:i.id,showcaseSelector:"showcase"===i.banner_type.slug&&app.config.showcase&&app.config.showcase.showcaseSelector},s.append(r(i.banner_shape,i.uuid,n).addClass(n.showcaseSelector))}),s.children())},this.makeThrottleReplace=function(e,t,i){var s,n=this;return function(){s||(s=!0,setTimeout(function(){s=!1},i),n.replace(e,t))}},this.replace=function(e,t){var i=this,s=$.makeArray($(v.selector).not("[data-"+v.dataUUIDName+"]"));$.each(s,function(e){$(this).data({index:e})}),$.each(s.sort(u),function(){var s=$(this),n=s.data(),a=n[v.dataName],o=n[v.dataCount]||1,r=n[v.dataNum],l=t||!s.hasClass(v.classLoaded),c=h(s[0],300);if((!~e.types.indexOf(a)||!w[a]||!w[a].length)&&l)return s.addClass(v.classEmpty),void $doc.trigger("InsertEmpty:Barmen");l&&c&&s.html(i.create(a,o,r)).addClass(v.classLoaded)}),document.dispatchEvent(new Event("Replace:Barmen")),$(document).trigger("Replace:Barmen")},this.initFlash=i,p=$('meta[name="barmen-region"]').attr("content"),f=$('meta[name="barmen-rubric"]').attr("content")||0,m=$('meta[name="barmen-placement"]').attr("content")||"",v=$.extend(!0,{},_,e),v.autoStart&&this.load()}app.config.customerYmIds=[1289,1274,1273,1275,1337,1159,1223,1225,1227,1323,1325,1327,1248,1101,1192,1321,1322,1470,1471,1101,1157,1277,1338,1019,1319,1320,1472,1597,1324,1596,1326,1595,1328,1515,1536,1537,1608,1609,1512,1513,1628,1629,1646,1820,1821,1822],function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():e.Handlebars=t()}(this,function(){var e=function(){"use strict";function e(e){return l[e]}function t(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}function i(e,t){for(var i=0,s=e.length;i<s;i++)if(e[i]===t)return i;return-1}function s(t){return t&&t.toHTML?t.toHTML():null==t?"":t?(t=""+t,h.test(t)?t.replace(c,e):t):t+""}function n(e){return!e&&0!==e||!(!p(e)||0!==e.length)}function a(e,t){return e.path=t,e}function o(e,t){return(e?e+".":"")+t}var r={},l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,h=/[&<>"'`]/;r.extend=t;var d=Object.prototype.toString;r.toString=d;var u=function(e){return"function"==typeof e};u(/x/)&&(u=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var u;r.isFunction=u;var p=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===d.call(e)};return r.isArray=p,r.indexOf=i,r.escapeExpression=s,r.isEmpty=n,r.blockParams=a,r.appendContextPath=o,r}(),t=function(){"use strict";function e(e,i){var s,n,a=i&&i.loc;a&&(s=a.start.line,n=a.start.column,e+=" - "+s+":"+n);for(var o=Error.prototype.constructor.call(this,e),r=0;r<t.length;r++)this[t[r]]=o[t[r]];a&&(this.lineNumber=s,this.column=n)}var t=["description","fileName","lineNumber","message","name","number","stack"];return e.prototype=new Error,e}(),i=function(e,t){"use strict";function i(e,t){this.helpers=e||{},this.partials=t||{},s(this)}function s(e){e.registerHelper("helperMissing",function(){if(1===arguments.length)return undefined;throw new o("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,i){var s=i.inverse,n=i.fn;if(!0===t)return n(this);if(!1===t||null==t)return s(this);if(l(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):s(this);if(i.data&&i.ids){var o=f(i.data);o.contextPath=a.appendContextPath(i.data.contextPath,i.name),i={data:o}}return n(t,i)}),e.registerHelper("each",function(e,t){function i(t,i,o){s&&(s.key=t,s.index=i,s.first=0===i,s.last=!!o,n&&(s.contextPath=n+t)),u+=r(e[t],{data:s,blockParams:a.blockParams([e[t],t],[n+t,null])})}if(!t)throw new o("Must pass iterator to #each");var s,n,r=t.fn,h=t.inverse,d=0,u="";if(t.data&&t.ids&&(n=a.appendContextPath(t.data.contextPath,t.ids[0])+"."),c(e)&&(e=e.call(this)),t.data&&(s=f(t.data)),e&&"object"==typeof e)if(l(e))for(var p=e.length;d<p;d++)i(d,d,d===e.length-1);else{var m;for(var g in e)e.hasOwnProperty(g)&&(m&&i(m,d-1),m=g,d++);m&&i(m,d-1,!0)}return 0===d&&(u=h(this)),u}),e.registerHelper("if",function(e,t){return c(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers["if"].call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})}),e.registerHelper("with",function(e,t){c(e)&&(e=e.call(this));var i=t.fn;if(a.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var s=f(t.data);s.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0]),t={data:s}}return i(e,t)}),e.registerHelper("log",function(t,i){var s=i.data&&null!=i.data.level?parseInt(i.data.level,10):1;e.log(s,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var n={},a=e,o=t;n.VERSION="3.0.0",n.COMPILER_REVISION=6;var r={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=r;var l=a.isArray,c=a.isFunction,h=a.toString,d="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:u,log:p,registerHelper:function(e,t){if(h.call(e)===d){if(t)throw new o("Arg not supported with multiple helpers");a.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(h.call(e)===d)a.extend(this.partials,e);else{if(void 0===t)throw new o("Attempting to register a partial as undefined");this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]}};var u={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:1,log:function(e,t){if("undefined"!=typeof console&&u.level<=e){var i=u.methodMap[e];(console[i]||console.log).call(console,t)}}};n.logger=u;var p=u.log;n.log=p;var f=function(e){var t=a.extend({},e);return t._parent=e,t};return n.createFrame=f,n}(e,t),s=function(){"use strict";function e(e){this.string=e}return e.prototype.toString=e.prototype.toHTML=function(){return""+this.string},e}(),n=function(e,t,i){"use strict";function s(e){var t=e&&e[0]||1,i=p;if(t!==i){if(t<i){var s=f[i],n=f[t];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+s+") or downgrade your runtime to an older version ("+n+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function n(e,t){if(!t)throw new u("No environment passed to template");if(!e||!e.main)throw new u("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var i=function(i,s,n){n.hash&&(s=d.extend({},s,n.hash)),i=t.VM.resolvePartial.call(this,i,s,n);var a=t.VM.invokePartial.call(this,i,s,n);if(null==a&&t.compile&&(n.partials[n.name]=t.compile(i,e.compilerOptions,t),a=n.partials[n.name](s,n)),null!=a){if(n.indent){for(var o=a.split("\n"),r=0,l=o.length;r<l&&(o[r]||r+1!==l);r++)o[r]=n.indent+o[r];a=o.join("\n")}return a}throw new u("The partial "+n.name+" could not be compiled when running in runtime-only mode")},s={strict:function(e,t){if(!(t in e))throw new u('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,s=0;s<i;s++)if(e[s]&&null!=e[s][t])return e[s][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:d.escapeExpression,invokePartial:i,fn:function(t){return e[t]},programs:[],program:function(e,t,i,s,n){var o=this.programs[e],r=this.fn(e);return t||n||s||i?o=a(this,e,r,t,i,s,n):o||(o=this.programs[e]=a(this,e,r)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=d.extend({},t,e)),i},noop:t.VM.noop,compilerInfo:e.compiler},n=function(t,i){i=i||{};var a=i.data;n._setup(i),!i.partial&&e.useData&&(a=c(t,a));var o,r=e.useBlockParams?[]:undefined;return e.useDepths&&(o=i.depths?[t].concat(i.depths):[t]),e.main.call(s,t,s.helpers,s.partials,a,r,o)};return n.isTop=!0,n._setup=function(i){i.partial?(s.helpers=i.helpers,s.partials=i.partials):(s.helpers=s.merge(i.helpers,t.helpers),e.usePartial&&(s.partials=s.merge(i.partials,t.partials)))},n._child=function(t,i,n,o){if(e.useBlockParams&&!n)throw new u("must pass block params");if(e.useDepths&&!o)throw new u("must pass parent depths");return a(s,t,e[t],i,0,n,o)},n}function a(e,t,i,s,n,a,o){var r=function(t,n){return n=n||{},i.call(e,t,e.helpers,e.partials,n.data||s,a&&[n.blockParams].concat(a),o&&[t].concat(o))};return r.program=t,r.depth=o?o.length:0,r.blockParams=n||0,r}function o(e,t,i){return e?e.call||i.name||(i.name=e,e=i.partials[e]):e=i.partials[i.name],e}function r(e,t,i){if(i.partial=!0,e===undefined)throw new u("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)}function l(){return""}function c(e,t){return t&&"root"in t||(t=t?m(t):{},t.root=e),t}var h={},d=e,u=t,p=i.COMPILER_REVISION,f=i.REVISION_CHANGES,m=i.createFrame;return h.checkRevision=s,h.template=n,h.program=a,h.resolvePartial=o,h.invokePartial=r,h.noop=l,h}(e,t,i),a=function(e,t,i,s,n){"use strict";var a=e,o=t,r=i,l=s,c=n,h=function(){var e=new a.HandlebarsEnvironment;return l.extend(e,a),e.SafeString=o,e.Exception=r,e.Utils=l,e.escapeExpression=l.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},d=h();d.create=h;var u="undefined"!=typeof global?global:window,p=u.Handlebars;return d.noConflict=function(){u.Handlebars===d&&(u.Handlebars=p)},d["default"]=d,d}(i,s,t,e,n),o=function(){"use strict";var e={Program:function(e,t,i,s){this.loc=s,this.type="Program",this.body=e,this.blockParams=t,this.strip=i},MustacheStatement:function(e,t,i,s,n,a){this.loc=a,this.type="MustacheStatement",this.path=e,this.params=t||[],this.hash=i,this.escaped=s,this.strip=n},BlockStatement:function(e,t,i,s,n,a,o,r,l){this.loc=l,this.type="BlockStatement",this.path=e,this.params=t||[],this.hash=i,this.program=s,this.inverse=n,this.openStrip=a,this.inverseStrip=o,this.closeStrip=r},PartialStatement:function(e,t,i,s,n){this.loc=n,this.type="PartialStatement",this.name=e,this.params=t||[],this.hash=i,this.indent="",this.strip=s},ContentStatement:function(e,t){this.loc=t,this.type="ContentStatement",this.original=this.value=e},CommentStatement:function(e,t,i){this.loc=i,this.type="CommentStatement",this.value=e,this.strip=t},SubExpression:function(e,t,i,s){this.loc=s,this.type="SubExpression",this.path=e,this.params=t||[],this.hash=i},PathExpression:function(e,t,i,s,n){this.loc=n,this.type="PathExpression",this.data=e,this.original=s,this.parts=i,this.depth=t},StringLiteral:function(e,t){this.loc=t,this.type="StringLiteral",this.original=this.value=e},NumberLiteral:function(e,t){this.loc=t,this.type="NumberLiteral",this.original=this.value=Number(e)},BooleanLiteral:function(e,t){this.loc=t,this.type="BooleanLiteral",this.original=this.value="true"===e},Hash:function(e,t){this.loc=t,this.type="Hash",this.pairs=e},HashPair:function(e,t,i){this.loc=i,this.type="HashPair",this.key=e,this.value=t},helpers:{helperExpression:function(e){return!("SubExpression"!==e.type&&!e.params.length&&!e.hash)},scopedId:function(e){return/^\.|this\b/.test(e.original)},simpleId:function(t){return 1===t.parts.length&&!e.helpers.scopedId(t)&&!t.depth}}};return e}(),r=function(){"use strict";return function(){function e(){this.yy={}}var t={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,content:12,COMMENT:13,CONTENT:14,openRawBlock:15,END_RAW_BLOCK:16,OPEN_RAW_BLOCK:17,helperName:18,openRawBlock_repetition0:19,openRawBlock_option0:20,CLOSE_RAW_BLOCK:21,openBlock:22,block_option0:23,closeBlock:24,openInverse:25,block_option1:26,OPEN_BLOCK:27,openBlock_repetition0:28,openBlock_option0:29,openBlock_option1:30,CLOSE:31,OPEN_INVERSE:32,openInverse_repetition0:33,openInverse_option0:34,openInverse_option1:35,openInverseChain:36,OPEN_INVERSE_CHAIN:37,openInverseChain_repetition0:38,openInverseChain_option0:39,openInverseChain_option1:40,inverseAndProgram:41,INVERSE:42,inverseChain:43,inverseChain_option0:44,OPEN_ENDBLOCK:45,OPEN:46,mustache_repetition0:47,mustache_option0:48,OPEN_UNESCAPED:49,mustache_repetition1:50,mustache_option1:51,CLOSE_UNESCAPED:52,OPEN_PARTIAL:53,partialName:54,partial_repetition0:55,partial_option0:56,param:57,sexpr:58,OPEN_SEXPR:59,sexpr_repetition0:60,sexpr_option0:61,CLOSE_SEXPR:62,hash:63,hash_repetition_plus0:64,hashSegment:65,ID:66,EQUALS:67,blockParams:68,OPEN_BLOCK_PARAMS:69,blockParams_repetition_plus0:70,CLOSE_BLOCK_PARAMS:71,path:72,dataName:73,STRING:74,NUMBER:75,BOOLEAN:76,DATA:77,pathSegments:78,SEP:79,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",13:"COMMENT",14:"CONTENT",16:"END_RAW_BLOCK",17:"OPEN_RAW_BLOCK",21:"CLOSE_RAW_BLOCK",27:"OPEN_BLOCK",31:"CLOSE",32:"OPEN_INVERSE",37:"OPEN_INVERSE_CHAIN",42:"INVERSE",45:"OPEN_ENDBLOCK",46:"OPEN",49:"OPEN_UNESCAPED",52:"CLOSE_UNESCAPED",53:"OPEN_PARTIAL",59:"OPEN_SEXPR",62:"CLOSE_SEXPR",66:"ID",67:"EQUALS",69:"OPEN_BLOCK_PARAMS",71:"CLOSE_BLOCK_PARAMS",74:"STRING",75:"NUMBER",76:"BOOLEAN",77:"DATA",79:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[12,1],[10,3],[15,5],[9,4],[9,4],[22,6],[25,6],[36,6],[41,2],[43,3],[43,1],[24,3],[8,5],[8,5],[11,5],[57,1],[57,1],[58,5],[63,1],[65,3],[68,3],[18,1],[18,1],[18,1],[18,1],[18,1],[54,1],[54,1],[73,2],[72,1],[78,3],[78,1],[6,0],[6,2],[19,0],[19,2],[20,0],[20,1],[23,0],[23,1],[26,0],[26,1],[28,0],[28,2],[29,0],[29,1],[30,0],[30,1],[33,0],[33,2],[34,0],[34,1],[35,0],[35,1],[38,0],[38,2],[39,0],[39,1],[40,0],[40,1],[44,0],[44,1],[47,0],[47,2],[48,0],[48,1],[50,0],[50,2],[51,0],[51,1],[55,0],[55,2],[56,0],[56,1],[60,0],[60,2],[61,0],[61,1],[64,1],[64,2],[70,1],[70,2]],performAction:function(e,t,i,s,n,a){var o=a.length-1;switch(n){case 1:return a[o-1];case 2:this.$=new s.Program(a[o],null,{},s.locInfo(this._$));break;case 3:case 4:case 5:case 6:case 7:this.$=a[o];break;case 8:this.$=new s.CommentStatement(s.stripComment(a[o]),s.stripFlags(a[o],a[o]),s.locInfo(this._$));break;case 9:this.$=new s.ContentStatement(a[o],s.locInfo(this._$));break;case 10:this.$=s.prepareRawBlock(a[o-2],a[o-1],a[o],this._$);break;case 11:this.$={path:a[o-3],params:a[o-2],hash:a[o-1]};break;case 12:this.$=s.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!1,this._$);break;case 13:this.$=s.prepareBlock(a[o-3],a[o-2],a[o-1],a[o],!0,this._$);break;case 14:case 15:case 16:this.$={path:a[o-4],params:a[o-3],hash:a[o-2],blockParams:a[o-1],strip:s.stripFlags(a[o-5],a[o])};break;case 17:this.$={strip:s.stripFlags(a[o-1],a[o-1]),program:a[o]};break;case 18:var r=s.prepareBlock(a[o-2],a[o-1],a[o],a[o],!1,this._$),l=new s.Program([r],null,{},s.locInfo(this._$));l.chained=!0,this.$={strip:a[o-2].strip,program:l,chain:!0};break;case 19:this.$=a[o];break;case 20:this.$={path:a[o-1],strip:s.stripFlags(a[o-2],a[o])};break;case 21:case 22:this.$=s.prepareMustache(a[o-3],a[o-2],a[o-1],a[o-4],s.stripFlags(a[o-4],a[o]),this._$);break;case 23:this.$=new s.PartialStatement(a[o-3],a[o-2],a[o-1],s.stripFlags(a[o-4],a[o]),s.locInfo(this._$));break;case 24:case 25:this.$=a[o];break;case 26:this.$=new s.SubExpression(a[o-3],a[o-2],a[o-1],s.locInfo(this._$));break;case 27:this.$=new s.Hash(a[o],s.locInfo(this._$));break;case 28:this.$=new s.HashPair(a[o-2],a[o],s.locInfo(this._$));break;case 29:this.$=a[o-1];break;case 30:case 31:this.$=a[o];break;case 32:this.$=new s.StringLiteral(a[o],s.locInfo(this._$));break;case 33:this.$=new s.NumberLiteral(a[o],s.locInfo(this._$));break;case 34:this.$=new s.BooleanLiteral(a[o],s.locInfo(this._$));break;case 35:case 36:this.$=a[o];break;case 37:this.$=s.preparePath(!0,a[o],this._$);break;case 38:this.$=s.preparePath(!1,a[o],this._$);break;case 39:a[o-2].push({part:a[o],separator:a[o-1]}),this.$=a[o-2];break;case 40:this.$=[{part:a[o]}];break;case 41:this.$=[];break;case 42:a[o-1].push(a[o]);break;case 43:this.$=[];break;case 44:a[o-1].push(a[o]);break;case 51:this.$=[];break;case 52:a[o-1].push(a[o]);break;case 57:this.$=[];break;case 58:a[o-1].push(a[o]);break;case 63:this.$=[];break;case 64:a[o-1].push(a[o]);break;case 71:this.$=[];break;case 72:a[o-1].push(a[o]);break;case 75:this.$=[];break;case 76:a[o-1].push(a[o]);break;case 79:this.$=[];break;case 80:a[o-1].push(a[o]);break;case 83:this.$=[];break;case 84:a[o-1].push(a[o]);break;case 87:this.$=[a[o]];break;case 88:a[o-1].push(a[o]);break;case 89:this.$=[a[o]];break;case 90:a[o-1].push(a[o])}},table:[{3:1,4:2,5:[2,41],6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],46:[2,41],49:[2,41],53:[2,41]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:10,13:[1,11],14:[1,18],15:16,17:[1,21],22:14,25:15,27:[1,19],32:[1,20],37:[2,2],42:[2,2],45:[2,2],46:[1,12],49:[1,13],53:[1,17]},{1:[2,1]},{5:[2,42],13:[2,42],14:[2,42],17:[2,42],27:[2,42],32:[2,42],37:[2,42],42:[2,42],45:[2,42],46:[2,42],49:[2,42],53:[2,42]},{5:[2,3],13:[2,3],14:[2,3],17:[2,3],27:[2,3],32:[2,3],37:[2,3],42:[2,3],45:[2,3],46:[2,3],49:[2,3],53:[2,3]},{5:[2,4],13:[2,4],14:[2,4],17:[2,4],27:[2,4],32:[2,4],37:[2,4],42:[2,4],45:[2,4],46:[2,4],49:[2,4],53:[2,4]},{5:[2,5],13:[2,5],14:[2,5],17:[2,5],27:[2,5],32:[2,5],37:[2,5],42:[2,5],45:[2,5],46:[2,5],49:[2,5],53:[2,5]},{5:[2,6],13:[2,6],14:[2,6],17:[2,6],27:[2,6],32:[2,6],37:[2,6],42:[2,6],45:[2,6],46:[2,6],49:[2,6],53:[2,6]},{5:[2,7],13:[2,7],14:[2,7],17:[2,7],27:[2,7],32:[2,7],37:[2,7],42:[2,7],45:[2,7],46:[2,7],49:[2,7],53:[2,7]},{5:[2,8],13:[2,8],14:[2,8],17:[2,8],27:[2,8],32:[2,8],37:[2,8],42:[2,8],45:[2,8],46:[2,8],49:[2,8],53:[2,8]},{18:22,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:31,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{4:32,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],37:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{4:33,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{12:34,14:[1,18]},{18:36,54:35,58:37,59:[1,38],66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,9],13:[2,9],14:[2,9],16:[2,9],17:[2,9],27:[2,9],32:[2,9],37:[2,9],42:[2,9],45:[2,9],46:[2,9],49:[2,9],53:[2,9]},{18:39,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:40,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:41,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{31:[2,71],47:42,59:[2,71],66:[2,71],74:[2,71],75:[2,71],76:[2,71],77:[2,71]},{21:[2,30],31:[2,30],52:[2,30],59:[2,30],62:[2,30],66:[2,30],69:[2,30],74:[2,30],75:[2,30],76:[2,30],77:[2,30]},{21:[2,31],31:[2,31],52:[2,31],59:[2,31],62:[2,31],66:[2,31],69:[2,31],74:[2,31],75:[2,31],76:[2,31],77:[2,31]},{21:[2,32],31:[2,32],52:[2,32],59:[2,32],62:[2,32],66:[2,32],69:[2,32],74:[2,32],75:[2,32],76:[2,32],77:[2,32]},{21:[2,33],31:[2,33],52:[2,33],59:[2,33],62:[2,33],66:[2,33],69:[2,33],74:[2,33],75:[2,33],76:[2,33],77:[2,33]},{21:[2,34],31:[2,34],52:[2,34],59:[2,34],62:[2,34],66:[2,34],69:[2,34],74:[2,34],75:[2,34],76:[2,34],77:[2,34]},{21:[2,38],31:[2,38],52:[2,38],59:[2,38],62:[2,38],66:[2,38],69:[2,38],74:[2,38],75:[2,38],76:[2,38],77:[2,38],79:[1,43]},{66:[1,30],78:44},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],79:[2,40]},{50:45,52:[2,75],59:[2,75],66:[2,75],74:[2,75],75:[2,75],76:[2,75],77:[2,75]},{23:46,36:48,37:[1,50],41:49,42:[1,51],43:47,45:[2,47]},{26:52,41:53,42:[1,51],45:[2,49]},{16:[1,54]},{31:[2,79],55:55,59:[2,79],66:[2,79],74:[2,79],75:[2,79],76:[2,79],77:[2,79]},{31:[2,35],59:[2,35],66:[2,35],74:[2,35],75:[2,35],76:[2,35],77:[2,35]},{31:[2,36],59:[2,36],66:[2,36],74:[2,36],75:[2,36],76:[2,36],77:[2,36]},{18:56,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{28:57,31:[2,51],59:[2,51],66:[2,51],69:[2,51],74:[2,51],75:[2,51],76:[2,51],77:[2,51]},{31:[2,57],33:58,59:[2,57],66:[2,57],69:[2,57],74:[2,57],75:[2,57],76:[2,57],77:[2,57]},{19:59,21:[2,43],59:[2,43],66:[2,43],74:[2,43],75:[2,43],76:[2,43],77:[2,43]},{18:63,31:[2,73],48:60,57:61,58:64,59:[1,38],63:62,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{66:[1,68]},{21:[2,37],31:[2,37],52:[2,37],59:[2,37],62:[2,37],66:[2,37],69:[2,37],74:[2,37],75:[2,37],76:[2,37],77:[2,37],79:[1,43]},{18:63,51:69,52:[2,77],57:70,58:64,59:[1,38],63:71,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{24:72,45:[1,73]},{45:[2,48]},{4:74,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],37:[2,41],42:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{45:[2,19]},{18:75,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{4:76,6:3,13:[2,41],14:[2,41],17:[2,41],27:[2,41],32:[2,41],45:[2,41],46:[2,41],49:[2,41],53:[2,41]},{24:77,45:[1,73]},{45:[2,50]},{5:[2,10],13:[2,10],14:[2,10],17:[2,10],27:[2,10],32:[2,10],37:[2,10],42:[2,10],45:[2,10],46:[2,10],49:[2,10],53:[2,10]},{18:63,31:[2,81],56:78,57:79,58:64,59:[1,38],63:80,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{59:[2,83],60:81,62:[2,83],66:[2,83],74:[2,83],75:[2,83],76:[2,83],77:[2,83]},{18:63,29:82,31:[2,53],57:83,58:64,59:[1,38],63:84,64:65,65:66,66:[1,67],69:[2,53],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:63,31:[2,59],34:85,57:86,58:64,59:[1,38],63:87,64:65,65:66,66:[1,67],69:[2,59],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{18:63,20:88,21:[2,45],57:89,58:64,59:[1,38],63:90,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{31:[1,91]},{31:[2,72],59:[2,72],66:[2,72],74:[2,72],75:[2,72],76:[2,72],77:[2,72]},{31:[2,74]},{21:[2,24],31:[2,24],52:[2,24],59:[2,24],62:[2,24],66:[2,24],69:[2,24],74:[2,24],75:[2,24],76:[2,24],77:[2,24]},{21:[2,25],31:[2,25],52:[2,25],59:[2,25],62:[2,25],66:[2,25],69:[2,25],74:[2,25],75:[2,25],76:[2,25],77:[2,25]},{21:[2,27],31:[2,27],52:[2,27],62:[2,27],65:92,66:[1,93],69:[2,27]},{21:[2,87],31:[2,87],52:[2,87],62:[2,87],66:[2,87],69:[2,87]},{21:[2,40],31:[2,40],52:[2,40],59:[2,40],62:[2,40],66:[2,40],67:[1,94],69:[2,40],74:[2,40],75:[2,40],76:[2,40],77:[2,40],79:[2,40]},{21:[2,39],31:[2,39],52:[2,39],59:[2,39],62:[2,39],66:[2,39],69:[2,39],74:[2,39],75:[2,39],76:[2,39],77:[2,39],79:[2,39]},{52:[1,95]},{52:[2,76],59:[2,76],66:[2,76],74:[2,76],75:[2,76],76:[2,76],77:[2,76]},{52:[2,78]},{5:[2,12],13:[2,12],14:[2,12],17:[2,12],27:[2,12],32:[2,12],37:[2,12],42:[2,12],45:[2,12],46:[2,12],49:[2,12],53:[2,12]},{18:96,66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{36:48,37:[1,50],41:49,42:[1,51],43:98,44:97,45:[2,69]},{31:[2,63],38:99,59:[2,63],66:[2,63],69:[2,63],74:[2,63],75:[2,63],76:[2,63],77:[2,63]},{45:[2,17]},{5:[2,13],13:[2,13],14:[2,13],17:[2,13],27:[2,13],32:[2,13],37:[2,13],42:[2,13],45:[2,13],46:[2,13],49:[2,13],53:[2,13]},{31:[1,100]},{31:[2,80],59:[2,80],66:[2,80],74:[2,80],75:[2,80],76:[2,80],77:[2,80]},{31:[2,82]},{18:63,57:102,58:64,59:[1,38],61:101,62:[2,85],63:103,64:65,65:66,66:[1,67],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{30:104,31:[2,55],68:105,69:[1,106]},{31:[2,52],59:[2,52],66:[2,52],69:[2,52],74:[2,52],75:[2,52],76:[2,52],77:[2,52]},{31:[2,54],69:[2,54]},{31:[2,61],35:107,68:108,69:[1,106]},{31:[2,58],59:[2,58],66:[2,58],69:[2,58],74:[2,58],75:[2,58],76:[2,58],77:[2,58]},{31:[2,60],69:[2,60]},{21:[1,109]},{21:[2,44],59:[2,44],66:[2,44],74:[2,44],75:[2,44],76:[2,44],77:[2,44]},{21:[2,46]},{5:[2,21],13:[2,21],14:[2,21],17:[2,21],27:[2,21],32:[2,21],37:[2,21],42:[2,21],45:[2,21],46:[2,21],49:[2,21],53:[2,21]},{21:[2,88],31:[2,88],52:[2,88],62:[2,88],66:[2,88],69:[2,88]},{67:[1,94]},{18:63,57:110,58:64,59:[1,38],66:[1,30],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,22],13:[2,22],14:[2,22],17:[2,22],27:[2,22],32:[2,22],37:[2,22],42:[2,22],45:[2,22],46:[2,22],49:[2,22],53:[2,22]},{31:[1,111]},{45:[2,18]},{45:[2,70]},{18:63,31:[2,65],39:112,57:113,58:64,59:[1,38],63:114,64:65,65:66,66:[1,67],69:[2,65],72:23,73:24,74:[1,25],75:[1,26],76:[1,27],77:[1,29],78:28},{5:[2,23],13:[2,23],14:[2,23],17:[2,23],27:[2,23],32:[2,23],37:[2,23],42:[2,23],45:[2,23],46:[2,23],49:[2,23],53:[2,23]},{62:[1,115]},{59:[2,84],62:[2,84],66:[2,84],74:[2,84],75:[2,84],76:[2,84],77:[2,84]},{62:[2,86]},{31:[1,116]},{31:[2,56]},{66:[1,118],70:117},{31:[1,119]},{31:[2,62]},{14:[2,11]},{21:[2,28],31:[2,28],52:[2,28],62:[2,28],66:[2,28],69:[2,28]},{5:[2,20],13:[2,20],14:[2,20],17:[2,20],27:[2,20],32:[2,20],37:[2,20],42:[2,20],45:[2,20],46:[2,20],49:[2,20],53:[2,20]},{31:[2,67],40:120,68:121,69:[1,106]},{31:[2,64],59:[2,64],66:[2,64],69:[2,64],74:[2,64],75:[2,64],76:[2,64],77:[2,64]},{31:[2,66],69:[2,66]},{21:[2,26],31:[2,26],52:[2,26],59:[2,26],62:[2,26],66:[2,26],69:[2,26],74:[2,26],75:[2,26],76:[2,26],77:[2,26]},{13:[2,14],14:[2,14],17:[2,14],27:[2,14],32:[2,14],37:[2,14],42:[2,14],45:[2,14],46:[2,14],49:[2,14],53:[2,14]},{66:[1,123],71:[1,122]},{66:[2,89],71:[2,89]},{13:[2,15],14:[2,15],17:[2,15],27:[2,15],32:[2,15],42:[2,15],45:[2,15],46:[2,15],49:[2,15],53:[2,15]},{31:[1,124]},{31:[2,68]},{31:[2,29]},{66:[2,90],71:[2,90]},{13:[2,16],14:[2,16],17:[2,16],27:[2,16],32:[2,16],37:[2,16],42:[2,16],45:[2,16],46:[2,16],49:[2,16],53:[2,16]}],defaultActions:{4:[2,1],47:[2,48],49:[2,19],53:[2,50],62:[2,74],71:[2,78],76:[2,17],80:[2,82],90:[2,46],97:[2,18],98:[2,70],103:[2,86],105:[2,56],108:[2,62],109:[2,11],121:[2,68],122:[2,29]},parseError:function(e){throw new Error(e)},parse:function(e){function t(){var e;return e=i.lexer.lex()||1,"number"!=typeof e&&(e=i.symbols_[e]||e),e}var i=this,s=[0],n=[null],a=[],o=this.table,r="",l=0,c=0,h=0;this.lexer.setInput(e),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var d=this.lexer.yylloc;a.push(d);var u=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var p,f,m,g,v,_,b,y,w,k={};;){if(m=s[s.length-1],this.defaultActions[m]?g=this.defaultActions[m]:(null!==p&&void 0!==p||(p=t()),g=o[m]&&o[m][p]),void 0===g||!g.length||!g[0]){var x="";if(!h){w=[];for(_ in o[m])this.terminals_[_]&&_>2&&w.push("'"+this.terminals_[_]+"'");x=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[p]||p)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==p?"end of input":"'"+(this.terminals_[p]||p)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[p]||p,line:this.lexer.yylineno,loc:d,expected:w})}}if(g[0]instanceof Array&&g.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+p);switch(g[0]){case 1:s.push(p),n.push(this.lexer.yytext),a.push(this.lexer.yylloc),s.push(g[1]),p=null,f?(p=f,f=null):(c=this.lexer.yyleng,r=this.lexer.yytext,l=this.lexer.yylineno,d=this.lexer.yylloc,h>0&&h--);break;case 2:if(b=this.productions_[g[1]][1],k.$=n[n.length-b],k._$={first_line:a[a.length-(b||1)].first_line,last_line:a[a.length-1].last_line,first_column:a[a.length-(b||1)].first_column,last_column:a[a.length-1].last_column},u&&(k._$.range=[a[a.length-(b||1)].range[0],a[a.length-1].range[1]]),void 0!==(v=this.performAction.call(k,r,c,l,this.yy,g[1],n,a)))return v;b&&(s=s.slice(0,-1*b*2),n=n.slice(0,-1*b),a=a.slice(0,-1*b)),s.push(this.productions_[g[1]][0]),n.push(k.$),a.push(k._$),y=o[s[s.length-2]][s[s.length-1]],s.push(y);break;case 3:return!0}}return!0}},i=function(){var e={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e){return this._input=e,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,i=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t-1),this.offset-=t;var s=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),i.length-1&&(this.yylineno-=i.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:i?(i.length===s.length?this.yylloc.first_column:0)+s[s.length-i.length].length-i[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this},more:function(){return this._more=!0,this},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(e.length>20?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){
var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(e.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var e,t,i,s,n;this._more||(this.yytext="",this.match="");for(var a=this._currentRules(),o=0;o<a.length&&(!(i=this._input.match(this.rules[a[o]]))||t&&!(i[0].length>t[0].length)||(t=i,s=o,this.options.flex));o++);return t?(n=t[0].match(/(?:\r\n?|\n).*/g),n&&(this.yylineno+=n.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:n?n[n.length-1].length-n[n.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+t[0].length},this.yytext+=t[0],this.match+=t[0],this.matches=t,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(t[0].length),this.matched+=t[0],e=this.performAction.call(this,this.yy,this,a[s],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),e||void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return void 0!==e?e:this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(e){this.begin(e)}};return e.options={},e.performAction=function(e,t,i){function s(e,i){return t.yytext=t.yytext.substr(e,t.yyleng-i)}switch(i){case 0:if("\\\\"===t.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===t.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),t.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return t.yytext=t.yytext.substr(5,t.yyleng-9),this.popState(),16;case 4:return 14;case 5:return this.popState(),13;case 6:return 59;case 7:return 62;case 8:return 17;case 9:return this.popState(),this.begin("raw"),21;case 10:return 53;case 11:return 27;case 12:return 45;case 13:case 14:return this.popState(),42;case 15:return 32;case 16:return 37;case 17:return 49;case 18:return 46;case 19:this.unput(t.yytext),this.popState(),this.begin("com");break;case 20:return this.popState(),13;case 21:return 46;case 22:return 67;case 23:case 24:return 66;case 25:return 79;case 26:break;case 27:return this.popState(),52;case 28:return this.popState(),31;case 29:return t.yytext=s(1,2).replace(/\\"/g,'"'),74;case 30:return t.yytext=s(1,2).replace(/\\'/g,"'"),74;case 31:return 77;case 32:case 33:return 76;case 34:return 75;case 35:return 69;case 36:return 71;case 37:return 66;case 38:return t.yytext=s(1,2),66;case 39:return"INVALID";case 40:return 5}},e.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],e.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,40],inclusive:!0}},e}();return t.lexer=i,e.prototype=t,t.Parser=e,new e}()}(),l=function(e,t){"use strict";function i(){this.parents=[]}var s=e,n=t;return i.prototype={constructor:i,mutating:!1,acceptKey:function(e,t){var i=this.accept(e[t]);if(this.mutating){if(i&&(!i.type||!n[i.type]))throw new s('Unexpected node type "'+i.type+'" found when accepting '+t+" on "+e.type);e[t]=i}},acceptRequired:function(e,t){if(this.acceptKey(e,t),!e[t])throw new s(e.type+" requires "+t)},acceptArray:function(e){for(var t=0,i=e.length;t<i;t++)this.acceptKey(e,t),e[t]||(e.splice(t,1),t--,i--)},accept:function(e){if(e){this.current&&this.parents.unshift(this.current),this.current=e;var t=this[e.type](e);return this.current=this.parents.shift(),!this.mutating||t?t:!1!==t?e:void 0}},Program:function(e){this.acceptArray(e.body)},MustacheStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},BlockStatement:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash"),this.acceptKey(e,"program"),this.acceptKey(e,"inverse")},PartialStatement:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:function(e){this.acceptRequired(e,"path"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PartialExpression:function(e){this.acceptRequired(e,"name"),this.acceptArray(e.params),this.acceptKey(e,"hash")},PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},Hash:function(e){this.acceptArray(e.pairs)},HashPair:function(e){this.acceptRequired(e,"value")}},i}(t,o),c=function(e){"use strict";function t(){}function i(e,t,i){t===undefined&&(t=e.length);var s=e[t-1],n=e[t-2];return s?"ContentStatement"===s.type?(n||!i?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(s.original):void 0:i}function s(e,t,i){t===undefined&&(t=-1);var s=e[t+1],n=e[t+2];return s?"ContentStatement"===s.type?(n||!i?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(s.original):void 0:i}function n(e,t,i){var s=e[null==t?0:t+1];if(s&&"ContentStatement"===s.type&&(i||!s.rightStripped)){var n=s.value;s.value=s.value.replace(i?/^\s+/:/^[ \t]*\r?\n?/,""),s.rightStripped=s.value!==n}}function a(e,t,i){var s=e[null==t?e.length-1:t-1];if(s&&"ContentStatement"===s.type&&(i||!s.leftStripped)){var n=s.value;return s.value=s.value.replace(i?/\s+$/:/[ \t]+$/,""),s.leftStripped=s.value!==n,s.leftStripped}}var o=e;return t.prototype=new o,t.prototype.Program=function(e){var t=!this.isRootSeen;this.isRootSeen=!0;for(var o=e.body,r=0,l=o.length;r<l;r++){var c=o[r],h=this.accept(c);if(h){var d=i(o,r,t),u=s(o,r,t),p=h.openStandalone&&d,f=h.closeStandalone&&u,m=h.inlineStandalone&&d&&u;h.close&&n(o,r,!0),h.open&&a(o,r,!0),m&&(n(o,r),a(o,r)&&"PartialStatement"===c.type&&(c.indent=/([ \t]+$)/.exec(o[r-1].original)[1])),p&&(n((c.program||c.inverse).body),a(o,r)),f&&(n(o,r),a((c.inverse||c.program).body))}}return e},t.prototype.BlockStatement=function(e){this.accept(e.program),this.accept(e.inverse);var t=e.program||e.inverse,o=e.program&&e.inverse,r=o,l=o;if(o&&o.chained)for(r=o.body[0].program;l.chained;)l=l.body[l.body.length-1].program;var c={open:e.openStrip.open,close:e.closeStrip.close,openStandalone:s(t.body),closeStandalone:i((r||t).body)};if(e.openStrip.close&&n(t.body,null,!0),o){var h=e.inverseStrip;h.open&&a(t.body,null,!0),h.close&&n(r.body,null,!0),e.closeStrip.open&&a(l.body,null,!0),i(t.body)&&s(r.body)&&(a(t.body),n(r.body))}else e.closeStrip.open&&a(t.body,null,!0);return c},t.prototype.MustacheStatement=function(e){return e.strip},t.prototype.PartialStatement=t.prototype.CommentStatement=function(e){var t=e.strip||{};return{inlineStandalone:!0,open:t.open,close:t.close}},t}(l),h=function(e){"use strict";function t(e,t){this.source=e,this.start={line:t.first_line,column:t.first_column},this.end={line:t.last_line,column:t.last_column}}function i(e,t){return{open:"~"===e.charAt(2),close:"~"===t.charAt(t.length-3)}}function s(e){return e.replace(/^\{\{~?\!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function n(e,t,i){i=this.locInfo(i);for(var s=e?"@":"",n=[],a=0,o="",r=0,l=t.length;r<l;r++){var h=t[r].part;if(s+=(t[r].separator||"")+h,".."===h||"."===h||"this"===h){if(n.length>0)throw new c("Invalid path: "+s,{loc:i});".."===h&&(a++,o+="../")}else n.push(h)}return new this.PathExpression(e,a,n,s,i)}function a(e,t,i,s,n,a){var o=s.charAt(3)||s.charAt(2),r="{"!==o&&"&"!==o;return new this.MustacheStatement(e,t,i,r,n,this.locInfo(a))}function o(e,t,i,s){if(e.path.original!==i){var n={loc:e.path.loc};throw new c(e.path.original+" doesn't match "+i,n)}s=this.locInfo(s);var a=new this.Program([t],null,{},s);return new this.BlockStatement(e.path,e.params,e.hash,a,undefined,{},{},{},s)}function r(e,t,i,s,n,a){if(s&&s.path&&e.path.original!==s.path.original){var o={loc:e.path.loc};throw new c(e.path.original+" doesn't match "+s.path.original,o)}t.blockParams=e.blockParams;var r,l;return i&&(i.chain&&(i.program.body[0].closeStrip=s.strip),l=i.strip,r=i.program),n&&(n=r,r=t,t=n),new this.BlockStatement(e.path,e.params,e.hash,t,r,e.strip,l,s&&s.strip,this.locInfo(a))}var l={},c=e;return l.SourceLocation=t,l.stripFlags=i,l.stripComment=s,l.preparePath=n,l.prepareMustache=a,l.prepareRawBlock=o,l.prepareBlock=r,l}(t),d=function(e,t,i,s,n){"use strict";function a(e,t){return"Program"===e.type?e:(r.yy=u,u.locInfo=function(e){return new u.SourceLocation(t&&t.srcName,e)},(new c).accept(r.parse(e)))}var o={},r=e,l=t,c=i,h=s,d=n.extend;o.parser=r;var u={};return d(u,h,l),o.parse=a,o}(r,o,c,h,e),u=function(e,t,i){"use strict";function s(){}function n(e,t,i){if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new c("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var s=i.parse(e,t),n=(new i.Compiler).compile(s,t);return(new i.JavaScriptCompiler).compile(n,t)}function a(e,t,i){function s(){var s=i.parse(e,t),n=(new i.Compiler).compile(s,t),a=(new i.JavaScriptCompiler).compile(n,t,undefined,!0);return i.template(a)}if(null==e||"string"!=typeof e&&"Program"!==e.type)throw new c("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+e);t=t||{},"data"in t||(t.data=!0),t.compat&&(t.useDepths=!0);var n,a=function(e,t){return n||(n=s()),n.call(this,e,t)};return a._setup=function(e){return n||(n=s()),n._setup(e)},a._child=function(e,t,i,a){return n||(n=s()),n._child(e,t,i,a)},a}function o(e,t){if(e===t)return!0;if(h(e)&&h(t)&&e.length===t.length){for(var i=0;i<e.length;i++)if(!o(e[i],t[i]))return!1;return!0}}function r(e){if(!e.path.parts){var t=e.path;e.path=new u.PathExpression(!1,0,[t.original+""],t.original+"",t.log)}}var l={},c=e,h=t.isArray,d=t.indexOf,u=i,p=[].slice;return l.Compiler=s,s.prototype={compiler:s,equals:function(e){var t=this.opcodes.length;if(e.opcodes.length!==t)return!1;for(var i=0;i<t;i++){var s=this.opcodes[i],n=e.opcodes[i];if(s.opcode!==n.opcode||!o(s.args,n.args))return!1}for(t=this.children.length,i=0;i<t;i++)if(!this.children[i].equals(e.children[i]))return!1;return!0},guid:0,compile:function(e,t){this.sourceNode=[],this.opcodes=[],this.children=[],this.options=t,this.stringParams=t.stringParams,this.trackIds=t.trackIds,t.blockParams=t.blockParams||[];var i=t.knownHelpers;if(t.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},i)for(var s in i)t.knownHelpers[s]=i[s];return this.accept(e)},compileProgram:function(e){var t=(new this.compiler).compile(e,this.options),i=this.guid++;return this.usePartial=this.usePartial||t.usePartial,this.children[i]=t,this.useDepths=this.useDepths||t.useDepths,i},accept:function(e){this.sourceNode.unshift(e);var t=this[e.type](e);return this.sourceNode.shift(),t},Program:function(e){this.options.blockParams.unshift(e.blockParams);for(var t=e.body,i=0,s=t.length;i<s;i++)this.accept(t[i]);return this.options.blockParams.shift(),this.isSimple=1===s,this.blockParams=e.blockParams?e.blockParams.length:0,this},BlockStatement:function(e){r(e);var t=e.program,i=e.inverse;t=t&&this.compileProgram(t),i=i&&this.compileProgram(i);var s=this.classifySexpr(e);"helper"===s?this.helperSexpr(e,t,i):"simple"===s?(this.simpleSexpr(e),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("blockValue",e.path.original)):(this.ambiguousSexpr(e,t,i),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},PartialStatement:function(e){this.usePartial=!0;var t=e.params;if(t.length>1)throw new c("Unsupported number of partial arguments: "+t.length,e);t.length||t.push({type:"PathExpression",parts:[],depth:0});var i=e.name.original,s="SubExpression"===e.name.type;s&&this.accept(e.name),this.setupFullMustacheParams(e,undefined,undefined,!0);var n=e.indent||"";this.options.preventIndent&&n&&(this.opcode("appendContent",n),n=""),this.opcode("invokePartial",s,i,n),this.opcode("append")},MustacheStatement:function(e){this.SubExpression(e),e.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ContentStatement:function(e){e.value&&this.opcode("appendContent",e.value)},CommentStatement:function(){},SubExpression:function(e){r(e);var t=this.classifySexpr(e);"simple"===t?this.simpleSexpr(e):"helper"===t?this.helperSexpr(e):this.ambiguousSexpr(e)},ambiguousSexpr:function(e,t,i){var s=e.path,n=s.parts[0],a=null!=t||null!=i;this.opcode("getContext",s.depth),this.opcode("pushProgram",t),this.opcode("pushProgram",i),this.accept(s),this.opcode("invokeAmbiguous",n,a)},simpleSexpr:function(e){this.accept(e.path),this.opcode("resolvePossibleLambda")},helperSexpr:function(e,t,i){var s=this.setupFullMustacheParams(e,t,i),n=e.path,a=n.parts[0];if(this.options.knownHelpers[a])this.opcode("invokeKnownHelper",s.length,a);else{if(this.options.knownHelpersOnly)throw new c("You specified knownHelpersOnly, but used the unknown helper "+a,e);n.falsy=!0,this.accept(n),this.opcode("invokeHelper",s.length,n.original,u.helpers.simpleId(n))}},PathExpression:function(e){this.addDepth(e.depth),this.opcode("getContext",e.depth);var t=e.parts[0],i=u.helpers.scopedId(e),s=!e.depth&&!i&&this.blockParamIndex(t);s?this.opcode("lookupBlockParam",s,e.parts):t?e.data?(this.options.data=!0,this.opcode("lookupData",e.depth,e.parts)):this.opcode("lookupOnContext",e.parts,e.falsy,i):this.opcode("pushContext")},StringLiteral:function(e){this.opcode("pushString",e.value)},NumberLiteral:function(e){this.opcode("pushLiteral",e.value)},BooleanLiteral:function(e){this.opcode("pushLiteral",e.value)},Hash:function(e){var t,i,s=e.pairs;for(this.opcode("pushHash"),t=0,i=s.length;t<i;t++)this.pushParam(s[t].value);for(;t--;)this.opcode("assignToHash",s[t].key);this.opcode("popHash")},opcode:function(e){this.opcodes.push({opcode:e,args:p.call(arguments,1),loc:this.sourceNode[0].loc})},addDepth:function(e){e&&(this.useDepths=!0)},classifySexpr:function(e){var t=u.helpers.simpleId(e.path),i=t&&!!this.blockParamIndex(e.path.parts[0]),s=!i&&u.helpers.helperExpression(e),n=!i&&(s||t),a=this.options;if(n&&!s){var o=e.path.parts[0];a.knownHelpers[o]?s=!0:a.knownHelpersOnly&&(n=!1)}return s?"helper":n?"ambiguous":"simple"},pushParams:function(e){for(var t=0,i=e.length;t<i;t++)this.pushParam(e[t])},pushParam:function(e){var t=null!=e.value?e.value:e.original||"";if(this.stringParams)t.replace&&(t=t.replace(/^(\.?\.\/)*/g,"").replace(/\//g,".")),e.depth&&this.addDepth(e.depth),this.opcode("getContext",e.depth||0),this.opcode("pushStringParam",t,e.type),"SubExpression"===e.type&&this.accept(e);else{if(this.trackIds){var i;if(!e.parts||u.helpers.scopedId(e)||e.depth||(i=this.blockParamIndex(e.parts[0])),i){var s=e.parts.slice(1).join(".");this.opcode("pushId","BlockParam",i,s)}else t=e.original||t,t.replace&&(t=t.replace(/^\.\//g,"").replace(/^\.$/g,"")),this.opcode("pushId",e.type,t)}this.accept(e)}},setupFullMustacheParams:function(e,t,i,s){var n=e.params;return this.pushParams(n),this.opcode("pushProgram",t),this.opcode("pushProgram",i),e.hash?this.accept(e.hash):this.opcode("emptyHash",s),n},blockParamIndex:function(e){for(var t=0,i=this.options.blockParams.length;t<i;t++){var s=this.options.blockParams[t],n=s&&d(s,e);if(s&&n>=0)return[t,n]}}},l.precompile=n,l.compile=a,l}(t,e,o),p=function(e){"use strict";function t(e,t,i){if(s(e)){for(var n=[],a=0,o=e.length;a<o;a++)n.push(t.wrap(e[a],i));return n}return"boolean"==typeof e||"number"==typeof e?e+"":e}function i(e){this.srcFile=e,this.source=[]}var s=e.isArray;try{var n=require("source-map"),a=n.SourceNode}catch(e){a=function(e,t,i,s){this.src="",s&&this.add(s)},a.prototype={add:function(e){s(e)&&(e=e.join("")),this.src+=e},prepend:function(e){s(e)&&(e=e.join("")),this.src=e+this.src},toStringWithSourceMap:function(){return{code:this.toString()}},toString:function(){return this.src}}}return i.prototype={prepend:function(e,t){this.source.unshift(this.wrap(e,t))},push:function(e,t){this.source.push(this.wrap(e,t))},merge:function(){var e=this.empty();return this.each(function(t){e.add(["  ",t,"\n"])}),e},each:function(e){for(var t=0,i=this.source.length;t<i;t++)e(this.source[t])},empty:function(e){return e=e||this.currentLocation||{start:{}},new a(e.start.line,e.start.column,this.srcFile)},wrap:function(e,i){return e instanceof a?e:(i=i||this.currentLocation||{start:{}},e=t(e,this,i),new a(i.start.line,i.start.column,this.srcFile,e))},functionCall:function(e,t,i){return i=this.generateList(i),this.wrap([e,t?"."+t+"(":"(",i,")"])},quotedString:function(e){return'"'+(e+"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(e){var i=[];for(var s in e)if(e.hasOwnProperty(s)){var n=t(e[s],this);"undefined"!==n&&i.push([this.quotedString(s),":",n])}var a=this.generateList(i);return a.prepend("{"),a.add("}"),a},generateList:function(e,i){for(var s=this.empty(i),n=0,a=e.length;n<a;n++)n&&s.add(","),s.add(t(e[n],this,i));return s},generateArray:function(e,t){var i=this.generateList(e,t);return i.prepend("["),i.add("]"),i}},i}(e),f=function(e,t,i,s){"use strict";function n(e){this.value=e}function a(){}function o(e,t,i,s){var n=t.popStack(),a=0,o=i.length;for(e&&o--;a<o;a++)n=t.nameLookup(n,i[a],s);return e?[t.aliasable("this.strict"),"(",n,", ",t.quotedString(i[a]),")"]:n}var r=e.COMPILER_REVISION,l=e.REVISION_CHANGES,c=t,h=i.isArray,d=s;a.prototype={nameLookup:function(e,t){return a.isValidJavaScriptVariableName(t)?[e,".",t]:[e,"['",t,"']"]},depthedLookup:function(e){return[this.aliasable("this.lookup"),'(depths, "',e,'")']},compilerInfo:function(){var e=r;return[e,l[e]]},appendToBuffer:function(e,t,i){return h(e)||(e=[e]),e=this.source.wrap(e,t),this.environment.isSimple?["return ",e,";"]:i?["buffer += ",e,";"]:(e.appendToBuffer=!0,e)},initializeBuffer:function(){return this.quotedString("")},compile:function(e,t,i,s){this.environment=e,this.options=t,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!s,this.name=this.environment.name,this.isChild=!!i,this.context=i||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.blockParams=[],this.compileChildren(e,t),this.useDepths=this.useDepths||e.useDepths||this.options.compat,this.useBlockParams=this.useBlockParams||e.useBlockParams;var n,a,o,r,l=e.opcodes;for(o=0,r=l.length;o<r;o++)n=l[o],this.source.currentLocation=n.loc,a=a||n.loc,this[n.opcode].apply(this,n.args);if(this.source.currentLocation=a,this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new c("Compile completed with content left on stack");var h=this.createFunctionContext(s);if(this.isChild)return h;var d={compiler:this.compilerInfo(),main:h},u=this.context.programs;for(o=0,r=u.length;o<r;o++)u[o]&&(d[o]=u[o]);return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.useBlockParams&&(d.useBlockParams=!0),this.options.compat&&(d.compat=!0),s?d.compilerOptions=this.options:(d.compiler=JSON.stringify(d.compiler),this.source.currentLocation={start:{line:1,column:0}},d=this.objectLiteral(d),t.srcName?(d=d.toStringWithSourceMap({file:t.destName}),d.map=d.map&&d.map.toString()):d=d.toString()),d},preamble:function(){this.lastContext=0,this.source=new d(this.options.srcName)},createFunctionContext:function(e){var t="",i=this.stackVars.concat(this.registers.list);i.length>0&&(t+=", "+i.join(", "));var s=0;for(var n in this.aliases){var a=this.aliases[n];this.aliases.hasOwnProperty(n)&&a.children&&a.referenceCount>1&&(t+=", alias"+ ++s+"="+n,a.children[0]="alias"+s)}var o=["depth0","helpers","partials","data"];(this.useBlockParams||this.useDepths)&&o.push("blockParams"),this.useDepths&&o.push("depths");var r=this.mergeSource(t);return e?(o.push(r),Function.apply(this,o)):this.source.wrap(["function(",o.join(","),") {\n  ",r,"}"])},mergeSource:function(e){var t,i,s,n,a=this.environment.isSimple,o=!this.forceBuffer;return this.source.each(function(e){e.appendToBuffer?(s?e.prepend("  + "):s=e,n=e):(s&&(i?s.prepend("buffer += "):t=!0,n.add(";"),s=n=undefined),i=!0,a||(o=!1))}),o?s?(s.prepend("return "),n.add(";")):i||this.source.push('return "";'):(e+=", buffer = "+(t?"":this.initializeBuffer()),s?(s.prepend("return buffer + "),n.add(";")):this.source.push("return buffer;")),e&&this.source.prepend("var "+e.substring(2)+(t?"":";\n")),this.source.merge()},blockValue:function(e){var t=this.aliasable("helpers.blockHelperMissing"),i=[this.contextName(0)];this.setupHelperArgs(e,0,i);var s=this.popStack();i.splice(1,0,s),this.push(this.source.functionCall(t,"call",i))},ambiguousBlockValue:function(){var e=this.aliasable("helpers.blockHelperMissing"),t=[this.contextName(0)];this.setupHelperArgs("",0,t,!0),this.flushInline();var i=this.topStack();t.splice(1,0,i),this.pushSource(["if (!",this.lastHelper,") { ",i," = ",this.source.functionCall(e,"call",t),"}"])},appendContent:function(e){this.pendingContent?e=this.pendingContent+e:this.pendingLocation=this.source.currentLocation,this.pendingContent=e},append:function(){if(this.isInline())this.replaceStack(function(e){return[" != null ? ",e,' : ""']}),this.pushSource(this.appendToBuffer(this.popStack()));else{var e=this.popStack();this.pushSource(["if (",e," != null) { ",this.appendToBuffer(e,undefined,!0)," }"]),this.environment.isSimple&&this.pushSource(["else { ",this.appendToBuffer("''",undefined,!0)," }"])}},appendEscaped:function(){this.pushSource(this.appendToBuffer([this.aliasable("this.escapeExpression"),"(",this.popStack(),")"]))},getContext:function(e){this.lastContext=e},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(e,t,i){var s=0;i||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(e[s++])),this.resolvePath("context",e,s,t)},lookupBlockParam:function(e,t){this.useBlockParams=!0,this.push(["blockParams[",e[0],"][",e[1],"]"]),this.resolvePath("context",t,1)},lookupData:function(e,t){e?this.pushStackLiteral("this.data(data, "+e+")"):this.pushStackLiteral("data"),this.resolvePath("data",t,0,!0)},resolvePath:function(e,t,i,s){if(this.options.strict||this.options.assumeObjects)return void this.push(o(this.options.strict,this,t,e));for(var n=t.length;i<n;i++)this.replaceStack(function(n){var a=this.nameLookup(n,t[i],e);return s?[" && ",a]:[" != null ? ",a," : ",n]})},resolvePossibleLambda:function(){this.push([this.aliasable("this.lambda"),"(",this.popStack(),", ",this.contextName(0),")"])},pushStringParam:function(e,t){this.pushContext(),this.pushString(t),"SubExpression"!==t&&("string"==typeof e?this.pushString(e):this.pushStackLiteral(e))},emptyHash:function(e){this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}")),this.pushStackLiteral(e?"undefined":"{}")},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var e=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push(this.objectLiteral(e.ids)),this.stringParams&&(this.push(this.objectLiteral(e.contexts)),this.push(this.objectLiteral(e.types))),this.push(this.objectLiteral(e.values))},pushString:function(e){this.pushStackLiteral(this.quotedString(e))},pushLiteral:function(e){this.pushStackLiteral(e)},pushProgram:function(e){null!=e?this.pushStackLiteral(this.programExpression(e)):this.pushStackLiteral(null)},invokeHelper:function(e,t,i){var s=this.popStack(),n=this.setupHelper(e,t),a=i?[n.name," || "]:"",o=["("].concat(a,s);this.options.strict||o.push(" || ",this.aliasable("helpers.helperMissing")),o.push(")"),this.push(this.source.functionCall(o,"call",n.callParams))},invokeKnownHelper:function(e,t){var i=this.setupHelper(e,t);this.push(this.source.functionCall(i.name,"call",i.callParams))},invokeAmbiguous:function(e,t){this.useRegister("helper");var i=this.popStack();this.emptyHash();var s=this.setupHelper(0,e,t),n=this.lastHelper=this.nameLookup("helpers",e,"helper"),a=["(","(helper = ",n," || ",i,")"];this.options.strict||(a[0]="(helper = ",a.push(" != null ? helper : ",this.aliasable("helpers.helperMissing"))),this.push(["(",a,s.paramsInit?["),(",s.paramsInit]:[],"),","(typeof helper === ",this.aliasable('"function"')," ? ",this.source.functionCall("helper","call",s.callParams)," : helper))"])},invokePartial:function(e,t,i){var s=[],n=this.setupParams(t,1,s,!1);e&&(t=this.popStack(),delete n.name),i&&(n.indent=JSON.stringify(i)),n.helpers="helpers",n.partials="partials",e?s.unshift(t):s.unshift(this.nameLookup("partials",t,"partial")),this.options.compat&&(n.depths="depths"),n=this.objectLiteral(n),s.push(n),this.push(this.source.functionCall("this.invokePartial","",s))},assignToHash:function(e){var t,i,s,n=this.popStack();this.trackIds&&(s=this.popStack()),this.stringParams&&(i=this.popStack(),t=this.popStack());var a=this.hash;t&&(a.contexts[e]=t),i&&(a.types[e]=i),s&&(a.ids[e]=s),a.values[e]=n},pushId:function(e,t,i){"BlockParam"===e?this.pushStackLiteral("blockParams["+t[0]+"].path["+t[1]+"]"+(i?" + "+JSON.stringify("."+i):"")):"PathExpression"===e?this.pushString(t):"SubExpression"===e?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:a,compileChildren:function(e,t){for(var i,s,n=e.children,a=0,o=n.length;a<o;a++){i=n[a],s=new this.compiler;var r=this.matchExistingProgram(i);null==r?(this.context.programs.push(""),r=this.context.programs.length,i.index=r,i.name="program"+r,this.context.programs[r]=s.compile(i,t,this.context,!this.precompile),this.context.environments[r]=i,this.useDepths=this.useDepths||s.useDepths,this.useBlockParams=this.useBlockParams||s.useBlockParams):(i.index=r,i.name="program"+r,this.useDepths=this.useDepths||i.useDepths,this.useBlockParams=this.useBlockParams||i.useBlockParams)}},matchExistingProgram:function(e){for(var t=0,i=this.context.environments.length;t<i;t++){var s=this.context.environments[t];if(s&&s.equals(e))return t}},programExpression:function(e){var t=this.environment.children[e],i=[t.index,"data",t.blockParams];return(this.useBlockParams||this.useDepths)&&i.push("blockParams"),this.useDepths&&i.push("depths"),"this.program("+i.join(", ")+")"},useRegister:function(e){this.registers[e]||(this.registers[e]=!0,this.registers.list.push(e))},push:function(e){return e instanceof n||(e=this.source.wrap(e)),this.inlineStack.push(e),e},pushStackLiteral:function(e){this.push(new n(e))},pushSource:function(e){this.pendingContent&&(this.source.push(this.appendToBuffer(this.source.quotedString(this.pendingContent),this.pendingLocation)),this.pendingContent=undefined),e&&this.source.push(e)},replaceStack:function(e){var t,i,s,a=["("];if(!this.isInline())throw new c("replaceStack on non-inline");var o=this.popStack(!0);if(o instanceof n)t=[o.value],a=["(",t],s=!0;else{i=!0;var r=this.incrStack();a=["((",this.push(r)," = ",o,")"],t=this.topStack()}var l=e.call(this,t);s||this.popStack(),i&&this.stackSlot--,this.push(a.concat(l,")"))},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var e=this.inlineStack;this.inlineStack=[];for(var t=0,i=e.length;t<i;t++){var s=e[t];if(s instanceof n)this.compileStack.push(s);else{var a=this.incrStack();this.pushSource([a," = ",s,";"]),this.compileStack.push(a)}}},isInline:function(){return this.inlineStack.length},popStack:function(e){var t=this.isInline(),i=(t?this.inlineStack:this.compileStack).pop();if(!e&&i instanceof n)return i.value;if(!t){if(!this.stackSlot)throw new c("Invalid stack pop");this.stackSlot--}return i},topStack:function(){var e=this.isInline()?this.inlineStack:this.compileStack,t=e[e.length-1];return t instanceof n?t.value:t},contextName:function(e){return this.useDepths&&e?"depths["+e+"]":"depth"+e},quotedString:function(e){return this.source.quotedString(e)},objectLiteral:function(e){return this.source.objectLiteral(e)},aliasable:function(e){var t=this.aliases[e];return t?(t.referenceCount++,t):(t=this.aliases[e]=this.source.wrap(e),t.aliasable=!0,t.referenceCount=1,t)},setupHelper:function(e,t,i){var s=[];return{params:s,paramsInit:this.setupHelperArgs(t,e,s,i),name:this.nameLookup("helpers",t,"helper"),callParams:[this.contextName(0)].concat(s)}},setupParams:function(e,t,i){var s,n={},a=[],o=[],r=[];n.name=this.quotedString(e),n.hash=this.popStack(),this.trackIds&&(n.hashIds=this.popStack()),this.stringParams&&(n.hashTypes=this.popStack(),n.hashContexts=this.popStack());var l=this.popStack(),c=this.popStack();(c||l)&&(n.fn=c||"this.noop",n.inverse=l||"this.noop");for(var h=t;h--;)s=this.popStack(),i[h]=s,this.trackIds&&(r[h]=this.popStack()),this.stringParams&&(o[h]=this.popStack(),a[h]=this.popStack());return this.trackIds&&(n.ids=this.source.generateArray(r)),this.stringParams&&(n.types=this.source.generateArray(o),n.contexts=this.source.generateArray(a)),this.options.data&&(n.data="data"),this.useBlockParams&&(n.blockParams="blockParams"),n},setupHelperArgs:function(e,t,i,s){var n=this.setupParams(e,t,i,!0);return n=this.objectLiteral(n),s?(this.useRegister("options"),i.push("options"),["options=",n]):(i.push(n),"")}};for(var u="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield await null true false".split(" "),p=a.RESERVED_WORDS={},f=0,m=u.length;f<m;f++)p[u[f]]=!0;return a.isValidJavaScriptVariableName=function(e){return!a.RESERVED_WORDS[e]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(e)},a}(i,t,e,p);return function(e,t,i,s,n){"use strict";var a=e,o=t,r=i.parser,l=i.parse,c=s.Compiler,h=s.compile,d=s.precompile,u=n,p=a.create,f=function(){var e=p();return e.compile=function(t,i){return h(t,i,e)},e.precompile=function(t,i){return d(t,i,e)},e.AST=o,e.Compiler=c,e.JavaScriptCompiler=u,e.Parser=r,e.parse=l,e};a=f(),a.create=f;var m="undefined"!=typeof global?global:window,g=m.Handlebars;return a.noConflict=function(){m.Handlebars===a&&(m.Handlebars=g)},a["default"]=a,a}(a,o,d,u,f)}),app.modules.commonHandlebarsHelpers=function(e){function t(e,t){return e.replace("%{count}",t)}function i(){Handlebars.registerHelper("pc-pluralize",function(e,i){var s=e%100;return s>=5&&s<=20?t(i.hash.many,e):(s%=10,1===s?t(i.hash.one,e):s>=2&&s<=4?t(i.hash.few,e):t(i.hash.many,e))})}return e.load=function(){i()},e}(app.modules.commonHandlebarsHelpers||{}),function(){Handlebars.registerPartial("application/_selectric",Handlebars.template({1:function(){return"in-row"},3:function(e,t,i,s,n,a){var o;return null!=(o=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=a[1]?a[1].value:a[1],"===",null!=e?e.id:e,{name:"ifCond",hash:{},fn:this.program(4,s,0,n,a),inverse:this.program(6,s,0,n,a),data:s}))?o:""},4:function(e){
return"    <option selected value='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</option>\n"},6:function(e){return"    <option value='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s,n,a){var o,r;return"<div class='apress-selectric "+(null!=(o=t["if"].call(e,null!=e?e.rowType:e,{name:"if",hash:{},fn:this.program(1,s,0,n,a),inverse:this.noop,data:s}))?o:"")+"'>\n  <select class='"+this.escapeExpression((r=null!=(r=t.className||(null!=e?e.className:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"className",hash:{},data:s}):r))+'\' data-selectric-options=\'{"maxHeight":"'+this.escapeExpression((r=null!=(r=t.maxHeight||(null!=e?e.maxHeight:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"maxHeight",hash:{},data:s}):r))+'","id":"'+this.escapeExpression((r=null!=(r=t.itemID||(null!=e?e.itemID:e))?r:t.helperMissing,"function"==typeof r?r.call(e,{name:"itemID",hash:{},data:s}):r))+"\"}'>\n"+(null!=(o=t.each.call(e,null!=e?e.options:e,{name:"each",hash:{},fn:this.program(3,s,0,n,a),inverse:this.noop,data:s}))?o:"")+"  </select>\n</div>"},useData:!0,useDepths:!0}))}.call(this),function(){Handlebars.registerPartial("application/_spinner",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div class='apress-ui-spinner'>\n  <input class='"+this.escapeExpression((n=null!=(n=t.className||(null!=e?e.className:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"className",hash:{},data:s}):n))+'\' data-spinner-options=\'{"min":"'+this.escapeExpression((n=null!=(n=t.min||(null!=e?e.min:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"min",hash:{},data:s}):n))+'","max":"'+this.escapeExpression((n=null!=(n=t.max||(null!=e?e.max:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"max",hash:{},data:s}):n))+'","id":"'+this.escapeExpression((n=null!=(n=t.itemID||(null!=e?e.itemID:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"itemID",hash:{},data:s}):n))+"\"}' value='"+this.escapeExpression((n=null!=(n=t.value||(null!=e?e.value:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"value",hash:{},data:s}):n))+"'>\n</div>"},useData:!0}))}.call(this),ObjectEventListener.prototype={_setObjectValueByPath:function(e,t){var i=e.split("."),s=this;i.shift(),i.reduce(function(e,n,a){return a===i.length-1&&(s.objectToListen[n]=t),s.objectToListen[n]},s.objectToListen)},_getValueFromObjectByPath:function(e,t){var i=e.split(".");return i.shift(),i.reduce(function(e,t){return e?e[t]:null},t)},_createProxy:function(e,t){var i=this;return new Proxy(e,{set:function(e,s,n){e[s]=n,i._eventsRouter[t].handlers.forEach(function(t){t.apply(null,[e,s,n])})}})},set:function(e,t){var i=e.split("."),s=i.pop(),n=this._eventsRouter[i.join(".")];return n&&n.handlers.length?(this._setObjectValueByPath(e,t),n.proxy[s]=t,this):this},addEventListener:function(e,t){var i=this._eventsRouter;i[e]||(i[e]={handlers:[],proxy:this._createProxy(this._getValueFromObjectByPath(e,this.objectToListen),e)}),i[e].handlers.push(t)},removeEventListener:function(e){var t=this._eventsRouter;t[e]&&(t[e].handlers=[])}};var appEL=window.Proxy?new ObjectEventListener(app):null;!function(){function e(e){var t=function(){for(var t in app.modules)if(app.modules[t][e])try{if(app.modules[t].initiated)return;app.modules[t][e](),app.modules[t].initiated=!0}catch(e){console.trace(e)}};setTimeout(t,10)}function t(){var t=app.config.crossDomainAuth&&app.modules.crossDomainAuthBridge?app.modules.crossDomainAuthBridge.authorizeUser():$.Deferred().resolve();t.always(e.bind(null,"load")),setTimeout(function(){t.resolve()},1e3)}function i(){$(document).ready(e.bind(null,"ready")),$(window).load(t)}app.modules&&i()}(),function(){function e(e){!e.initiated&&["load","ready"].forEach(function(t){e[t]&&(e[t](),e.initiated=!0)})}function t(t){const i=document.createElement("script");return i.src=t,i.defer=!0,document.body.appendChild(i),new Promise(function(t){i.onload=function(){Object.values(app.modules).forEach(e),t()}})}function i(e){return n[e]||(n[e]=t(e)),n[e]}function s(e){return e=Array.isArray(e)?e:[e],Promise.all(e.map(i))}const n={};window.apressImport=s}(),app.modules.applicationUtils=function(e){function t(e){return i(0!==arguments.length,"Argument should be passed into isPlainObject method"),"object"==typeof e&&!Array.isArray(e)&&null!==e}function i(e,t){var i,s;if(!t)throw new Error("message argument is required");if(!e)throw i=Array.prototype.slice.call(arguments,2),s=0,i.length&&(t=t.replace(/%s/g,function(){return i[s++]})),new Error(t)}function s(){var e=function(e){return t(Math.random()*(1<<(e<<2))^Date.now()).slice(-e)},t=function(e){return(0|e).toString(16)};return[e(4)+e(4),e(4),"4"+e(3),t(8|4*Math.random())+e(3),Date.now().toString(16).slice(-10)+e(2)].join("-")}function n(e,t){return t=t||500,clearTimeout(f),f=setTimeout(function(){e(),e=function(){}},t),function(){clearTimeout(f),e()}}function a(e,t){function i(e){var i=[].slice.call(arguments,1),s=0;return e||(e=t[0]),e.replace(/%{count}/g,function(){return i[s++]})}function s(e){return e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2}if(!e)return i(t[3],e);switch(s(e)){case 0:return i(t[0],e);case 1:return i(t[1],e);default:return i(t[2],e)}}function o(e){i(t(e),"params should be a plain object, instead %s was passed",e)}function r(e){o(e),i("string"==typeof e.url,"params.url should be a string, instead %s was passed",e.url),i(!e.pid||"string"==typeof e.pid||"number"==typeof e.pid,"params.pid should be a string or number, instead %s was passed",e.pid)}function l(e){r(e);var t=$.Deferred(),i=e.fequency||1e3,s=e.url;return e.pid&&(s+="/"+e.pid),function n(){$.ajax({url:s}).then(function(s){if(s.failed||s.succeeded)return s.failed?t.reject(e.rejectWith||s.error||{}):t.resolve(e.resolveWith||s.payload||{});setTimeout(n,i)}).fail(function(e){t.reject(e)})}(),t}function c(e){location.href=e}function h(e,s){return i(t(e),"obj should be a plain object, instead %s was passed",e),i($.isFunction(s),"callback should be a function, instead %s was passed",s),Object.keys(e).reduce(function(t,i){return s(e,i)&&(t[i]=e[i]),t},{})}function d(e,s){return i("string"==typeof e,"path should be a string, instead %s was passed",e),i(t(s),"sourceObject should be a plain object, instead %s was passed",s),e.split(".").reduce(function(e,t){return e?e[t]:null},s)}function u(e,s){return i(t(e),"data argument should be the plain object"),i(t(s),"schema argument should be the plain object"),Object.keys(e).reduce(function(t,i){var n=s[i];return t[n||i]=e[i],t},{})}function p(e,t){return i("string"==typeof e,"argument item should be a string, instead got %s",e),i(Array.isArray(t),"argument array should be an array, instead got %s",t),!!~t.indexOf(e)}var f;return $.extend(e,{setLocationHref:c,invariant:i,isPlainObject:t,generateUUID:s,delayCall:n,pluralize:a,listenProcess:l,validateOnObjectType:o,mapAccordingToSchema:u,getFromObjectByPath:d,filterObject:h,isInArray:p})}(app.modules.applicationUtils||{}),app.modules.applicationDataStore=function(e){function t(e){return $.when.apply(null,Array.isArray(e)?e.map(function(e){return s(e)}):[s(e)])}function i(e){return app.config.api[app.config.dataStoreURLMappings[e]]}function s(e){var t=l(e);return a(t,e)?r(i(e)).then(c.bind(null,e)):n(t,e)}function n(e,t){var i={};return i[t]=e.value,i}function a(e,t){return i(t)&&(!e||o(e,t))}function o(e){return+new Date>=e.expireTime}function r(e){return $.get(e)}function l(e){var t=localStorage[g];return t&&e?JSON.parse(t)[e]:t&&JSON.parse(t)}function c(e,t){return localStorage[g]=JSON.stringify($.extend(l(),h(e,t))),t}function h(e,t){var i={};return i[e]={value:t[e],expireTime:d()},i}function d(){var e=new Date;return e.setMinutes(e.getMinutes()+v)}function u(e){var t=Array.prototype.slice.call(e);return t.shift(),t}function p(e){var t=u(arguments);return e.reduce(function(e,i,s){return $.extend(e,t[s])},{})}function f(e,i,s){t(s).then(p.bind(null,s)).done(i.resolve).fail(i.reject)}function m(){$doc.on("get:applicationDataStore",f)}var g="dataStore",v=30;return e.load=function(){app.config.dataStoreURLMappings&&m()},e}(app.modules.applicationDataStore||{}),app.modules.applicationHandlebarsHelpers=function(e){function t(){Handlebars.registerHelper({ifCond:function(e,t,i,s){var n,a={"&amp;&amp;":"&&","&lt;":"<","&gt;":">","&lt;=":"<=","&gt;=":">="};switch(a[t]||t){case"!==":n=e!==i;break;case"===":n=e===i;break;case"<":n=e<i;break;case"<=":n=e<=i;break;case">":n=e>i;break;case">=":n=e>=i;break;case"&&":n=e&&i;break;case"||":n=e||i}return n?s.fn(this):s.inverse(this)},pluralize:function(e){var t=JSON.parse(e.hash.data),i=[];for(var s in t)i.push(t[s]);return app.modules.applicationUtils.pluralize(e.hash.count,i)},toJSON:function(e){return JSON.stringify(e)},slice:function(e,t){var i="",s=parseInt(t.hash.offset)||0,n=parseInt(t.hash.limit)||5,a=s<e.length?s:0,o=n+s<e.length?n+s:e.length;for(o;a<o;a++)e[a].last=a===o-1,i+=t.fn(e[a]);return i}})}return e.load=function(){t()},e}(app.modules.applicationHandlebarsHelpers||{}),app.modules.initPhoneMask=function(e){function t(e,t,i){var s,a,r=i.data("allow-national");~e.indexOf(n)?s="defaultPattern":(a=e.match(/\d/),s=r&&a&&"8"===a[0]?"nationalPattern":"simplePattern"),i.mask(o.onlyDefaultCode?o.defaultPattern.replace("+0",n):o[s],o.params)}function i(e){$(e||".js-phone-mask").each(function(){var e=$(this);$.extend(o,a,e.data("phoneMaskOptions")),t(e.val()||e.text(),null,e)})}function s(){$doc.on("init:phoneMask",function(e){i(e.target!==document&&e.target)})}var n="+7",a={defaultPattern:"+0 (000) 000-00-00",simplePattern:"+000000000000000",nationalPattern:"000000000000000",params:{placeholder:n+" (___) ___-__-__",onKeyPress:function(){o.onlyDefaultCode||t.apply(null,arguments)}}},o={};return e.load=function(){i(),s()},e}(app.modules.initPhoneMask||{}),function(e,t,i){!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):jQuery&&!jQuery.fn.qtip2&&e(jQuery)}(function(s){"use strict";function n(e,t,i,n){this.id=i,this.target=e,this.tooltip=I,this.elements={target:e},this._id=U+"-"+i,this.timers={img:{}},this.options=t,this.plugins={},this.cache={event:{},target:s(),disabled:P,attr:n,onTooltip:P,lastClass:""},this.rendered=this.destroyed=this.disabled=this.waiting=this.hiddenDuringWait=this.positioning=this.triggering=P}function a(e){return e===I||"object"!==s.type(e)}function o(e){return!(s.isFunction(e)||e&&e.attr||e.length||"object"===s.type(e)&&(e.jquery||e.then))}function r(e){var t,i,n,r;return a(e)?P:(a(e.metadata)&&(e.metadata={type:e.metadata}),"content"in e&&(t=e.content,a(t)||t.jquery||t.done?t=e.content={text:i=o(t)?P:t}:i=t.text,"ajax"in t&&(n=t.ajax,r=n&&n.once!==P,delete t.ajax,t.text=function(e,t){var a=i||s(this).attr(t.options.content.attr)||"Loading...",o=s.ajax(s.extend({},n,{context:t})).then(n.success,I,n.error).then(function(e){return e&&r&&t.set("content.text",e),e},function(e,i,s){t.destroyed||0===e.status||t.set("content.text",i+": "+s)});return r?a:(t.set("content.text",a),o)}),"title"in t&&(s.isPlainObject(t.title)&&(t.button=t.title.button,t.title=t.title.text),o(t.title||P)&&(t.title=P))),"position"in e&&a(e.position)&&(e.position={my:e.position,at:e.position}),"show"in e&&a(e.show)&&(e.show=e.show.jquery?{target:e.show}:e.show===$?{ready:$}:{event:e.show}),"hide"in e&&a(e.hide)&&(e.hide=e.hide.jquery?{target:e.hide}:{event:e.hide}),"style"in e&&a(e.style)&&(e.style={classes:e.style}),s.each(W,function(){this.sanitize&&this.sanitize(e)}),e)}function l(e,t){for(var i,s=0,n=e,a=t.split(".");n=n[a[s++]];)s<a.length&&(i=n);return[i||e,a.pop()]}function c(e,t){var i,s,n;for(i in this.checks)for(s in this.checks[i])(n=new RegExp(s,"i").exec(e))&&(t.push(n),("builtin"===i||this.plugins[i])&&this.checks[i][s].apply(this.plugins[i]||this,t))}function h(e){return Y.concat("").join(e?"-"+e+" ":" ")}function d(e,t){if(t>0)return setTimeout(s.proxy(e,this),t);e.call(this)}function u(e){this.tooltip.hasClass(ee)||(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this.timers.show=d.call(this,function(){this.toggle($,e)},this.options.show.delay))}function p(e){if(!this.tooltip.hasClass(ee)&&!this.destroyed){var t=s(e.relatedTarget),i=t.closest(K)[0]===this.tooltip[0],n=t[0]===this.options.show.target[0];if(clearTimeout(this.timers.show),clearTimeout(this.timers.hide),this!==t[0]&&"mouse"===this.options.position.target&&i||this.options.hide.fixed&&/mouse(out|leave|move)/.test(e.type)&&(i||n))try{e.preventDefault(),e.stopImmediatePropagation()}catch(e){}else this.timers.hide=d.call(this,function(){this.toggle(P,e)},this.options.hide.delay,this)}}function f(e){!this.tooltip.hasClass(ee)&&this.options.hide.inactive&&(clearTimeout(this.timers.inactive),this.timers.inactive=d.call(this,function(){this.hide(e)},this.options.hide.inactive))}function m(e){this.rendered&&this.tooltip[0].offsetWidth>0&&this.reposition(e)}function g(e,i,n){s(t.body).delegate(e,(i.split?i:i.join("."+U+" "))+"."+U,function(){var e=C.api[s.attr(this,V)];e&&!e.disabled&&n.apply(e,arguments)})}function v(e,i,a){var o,l,c,h,d,u=s(t.body),p=e[0]===t?u:e,f=e.metadata?e.metadata(a.metadata):I,m="html5"===a.metadata.type&&f?f[a.metadata.name]:I,g=e.data(a.metadata.name||"qtipopts");try{g="string"==typeof g?s.parseJSON(g):g}catch(e){}if(h=s.extend($,{},C.defaults,a,"object"==typeof g?r(g):I,r(m||f)),l=h.position,h.id=i,"boolean"==typeof h.content.text){if(c=e.attr(h.content.attr),h.content.attr===P||!c)return P;h.content.text=c}if(l.container.length||(l.container=u),l.target===P&&(l.target=p),h.show.target===P&&(h.show.target=p),h.show.solo===$&&(h.show.solo=l.container.closest("body")),h.hide.target===P&&(h.hide.target=p),h.position.viewport===$&&(h.position.viewport=l.container),l.container=l.container.eq(0),l.at=new D(l.at,$),l.my=new D(l.my),e.data(U))if(h.overwrite)e.qtip2("destroy",!0);else if(h.overwrite===P)return P;return e.attr(B,i),h.suppress&&(d=e.attr("title"))&&e.removeAttr("title").attr(ie,d).attr("title",""),o=new n(e,h,i,!!c),e.data(U,o),o}function _(e){return e.charAt(0).toUpperCase()+e.slice(1)}function b(e,t){var s,n,a=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+ve.join(a+" ")+a).split(" "),r=0;if(ge[t])return e.css(ge[t]);for(;s=o[r++];)if((n=e.css(s))!==i)return ge[t]=s,n}function y(e,t){return Math.ceil(parseFloat(b(e,t)))}function w(e,t){this._ns="tip",this.options=t,this.offset=t.offset,this.size=[t.width,t.height],this.init(this.qtip=e)}function k(e,t){this.options=t,this._ns="-modal",this.init(this.qtip=e)}function x(e){this._ns="ie6",this.init(this.qtip=e)}var C,j,D,T,S,$=!0,P=!1,I=null,E="x",M="y",N="width",A="height",L="top",O="left",z="bottom",R="right",H="center",F="flipinvert",q="shift",W={},U="qtip",B="data-hasqtip",V="data-qtip-id",Y=["ui-widget","ui-tooltip"],K="."+U,Q="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),X=U+"-fixed",G=U+"-default",J=U+"-focus",Z=U+"-hover",ee=U+"-disabled",te="_replacedByqTip",ie="oldtitle",se={ie:function(){for(var e=4,i=t.createElement("div");(i.innerHTML="<!--[if gt IE "+e+"]><i></i><![endif]-->")&&i.getElementsByTagName("i")[0];e+=1);return e>4?e:NaN}(),iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||P};j=n.prototype,j._when=function(e){return s.when.apply(s,e)},j.render=function(e){if(this.rendered||this.destroyed)return this;var t=this,i=this.options,n=this.cache,a=this.elements,o=i.content.text,r=i.content.title,l=i.content.button,c=i.position,h=(this._id,[]);return s.attr(this.target[0],"aria-describedby",this._id),n.posClass=this._createPosClass((this.position={my:c.my,at:c.at}).my),this.tooltip=a.tooltip=s("<div/>",{id:this._id,"class":[U,G,i.style.classes,n.posClass].join(" "),width:i.style.width||"",height:i.style.height||"",tracking:"mouse"===c.target&&c.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":P,"aria-describedby":this._id+"-content","aria-hidden":$}).toggleClass(ee,this.disabled).attr(V,this.id).data(U,this).appendTo(c.container).append(a.content=s("<div />",{"class":U+"-content",id:this._id+"-content","aria-atomic":$})),this.rendered=-1,this.positioning=$,r&&(this._createTitle(),s.isFunction(r)||h.push(this._updateTitle(r,P))),l&&this._createButton(),s.isFunction(o)||h.push(this._updateContent(o,P)),this.rendered=$,this._setWidget(),s.each(W,function(e){var i;"render"===this.initialize&&(i=this(t))&&(t.plugins[e]=i)}),this._unassignEvents(),this._assignEvents(),this._when(h).then(function(){t._trigger("render"),t.positioning=P,t.hiddenDuringWait||!i.show.ready&&!e||t.toggle($,n.event,P),t.hiddenDuringWait=P}),C.api[this.id]=this,this},j.destroy=function(e){function t(){if(!this.destroyed){this.destroyed=$;var e,t=this.target,i=t.attr(ie);this.rendered&&this.tooltip.stop(1,0).find("*").remove().end().remove(),s.each(this.plugins,function(){this.destroy&&this.destroy()});for(e in this.timers)clearTimeout(this.timers[e]);t.removeData(U).removeAttr(V).removeAttr(B).removeAttr("aria-describedby"),this.options.suppress&&i&&t.attr("title",i).removeAttr(ie),this._unassignEvents(),this.options=this.elements=this.cache=this.timers=this.plugins=this.mouse=I,delete C.api[this.id]}}return this.destroyed?this.target:(e===$&&"hide"!==this.triggering||!this.rendered?t.call(this):(this.tooltip.one("tooltiphidden",s.proxy(t,this)),!this.triggering&&this.hide()),this.target)},T=j.checks={builtin:{"^id$":function(e,t,i,n){var a=i===$?C.nextid:i,o=U+"-"+a;a!==P&&a.length>0&&!s("#"+o).length?(this._id=o,this.rendered&&(this.tooltip[0].id=this._id,this.elements.content[0].id=this._id+"-content",this.elements.title[0].id=this._id+"-title")):e[t]=n},"^prerender":function(e,t,i){i&&!this.rendered&&this.render(this.options.show.ready)},"^content.text$":function(e,t,i){this._updateContent(i)},"^content.attr$":function(e,t,i,s){this.options.content.text===this.target.attr(s)&&this._updateContent(this.target.attr(i))},"^content.title$":function(e,t,i){if(!i)return this._removeTitle();i&&!this.elements.title&&this._createTitle(),this._updateTitle(i)},"^content.button$":function(e,t,i){this._updateButton(i)},"^content.title.(text|button)$":function(e,t,i){this.set("content."+t,i)},"^position.(my|at)$":function(e,t,i){"string"==typeof i&&(this.position[t]=e[t]=new D(i,"at"===t))},"^position.container$":function(e,t,i){this.rendered&&this.tooltip.appendTo(i)},"^show.ready$":function(e,t,i){i&&(!this.rendered&&this.render($)||this.toggle($))},"^style.classes$":function(e,t,i,s){this.rendered&&this.tooltip.removeClass(s).addClass(i)},"^style.(width|height)":function(e,t,i){this.rendered&&this.tooltip.css(t,i)},"^style.widget|content.title":function(){this.rendered&&this._setWidget()},"^style.def":function(e,t,i){this.rendered&&this.tooltip.toggleClass(G,!!i)},"^events.(render|show|move|hide|focus|blur)$":function(e,t,i){this.rendered&&this.tooltip[(s.isFunction(i)?"":"un")+"bind"]("tooltip"+t,i)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){if(this.rendered){var e=this.options.position;this.tooltip.attr("tracking","mouse"===e.target&&e.adjust.mouse),this._unassignEvents(),this._assignEvents()}}}},j.get=function(e){if(this.destroyed)return this;var t=l(this.options,e.toLowerCase()),i=t[0][t[1]];return i.precedance?i.string():i};var ne=/^position\.(my|at|adjust|target|container|viewport)|style|content|show\.ready/i,ae=/^prerender|show\.ready/i;j.set=function(e,t){if(this.destroyed)return this;var i,n=this.rendered,a=P,o=this.options;this.checks;return"string"==typeof e?(i=e,e={},e[i]=t):e=s.extend({},e),s.each(e,function(t,i){if(n&&ae.test(t))return void delete e[t];var r,c=l(o,t.toLowerCase());r=c[0][c[1]],c[0][c[1]]=i&&i.nodeType?s(i):i,a=ne.test(t)||a,e[t]=[c[0],c[1],i,r]}),r(o),this.positioning=$,s.each(e,s.proxy(c,this)),this.positioning=P,this.rendered&&this.tooltip[0].offsetWidth>0&&a&&this.reposition("mouse"===o.position.target?I:this.cache.event),this},j._update=function(e,t){var i=this,n=this.cache;return this.rendered&&e?(s.isFunction(e)&&(e=e.call(this.elements.target,n.event,this)||""),s.isFunction(e.then)?(n.waiting=$,e.then(function(e){return n.waiting=P,i._update(e,t)},I,function(e){return i._update(e,t)})):e===P||!e&&""!==e?P:(e.jquery&&e.length>0?t.empty().append(e.css({display:"block",visibility:"visible"})):t.html(e),this._waitForContent(t).then(function(e){i.rendered&&i.tooltip[0].offsetWidth>0&&i.reposition(n.event,!e.length)}))):P},j._waitForContent=function(e){var t=this.cache;return t.waiting=$,(s.fn.imagesLoaded?e.imagesLoaded():s.Deferred().resolve([])).done(function(){t.waiting=P}).promise()},j._updateContent=function(e,t){this._update(e,this.elements.content,t)},j._updateTitle=function(e,t){this._update(e,this.elements.title,t)===P&&this._removeTitle(P)},j._createTitle=function(){var e=this.elements,t=this._id+"-title";e.titlebar&&this._removeTitle(),e.titlebar=s("<div />",{"class":U+"-titlebar "+(this.options.style.widget?h("header"):"")}).append(e.title=s("<div />",{id:t,"class":U+"-title","aria-atomic":$})).insertBefore(e.content).delegate(".qtip-close","mousedown keydown mouseup keyup mouseout",function(e){s(this).toggleClass("ui-state-active ui-state-focus","down"===e.type.substr(-4))}).delegate(".qtip-close","mouseover mouseout",function(e){s(this).toggleClass("ui-state-hover","mouseover"===e.type)}),this.options.content.button&&this._createButton()},j._removeTitle=function(e){var t=this.elements;t.title&&(t.titlebar.remove(),t.titlebar=t.title=t.button=I,e!==P&&this.reposition())},j._createPosClass=function(e){return U+"-pos-"+(e||this.options.position.my).abbrev()},j.reposition=function(i,n){if(!this.rendered||this.positioning||this.destroyed)return this;this.positioning=$;var a,o,r,l,c=this.cache,h=this.tooltip,d=this.options.position,u=d.target,p=d.my,f=d.at,m=d.viewport,g=d.container,v=d.adjust,_=v.method.split(" "),b=h.outerWidth(P),y=h.outerHeight(P),w=0,k=0,x=h.css("position"),C={left:0,top:0},j=h[0].offsetWidth>0,D=i&&"scroll"===i.type,T=s(e),S=g[0].ownerDocument,I=this.mouse;if(s.isArray(u)&&2===u.length)f={x:O,y:L},C={left:u[0],top:u[1]};else if("mouse"===u)f={x:O,y:L},(!v.mouse||this.options.hide.distance)&&c.origin&&c.origin.pageX?i=c.origin:!i||i&&("resize"===i.type||"scroll"===i.type)?i=c.event:I&&I.pageX&&(i=I),"static"!==x&&(C=g.offset()),S.body.offsetWidth!==(e.innerWidth||S.documentElement.clientWidth)&&(o=s(t.body).offset()),C={left:i.pageX-C.left+(o&&o.left||0),top:i.pageY-C.top+(o&&o.top||0)},v.mouse&&D&&I&&(C.left-=(I.scrollX||0)-T.scrollLeft(),C.top-=(I.scrollY||0)-T.scrollTop());else{if("event"===u?i&&i.target&&"scroll"!==i.type&&"resize"!==i.type?c.target=s(i.target):i.target||(c.target=this.elements.target):"event"!==u&&(c.target=s(u.jquery?u:this.elements.target)),u=c.target,u=s(u).eq(0),0===u.length)return this;u[0]===t||u[0]===e?(w=se.iOS?e.innerWidth:u.width(),k=se.iOS?e.innerHeight:u.height(),u[0]===e&&(C={top:(m||u).scrollTop(),left:(m||u).scrollLeft()})):W.imagemap&&u.is("area")?a=W.imagemap(this,u,f,W.viewport?_:P):W.svg&&u&&u[0].ownerSVGElement?a=W.svg(this,u,f,W.viewport?_:P):(w=u.outerWidth(P),k=u.outerHeight(P),C=u.offset()),a&&(w=a.width,k=a.height,o=a.offset,C=a.position),C=this.reposition.offset(u,C,g),(se.iOS>3.1&&se.iOS<4.1||se.iOS>=4.3&&se.iOS<4.33||!se.iOS&&"fixed"===x)&&(C.left-=T.scrollLeft(),C.top-=T.scrollTop()),(!a||a&&a.adjustable!==P)&&(C.left+=f.x===R?w:f.x===H?w/2:0,C.top+=f.y===z?k:f.y===H?k/2:0)}return C.left+=v.x+(p.x===R?-b:p.x===H?-b/2:0),C.top+=v.y+(p.y===z?-y:p.y===H?-y/2:0),W.viewport?(r=C.adjusted=W.viewport(this,C,d,w,k,b,y),o&&r.left&&(C.left+=o.left),o&&r.top&&(C.top+=o.top),r.my&&(this.position.my=r.my)):C.adjusted={left:0,top:0},c.posClass!==(l=this._createPosClass(this.position.my))&&h.removeClass(c.posClass).addClass(c.posClass=l),this._trigger("move",[C,m.elem||m],i)?(delete C.adjusted,n===P||!j||isNaN(C.left)||isNaN(C.top)||"mouse"===u||!s.isFunction(d.effect)?h.css(C):s.isFunction(d.effect)&&(d.effect.call(h,this,s.extend({},C)),h.queue(function(e){s(this).css({opacity:"",height:""}),se.ie&&this.style.removeAttribute("filter"),e()})),this.positioning=P,this):this},j.reposition.offset=function(e,i,n){function a(e,t){i.left+=t*e.scrollLeft(),i.top+=t*e.scrollTop()}if(!n[0])return i;var o,r,l,c,h=s(e[0].ownerDocument),d=!!se.ie&&"CSS1Compat"!==t.compatMode,u=n[0];do{"static"!==(r=s.css(u,"position"))&&("fixed"===r?(l=u.getBoundingClientRect(),a(h,-1)):(l=s(u).position(),l.left+=parseFloat(s.css(u,"borderLeftWidth"))||0,l.top+=parseFloat(s.css(u,"borderTopWidth"))||0),i.left-=l.left+(parseFloat(s.css(u,"marginLeft"))||0),i.top-=l.top+(parseFloat(s.css(u,"marginTop"))||0),o||"hidden"===(c=s.css(u,"overflow"))||"visible"===c||(o=s(u)))}while(u=u.offsetParent);return o&&(o[0]!==h[0]||d)&&a(o,1),i};var oe=(D=j.reposition.Corner=function(e,t){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,H).toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase(),this.forceY=!!t;var i=e.charAt(0);this.precedance="t"===i||"b"===i?M:E}).prototype;oe.invert=function(e,t){this[e]=this[e]===O?R:this[e]===R?O:t||this[e]},oe.string=function(e){var t=this.x,i=this.y,s=t!==i?"center"===t||"center"!==i&&(this.precedance===M||this.forceY)?[i,t]:[t,i]:[t];return!1!==e?s.join(" "):s},oe.abbrev=function(){var e=this.string(!1);return e[0].charAt(0)+(e[1]&&e[1].charAt(0)||"")},oe.clone=function(){return new D(this.string(),this.forceY)},j.toggle=function(e,i){var n=this.cache,a=this.options,o=this.tooltip;if(i){if(/over|enter/.test(i.type)&&n.event&&/out|leave/.test(n.event.type)&&a.show.target.add(i.target).length===a.show.target.length&&o.has(i.relatedTarget).length)return this;n.event=s.event.fix(i)}if(this.waiting&&!e&&(this.hiddenDuringWait=$),!this.rendered)return e?this.render(1):this;if(this.destroyed||this.disabled)return this;var r,l,c,h=e?"show":"hide",d=this.options[h],u=(this.options[e?"hide":"show"],this.options.position),p=this.options.content,f=this.tooltip.css("width"),m=this.tooltip.is(":visible"),g=e||1===d.target.length,v=!i||d.target.length<2||n.target[0]===i.target;return(typeof e).search("boolean|number")&&(e=!m),r=!o.is(":animated")&&m===e&&v,l=r?I:!!this._trigger(h,[90]),this.destroyed?this:(l!==P&&e&&this.focus(i),!l||r?this:(s.attr(o[0],"aria-hidden",!e),e?(this.mouse&&(n.origin=s.event.fix(this.mouse)),s.isFunction(p.text)&&this._updateContent(p.text,P),s.isFunction(p.title)&&this._updateTitle(p.title,P),!S&&"mouse"===u.target&&u.adjust.mouse&&(s(t).bind("mousemove."+U,this._storeMouse),S=$),f||o.css("width",o.outerWidth(P)),this.reposition(i,arguments[2]),f||o.css("width",""),d.solo&&("string"==typeof d.solo?s(d.solo):s(K,d.solo)).not(o).not(d.target).qtip2("hide",s.Event("tooltipsolo"))):(clearTimeout(this.timers.show),delete n.origin,S&&!s(K+'[tracking="true"]:visible',d.solo).not(o).length&&(s(t).unbind("mousemove."+U),S=P),this.blur(i)),c=s.proxy(function(){e?(se.ie&&o[0].style.removeAttribute("filter"),o.css("overflow",""),"string"==typeof d.autofocus&&s(this.options.show.autofocus,o).focus(),this.options.show.target.trigger("qtip-"+this.id+"-inactive")):o.css({display:"",visibility:"",opacity:"",left:"",top:""}),this._trigger(e?"visible":"hidden")},this),d.effect===P||g===P?(o[h](),c()):s.isFunction(d.effect)?(o.stop(1,1),d.effect.call(o,this),o.queue("fx",function(e){c(),e()})):o.fadeTo(90,e?1:0,c),e&&d.target.trigger("qtip-"+this.id+"-inactive"),this))},j.show=function(e){return this.toggle($,e)},j.hide=function(e){return this.toggle(P,e)},j.focus=function(e){if(!this.rendered||this.destroyed)return this;var t=s(K),i=this.tooltip,n=parseInt(i[0].style.zIndex,10),a=C.zindex+t.length;return i.hasClass(J)||this._trigger("focus",[a],e)&&(n!==a&&(t.each(function(){this.style.zIndex>n&&(this.style.zIndex=this.style.zIndex-1)}),t.filter("."+J).qtip2("blur",e)),i.addClass(J)[0].style.zIndex=a),this},j.blur=function(e){return!this.rendered||this.destroyed?this:(this.tooltip.removeClass(J),this._trigger("blur",[this.tooltip.css("zIndex")],e),this)},j.disable=function(e){return this.destroyed?this:("toggle"===e?e=!(this.rendered?this.tooltip.hasClass(ee):this.disabled):"boolean"!=typeof e&&(e=$),this.rendered&&this.tooltip.toggleClass(ee,e).attr("aria-disabled",e),this.disabled=!!e,this)},j.enable=function(){return this.disable(P)},j._createButton=function(){var e=this,t=this.elements,i=t.tooltip,n=this.options.content.button,a="string"==typeof n,o=a?n:"Close tooltip";t.button&&t.button.remove(),n.jquery?t.button=n:t.button=s("<a />",{"class":"qtip-close "+(this.options.style.widget?"":U+"-icon"),title:o,"aria-label":o}).prepend(s("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),t.button.appendTo(t.titlebar||i).attr("role","button").click(function(t){return i.hasClass(ee)||e.hide(t),P})},j._updateButton=function(e){if(!this.rendered)return P;var t=this.elements.button;e?this._createButton():t.remove()},j._setWidget=function(){var e=this.options.style.widget,t=this.elements,i=t.tooltip,s=i.hasClass(ee);i.removeClass(ee),ee=e?"ui-state-disabled":"qtip-disabled",i.toggleClass(ee,s),i.toggleClass("ui-helper-reset "+h(),e).toggleClass(G,this.options.style.def&&!e),t.content&&t.content.toggleClass(h("content"),e),t.titlebar&&t.titlebar.toggleClass(h("header"),e),t.button&&t.button.toggleClass(U+"-icon",!e)},j._storeMouse=function(e){return(this.mouse=s.event.fix(e)).type="mousemove",this},j._bind=function(e,t,i,n,a){if(e&&i&&t.length){var o="."+this._id+(n?"-"+n:"");return s(e).bind((t.split?t:t.join(o+" "))+o,s.proxy(i,a||this)),this}},j._unbind=function(e,t){return e&&s(e).unbind("."+this._id+(t?"-"+t:"")),this},j._trigger=function(e,t,i){var n=s.Event("tooltip"+e);return n.originalEvent=i&&s.extend({},i)||this.cache.event||I,this.triggering=e,this.tooltip.trigger(n,[this].concat(t||[])),this.triggering=P,!n.isDefaultPrevented()},j._bindEvents=function(e,t,i,n,a,o){var r=i.filter(n).add(n.filter(i)),l=[];r.length&&(s.each(t,function(t,i){var n=s.inArray(i,e);n>-1&&l.push(e.splice(n,1)[0])}),l.length&&(this._bind(r,l,function(e){(!!this.rendered&&this.tooltip[0].offsetWidth>0?o:a).call(this,e)}),i=i.not(r),n=n.not(r))),this._bind(i,e,a),this._bind(n,t,o)},j._assignInitialEvents=function(e){function t(e){if(this.disabled||this.destroyed)return P;this.cache.event=e&&s.event.fix(e),this.cache.target=e&&s(e.target),clearTimeout(this.timers.show),this.timers.show=d.call(this,function(){this.render("object"==typeof e||i.show.ready)},i.prerender?0:i.show.delay)}var i=this.options,n=i.show.target,a=i.hide.target,o=i.show.event?s.trim(""+i.show.event).split(" "):[],r=i.hide.event?s.trim(""+i.hide.event).split(" "):[];this._bind(this.elements.target,["remove","removeqtip"],function(){this.destroy(!0)},"destroy"),/mouse(over|enter)/i.test(i.show.event)&&!/mouse(out|leave)/i.test(i.hide.event)&&r.push("mouseleave"),this._bind(n,"mousemove",function(e){this._storeMouse(e),this.cache.onTarget=$}),this._bindEvents(o,r,n,a,t,function(){if(!this.timers)return P;clearTimeout(this.timers.show)}),(i.show.ready||i.prerender)&&t.call(this,e)},j._assignEvents=function(){var i=this,n=this.options,a=n.position,o=this.tooltip,r=n.show.target,l=n.hide.target,c=a.container,h=a.viewport,d=s(t),g=(s(t.body),s(e)),v=n.show.event?s.trim(""+n.show.event).split(" "):[],_=n.hide.event?s.trim(""+n.hide.event).split(" "):[];s.each(n.events,function(e,t){i._bind(o,"toggle"===e?["tooltipshow","tooltiphide"]:["tooltip"+e],t,null,o)}),/mouse(out|leave)/i.test(n.hide.event)&&"window"===n.hide.leave&&this._bind(d,["mouseout","blur"],function(e){/select|option/.test(e.target.nodeName)||e.relatedTarget||this.hide(e)}),n.hide.fixed?l=l.add(o.addClass(X)):/mouse(over|enter)/i.test(n.show.event)&&this._bind(l,"mouseleave",function(){clearTimeout(this.timers.show)}),(""+n.hide.event).indexOf("unfocus")>-1&&this._bind(c.closest("html"),["mousedown","touchstart"],function(e){var t=s(e.target),i=this.rendered&&!this.tooltip.hasClass(ee)&&this.tooltip[0].offsetWidth>0,n=t.parents(K).filter(this.tooltip[0]).length>0;t[0]===this.target[0]||t[0]===this.tooltip[0]||n||this.target.has(t[0]).length||!i||this.hide(e)}),"number"==typeof n.hide.inactive&&(this._bind(r,"qtip-"+this.id+"-inactive",f,"inactive"),this._bind(l.add(o),C.inactiveEvents,f)),this._bindEvents(v,_,r,l,u,p),this._bind(r.add(o),"mousemove",function(e){if("number"==typeof n.hide.distance){
var t=this.cache.origin||{},i=this.options.hide.distance,s=Math.abs;(s(e.pageX-t.pageX)>=i||s(e.pageY-t.pageY)>=i)&&this.hide(e)}this._storeMouse(e)}),"mouse"===a.target&&a.adjust.mouse&&(n.hide.event&&this._bind(r,["mouseenter","mouseleave"],function(e){if(!this.cache)return P;this.cache.onTarget="mouseenter"===e.type}),this._bind(d,"mousemove",function(e){this.rendered&&this.cache.onTarget&&!this.tooltip.hasClass(ee)&&this.tooltip[0].offsetWidth>0&&this.reposition(e)})),(a.adjust.resize||h.length)&&this._bind(s.event.special.resize?h:g,"resize",m),a.adjust.scroll&&this._bind(g.add(a.container),"scroll",m)},j._unassignEvents=function(){var i=this.options,n=i.show.target,a=i.hide.target,o=s.grep([this.elements.target[0],this.rendered&&this.tooltip[0],i.position.container[0],i.position.viewport[0],i.position.container.closest("html")[0],e,t],function(e){return"object"==typeof e});n&&n.toArray&&(o=o.concat(n.toArray())),a&&a.toArray&&(o=o.concat(a.toArray())),this._unbind(o)._unbind(o,"destroy")._unbind(o,"inactive")},s(function(){g(K,["mouseenter","mouseleave"],function(e){var t="mouseenter"===e.type,i=s(e.currentTarget),n=s(e.relatedTarget||e.target),a=this.options;t?(this.focus(e),i.hasClass(X)&&!i.hasClass(ee)&&clearTimeout(this.timers.hide)):"mouse"===a.position.target&&a.position.adjust.mouse&&a.hide.event&&a.show.target&&!n.closest(a.show.target[0]).length&&this.hide(e),i.toggleClass(Z,t)}),g("["+V+"]",Q,f)}),C=s.fn.qtip2=function(e,t,n){var a=(""+e).toLowerCase(),o=I,l=s.makeArray(arguments).slice(1),c=l[l.length-1],h=this[0]?s.data(this[0],U):I;return!arguments.length&&h||"api"===a?h:"string"==typeof e?(this.each(function(){var e=s.data(this,U);if(!e)return $;if(c&&c.timeStamp&&(e.cache.event=c),!t||"option"!==a&&"options"!==a)e[a]&&e[a].apply(e,l);else{if(n===i&&!s.isPlainObject(t))return o=e.get(t),P;e.set(t,n)}}),o!==I?o:this):"object"!=typeof e&&arguments.length?void 0:(h=r(s.extend($,{},e)),this.each(function(e){var t,i;if(i=s.isArray(h.id)?h.id[e]:h.id,i=!i||i===P||i.length<1||C.api[i]?C.nextid++:i,(t=v(s(this),i,h))===P)return $;C.api[i]=t,s.each(W,function(){"initialize"===this.initialize&&this(t)}),t._assignInitialEvents(c)}))},s.qtip2=n,C.api={},s.each({attr:function(e,t){if(this.length){var i=this[0],n="title",a=s.data(i,"qtip");if(e===n&&a&&"object"==typeof a&&a.options.suppress)return arguments.length<2?s.attr(i,ie):(a&&a.options.content.attr===n&&a.cache.attr&&a.set("content.text",t),this.attr(ie,t))}return s.fn["attr"+te].apply(this,arguments)},clone:function(e){var t=(s([]),s.fn["clone"+te].apply(this,arguments));return e||t.filter("["+ie+"]").attr("title",function(){return s.attr(this,ie)}).removeAttr(ie),t}},function(e,t){if(!t||s.fn[e+te])return $;var i=s.fn[e+te]=s.fn[e];s.fn[e]=function(){return t.apply(this,arguments)||i.apply(this,arguments)}}),s.ui||(s["cleanData"+te]=s.cleanData,s.cleanData=function(e){for(var t,i=0;(t=s(e[i])).length;i++)if(t.attr(B))try{t.triggerHandler("removeqtip")}catch(e){}s["cleanData"+te].apply(this,arguments)}),C.version="2.2.1",C.nextid=0,C.inactiveEvents=Q,C.zindex=15e3,C.defaults={prerender:P,id:P,overwrite:$,suppress:$,content:{text:$,attr:"title",title:P,button:P},position:{my:"top left",at:"bottom right",target:P,container:P,viewport:P,adjust:{x:0,y:0,mouse:$,scroll:$,resize:$,method:"flipinvert flipinvert"},effect:function(e,t){s(this).animate(t,{duration:200,queue:P})}},show:{target:P,event:"mouseenter",effect:$,delay:90,solo:P,ready:P,autofocus:P},hide:{target:P,event:"mouseleave",effect:$,delay:0,fixed:P,inactive:P,leave:"window",distance:P},style:{classes:"",widget:P,width:P,height:P,def:$},events:{render:I,move:I,show:I,hide:I,toggle:I,visible:I,hidden:I,focus:I,blur:I}};var re,le="margin",ce="border",he="color",de="background-color",ue="transparent",pe=" !important",fe=!!t.createElement("canvas").getContext,me=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,ge={},ve=["Webkit","O","Moz","ms"];if(fe)var _e=e.devicePixelRatio||1,be=function(){var e=t.createElement("canvas").getContext("2d");return e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1}(),ye=_e/be;else var we=function(e,t,i){return"<qtipvml:"+e+' xmlns="urn:schemas-microsoft.com:vml" class="qtip-vml" '+(t||"")+' style="behavior: url(#default#VML); '+(i||"")+'" />'};s.extend(w.prototype,{init:function(e){var t,i;i=this.element=e.elements.tip=s("<div />",{"class":U+"-tip"}).prependTo(e.tooltip),fe?(t=s("<canvas />").appendTo(this.element)[0].getContext("2d"),t.lineJoin="miter",t.miterLimit=1e5,t.save()):(t=we("shape",'coordorigin="0,0"',"position:absolute;"),this.element.html(t+t),e._bind(s("*",i).add(i),["click","mousedown"],function(e){e.stopPropagation()},this._ns)),e._bind(e.tooltip,"tooltipmove",this.reposition,this._ns,this),this.create()},_swapDimensions:function(){this.size[0]=this.options.height,this.size[1]=this.options.width},_resetDimensions:function(){this.size[0]=this.options.width,this.size[1]=this.options.height},_useTitle:function(e){var t=this.qtip.elements.titlebar;return t&&(e.y===L||e.y===H&&this.element.position().top+this.size[1]/2+this.options.offset<t.outerHeight($))},_parseCorner:function(e){var t=this.qtip.options.position.my;return e===P||t===P?e=P:e===$?e=new D(t.string()):e.string||(e=new D(e),e.fixed=$),e},_parseWidth:function(e,t,i){var s=this.qtip.elements,n=ce+_(t)+"Width";return(i?y(i,n):y(s.content,n)||y(this._useTitle(e)&&s.titlebar||s.content,n)||y(s.tooltip,n))||0},_parseRadius:function(e){var t=this.qtip.elements,i=ce+_(e.y)+_(e.x)+"Radius";return se.ie<9?0:y(this._useTitle(e)&&t.titlebar||t.content,i)||y(t.tooltip,i)||0},_invalidColour:function(e,t,i){var s=e.css(t);return!s||i&&s===e.css(i)||me.test(s)?P:s},_parseColours:function(e){var t=this.qtip.elements,i=this.element.css("cssText",""),n=ce+_(e[e.precedance])+_(he),a=this._useTitle(e)&&t.titlebar||t.content,o=this._invalidColour,r=[];return r[0]=o(i,de)||o(a,de)||o(t.content,de)||o(t.tooltip,de)||i.css(de),r[1]=o(i,n,he)||o(a,n,he)||o(t.content,n,he)||o(t.tooltip,n,he)||t.tooltip.css(n),s("*",i).add(i).css("cssText",de+":"+ue+pe+";"+ce+":0"+pe+";"),r},_calculateSize:function(e){var t,i,s,n=e.precedance===M,a=this.options.width,o=this.options.height,r="c"===e.abbrev(),l=(n?a:o)*(r?.5:1),c=Math.pow,h=Math.round,d=Math.sqrt(c(l,2)+c(o,2)),u=[this.border/l*d,this.border/o*d];return u[2]=Math.sqrt(c(u[0],2)-c(this.border,2)),u[3]=Math.sqrt(c(u[1],2)-c(this.border,2)),t=d+u[2]+u[3]+(r?0:u[0]),i=t/d,s=[h(i*a),h(i*o)],n?s:s.reverse()},_calculateTip:function(e,t,i){i=i||1,t=t||this.size;var s=t[0]*i,n=t[1]*i,a=Math.ceil(s/2),o=Math.ceil(n/2),r={br:[0,0,s,n,s,0],bl:[0,0,s,0,0,n],tr:[0,n,s,0,s,n],tl:[0,0,0,n,s,n],tc:[0,n,a,0,s,n],bc:[0,0,s,0,a,n],rc:[0,0,s,o,0,n],lc:[s,0,s,n,0,o]};return r.lt=r.br,r.rt=r.bl,r.lb=r.tr,r.rb=r.tl,r[e.abbrev()]},_drawCoords:function(e,t){e.beginPath(),e.moveTo(t[0],t[1]),e.lineTo(t[2],t[3]),e.lineTo(t[4],t[5]),e.closePath()},create:function(){var e=this.corner=(fe||se.ie)&&this._parseCorner(this.options.corner);return(this.enabled=!!this.corner&&"c"!==this.corner.abbrev())&&(this.qtip.cache.corner=e.clone(),this.update()),this.element.toggle(this.enabled),this.corner},update:function(t,i){if(!this.enabled)return this;var n,a,o,r,l,c,h,d,u=this.qtip.elements,p=this.element,f=p.children(),m=this.options,g=this.size,v=m.mimic,_=Math.round;t||(t=this.qtip.cache.corner||this.corner),v===P?v=t:(v=new D(v),v.precedance=t.precedance,"inherit"===v.x?v.x=t.x:"inherit"===v.y?v.y=t.y:v.x===v.y&&(v[t.precedance]=t[t.precedance])),a=v.precedance,t.precedance===E?this._swapDimensions():this._resetDimensions(),n=this.color=this._parseColours(t),n[1]!==ue?(d=this.border=this._parseWidth(t,t[t.precedance]),m.border&&d<1&&!me.test(n[1])&&(n[0]=n[1]),this.border=d=m.border!==$?m.border:d):this.border=d=0,h=this.size=this._calculateSize(t),p.css({width:h[0],height:h[1],lineHeight:h[1]+"px"}),c=t.precedance===M?[_(v.x===O?d:v.x===R?h[0]-g[0]-d:(h[0]-g[0])/2),_(v.y===L?h[1]-g[1]:0)]:[_(v.x===O?h[0]-g[0]:0),_(v.y===L?d:v.y===z?h[1]-g[1]-d:(h[1]-g[1])/2)],fe?(o=f[0].getContext("2d"),o.restore(),o.save(),o.clearRect(0,0,6e3,6e3),r=this._calculateTip(v,g,ye),l=this._calculateTip(v,this.size,ye),f.attr(N,h[0]*ye).attr(A,h[1]*ye),f.css(N,h[0]).css(A,h[1]),this._drawCoords(o,l),o.fillStyle=n[1],o.fill(),o.translate(c[0]*ye,c[1]*ye),this._drawCoords(o,r),o.fillStyle=n[0],o.fill()):(r=this._calculateTip(v),r="m"+r[0]+","+r[1]+" l"+r[2]+","+r[3]+" "+r[4]+","+r[5]+" xe",c[2]=d&&/^(r|b)/i.test(t.string())?8===se.ie?2:1:0,f.css({coordsize:h[0]+d+" "+(h[1]+d),antialias:""+(v.string().indexOf(H)>-1),left:c[0]-c[2]*Number(a===E),top:c[1]-c[2]*Number(a===M),width:h[0]+d,height:h[1]+d}).each(function(e){var t=s(this);t[t.prop?"prop":"attr"]({coordsize:h[0]+d+" "+(h[1]+d),path:r,fillcolor:n[0],filled:!!e,stroked:!e}).toggle(!(!d&&!e)),!e&&t.html(we("stroke",'weight="'+2*d+'px" color="'+n[1]+'" miterlimit="1000" joinstyle="miter"'))})),e.opera&&setTimeout(function(){u.tip.css({display:"inline-block",visibility:"visible"})},1),i!==P&&this.calculate(t,h)},calculate:function(e,t){if(!this.enabled)return P;var i,n,a=this,o=this.qtip.elements,r=this.element,l=this.options.offset,c=(o.tooltip.hasClass("ui-widget"),{});return e=e||this.corner,i=e.precedance,t=t||this._calculateSize(e),n=[e.x,e.y],i===E&&n.reverse(),s.each(n,function(s,n){var r,h,d;n===H?(r=i===M?O:L,c[r]="50%",c[le+"-"+r]=-Math.round(t[i===M?0:1]/2)+l):(r=a._parseWidth(e,n,o.tooltip),h=a._parseWidth(e,n,o.content),d=a._parseRadius(e),c[n]=Math.max(-a.border,s?h:l+(d>r?d:-r)))}),c[e[i]]-=t[i===E?0:1],r.css({margin:"",top:"",bottom:"",left:"",right:""}).css(c),c},reposition:function(e,t,s){function n(e,t,i,s,n){e===q&&c.precedance===t&&h[s]&&c[i]!==H?c.precedance=c.precedance===E?M:E:e!==q&&h[s]&&(c[t]=c[t]===H?h[s]>0?s:n:c[t]===s?n:s)}function a(e,t,n){c[e]===H?m[le+"-"+t]=f[e]=o[le+"-"+t]-h[t]:(r=o[n]!==i?[h[t],-o[t]]:[-h[t],o[t]],(f[e]=Math.max(r[0],r[1]))>r[0]&&(s[t]-=h[t],f[t]=P),m[o[n]!==i?n:t]=f[e])}if(this.enabled){var o,r,l=t.cache,c=this.corner.clone(),h=s.adjusted,d=t.options.position.adjust.method.split(" "),u=d[0],p=d[1]||d[0],f={left:P,top:P,x:0,y:0},m={};this.corner.fixed!==$&&(n(u,E,M,O,R),n(p,M,E,L,z),c.string()===l.corner.string()&&l.cornerTop===h.top&&l.cornerLeft===h.left||this.update(c,P)),o=this.calculate(c),o.right!==i&&(o.left=-o.right),o.bottom!==i&&(o.top=-o.bottom),o.user=this.offset,(f.left=u===q&&!!h.left)&&a(E,O,R),(f.top=p===q&&!!h.top)&&a(M,L,z),this.element.css(m).toggle(!(f.x&&f.y||c.x===H&&f.y||c.y===H&&f.x)),s.left-=o.left.charAt?o.user:u!==q||f.top||!f.left&&!f.top?o.left+this.border:0,s.top-=o.top.charAt?o.user:p!==q||f.left||!f.left&&!f.top?o.top+this.border:0,l.cornerLeft=h.left,l.cornerTop=h.top,l.corner=c.clone()}},destroy:function(){this.qtip._unbind(this.qtip.tooltip,this._ns),this.qtip.elements.tip&&this.qtip.elements.tip.find("*").remove().end().remove()}}),re=W.tip=function(e){return new w(e,e.options.style.tip)},re.initialize="render",re.sanitize=function(e){if(e.style&&"tip"in e.style){var t=e.style.tip;"object"!=typeof t&&(t=e.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=$)}},T.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){this.create(),this.qtip.reposition()},"^style.tip.(height|width)$":function(e){this.size=[e.width,e.height],this.update(),this.qtip.reposition()},"^content.title|style.(classes|widget)$":function(){this.update()}},s.extend($,C.defaults,{style:{tip:{corner:$,mimic:P,width:6,height:6,border:$,offset:0}}}),W.viewport=function(i,s,n,a,o,r,l){function c(e,t,i,n,a,o,r,l,c){var h=s[a],_=y[e],b=w[e],k=i===q,x=_===a?c:_===o?-c:-c/2,C=b===a?l:b===o?-l:-l/2,j=g[a]+v[a]-(p?0:u[a]),D=j-h,T=h+c-(r===N?f:m)-j,S=x-(y.precedance===e||_===y[t]?C:0)-(b===H?l/2:0);return k?(S=(_===a?1:-1)*x,s[a]+=D>0?D:T>0?-T:0,s[a]=Math.max(-u[a]+v[a],h-S,Math.min(Math.max(-u[a]+v[a]+(r===N?f:m),h+S),s[a],"center"===_?h-x:1e9))):(n*=i===F?2:0,D>0&&(_!==a||T>0)?(s[a]-=S+n,d.invert(e,a)):T>0&&(_!==o||D>0)&&(s[a]-=(_===H?-S:S)+n,d.invert(e,o)),s[a]<g&&-s[a]>T&&(s[a]=h,d=y.clone())),s[a]-h}var h,d,u,p,f,m,g,v,_=n.target,b=i.elements.tooltip,y=n.my,w=n.at,k=n.adjust,x=k.method.split(" "),C=x[0],j=x[1]||x[0],D=n.viewport,T=n.container,S=(i.cache,{left:0,top:0});return D.jquery&&_[0]!==e&&_[0]!==t.body&&"none"!==k.method?(u=T.offset()||S,p="static"===T.css("position"),h="fixed"===b.css("position"),f=D[0]===e?D.width():D.outerWidth(P),m=D[0]===e?D.height():D.outerHeight(P),g={left:h?0:D.scrollLeft(),top:h?0:D.scrollTop()},v=D.offset()||S,"shift"===C&&"shift"===j||(d=y.clone()),S={left:"none"!==C?c(E,M,C,k.x,O,R,N,a,r):0,top:"none"!==j?c(M,E,j,k.y,L,z,A,o,l):0,my:d}):S},W.polys={polygon:function(e,t){var i,s,n,a={width:0,height:0,position:{top:1e10,right:0,bottom:0,left:1e10},adjustable:P},o=0,r=[],l=1,c=1,h=0,d=0;for(o=e.length;o--;)i=[parseInt(e[--o],10),parseInt(e[o+1],10)],i[0]>a.position.right&&(a.position.right=i[0]),i[0]<a.position.left&&(a.position.left=i[0]),i[1]>a.position.bottom&&(a.position.bottom=i[1]),i[1]<a.position.top&&(a.position.top=i[1]),r.push(i);if(s=a.width=Math.abs(a.position.right-a.position.left),n=a.height=Math.abs(a.position.bottom-a.position.top),"c"===t.abbrev())a.position={left:a.position.left+a.width/2,top:a.position.top+a.height/2};else{for(;s>0&&n>0&&l>0&&c>0;)for(s=Math.floor(s/2),n=Math.floor(n/2),t.x===O?l=s:t.x===R?l=a.width-s:l+=Math.floor(s/2),t.y===L?c=n:t.y===z?c=a.height-n:c+=Math.floor(n/2),o=r.length;o--&&!(r.length<2);)h=r[o][0]-a.position.left,d=r[o][1]-a.position.top,(t.x===O&&h>=l||t.x===R&&h<=l||t.x===H&&(h<l||h>a.width-l)||t.y===L&&d>=c||t.y===z&&d<=c||t.y===H&&(d<c||d>a.height-c))&&r.splice(o,1);a.position={left:r[0][0],top:r[0][1]}}return a},rect:function(e,t,i,s){return{width:Math.abs(i-e),height:Math.abs(s-t),position:{left:Math.min(e,i),top:Math.min(t,s)}}},_angles:{tc:1.5,tr:7/4,tl:5/4,bc:.5,br:.25,bl:.75,rc:2,lc:1,c:0},ellipse:function(e,t,i,s,n){var a=W.polys._angles[n.abbrev()],o=0===a?0:i*Math.cos(a*Math.PI),r=s*Math.sin(a*Math.PI);return{width:2*i-Math.abs(o),height:2*s-Math.abs(r),position:{left:e+o,top:t+r},adjustable:P}},circle:function(e,t,i,s){return W.polys.ellipse(e,t,i,i,s)}},W.imagemap=function(e,t,i){t.jquery||(t=s(t));var n,a,o,r,l,c=(t.attr("shape")||"rect").toLowerCase().replace("poly","polygon"),h=s('img[usemap="#'+t.parent("map").attr("name")+'"]'),d=s.trim(t.attr("coords")),u=d.replace(/,$/,"").split(",");if(!h.length)return P;if("polygon"===c)r=W.polys.polygon(u,i);else{if(!W.polys[c])return P;for(o=-1,l=u.length,a=[];++o<l;)a.push(parseInt(u[o],10));r=W.polys[c].apply(this,a.concat(i))}return n=h.offset(),n.left+=Math.ceil((h.outerWidth(P)-h.width())/2),n.top+=Math.ceil((h.outerHeight(P)-h.height())/2),r.position.left+=n.left,r.position.top+=n.top,r},W.svg=function(e,i,n){for(var a,o,r,l,c,h,d,u,p,f=(s(t),i[0]),m=s(f.ownerSVGElement),g=f.ownerDocument,v=(parseInt(i.css("stroke-width"),10)||0)/2;!f.getBBox;)f=f.parentNode;if(!f.getBBox||!f.parentNode)return P;switch(f.nodeName){case"ellipse":case"circle":u=W.polys.ellipse(f.cx.baseVal.value,f.cy.baseVal.value,(f.rx||f.r).baseVal.value+v,(f.ry||f.r).baseVal.value+v,n);break;case"line":case"polygon":case"polyline":for(d=f.points||[{x:f.x1.baseVal.value,y:f.y1.baseVal.value},{x:f.x2.baseVal.value,y:f.y2.baseVal.value}],u=[],h=-1,l=d.numberOfItems||d.length;++h<l;)c=d.getItem?d.getItem(h):d[h],u.push.apply(u,[c.x,c.y]);u=W.polys.polygon(u,n);break;default:u=f.getBBox(),u={width:u.width,height:u.height,position:{left:u.x,top:u.y}}}return p=u.position,m=m[0],m.createSVGPoint&&(o=f.getScreenCTM(),d=m.createSVGPoint(),d.x=p.left,d.y=p.top,r=d.matrixTransform(o),p.left=r.x,p.top=r.y),g!==t&&"mouse"!==e.position.target&&(a=s((g.defaultView||g.parentWindow).frameElement).offset())&&(p.left+=a.left,p.top+=a.top),g=s(g),p.left+=g.scrollLeft(),p.top+=g.scrollTop(),u};var ke,xe,Ce="qtip-modal",je="."+Ce;xe=function(){function e(e){if(s.expr[":"].focusable)return s.expr[":"].focusable;var t,i,n,a=!isNaN(s.attr(e,"tabindex")),o=e.nodeName&&e.nodeName.toLowerCase();return"area"===o?(t=e.parentNode,i=t.name,!(!e.href||!i||"map"!==t.nodeName.toLowerCase())&&(!!(n=s("img[usemap=#"+i+"]")[0])&&n.is(":visible"))):/input|select|textarea|button|object/.test(o)?!e.disabled:"a"===o?e.href||a:a}function i(e){h.length<1&&e.length?e.not("body").blur():h.first().focus()}function n(e){if(l.is(":visible")){var t,n=s(e.target),r=a.tooltip,c=n.closest(K);t=c.length<1?P:parseInt(c[0].style.zIndex,10)>parseInt(r[0].style.zIndex,10),t||n.closest(K)[0]===r[0]||i(n),o=e.target===h[h.length-1]}}var a,o,r,l,c=this,h={};s.extend(c,{init:function(){return l=c.elem=s("<div />",{id:"qtip-overlay",html:"<div></div>",mousedown:function(){return P}}).hide(),s(t.body).bind("focusin"+je,n),s(t).bind("keydown"+je,function(e){a&&a.options.show.modal.escape&&27===e.keyCode&&a.hide(e)}),l.bind("click"+je,function(e){a&&a.options.show.modal.blur&&a.hide(e)}),c},update:function(t){a=t,h=t.options.show.modal.stealfocus!==P?t.tooltip.find("*").filter(function(){return e(this)}):[]},toggle:function(e,n,o){var h=(s(t.body),e.tooltip),d=e.options.show.modal,u=d.effect,p=n?"show":"hide",f=l.is(":visible"),m=s(je).filter(":visible:not(:animated)").not(h);return c.update(e),n&&d.stealfocus!==P&&i(s(":focus")),l.toggleClass("blurs",d.blur),n&&l.appendTo(t.body),l.is(":animated")&&f===n&&r!==P||!n&&m.length?c:(l.stop($,P),s.isFunction(u)?u.call(l,n):u===P?l[p]():l.fadeTo(parseInt(o,10)||90,n?1:0,function(){n||l.hide()}),n||l.queue(function(e){l.css({left:"",top:""}),s(je).length||l.detach(),e()}),r=n,a.destroyed&&(a=I),c)}}),c.init()},xe=new xe,s.extend(k.prototype,{init:function(e){var t=e.tooltip;if(!this.options.on)return this;e.elements.overlay=xe.elem,t.addClass(Ce).css("z-index",C.modal_zindex+s(je).length),e._bind(t,["tooltipshow","tooltiphide"],function(e,i,n){var a=e.originalEvent;if(e.target===t[0])if(a&&"tooltiphide"===e.type&&/mouse(leave|enter)/.test(a.type)&&s(a.relatedTarget).closest(xe.elem[0]).length)try{e.preventDefault()}catch(e){}else(!a||a&&"tooltipsolo"!==a.type)&&this.toggle(e,"tooltipshow"===e.type,n)},this._ns,this),e._bind(t,"tooltipfocus",function(e,i){if(!e.isDefaultPrevented()&&e.target===t[0]){var n=s(je),a=C.modal_zindex+n.length,o=parseInt(t[0].style.zIndex,10);xe.elem[0].style.zIndex=a-1,n.each(function(){this.style.zIndex>o&&(this.style.zIndex-=1)}),n.filter("."+J).qtip2("blur",e.originalEvent),t.addClass(J)[0].style.zIndex=a,xe.update(i);try{e.preventDefault()}catch(e){}}},this._ns,this),e._bind(t,"tooltiphide",function(e){e.target===t[0]&&s(je).filter(":visible").not(t).last().qtip2("focus",e)},this._ns,this)},toggle:function(e,t,i){if(e&&e.isDefaultPrevented())return this;xe.toggle(this.qtip,!!t,i)},destroy:function(){this.qtip.tooltip.removeClass(Ce),this.qtip._unbind(this.qtip.tooltip,this._ns),xe.toggle(this.qtip,P),delete this.qtip.elements.overlay}}),ke=W.modal=function(e){return new k(e,e.options.show.modal)},ke.sanitize=function(e){e.show&&("object"!=typeof e.show.modal?e.show.modal={on:!!e.show.modal}:"undefined"==typeof e.show.modal.on&&(e.show.modal.on=$))},C.modal_zindex=C.zindex-200,ke.initialize="render",T.modal={"^show.modal.(on|blur)$":function(){this.destroy(),this.init(),this.qtip.elems.overlay.toggle(this.qtip.tooltip[0].offsetWidth>0)}},s.extend($,C.defaults,{show:{modal:{on:P,effect:$,blur:$,stealfocus:$,escape:$}}});var De;s.extend(x.prototype,{_scroll:function(){var t=this.qtip.elements.overlay;t&&(t[0].style.top=s(e).scrollTop()+"px")},init:function(i){var n=i.tooltip;s("select, object").length<1&&(this.bgiframe=i.elements.bgiframe=s('<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>').appendTo(n),i._bind(n,"tooltipmove",this.adjustBGIFrame,this._ns,this)),this.redrawContainer=s("<div/>",{id:U+"-rcontainer"}).appendTo(t.body),i.elements.overlay&&i.elements.overlay.addClass("qtipmodal-ie6fix")&&(i._bind(e,["scroll","resize"],this._scroll,this._ns,this),i._bind(n,["tooltipshow"],this._scroll,this._ns,this)),this.redraw()},adjustBGIFrame:function(){var e,t,i=this.qtip.tooltip,s={height:i.outerHeight(P),width:i.outerWidth(P)},n=this.qtip.plugins.tip,a=this.qtip.elements.tip;t=parseInt(i.css("borderLeftWidth"),10)||0,t={left:-t,top:-t},n&&a&&(e="x"===n.corner.precedance?[N,O]:[A,L],t[e[1]]-=a[e[0]]()),this.bgiframe.css(t).css(s)},redraw:function(){if(this.qtip.rendered<1||this.drawing)return this;var e,t,i,s,n=this.qtip.tooltip,a=this.qtip.options.style,o=this.qtip.options.position.container;return this.qtip.drawing=1,a.height&&n.css(A,a.height),a.width?n.css(N,a.width):(n.css(N,"").appendTo(this.redrawContainer),t=n.width(),t%2<1&&(t+=1),i=n.css("maxWidth")||"",s=n.css("minWidth")||"",e=(i+s).indexOf("%")>-1?o.width()/100:0,i=(i.indexOf("%")>-1?e:1)*parseInt(i,10)||t,s=(s.indexOf("%")>-1?e:1)*parseInt(s,10)||0,t=i+s?Math.min(Math.max(t,s),i):t,n.css(N,Math.round(t)).appendTo(o)),this.drawing=0,this},destroy:function(){this.bgiframe&&this.bgiframe.remove(),this.qtip._unbind([e,this.qtip.tooltip],this._ns)}}),De=W.ie6=function(e){return 6===se.ie?new x(e):P},De.initialize="render",T.ie6={"^content|style$":function(){this.redraw()}}})}(window,document),app.modules.initQtip=function(e){function t(e){$(e||".js-qtip-icon").each(function(){var e=$(this);e.qtip2(e.data("qtipOptions")||e.data())})}function i(){$doc.on("init:initQtip",function(e){t(e.target!==document&&$(e.target).filter(".js-qtip-icon")[0])})}return e.load=function(){t(),i()},e}(app.modules.initQtip||{});var IStorage=function(){function e(e){a()?s(e):t(function(){s(e)})}function t(e){x||(x=r(o())),x.on("load",function(){$(this).data({isLoaded:!0}),e()})}function i(e,t){e.postMessage(JSON.stringify(t),"*")}function s(e){i(n(),e)}function n(){return x[0].contentWindow}function a(){return x&&x.data("isLoaded")}function o(){return $("<iframe>").attr({src:app.config.istorageIframeURL}).addClass(C.iframe)}function r(e){return e.appendTo("body")}function l(e,t){S[e]&&S[e].forEach(function(e){e(t)})}function c(e,t){var s=t.payload;switch(t.type){case j.getRequest:i(e,{type:j.getResponse,payload:{value:localStorage.getItem(s.key),requestID:s.requestID}});break;case j.setRequest:localStorage.setItem(s.key,s.value),i(e,{type:j.setResponse,payload:{key:s.key,value:s.value,requestID:s.requestID}});break;case j.setResponse:v(s.requestID,{key:s.key,value:s.value,source:e});break;case j.getResponse:v(s.requestID,s.value,e);break;case j.triggerRequest:localStorage.setItem(s.eventName,JSON.stringify({data:s.data,requestID:s.requestID})),localStorage.removeItem(s.eventName);break;case j.triggerResponse:l(s.eventName,s.data),v(s.requestID)}}function h(e){var t;try{t=JSON.parse(e)}catch(e){return}return t}function d(e){var t=h(e.data);t&&c(e.source,t)}function u(e){if(e.newValue){var t=h(e.newValue);i(window.parent,{type:j.triggerResponse,payload:{eventName:e.key,data:t&&t.data,requestID:t&&t.requestID}})}}function p(e){T[++D]=e}function f(t){p(t.callback),e({type:t.type,payload:$.extend({},t.payload,{requestID:D})})}function m(e,t){f({type:j.getRequest,callback:t,payload:{key:e}})}function g(e,t,i){f({type:j.setRequest,callback:i,payload:{key:e,value:t}})}function v(e,t,i){T[e]&&T[e](t,i),delete T[e]}function _(e,t,i){f({type:j.triggerRequest,callback:i,payload:{eventName:e,data:t}})}function b(e,t){S[e]?S[e].push(t):S[e]=[t]}function y(e){delete S[e]}function w(){window.addEventListener("storage",u)}function k(){window.addEventListener("message",d)}var x,C={iframe:"istorage js-istorage"},j={getRequest:"getRequest",getResponse:"getResponse",setRequest:"setRequest",setResponse:"setResponse",triggerRequest:"triggerRequest",triggerResponse:"triggerResponse"},D=0,T={},S={};return k(),{get:m,set:g,trigger:_,on:b,removeEventListeners:y,listenIframeWindow:w}}();app.modules.customerOrdersAPI=function(e){function t(e,t){var i={order:e};return t&&$.extend(i,t),$.ajax({url:app.config.api.customerOrdersURL,method:"post",data:i})}function i(e){return $.ajax({url:app.config.api.customerOrdersURL,method:"post",processData:!1,contentType:!1,data:e})}function s(e,t){return $.ajax({url:app.config.api.customerOrdersMessagesURL.replace("_id_",e),method:"post",data:{message:{text:t,message_type:"dialog"}}})}function n(e,t){return $.ajax({url:app.config.api.customerOrdersMessagesURL.replace("_id_",e),method:"get",data:t})}function a(e){return $.ajax({url:app.config.api.customerOrderUpdatedAtURL.replace("_id_",e)})}function o(e){var t,i={url:app.config.api.customerAppealURL,method:"POST",contentType:"application/json"};if(t=e.subjectId?{order:{company_id:e.companyId,items_attributes:[{subject_id:e.subjectId}]},target_action:{target_action_type:e.targetActionType,source_url:location.href}}:{order:{company_id:e.companyId},target_action:{target_action_type:e.targetActionType,source_url:location.href}},app.modules.recaptcha&&!e.disableRecaptcha)return app.modules.gaCosmosClient.setStateGaId("ORDERS-2499-1"),app.modules.recaptcha.sendOrderRequestWithToken("create_appeal_order",t,i);i.data=JSON.stringify(t),$.ajax(i)}function r(e){return $.ajax({url:app.config.api.customerOrdersDraftsUrl,type:"POST",data:e})}return $.extend(e,{createOrder:t,createOrderWithFile:i,createOrderMessage:s,getOrderMessages:n,getUpdatedAt:a,createAppealOrder:o,getOrderDraft:r})}(app.modules.customerOrdersAPI||{}),app.modules.sellerOrdersAPI=function(e){function t(e){return $.ajax({url:app.config.api.sellerOrdersURL,method:"post",processData:!1,contentType:!1,data:e})}return $.extend(e,{createOrderWithFile:t})}(app.modules.sellerOrdersAPI||{}),app.modules.customerOrdersUtils=function(e){function t(e){app.modules.recaptcha.getScript().then(function(){return app.modules.recaptcha.getToken()}).then(function(t){app.modules.userUtils.signUp({withSID:!0,response_token:t}).then(app.modules.customerOrdersAPI.createAppealOrder.bind(null,e))})}function i(e){return e.companyId?app.config.isUserSigned?app.modules.customerOrdersAPI.createAppealOrder(e):e.disableRecaptcha?void app.modules.userUtils.signUp({withSID:!0}).then(app.modules.customerOrdersAPI.createAppealOrder.bind(null,e)):t(e):$.Deferred().reject()}function s(){var e=$.Deferred();return $doc.trigger("register:authComponent",[e,{withSID:!0,crossDomainAuth:app.config.crossDomainAuth}]),e}function n(e,t){return Array.isArray(t)?t.forEach(function(t){e=e.replace(t.key,t.value)}):e=e.replace(t.key,t.value),e}function a(){return"cosmos_client/"+(app.config.isMobile?"mobile/":"")}function o(){$(".js-body").addClass("lock-scroll")}function r(){$(".js-body").removeClass("lock-scroll")}function l(e){e.dialog("open")}function c(e){e.dialog("close"),$win.off("resize.orderPopup")}function h(e){clearTimeout(g),g=setTimeout(function(){window.history.pushState("popup-open",null,""),$win.on("popstate",function(){c(e)})},150)}function d(){"popup-open"===window.history.state&&window.history.back(),$(window).off("popstate",c)}function u(e){return $.extend(!0,{modal:!0,resizable:!1,width:768,height:"auto",dialogClass:"dialog-default dialog-default_hide-close-button orders-popup"},e)}function p(e){return f(e)||app.config.ordersUpdatesLocked}function f(e){return app.config.companyCommunicationShow&&!1===app.config.companyCommunicationShow[e]}function m(e,t,i){return app.config.ordersUpdatesLocked||t===i&&f(e)}var g;return $.extend(e,{createAppealOrder:i,registerWithSID:s,replaceText:n,pathTemplateByPlatform:a,lockScroll:o,unlockScroll:r,openPopup:l,closePopup:c,isLockedPopup:p,isLockedRequestCompanyOrder:m,getOrderPopupParams:u,addPopupOpenedHistory:h,removePopupOpenedHistory:d})}(app.modules.customerOrdersUtils||{}),app.modules.cosmosClient=app.modules.cosmosClient||{},app.modules.cosmosClient.sendRequest=function(){function e(e,t,s){var n={customer_region_id:t.customer_region_id,company_id:t.company_id};return delete t.customer_region_id,delete t.company_id,$.extend({},i[e],{url:i[e].url.replace("_id_",t.id),beforeSend:s&&s.bind(null,t.cartItemId,"before"),data:{item:t,order:n},success:function(e){t.updateTotalEvent&&$doc.trigger(t.updateTotalEvent+":ordersItem",[e]).trigger(t.updateTotalEvent+":ordersCartItem",[e]),s&&s(t.cartItemId,"after")}})}function t(t,i,s){return $.ajax(e(t,i,s))}var i={add:{url:app.config.api.customerCartCartItemsURL,method:"POST"},update:{url:app.config.api.customerCartCartItemURL,method:"PUT"},"delete":{url:app.config.api.customerCartCartItemURL,method:"DELETE"}};return t}(),app.modules.ordersFactory=function(e){function t(){var e=$(this);app.modules.customerOrdersUtils.createAppealOrder($.extend({},e.data(),$(".js-cosmos-create-order-data-container").data())),$doc.trigger("createdAppealOrderByClick:ordersFactory",[e])}function i(){$doc.on("click",".js-create-appeal-order",t)}return e.load=function(){i()},e}(app.modules.ordersFactory||{}),app.modules.gaCosmosClient=function(e){function t(e){n.id=e}function i(){!!n.id&&$doc.trigger("send:googleAnalytics",n.id)}function s(){$doc.on("userIsBot:recaptcha",i)}var n={id:""};return $.extend(e,{load:s,setStateGaId:t})}(app.modules.gaCosmosClient||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/loader"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='order-popup-form-loader-wrapper'>\n  <div class='order-popup-form-loader js-order-popup-form-loader'></div>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/loader"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/closed_order_popup/closed_order_popup"]=Handlebars.template({1:function(){return"      \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430\n"},3:function(e,t,i,s){var n;return null!=(n=t["if"].call(e,null!=e?e.title:e,{name:"if",hash:{},fn:this.program(4,s,0),inverse:this.program(6,s,0),data:s}))?n:""},4:function(e,t,i,s){var n;return"      "+this.escapeExpression((n=null!=(n=t.title||(null!=e?e.title:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"title",hash:{},data:s}):n))+"\n"},6:function(){return"      \u0417\u0430\u0434\u0430\u0442\u044c \u0432\u043e\u043f\u0440\u043e\u0441\n"},8:function(e,t,i,s){var n;return"    <p class='orders-popup__target'>\n      \u0412 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e \xab"+this.escapeExpression((n=null!=(n=t.targetName||(null!=e?e.targetName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"targetName",hash:{},data:s}):n))+"\xbb\n    </p>\n"},10:function(e,t,i,s){var n,a;return"    <div class='orders-popup__section'>\n      <div class='orders-popup__product-wrapper'>\n"+(null!=(n=t["if"].call(e,null!=e?e.imageUrl:e,{name:"if",hash:{},fn:this.program(11,s,0),inverse:this.noop,data:s}))?n:"")+"        <div class='orders-popup__product-info'>\n          <div class='orders-popup__product-info-item orders-popup__product-info-item_product-name'>"+this.escapeExpression((a=null!=(a=t.productTitle||(null!=e?e.productTitle:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"productTitle",hash:{},data:s}):a))+"</div>\n"+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.retailPrice:e,"||",null!=e?e.wholesalePrice:e,{name:"ifCond",hash:{},fn:this.program(13,s,0),inverse:this.noop,data:s}))?n:"")+"        </div>\n      </div>\n    </div>\n"},11:function(e,t,i,s){var n;return"        <div class='orders-popup__product-image-container'>\n          <img alt='' class='orders-popup__product-image' src='"+this.escapeExpression((n=null!=(n=t.imageUrl||(null!=e?e.imageUrl:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"imageUrl",hash:{},data:s}):n))+"'>\n        </div>\n"},13:function(e,t,i,s){var n;return(null!=(n=t["if"].call(e,null!=e?e.retailPrice:e,{name:"if",hash:{},fn:this.program(14,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=e?e.wholesalePrice:e,{name:"if",hash:{},fn:this.program(16,s,0),inverse:this.noop,data:s}))?n:"")},14:function(e,t,i,s){var n,a;return"          <div class='orders-popup__product-info-item orders-popup__product-info-item_bold'>\n            "+(null!=(a=null!=(a=t.retailPrice||(null!=e?e.retailPrice:e))?a:t.helperMissing,n="function"==typeof a?a.call(e,{name:"retailPrice",hash:{},data:s}):a)?n:"")+"\n          </div>\n"},16:function(e,t,i,s){var n,a;return"          <div class='orders-popup__product-info-item'>\n            \u041e\u043f\u0442\u043e\u0432\u0430\u044f \u0446\u0435\u043d\u0430:\n            "+(null!=(a=null!=(a=t.wholesalePrice||(null!=e?e.wholesalePrice:e))?a:t.helperMissing,
n="function"==typeof a?a.call(e,{name:"wholesalePrice",hash:{},data:s}):a)?n:"")+"\n"+(null!=(n=t["if"].call(e,null!=e?e.wholesaleMinQty:e,{name:"if",hash:{},fn:this.program(17,s,0),inverse:this.noop,data:s}))?n:"")+"          </div>\n"},17:function(e,t,i,s){var n;return"            <div class='cldoppi-min-qty'>\n              \u043e\u0442 "+this.escapeExpression((n=null!=(n=t.wholesaleMinQty||(null!=e?e.wholesaleMinQty:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"wholesaleMinQty",hash:{},data:s}):n))+" "+this.escapeExpression((n=null!=(n=t.wholesaleMeasure||(null!=e?e.wholesaleMeasure:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"wholesaleMeasure",hash:{},data:s}):n))+"\n            </div>\n"},19:function(e,t,i,s){var n;return"        \u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f \xab"+this.escapeExpression((n=null!=(n=t.companyName||(null!=e?e.companyName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyName",hash:{},data:s}):n))+"\xbb \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443 \u0438 email:\n"},21:function(e,t,i,s){var n;return"        \u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f \xab"+this.escapeExpression((n=null!=(n=t.companyName||(null!=e?e.companyName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyName",hash:{},data:s}):n))+"\xbb \u043f\u0440\u0438\u043d\u0438\u043c\u0430\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u044b \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443:\n"},23:function(e){return"        <div class='closed-order__phone'>"+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"</div>\n"},25:function(e,t,i,s){var n;return"      <a class='closed-order__email aui-link aui-link_dashed' href='mailto:"+this.escapeExpression((n=null!=(n=t.companyEmail||(null!=e?e.companyEmail:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyEmail",hash:{},data:s}):n))+"'>"+this.escapeExpression((n=null!=(n=t.companyEmail||(null!=e?e.companyEmail:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyEmail",hash:{},data:s}):n))+"</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return"<div>\n  <div class='orders-popup__content'>\n    <div class='orders-popup__close-icon-button js-closed-order-popup-close-button' title='\u0417\u0430\u043a\u0440\u044b\u0442\u044c'></div>\n    <h2 class='aui-header_l'>\n"+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","product",{name:"ifCond",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","message",{name:"ifCond",hash:{},fn:this.program(3,s,0),inverse:this.noop,data:s}))?n:"")+"    </h2>\n"+(null!=(n=t["if"].call(e,null!=e?e.targetName:e,{name:"if",hash:{},fn:this.program(8,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=e?e.productTitle:e,{name:"if",hash:{},fn:this.program(10,s,0),inverse:this.noop,data:s}))?n:"")+"    <div class='orders-popup__section closed-order'>\n      <div class='closed-order__phones-label'>\n"+(null!=(n=t["if"].call(e,null!=e?e.companyEmail:e,{name:"if",hash:{},fn:this.program(19,s,0),inverse:this.program(21,s,0),data:s}))?n:"")+"      </div>\n      <div class='closed-order__phones'>\n"+(null!=(n=t.each.call(e,null!=e?e.companyPhones:e,{name:"each",hash:{},fn:this.program(23,s,0),inverse:this.noop,data:s}))?n:"")+"      </div>\n"+(null!=(n=t["if"].call(e,null!=e?e.companyEmail:e,{name:"if",hash:{},fn:this.program(25,s,0),inverse:this.noop,data:s}))?n:"")+"      <div class='closed-order__more-contacts'>\n        <a class='closed-order__contacts-link aui-link' href='"+this.escapeExpression((a=null!=(a=t.companyContactsUrl||(null!=e?e.companyContactsUrl:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"companyContactsUrl",hash:{},data:s}):a))+"' target='_blank'>\n          \u0412\u0441\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438\n        </a>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/closed_order_popup/closed_order_popup"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/order_reference_info_popup/order_reference_info_popup"]=Handlebars.template({1:function(){return"      \u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430\n"},3:function(e,t,i,s){var n;return null!=(n=t["if"].call(e,null!=e?e.title:e,{name:"if",hash:{},fn:this.program(4,s,0),inverse:this.program(6,s,0),data:s}))?n:""},4:function(e,t,i,s){var n;return"      "+this.escapeExpression((n=null!=(n=t.title||(null!=e?e.title:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"title",hash:{},data:s}):n))+"\n"},6:function(){return"      \u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435\n"},8:function(){return"      \u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u044f\u0432\u043a\u0443 \u0441\u043f\u0440\u043e\u0441\u0430\n"},10:function(){return"      \u0417\u0430\u043a\u0430\u0437 \u0437\u0432\u043e\u043d\u043a\u0430\n"},12:function(e,t,i,s){var n,a;return"    <div class='order-target'>\n      \u0412 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e\n      "+this.escapeExpression((a=null!=(a=t.targetName||(null!=e?e.targetName:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"targetName",hash:{},data:s}):a))+"\n    </div>\n    <table class='ori-table'>\n      <tr>\n        <td class='orit-col title-col'>"+this.escapeExpression((a=null!=(a=t.productTitle||(null!=e?e.productTitle:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"productTitle",hash:{},data:s}):a))+"</td>\n"+(null!=(n=t["if"].call(e,null!=e?e.wholesaleMinQty:e,{name:"if",hash:{},fn:this.program(13,s,0),inverse:this.noop,data:s}))?n:"")+"        <td class='orit-col'>"+(null!=(a=null!=(a=t.retailPrice||(null!=e?e.retailPrice:e))?a:t.helperMissing,n="function"==typeof a?a.call(e,{name:"retailPrice",hash:{},data:s}):a)?n:"")+"</td>\n      </tr>\n    </table>\n"},13:function(e,t,i,s){var n;return"        <td class='orit-col min-qty-col'>\n          \u041c\u0438\u043d. \u0437\u0430\u043a\u0430\u0437\n          <br>\n          "+this.escapeExpression((n=null!=(n=t.wholesaleMinQty||(null!=e?e.wholesaleMinQty:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"wholesaleMinQty",hash:{},data:s}):n))+" "+this.escapeExpression((n=null!=(n=t.wholesaleMeasure||(null!=e?e.wholesaleMeasure:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"wholesaleMeasure",hash:{},data:s}):n))+"\n        </td>\n"},15:function(e,t,i,s){var n;return"      \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430.<br>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0435\u0439 "+this.escapeExpression((n=null!=(n=t.targetName||(null!=e?e.targetName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"targetName",hash:{},data:s}):n))+" \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443\n"},17:function(e,t,i,s){var n;return"      \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430.<br>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0435\u0439 "+this.escapeExpression((n=null!=(n=t.targetName||(null!=e?e.targetName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"targetName",hash:{},data:s}):n))+" \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443\n"},19:function(e,t,i,s){var n;return"      \u0418\u0437\u0432\u0438\u043d\u0438\u0442\u0435, \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0430 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0439 \u043d\u0430 \u0437\u0430\u044f\u0432\u043a\u0438 \u0441\u043f\u0440\u043e\u0441\u0430 \u0432\u0440\u0435\u043c\u0435\u043d\u043d\u043e \u043d\u0435\u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0430.<br>\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0441\u0432\u044f\u0437\u0430\u0442\u044c\u0441\u044f \u0441 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u0435\u043c "+this.escapeExpression((n=null!=(n=t.targetName||(null!=e?e.targetName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"targetName",hash:{},data:s}):n))+" \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443\n"},21:function(e,t,i,s){var n;return"        "+this.escapeExpression((n=null!=(n=t.targetPhone||(null!=e?e.targetPhone:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"targetPhone",hash:{},data:s}):n))+"\n"},23:function(e,t,i,s){var n;return null!=(n=t.each.call(e,null!=e?e.companyPhones:e,{name:"each",hash:{},fn:this.program(24,s,0),inverse:this.noop,data:s}))?n:""},24:function(e){return"        "+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div>\n  <div class='order-reference-info orders-popup__content js-order-reference-info'>\n    <div class='orders-popup__close-icon-button js-closed-order-popup-close-button' title='\u0417\u0430\u043a\u0440\u044b\u0442\u044c'></div>\n    <h1 class='ori-header'>\n"+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","product",{name:"ifCond",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","message",{name:"ifCond",hash:{},fn:this.program(3,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","tender",{name:"ifCond",hash:{},fn:this.program(8,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","callback",{name:"ifCond",hash:{},fn:this.program(10,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","request_message",{name:"ifCond",hash:{},fn:this.program(4,s,0),inverse:this.noop,data:s}))?n:"")+"    </h1>\n"+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","product",{name:"ifCond",hash:{},fn:this.program(12,s,0),inverse:this.noop,data:s}))?n:"")+"    <div class='ori-contacts'>\n"+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","product",{name:"ifCond",hash:{},fn:this.program(15,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","message",{name:"ifCond",hash:{},fn:this.program(17,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.type:e,"===","tender",{name:"ifCond",hash:{},fn:this.program(19,s,0),inverse:this.noop,data:s}))?n:"")+"      <div class='phone'>\n"+(null!=(n=t["if"].call(e,null!=e?e.targetPhone:e,{name:"if",hash:{},fn:this.program(21,s,0),inverse:this.program(23,s,0),data:s}))?n:"")+"      </div>\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/order_reference_info_popup/order_reference_info_popup"]}.call(this),app.modules.closedOrderPopup=function(){function e(){var e=$(this).data();e.targetPhone?a(e):$.when(p=t(e),f=i(e)).done(function(t,i){app.modules.customerOrdersUtils.closePopup(m),a(e,t[0],i[0])})}function t(e){return m||(m=s()),$.ajax({url:app.config.companyPhonesURL,data:{company:e.params.company||e.params.company_id,user:e.params.user,listing:e.listingPage},beforeSend:app.modules.customerOrdersUtils.openPopup.bind(null,m)})}function i(e){return $.ajax({url:app.config.api.companyAddressesURL.replace("_id_",e.params.company||e.params.company_id)})}function s(){return $(HandlebarsTemplates["cosmos_client/loader"]()).dialog({modal:!0,autoOpen:!1,resizable:!1,width:"110px",dialogClass:"order-popup-form-loader-dialog order-popup-form-loader-wrapper",close:n})}function n(){p.abort(),f.abort()}function a(e,t,i){o(l(e,t,i)),$doc.trigger("show:orderReferenceInfo")}function o(e){var t=app.config.ordersUpdatesLocked?{path:"cosmos_client/order_reference_info_popup/order_reference_info_popup",dialogClass:"order-reference-info-popup"}:{path:"cosmos_client/closed_order_popup/closed_order_popup",dialogClass:"orders-popup dialog-default dialog-default_hide-close-button"};g=$(HandlebarsTemplates[t.path](e)),g.dialog(app.modules.customerOrdersUtils.getOrderPopupParams({open:function(){app.modules.customerOrdersUtils.lockScroll(),app.modules.customerOrdersUtils.addPopupOpenedHistory(g)},close:function(){app.modules.customerOrdersUtils.unlockScroll(),app.modules.customerOrdersUtils.removePopupOpenedHistory()}})),$win.on("resize.orderPopup",function(){r(g)})}function r(e){e.dialog("option","position",{my:"center",at:"center",of:window})}function l(e,t,i){return $.extend({},e,{companyPhones:c(t,e.params.user),companyEmail:h(i)})}function c(e,t){if(e=e[0][1]||e[0][t])return e.slice(0,3)}function h(e){var t=e.addresses[0].contacts.filter(function(e){return"email"===e.kind_of_contact});return t&&t[0]&&t[0].value}function d(){var e=$('.js-show-order-reference-info-popup[data-open-onload="true"]').eq(0);e.length&&new URLSearchParams(location.search).getAll("open_orders_popup").length&&e.click()}function u(){$doc.on("click",".js-show-order-reference-info-popup",e).on("showOrderReferenceInfo:popups",o).on("click",".js-closed-order-popup-close-button",function(){app.modules.customerOrdersUtils.closePopup(g)})}var p,f,m,g;return{load:function(){u(),d()},getPopup:e}}(app.modules.closedOrderPopup),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/order_form/order_form"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='js-orders-popup-wrapper'></div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/order_form/order_form"]}.call(this),app.modules.orderFormPopup=function(e){function t(){var e=$(this),t=e.data(),s=t.params;if(!e.closest(".cke_editable").length){if(app.modules.customerOrdersUtils.isLockedRequestCompanyOrder(t.type,app.config.company&&app.config.company.id,s.company_id))return void app.modules.closedOrderPopup.getPopup.call(this);h||(h=i()),"message"===t.type&&!s.product_id&&app.config.product&&app.config.product.id&&(s.product_id=app.config.product.id),c=$.ajax({url:app.config.getOrderPopupURLs[t.type],data:s,beforeSend:app.modules.customerOrdersUtils.openPopup.bind(null,h)}).always(app.modules.customerOrdersUtils.closePopup.bind(null,h)).done(function(e){a(e,t.type,s.show_experimental_content||s.show_experimental_content_without_segmentation)})}}function i(){return $(HandlebarsTemplates["cosmos_client/loader"]()).dialog({modal:!0,autoOpen:!1,resizable:!1,width:"110px",dialogClass:"order-popup-form-loader-dialog order-popup-form-loader-wrapper",close:n})}function s(e,t){d=$(HandlebarsTemplates["cosmos_client/order_form/order_form"]()).append($(e)),d.dialog(app.modules.customerOrdersUtils.getOrderPopupParams({dialogClass:"dialog-default dialog-default_hide-close-button orders-popup js-"+t+"-orders-popup",open:function(){app.modules.customerOrdersUtils.lockScroll(),app.modules.customerOrdersUtils.addPopupOpenedHistory(d)},close:function(){app.modules.customerOrdersUtils.unlockScroll(),app.modules.customerOrdersUtils.removePopupOpenedHistory()}})),$win.on("resize.orderPopup",function(){o(d)})}function n(){c.abort()}function a(e,t,i){d=$(".js-orders-popup-wrapper"),d.length?d.html($(e)).dialog("open"):s(e,t),$doc.trigger("createdOrderFromPopupCallback:getOrderFormPopup"),$doc.trigger("createdOrderFromPopup:"+t+"OrderForm",[i]),u&&($doc.trigger(u+"OrderPopupShow:orderFormPopup",t),u=null)}function o(e){e.dialog("option","position",{my:"center",at:"center",of:window})}function r(){var e=$('.js-get-order-form[data-open-onload="true"]').eq(0),t=new URLSearchParams(location.search).getAll("open_orders_popup");e.length&&t.length&&(u=t[0],e.click())}function l(){$doc.on("click",".js-get-order-form",t).on("click",".js-orders-popup-close-button",function(){app.modules.customerOrdersUtils.closePopup(d),d.parent().hasClass("js-product-orders-popup")&&$doc.trigger("productPopupClose:orderFormPopup")})}var c,h,d,u;return e.load=function(){l(),r()},e}(app.modules.orderFormPopup||{}),function(){Handlebars.registerPartial("cosmos_client/order_form_result_popups/_messengers",Handlebars.template({1:function(e){var t;return"<div class='order-result-popup__messengers-subscribe'>\n  \u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u0437\u0430\u043a\u0430\u0437\u0430 \u0432 Viber/Telegram:\n  <a class='order-result-popup__subscribe-button order-result-popup__telegram-button "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.jsClass:t,e))+"' data-app='telegram' data-phone='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.phone:t,e))+"' href='"+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.config:e)?t.messengersUrls:t)?t.telegramURL:t,e))+"' target='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.target:t,e))+"'></a>\n  <a class='order-result-popup__subscribe-button order-result-popup__viber-button "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.jsClass:t,e))+"' data-app='viber' data-phone='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.phone:t,e))+"' href='"+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.config:e)?t.messengersUrls:t)?t.viberURL:t,e))+"' target='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.target:t,e))+"'></a>\n</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return null!=(n=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=e?e.config:e,"&&",null!=(n=null!=e?e.config:e)?n.phone:n,{name:"ifCond",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:""},useData:!0}))}.call(this),function(){Handlebars.registerPartial("cosmos_client/order_form_result_popups/_mobile_apps_banner",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div class='mobile-apps-banner'>\n  <div class='mobile-apps-banner__content'>\n    <div class='mobile-apps-banner__text'>\n      \u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0441 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u0433\u043e \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044f\n    </div>\n    <div class='mobile-apps-banner__buttons'>\n      <div>\n        <a class='mobile-apps-banner__button aui-app-button aui-app-button_app-store aui-app-button_white js-ga-link' data-ga-id='"+this.escapeExpression((n=null!=(n=t.gaIdAppStore||(null!=e?e.gaIdAppStore:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"gaIdAppStore",hash:{},data:s}):n))+"' href='https://itunes.apple.com/us/app/pul-s-cen/id765375626' target='_blank'></a>\n      </div>\n      <div>\n        <a class='mobile-apps-banner__button aui-app-button aui-app-button_google-play aui-app-button_white js-ga-link' data-ga-id='"+this.escapeExpression((n=null!=(n=t.gaIdGooglePlay||(null!=e?e.gaIdGooglePlay:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"gaIdGooglePlay",hash:{},data:s}):n))+"' href='https://play.google.com/store/apps/details?id=ru.apress.android.pc.mopc&amp;hl=ru' target='_blank'></a>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/error"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t;return"<div class='order-result-popup'>\n  <p class='orp-success-message'>\n    translation missing: ru.cosmos_client.send_order.result_messages.error.product.first\n    <a class='js-ga-link' data-ga-id='PC4-16993-9' href='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.orderURL:t,e))+"' target='_blank'>\n      translation missing: ru.cosmos_client.send_order.result_messages.error.product.link_content\n    </a>\n    translation missing: ru.cosmos_client.send_order.result_messages.error.product.last\n  </p>\n  <div class='orp-buttons'>\n    <a href='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.newDashboardTenderURL:t,e))+"'>\n      <input class='apress-button ab-system orp-button js-ga-link' ga-id='PC4-16993-12' type='button' value='\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u044f\u0432\u043a\u0443'>\n    </a>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/error"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/message"]=Handlebars.template({1:function(e){var t;return this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=(t=null!=e?e.order:e)?t.user:t)?t.profile:t)?t.name:t,e))},3:function(e){var t;return this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.order:e)?t.user:t)?t.email:t,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div>\n  <div class='order-result-popup__content'>\n    <div class='order-result-popup__close-icon-button js-result-popup-close' title='\u0417\u0430\u043a\u0440\u044b\u0442\u044c'></div>\n    <h2 class='order-result-popup__header aui-header_l'>\n      \u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e\n    </h2>\n    <div class='order-result-popup__content-block'>\n      <p class='order-result-popup__message'>\n        <b>"+(null!=(n=t["if"].call(e,null!=(n=null!=(n=null!=(n=null!=e?e.order:e)?n.user:n)?n.profile:n)?n.name:n,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.program(3,s,0),data:s}))?n:"")+",</b> \u0441\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443.\n      </p>\n    </div>\n    <div class='order-result-popup__content-block'>\n      <div class='order-result-popup__order-info'>\n        <div class='order-result-popup__order-info-item'>\n          <div class='order-result-popup__order-info-label'>\n            \u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\n          </div>\n          <div class='order-result-popup__order-info-value'>\n            <a class='aui-link aui-link_highlighted js-ga-link' data-ga-id='PC4-16993-5' href='"+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.order:e)?n.company:n)?n.html_url:n,e))+"' target='_blank'>\n              "+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.order:e)?n.company:n)?n.name:n,e))+"\n            </a>\n          </div>\n        </div>\n        <div class='order-result-popup__order-info-item'>\n          <div class='order-result-popup__order-info-label'>\n            \u2116 \u0437\u0430\u043a\u0430\u0437\u0430:\n          </div>\n          <div class='order-result-popup__order-info-value'>\n            <a class='aui-link aui-link_highlighted js-ga-link' data-ga-id='PC4-16993-6' href='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+"' target='_blank'>\n              "+this.escapeExpression(this.lambda(null!=(n=null!=e?e.order:e)?n.id:n,e))+"\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class='order-result-popup__content-block'>\n      <p class='order-result-popup__message'>\n        \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 <a href=\""+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+"\" class=\"aui-link aui-link_highlighted\">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u0435\u0440\u0435\u043f\u0438\u0441\u043a\u0443</a> \u0432 \u0441\u0432\u043e\u0435\u043c \u041b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \xab\u041c\u043e\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0438\xbb.\n      </p>\n      <p class='order-result-popup__message'>\n        \u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435, \u043f\u043e\u043a\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a \u043e\u0442\u0432\u0435\u0442\u0438\u0442 \u0432\u0430\u043c \u0438\u043b\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443.\n      </p>\n    </div>\n    <div class='order-result-popup__button-wrapper'><a class='order-result-popup__button aui-button aui-button_huge js-ga-link' data-ga-id='PC4-16993-7' href='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+"' target='_blank'>\n        \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442\n      </a></div>\n    <div class='order-result-popup__button-wrapper'><input class='order-result-popup__button aui-button aui-button_huge aui-button_transparent-grey js-result-popup-close' type='button' value='\u0417\u0430\u043a\u0440\u044b\u0442\u044c'></div>\n"+(null!=(n=this.invokePartial(i["cosmos_client/order_form_result_popups/_messengers"],e,{name:"cosmos_client/order_form_result_popups/_messengers",data:s,indent:"    ",helpers:t,partials:i}))?n:"")+"    <div class='order-result-popup__footer-helper'></div>\n  </div>\n  <div class='order-result-popup__footer'>\n"+(null!=(n=this.invokePartial(i["cosmos_client/order_form_result_popups/_mobile_apps_banner"],e,{name:"cosmos_client/order_form_result_popups/_mobile_apps_banner",hash:{gaIdGooglePlay:"PC4-23620-4",gaIdAppStore:"PC4-23620-3"},data:s,indent:"    ",helpers:t,partials:i}))?n:"")+"  </div>\n</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/message"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/product"]=Handlebars.template({1:function(e){var t;return this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=(t=null!=e?e.order:e)?t.user:t)?t.profile:t)?t.name:t,e))},3:function(e){var t;return this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.order:e)?t.user:t)?t.email:t,e))},5:function(e){var t;return"    <div class='order-result-popup__content-block'>\n      "+(null!=(t=this.lambda(null!=(t=null!=(t=null!=e?e.config:e)?t.orderConfirmed:t)?t.yourDemand:t,e))?t:"")+"\n    </div>\n"},7:function(e){var t;return"    <div class='order-result-popup__button-wrapper'>\n      <a class='order-result-popup__button aui-button aui-button_huge aui-button_transparent-yellow js-ga-link' data-ga-id='PC4-16993-12' href='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.newDashboardTenderURL:t,e))+"' target='_blank'>\n        \u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0437\u0430\u043a\u0443\u043f\u043a\u0443\n      </a>\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div>\n  <div class='order-result-popup__content'>\n    <div class='order-result-popup__close-icon-button js-result-popup-close' title='\u0417\u0430\u043a\u0440\u044b\u0442\u044c'></div>\n    <h2 class='order-result-popup__header aui-header_l'>\n      \u0417\u0430\u043a\u0430\u0437 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\n    </h2>\n    <div class='order-result-popup__content-block'>\n      <p class='order-result-popup__message'>\n        <b>"+(null!=(n=t["if"].call(e,null!=(n=null!=(n=null!=(n=null!=e?e.order:e)?n.user:n)?n.profile:n)?n.name:n,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.program(3,s,0),data:s}))?n:"")+",</b> \u0431\u043b\u0430\u0433\u043e\u0434\u0430\u0440\u0438\u043c \u0437\u0430 \u0438\u043d\u0442\u0435\u0440\u0435\u0441 \u043a \u0442\u043e\u0432\u0430\u0440\u0430\u043c \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 "+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.order:e)?n.company:n)?n.name:n,e))+".\n      </p>\n      <p class='order-result-popup__message'>\n        \u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043f\u0440\u0438\u043d\u044f\u0442 \u0438 \u043f\u043e\u0441\u0442\u0443\u043f\u0438\u043b \u0432 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u043a\u0443. \u0412 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438.\n      </p>\n    </div>\n    <div class='order-result-popup__content-block'>\n      <div class='order-result-popup__order-info'>\n        <div class='order-result-popup__order-info-item'>\n          <div class='order-result-popup__order-info-label'>\n            \u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\n          </div>\n          <div class='order-result-popup__order-info-value'>\n            <a class='aui-link aui-link_highlighted js-ga-link' data-ga-id='PC4-16993-8' href='"+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.order:e)?n.company:n)?n.html_url:n,e))+"' target='_blank'>\n              "+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.order:e)?n.company:n)?n.name:n,e))+"\n            </a>\n          </div>\n        </div>\n        <div class='order-result-popup__order-info-item'>\n          <div class='order-result-popup__order-info-label'>\n            \u2116 \u0437\u0430\u043a\u0430\u0437\u0430:\n          </div>\n          <div class='order-result-popup__order-info-value'>\n            <a class='aui-link aui-link_highlighted js-ga-link' data-ga-id='PC4-16993-9' href='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+"' target='_blank'>\n              "+this.escapeExpression(this.lambda(null!=(n=null!=e?e.order:e)?n.id:n,e))+"\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class='order-result-popup__content-block'>\n      <p class='order-result-popup__message'>\n        \u041f\u043e\u043b\u043d\u0443\u044e \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044e \u043e \u0437\u0430\u043a\u0430\u0437\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432 \u041b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u201c<a href=\""+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.customerOrdersUrl:n,e))+'" class="aui-link aui-link_highlighted">\u041c\u043e\u0438 \u043f\u043e\u043a\u0443\u043f\u043a\u0438</a>\u201c. \u0422\u0430\u043c \u0436\u0435 \u043c\u043e\u0436\u043d\u043e <a href="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+'" class="aui-link aui-link_highlighted js-ga-link" data-ga-id="PC4-16993-18" target="_blank">\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439</a> \u043a \u0437\u0430\u043a\u0430\u0437\u0443.\n      </p>\n    </div>\n'+(null!=(n=t["if"].call(e,null!=e?e.withDemand:e,{name:"if",hash:{},fn:this.program(5,s,0),inverse:this.noop,data:s}))?n:"")+"    <div class='order-result-popup__button-wrapper'><a class='order-result-popup__button aui-button aui-button_huge js-ga-link' data-ga-id='PC4-16993-10' href='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+"' target='_blank'>\n        \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0437\u0430\u043a\u0430\u0437\u0443\n      </a></div>\n"+(null!=(n=t.unless.call(e,null!=e?e.withDemand:e,{name:"unless",hash:{},
fn:this.program(7,s,0),inverse:this.noop,data:s}))?n:"")+"    <div class='order-result-popup__button-wrapper'><input class='order-result-popup__button aui-button aui-button_huge aui-button_transparent-grey js-result-popup-close' type='button' value='\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0433'></div>\n"+(null!=(n=this.invokePartial(i["cosmos_client/order_form_result_popups/_messengers"],e,{name:"cosmos_client/order_form_result_popups/_messengers",data:s,indent:"    ",helpers:t,partials:i}))?n:"")+"    <div class='order-result-popup__footer-helper'></div>\n  </div>\n  <div class='order-result-popup__footer'>\n"+(null!=(n=this.invokePartial(i["cosmos_client/order_form_result_popups/_mobile_apps_banner"],e,{name:"cosmos_client/order_form_result_popups/_mobile_apps_banner",hash:{gaIdGooglePlay:"PC4-23620-2",gaIdAppStore:"PC4-23620-1"},data:s,indent:"    ",helpers:t,partials:i}))?n:"")+"  </div>\n</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/product"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/tender"]=Handlebars.template({1:function(e){var t;return this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=(t=null!=e?e.order:e)?t.manager:t)?t.profile:t)?t.name:t,e))},3:function(e){var t;return this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.order:e)?t.manager:t)?t.email:t,e))},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div>\n  <div class='order-result-popup__content'>\n    <div class='order-result-popup__close-icon-button js-result-popup-close' title='\u0417\u0430\u043a\u0440\u044b\u0442\u044c'></div>\n    <h2 class='order-result-popup__header aui-header_l'>\u041f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e</h2>\n    <div class='order-result-popup__content-block'>\n      <p class='order-result-popup__message'>\n        "+(null!=(n=t["if"].call(e,null!=(n=null!=(n=null!=(n=null!=e?e.order:e)?n.manager:n)?n.profile:n)?n.name:n,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.program(3,s,0),data:s}))?n:"")+", \u0441\u043f\u0430\u0441\u0438\u0431\u043e! \u0412\u0430\u0448\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u043d\u0430 \u0437\u0430\u043a\u0443\u043f\u043a\u0443 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044e.\n      </p>\n      <p class='order-result-popup__message'>\n        \u041d\u0430 \u0435\u0433\u043e \u043e\u0441\u043d\u043e\u0432\u0435 \u0431\u044b\u043b \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d \u0437\u0430\u043a\u0430\u0437 \u2116\n        <a class='aui-link aui-link_highlighted js-ga-link' data-ga-id='PC4-16993-13' href='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+"' target='_blank'>\n          "+this.escapeExpression(this.lambda(null!=(n=null!=e?e.order:e)?n.id:n,e))+",\n        </a>\n        \u043a\u043e\u0442\u043e\u0440\u044b\u0439 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u0432 \u041b\u0438\u0447\u043d\u043e\u043c \u043a\u0430\u0431\u0438\u043d\u0435\u0442\u0435 \u0432 \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \xab\u0417\u0430\u043a\u0430\u0437\u044b \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432\xbb.\n      </p>\n    </div>\n    <div class='order-result-popup__content-block'>\n      <p class='order-result-popup__message'>\n        <b>\u0427\u0442\u043e \u0434\u0435\u043b\u0430\u0442\u044c \u0434\u0430\u043b\u044c\u0448\u0435?</b>\n      </p>\n      <p class='order-result-popup__message'>\n        \u0417\u0430\u043a\u0430\u0437 \u0431\u0443\u0434\u0435\u0442 \u043d\u0430\u0445\u043e\u0434\u0438\u0442\u044c\u0441\u044f \u0432 \u0441\u0442\u0430\u0442\u0443\u0441\u0435 \xab\u0416\u0434\u0435\u0442 \u043e\u0442\u0432\u0435\u0442\u0430 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044f\xbb, \u043f\u043e\u043a\u0430 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043f\u0440\u0438\u043c\u0435\u0442 \u0438\u043b\u0438 \u043d\u0435 \u043e\u0442\u043a\u043b\u043e\u043d\u0438\u0442 \u0432\u0430\u0448\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435. \u0415\u0441\u043b\u0438 \u043f\u043e\u043a\u0443\u043f\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043e\u0442\u0432\u0435\u0447\u0430\u0435\u0442 \u043d\u0430 \u0432\u0430\u0448\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u0435, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0441\u0432\u044f\u0436\u0438\u0442\u0435\u0441\u044c \u0441 \u043d\u0438\u043c \u043f\u043e \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443.\n      </p>\n    </div>\n    <div class='order-result-popup__button-wrapper'><a class='order-result-popup__button aui-button aui-button_huge js-ga-link' data-ga-id='PC4-16993-15' href='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.config:e)?n.orderURL:n,e))+"' target='_blank'>\n        \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0437\u0430\u043a\u0430\u0437\u0443\n      </a></div>\n    <div class='order-result-popup__button-wrapper'><input class='order-result-popup__button aui-button aui-button_huge aui-button_transparent-grey js-result-popup-close js-ga-link' data-ga-id='PC4-16993-16' type='button' value='\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0437\u0430\u043a\u0443\u043f\u043a\u0430\u043c'></div>\n"+(null!=(n=this.invokePartial(i["cosmos_client/order_form_result_popups/_messengers"],e,{name:"cosmos_client/order_form_result_popups/_messengers",data:s,indent:"    ",helpers:t,partials:i}))?n:"")+"    <div class='order-result-popup__footer-helper'></div>\n  </div>\n  <div class='order-result-popup__footer'>\n"+(null!=(n=this.invokePartial(i["cosmos_client/order_form_result_popups/_mobile_apps_banner"],e,{name:"cosmos_client/order_form_result_popups/_mobile_apps_banner",hash:{gaIdGooglePlay:"PC4-23620-6",gaIdAppStore:"PC4-23620-5"},data:s,indent:"    ",helpers:t,partials:i}))?n:"")+"  </div>\n</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["cosmos_client/order_form_result_popups/tender"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/company_phones"]=Handlebars.template({1:function(e){return"  <div class='orders-popup__phone-item'>"+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"</div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div class='orders-popup__phones js-orders-popup-phones'>\n"+(null!=(n=t.each.call(e,e,{name:"each",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+"</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/company_phones"]}.call(this),app.modules.orderForm=function(e){function t(){G=$(".js-order-form"),J=G.find(".js-reset-phone"),Z=G.find(".js-order-customer-phone-field"),ie=Z.data("required"),!app.config.isUserSigned&&app.modules.customerOrdersUtils.registerWithSID().then(function(){$doc.trigger("updateTotalForProduct:orderForm")}),Z.length&&l(),app.modules.attachmentsFields.load(),G.find(".js-selectric").selectric({maxHeight:220}),i(),s(),a()}function i(){G.find(".js-qtip-icon").trigger("init:initQtip")}function s(){G.find(".js-order-customer-phone-field").trigger("init:phoneMask")}function n(){$(".js-toggle").toggler()}function a(){app.config.orderFormPopup&&(re.fields.set=app.config.orderFormPopup.authComponentOptions.set,re.fields.required=app.config.orderFormPopup.authComponentOptions.required,re.withMultipleField=app.config.orderFormPopup.authComponentOptions.withMultipleField,app.config.orderFormPopup.authComponentOptions.hiddenByDefault&&(re.fields.hiddenByDefault=app.config.orderFormPopup.authComponentOptions.hiddenByDefault)),ee=G.find(".js-auth-component-container").trigger("render:authComponent",[re]).trigger("subscribeOnFieldValue:authComponent",["phone",o])}function o(e){G.find(".js-order-customer-phone-field").val(e.target.value).blur()}function r(e,t){G.find(".js-"+e+"-group").toggleClass("aui-form__group_with-error",!!t)}function l(){var e=Z.val();J.toggle(!!e.length)}function c(){var e=$.trim(Z.val()),t=$.Deferred(),i=ie||e;return i&&e!==Z.data("previousValue")?d(e).then(function(i){i=JSON.parse(i),Z.data({valid:i.valid,previousValue:e}),r("contacts-phone",!i.valid),app.config.orderFormPopup.showExperimentalContent&&h(i.valid),t.resolve()}):i?t.resolve():(Z.data({valid:!0}),r("contacts-phone",!1),t.resolve()),ee.trigger("unsubscribeFromFieldValue:authComponent",["phone"]),t}function h(e){Z.toggleClass("orders-popup__valid-field",e).parent().toggleClass("orders-popup__valid-field-wrapper",e)}function d(e){return $.ajax({url:app.config.api.validationURL,dataType:"html",data:{phone:e}})}function u(){$.when(G.find(".js-order-customer-phone-field").length&&p(),G.find(".js-message-field").length&&f(),G.find(".js-order-segmentation-field").length&&m()).done(function(){Y=!0,(!ee.length||ne||K)&&g()}).fail(function(){Y=!1,v(Array.prototype.slice.call(arguments))})}function p(){var e=$.Deferred();return G.find(".js-order-customer-phone-field").data("valid")?e.resolve():e.reject({contactsPhoneField:{invalid:!0}}),e}function f(){var e=$.Deferred();return $.trim(G.find(".js-message-field").val())||G.find(".js-file-item:visible").length?e.resolve():e.reject({messageField:{required:!0}})}function m(){var e=$.Deferred();return $(".js-order-segmentation-field:checked").length?e.resolve():e.reject({segmentation:{invalid:!0}})}function g(){var e=G.find(".js-order-type").val();X=G.find(".js-create-tender-checkbox").prop("checked"),A(),y(e)}function v(e){E(),_(e)}function _(e){Array.isArray(e)?e.forEach(b):b(e)}function b(e){e.contactsPhoneField&&r("contacts-phone",e.contactsPhoneField.invalid),e.messageField&&r("message",e.messageField.required),e.segmentation&&r("segmentation",e.segmentation.invalid)}function y(e){app.config.isUserSigned&&!app.config.currentUser.contacts&&Y&&O(),app.modules["tender"===e?"sellerOrdersAPI":"customerOrdersAPI"].createOrderWithFile(x("order")).done(j).fail(function(){E()})}function w(e,t){return"order"===t?e.attr("name"):e.data("demandsFieldName")||e.attr("name").replace("order[messages_attributes][0]","tender")}function k(e,t){return e.val()||e.data("order"===t?"defaultValue":"demandsValue")}function x(e){var t=new FormData,i="order"===e?ae:oe,s=ee.find(".js-input-phone-auth");return G.find(i.map(function(e){return e+":not(:disabled)"}).join(",")).each(function(){var i=$(this),s=w(i,e),n=i.is(".js-attach-file-button")?this.files[0]:i.is(".js-order-customer-phone-field")?i.cleanVal():i.is(".js-order-segmentation-field")?C(i,e):k(i,e);n&&t.append(s,n)}),t.append("order[source_url]",location.href),s.length&&t.append("order[customer_phone]",s.val()),t}function C(e,t){return!!e.prop("checked")&&k(e,t)}function j(e){var t=e.order.order_type;Q=e,D(e),N(t)}function D(e){var t="cosmos_client/order_form_result_popups/",i=P(e),s=i.tenderError?t+"error":t+Q.order.order_type;app.modules.customerOrdersUtils.closePopup($(".js-orders-popup-wrapper")),te=$(HandlebarsTemplates[s]({config:i,order:Q.order,withDemand:X})),te.dialog(app.modules.customerOrdersUtils.getOrderPopupParams({dialogClass:"dialog-default dialog-default_hide-close-button dialog-default_with-footer order-result-popup",open:function(){app.modules.customerOrdersUtils.lockScroll(),app.modules.customerOrdersUtils.addPopupOpenedHistory(te)},close:function(){app.modules.customerOrdersUtils.unlockScroll(),app.modules.customerOrdersUtils.removePopupOpenedHistory()}})),n(),$win.on("resize.orderPopup",function(){T(te)})}function T(e){e.dialog("option","position",{my:"center",at:"center",of:window})}function S(e){return e&&String(e).replace(/[^+\d]/g,"")}function P(e){var t,i=app.config.orderFormPopup,s=app.modules.customerOrdersUtils.replaceText,n={key:":id",value:Q.order.id},a="tender"===Q.order.order_type,o=s(i[a?"sellerOrderURL":"customerOrderURL"],n),r=e.order;return t="tender"===r.order_type?S(r.seller_phone):S(r.customer_phone)||r.user&&S(r.user.profile.contacts),$.extend(!0,{},i,{orderURL:o,customerOrdersUrl:i.customerOrdersURL,phone:t,messengersUrls:app.config.messengers,jsClass:app.config.isMobile?"js-messenger-link":"",target:app.config.isMobile?"_self":"_blank"},e.tenderError)}function I(){formSubmitter.disableButtons(G[0])}function E(){formSubmitter.enableButtons(G[0])}function M(){var e=$.Deferred();return ee.trigger("processUserData:authComponent",[e]),e}function N(e){var t="tender"===e&&{idTenders:G.find(".js-tender-id").val()};$doc.trigger("orderWasSentWithSuccess:sendOrderAndDemand",[e,t]),G.data("unsigned-user")&&$doc.trigger("signedUpDuringSendingOrderWithSuccess:sendOrderAndDemand",[e]),$doc.trigger("showResultMessage:ordersAndDemands",[e])}function A(){app.config.messengers={},$.ajax({method:"get",url:app.config.api.messengerSubscriptionsUrl,success:function(e){app.config.messengers={telegramURL:e.telegram.invite_url,viberURL:e.viber.invite_url}}})}function L(e){e.preventDefault(),ne=app.config.orderFormPopup.unrequiredProcessUserData&&app.config.currentUser&&"sid"!==app.config.currentUser.primaryProvider,!$(this).attr("onsubmit")&&I(),c().done(u),!ne&&!K&&M().done(function(){K=!0,Y?g():ee.remove()}).fail(v),app.config.isUserSigned&&!app.config.currentUser.contacts&&Y&&O()}function O(){$.ajax({method:"put",url:app.config.api.updateUserURL.replace("_id_",app.config.currentUser.id),data:{profile_attributes:{contacts:Z.val()}}})}function z(){Z.val("").data({valid:!ie}),!ie&&r("contacts-phone",!1),c(),$(this).hide()}function R(){var e=$(this),t=G.find(".js-delay-tender-creation-checkbox"),i=e.prop("checked"),s=t.prop("checked"),n=$(".js-delay-tender-creation-hint"),a=n.data();e.val(i||s?1:0),t.val(i||!s?0:1),n.attr({"data-popup-hint":i?a.createTenderHint:a.delayTenderHint})}function H(){var e=$(this),t=e.prop("checked"),i=G.find(".js-create-tender-checkbox");e.val(t&&!i.prop("checked")?1:0),i.val(t||i.prop("checked")?1:0)}function F(){var e=$(this).data();$(".js-orders-popup-phones").length?q():(W(e.company),B(e))}function q(){var e=$(".js-order-popup-phone-link"),t=e.data("alt-text");e.data({"alt-text":e.text()}).text(t).toggleClass("js-ga-link"),$(".js-orders-popup-phones-block").toggle()}function W(e){$.ajax({url:app.config.companyPhonesURL,data:{company:e},success:U})}function U(e){(se=e[0][1])&&($(".js-orders-popup-phones-block").html($(HandlebarsTemplates["cosmos_client/company_phones"](se.slice(0,3)))),q())}function B(e){$.ajax({url:app.config.companyContactsStatistics,data:{activity_type:"phone_hits",company_id:e.companyId}})}function V(){$doc.on("showForm:ordersAndDemands",t).on("submit",".js-order-form",L).on("input",".js-order-form .js-message-field",function(){r("message")}).on("blur",".js-order-form .js-order-customer-phone-field",c).on("click",".js-order-form .js-reset-phone",z).on("keyup blur",".js-order-customer-phone-field",l).on("attachFile:attachAndDetachFile detachFile:attachAndDetachFile",function(e,t){t.closest(".js-order-form").length&&G&&G.find(".js-message-field").length&&r("message",!1)}).on("click",".js-result-popup-close",function(){app.modules.customerOrdersUtils.closePopup(te)}).on("change",".js-order-form .js-create-tender-checkbox",R).on("change",".js-order-form .js-delay-tender-creation-checkbox",H).on("change",".js-order-segmentation-field",function(){G.find(".js-segmentation-error-message").hide()}).on("click",".js-order-popup-phone-link",F)}var Y,K,Q,X,G,J,Z,ee,te,ie,se,ne,ae=["input","textarea","select"],oe=["[data-demands-field-name]",".js-attach-file-button"],re={fromOrdersPopup:!0,orientation:"vertical",selectors:{flashMessage:!app.config.isMobile&&".js-orders-flash-message"},crossDomainAuth:app.config.crossDomainAuth,fields:{set:app.config.isMobile?["email","name"]:["email","password","name"],visibleIfDataCorrect:["password"],hiddenByDefault:["name","password"]}};return e.load=function(){V()},e.getFormData=x,e}(app.modules.orderForm||{}),app.modules.orderProduct=function(e){function t(){p=$(".js-order-form"),f=n(),app.config.isUserSigned&&s(),i()}function i(){var e=p.find(".js-order-quantity-field");e.extendedSpinner($.extend(e.data("spinnerOptions"),{spin:l})).numeric({decimalPlaces:2,negative:!1}),$(".js-toggle").toggler()}function s(){"product"===f&&a()}function n(){return p.find(".js-order-type").val()}function a(){return app.modules.customerOrdersAPI.getOrderDraft(o()).then(function(e){p.find(".js-order-total").html(e.order.formatted_total),e.order.price_validation&&r(e.order.price_validation)})}function o(){return{order:{order_type:f,company_id:p.find(".js-order-company-id").val(),items_attributes:[{subject_id:p.find(".js-order-subject-id").val(),quantity:p.find(".js-order-quantity-field").val()||m}]}}}function r(e){var t=p.find(".js-order-total-warning"),i=p.find(".js-order-total-wrapper"),s=p.find(".js-product-info-total-warning"),n=p.find(".js-send-order");e.passed?(s.hide(),i.removeClass("orders-popup__total-wrapper_warning"),t.hide(),n.prop({disabled:!1})):e.required?(i.addClass("orders-popup__total-wrapper_warning"),s.html(app.config.orderMinTotalMessages.minTotalMessage.replace("_total_",e.min_price)).show(),t.html(app.config.orderMinTotalMessages.blockingMessage).show(),n.prop({disabled:!0})):(i.addClass("orders-popup__total-wrapper_warning"),s.html(app.config.orderMinTotalMessages.minTotalMessage.replace("_total_",e.min_price)).show(),t.html(app.config.orderMinTotalMessages.infoMessage).show(),n.prop({disabled:!1}))}function l(e,t){var i=t&&t.value||e.target.value||1,s=p.find(".js-order-price-items-container"),n=s.data("wholesale"),o=!n["min-qty"]||Number.parseInt(i)<n["min-qty"]?"retail":"wholesale",r=s.data(o),l="retail"===o,h="wholesale"===o,u=!s.data("retail")["has-retail-price"]&&n["has-wholesale-price"]&&l;app.modules.applicationUtils.delayCall(a),p.find(".js-product-info-quantity-warning").html(u?app.config.minQuantityMessages.minQuantityMessage.replace("_min_qty_",n["min-qty-with-unit"]):""),p.find(".js-order-total-quantity-warning").html(u?app.config.minQuantityMessages.infoMessage:""),p.find(".js-quantity-spinner").toggleClass("aui-spinner_error",u),c(l,h),d(r["measure-unit-id"],r["measure-unit-name"])}function c(e,t){p.find(".js-order-total-label-retail").toggle(e),p.find(".js-order-total-label-wholesale").toggle(t)}function h(){var e=$(this).closest(".js-order-price-item").data("type"),t=p.find(".js-order-price-items-container").data(e);p.find(".js-order-price-item").toggleClass("selected").end().find(".js-order-quantity-field").val(t["min-qty"]),d(t["measure-unit-id"],t["measure-unit-name"]),a()}function d(e,t){p.find(".js-orders-measure-unit-disabled-field-container").toggle(!!t).find(".js-order-measure-unit-hidden-field").prop({disabled:!t}).val(e),p.find(".js-orders-measure-unit-disabled-field").text(t),p.find(".js-orders-measure-unit-container").toggle(!t).find(".js-orders-measure-unit-select").prop({disabled:!!t})}function u(){$doc.on("showForm:ordersAndDemands",t).on("change",".js-order-form .js-order-price-radiobutton",h).on("input",".js-order-form .js-order-quantity-field",l).on("updateTotalForProduct:orderForm",s).on("click",".js-order-form .js-show-comment-field",function(e){$(this).hide(),p.find(".js-order-comment-container").show(),e.preventDefault()})}var p,f,m=1;return e.load=function(){u()},e}(app.modules.orderProduct||{}),app.modules.ordersItem=function(e){function t(e,t){P.trigger("toggleProcessing:ordersCartItem",[e,"before"===t])}function i(e,i,s){app.modules.cosmosClient.sendRequest("add",s,t).done(function(e){i.resolve(e)})}function s(e,t,i){a(t),n($(e.target),i)}function n(e,t){m(e.html(c(t)))}function a(e){P=e}function o(e,t){var i=P.data("measure_units").filter(function(t){return t.id===e})[0];return i&&app.modules.applicationUtils.pluralize(t,[i.name,i.name_plural_1,i.name_plural_2,i.name_plural_2])}function r(e){return e?P.data("flatCart")[e].items:[P.data("item")]}function l(e,t){return $.extend(e,{hasRetailPrice:e.formatted_retail_price!==app.config.cartItemPriceAgreed,company:t&&P.data("flatCart")[t].company,cartItemID:t,wholesalePluralizedMeasureUnitName:e.wholesale_min_qty&&o(e.wholesale_measure_unit.id,e.wholesale_min_qty)})}function c(e){return r(e).reduce(function(t,i){return t.append(x(h(i,e)))},$("<div>"))}function h(e,t){var i=P.data();return $(HandlebarsTemplates[D]({item:l(e,t),measureUnits:i.measure_units,config:i.ordersItem}))}function d(e){e.remove()}function u(e){P.trigger("delete:ordersCartItem",[e.data("cartItemId")])}function p(e){return e.closest(j.component)}function f(e,t){$doc.trigger("update:ordersItem"),$(j.component+'[data-id="'+t.item.id+'"]').find(j.price).html(t.item.formatted_total)}function m(e){var t=e.find(j.fields.quantity),i=e.find(j.fields.measureUnits);t.extendedSpinner($.extend(t.data(T),{spin:v})).numeric({decimalPlaces:2,negative:!1}),i.selectric($.extend(i.data(S)))}function g(e){I=app.modules.applicationUtils.delayCall(app.modules.cosmosClient.sendRequest.bind(null,"update",e))}function v(e,t){var i=t&&t.value||e.target.value||1,s=p($(e.target)),n=s.find(j.priceItemsContainer).data("wholesale"),a=n&&(!n["min-qty"]||Number.parseInt(i)<n["min-qty"])?"retail":"wholesale";if(g({id:$(this).data(T).id,quantity:i,updateTotalEvent:"updateTotal"}),$(e.target).trigger("changeQuantity:ordersPriceTypeToggler",[i]),app.modules.changePriceType)return void app.modules.changePriceType(s,a);b(s,a),_(s,a)}function _(e,t){e.find(".js-orders-item-total-label-retail").toggle("retail"===t).end().find(".js-orders-item-total-label-wholesale").toggle("wholesale"===t)}function b(e,t){e.find(j.measureUnitContainer).each(function(){var e=$(this),i=e.data("type")===t;e.toggle(i).find(j.togglerMeasureUnits).prop({disabled:!i})})}function y(){var e=p($(this));!e.siblings(j.component).length&&u(e),d(e)}function w(){app.modules.cosmosClient.sendRequest("delete",p($(this)).data()).done(y.bind(this),t)}function k(){I(),I=function(){}}function x(e){return e.on("click",j.deleteItem,w).on("mouseout",[j.quantityContainer,j.measureUnitsSelectContainer].join(","),k).on("updateQuantity:ordersItem",j.fields.quantity,v)}function C(){$doc.on("render:ordersItem",s).on("add:ordersItem",i).on("updateTotal:ordersItem",f).on("input",j.fields.quantity,v)}var j={component:".js-orders-item",quantityContainer:".js-orders-item-count-container",measureUnitsSelectContainer:".js-orders-item-measure-units-select-container",measureUnitContainer:".js-orders-item-measure-unit-container",fields:{quantity:".js-orders-item-count",measureUnits:".js-orders-item-measure-units"},priceItemsContainer:".js-orders-item-price-items-container",price:".js-orders-item-total",deleteItem:".js-orders-item-delete"},D="cosmos_client/cart/orders_item",T="spinnerOptions",S="selectricOptions",P=$("<store>"),I=function(){};return e.load=function(){C()},e}(app.modules.ordersItem||{}),app.modules.addOrdersItem=function(e){function t(e){var t=$.Deferred();return $doc.trigger("add:ordersItem",[t,e]),t}function i(){var e=$.Deferred();return $doc.trigger("get:applicationDataStore",[e,["measure_units"]]),e}function s(e,t){return $.extend(e,t)}function n(e){$(this).toggleClass(g.disabledItem,!!e)}function a(){return $.when(t(p.data(_)),i())}function o(){var e=$(this);if(!e.closest(".cke_editable").length){if(app.modules.customerOrdersUtils.isLockedPopup(e.data("type")))return void app.modules.closedOrderPopup.getPopup.call(this);h.call(this),n.call(this,!0),(app.config.isUserSigned?a.call(this):app.modules.customerOrdersUtils.registerWithSID().then(a.bind(this))).then(s).then(c).done(l.bind(this))}}function r(){var e=$(m.counterContainer+", "+m.sideMenuCounter);e.length&&e.first().trigger(b.updateCounter,[e])}function l(e){var t=$(this),i=t.data(),s=i.redirectUrl;r(),n.call(this),$doc.trigger("update:ordersItem"),f&&($doc.trigger(f+"CartPopupShow:addOrdersItem"),f=null),i.informerEvent&&s?$doc.trigger("showInformer:addOrdersItem",[t]):s?location.href=s:$doc.trigger("show:popupWithNewOrdersItem",[e,t])}function c(e){return p.data(e)}function h(){return p=$("<store>").data($.extend(!0,{},$(this).data(v)))}function d(){var e=$('.js-add-orders-item[data-open-onload="true"]').eq(0),t=new URLSearchParams(location.search).getAll("open_add_orders_item_popup");e.length&&t.length&&(f=t[0],e.click())}function u(){$doc.on("click",m.component,o)}var p,f,m={component:".js-add-orders-item:not(.disabled)",counterContainer:".js-orders-cart-counter-container",sideMenuCounter:".js-orders-menu-counter"},g={disabledItem:"disabled"},v="addOrdersItemData",_="dataToAdd",b={updateCounter:"update:ordersCartCounter",getCounterValue:"getValue:ordersCartCounter"};return e.load=function(){u(),d()},e}(app.modules.addOrdersItem||{}),function(){Handlebars.registerPartial("cosmos_client/cart/_quantity",Handlebars.template({1:function(){return"dn"},3:function(e){var t;return"      <div class='aui-pseudo-select js-orders-measure-unit-disabled-field'>\n        "+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.item:e)?t.measure_unit_object:t)?t.name:t,e))+"\n      </div>\n"},5:function(e,t,i,s,n,a){var o;return'      <div class=\'aui-selectric js-orders-item-measure-units-select-container\'>\n        <select class=\'js-orders-item-measure-units\' data-selectric-options=\'{"maxHeight":"120","id":"'+this.escapeExpression(this.lambda(null!=(o=null!=e?e.item:e)?o.id:o,e))+"\"}'>\n"+(null!=(o=t.each.call(e,null!=e?e.measureUnits:e,{name:"each",hash:{},fn:this.program(6,s,0,n,a),inverse:this.noop,data:s}))?o:"")+"        </select>\n      </div>\n"},6:function(e,t,i,s,n,a){var o;return null!=(o=(t.ifCond||e&&e.ifCond||t.helperMissing).call(e,null!=a[1]?a[1].value:a[1],"===",null!=e?e.id:e,{name:"ifCond",hash:{},fn:this.program(7,s,0,n,a),inverse:this.program(9,s,0,n,a),data:s}))?o:""},7:function(e){return"          <option selected value='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</option>\n"},9:function(e){return"          <option value='"+this.escapeExpression(this.lambda(null!=e?e.id:e,e))+"'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</option>\n"},11:function(e,t,i,s){var n;return"    <div class='aui-pseudo-select js-orders-item-measure-unit-container js-orders-measure-unit-disabled-field "+(null!=(n=t.unless.call(e,null!=(n=null!=e?e.item:e)?n["wholesale?"]:n,{name:"unless",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+"' data-type='wholesale'>\n      "+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.item:e)?n.wholesale_measure_unit:n)?n.name:n,e))+"\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s,n,a){var o;return"<div class='orders-popup__quantity-wrapper orders-popup__quantity-wrapper_full-width aui-clearfix'>\n  <div class='orders-popup__amount'>\n    <div class='aui-spinner'>\n      <input class='aui-form__text-field aui-spinner__input js-orders-item-count' data-spinner-options='{\"min\":1,\"max\":99999,\"id\":\""+this.escapeExpression(this.lambda(null!=(o=null!=e?e.item:e)?o.id:o,e))+"\"}' value='"+this.escapeExpression(this.lambda(null!=(o=null!=e?e.item:e)?o.quantity:o,e))+"'>\n    </div>\n  </div>\n  <div class='orders-popup__measure-unit'>\n    <div class='js-orders-item-measure-unit-container "+(null!=(o=t["if"].call(e,null!=(o=null!=e?e.item:e)?o["wholesale?"]:o,{name:"if",hash:{},fn:this.program(1,s,0,n,a),inverse:this.noop,data:s}))?o:"")+"' data-type='retail'>\n"+(null!=(o=t["if"].call(e,null!=(o=null!=(o=null!=e?e.item:e)?o.measure_unit_object:o)?o.id:o,{name:"if",hash:{},fn:this.program(3,s,0,n,a),inverse:this.program(5,s,0,n,a),data:s}))?o:"")+"    </div>\n"+(null!=(o=t["if"].call(e,null!=(o=null!=e?e.item:e)?o.wholesale_min_qty:o,{name:"if",hash:{},fn:this.program(11,s,0,n,a),inverse:this.noop,data:s}))?o:"")+"  </div>\n</div>"},useData:!0,useDepths:!0}))}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/cart/order_informer"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t;return"<div class='order-informer'>\n  <div class='order-informer__text'>\n    \u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443\n  </div>\n  <a class='order-informer__button js-ga-link' data-ga-id='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.data:e)?t.informerEvent:t,e))+"' href='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.data:e)?t.redirectUrl:t,e))+"'>\n    \u041f\u0435\u0440\u0435\u0439\u0442\u0438\n  </a>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/cart/order_informer"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/cart/orders_item"]=Handlebars.template({1:function(e){var t;return"      <div class='orders-popup__product-image-container'>\n        <img alt='' src='"+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=(t=null!=(t=null!=(t=null!=e?e.item:e)?t.image:t)?t.styles:t)?t[1]:t)?t.thumb:t)?t.url:t,e))+"'>\n      </div>\n"},3:function(e){var t;return"          <div class='orders-popup__product-info-item orders-popup__product-info-item_bold'>\n            "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.formatted_retail_price:t,e))+"\n          </div>\n"},5:function(e){var t;return"          <div class='orders-popup__product-info-item'>\n            \u041e\u043f\u0442\u043e\u0432\u0430\u044f \u0446\u0435\u043d\u0430:\n            "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.formatted_wholesale_price:t,e))+"\n            \u043e\u0442 "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.wholesale_min_qty:t,e))+" "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.item:e)?t.wholesalePluralizedMeasureUnitName:t,e))+"\n          </div>\n"},7:function(){return"dn"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div class='js-orders-item' data-cart-item-id='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.item:e)?n.cartItemID:n,e))+"' data-id='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.item:e)?n.id:n,e))+"'>\n  <div class='orders-popup__section'>\n    <div class='orders-popup__product-wrapper'>\n"+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.item:e)?n.image:n,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+"      <div class='orders-popup__product-info'>\n        <div class='orders-popup__product-info-item orders-popup__product-info-item_product-name'>\n          "+this.escapeExpression(this.lambda(null!=(n=null!=e?e.item:e)?n.name:n,e))+'\n        </div>\n        <div class=\'js-orders-item-price-items-container\' data-retail=\'{"min-qty":1,"measure-unit-id":"'+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.item:e)?n.measure_unit_object:n)?n.id:n,e))+'","measure-unit-name":"'+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.item:e)?n.measure_unit_object:n)?n.name:n,e))+'"}\' data-wholesale=\'{"min-qty":"'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.item:e)?n.wholesale_min_qty:n,e))+'","measure-unit-id":"'+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.item:e)?n.wholesale_measure_unit:n)?n.id:n,e))+'","measure-unit-name":"'+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.item:e)?n.wholesale_measure_unit:n)?n.name:n,e))+"\"}'>\n"+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.item:e)?n.hasRetailPrice:n,{name:"if",hash:{},fn:this.program(3,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.item:e)?n.wholesale_min_qty:n,{name:"if",hash:{},fn:this.program(5,s,0),inverse:this.noop,data:s}))?n:"")+"        </div>\n      </div>\n    </div>\n"+(null!=(n=this.invokePartial(i["cosmos_client/cart/_quantity"],e,{name:"cosmos_client/cart/_quantity",data:s,indent:"    ",helpers:t,partials:i}))?n:"")+"  </div>\n  <div class='orders-popup__section aui-clearfix'>\n    <div class='orders-popup__total-label aui-form__section-label js-orders-item-total-label-retail "+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.item:e)?n["wholesale?"]:n,{name:"if",hash:{},fn:this.program(7,s,0),inverse:this.noop,data:s
}))?n:"")+"'>\n      \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 (\u0440\u043e\u0437\u043d\u0438\u0447\u043d\u0430\u044f)\n    </div>\n    <div class='orders-popup__total-label aui-form__section-label js-orders-item-total-label-wholesale "+(null!=(n=t.unless.call(e,null!=(n=null!=e?e.item:e)?n["wholesale?"]:n,{name:"unless",hash:{},fn:this.program(7,s,0),inverse:this.noop,data:s}))?n:"")+"'>\n      \u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e \u0442\u043e\u0432\u0430\u0440\u0430 \u043d\u0430 \u0441\u0443\u043c\u043c\u0443 (\u043e\u043f\u0442\u043e\u0432\u0430\u044f)\n    </div>\n    <div class='orders-popup__total-wrapper'>\n      <div class='orders-popup__total js-orders-item-total'>"+(null!=(n=this.lambda(null!=(n=null!=e?e.item:e)?n.formatted_total:n,e))?n:"")+"</div>\n    </div>\n  </div>\n</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["cosmos_client/cart/orders_item"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/cart/popup_with_new_orders_item"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){var t;return"<div class='js-popup-with-new-orders-item'>\n  <div class='orders-popup__content aui-form'>\n    <div class='orders-popup__close-icon-button js-close-popup-with-new-orders-item' title='\u0417\u0430\u043a\u0440\u044b\u0442\u044c'></div>\n    <h2 class='aui-header_l'>\u0422\u043e\u0432\u0430\u0440 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d \u0432 \u043a\u043e\u0440\u0437\u0438\u043d\u0443</h2>\n    <div class='js-popup-with-new-orders-item-content'></div>\n    <div class='orders-popup__buttons-wrapper'>\n      <div class='orders-popup__button-wrapper'>\n        <a class='orders-popup__submit-button aui-button aui-button_huge' href='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.config:e)?t.customerCartURL:t,e))+"'>\n          \u041a \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044e\n        </a>\n      </div>\n      <div class='orders-popup__button-wrapper'>\n        <span class='aui-button aui-button_huge aui-button_transparent-grey js-close-popup-with-new-orders-item'>\n          \u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u043f\u043e\u043a\u0443\u043f\u043a\u0430\u043c\n        </span>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/cart/popup_with_new_orders_item"]}.call(this),app.modules.popupWithNewOrdersItem=function(e){function t(){return $(HandlebarsTemplates[u]({config:f.data(p)}))}function i(e){return e.dialog({modal:!0,width:700,dialogClass:d.dialog,open:function(){app.modules.customerOrdersUtils.addPopupOpenedHistory(e)},close:function(){app.modules.customerOrdersUtils.removePopupOpenedHistory()}})}function s(e){e.find(h.contentArea).trigger("render:ordersItem",[f])}function n(){$(this).closest(h.component).dialog("destroy"),$win.off("resize.orderPopup")}function a(e,n){var a;o(n),a=i(r(t())),s(a),c(a),$win.on("resize.orderPopup",function(){c(a)})}function o(e){f=e}function r(e){return e.on("click",h.closeItem,function(){"popup-open"===window.history.state&&window.history.back(),$(window).off("popstate",n)})}function l(){$doc.on("show:popupWithNewOrdersItem",a)}function c(e){e.dialog("option","position",{my:"center",at:"center",of:window})}var h={component:".js-popup-with-new-orders-item",closeItem:".js-close-popup-with-new-orders-item",contentArea:".js-popup-with-new-orders-item-content"},d={dialog:"dialog-default dialog-default_hide-close-button orders-popup"},u="cosmos_client/cart/popup_with_new_orders_item",p="popupWithNewOrdersItemData",f=$("<store>");return e.load=function(){l()},e}(app.modules.popupWithNewOrdersItem||{}),app.modules.ordersCartCounter=function(e){function t(e){if(e===document)throw new Error(u)}function i(e){return parseInt(e.find(c.counter).text())}function s(){return fetch(app.config.api.customerCartURL).then(function(e){if(e&&e.ok)return e.json()})}function n(e,t){if(t.dataset.label)return t.dataset.label=e,void $(t).toggleClass("empty",0===e);$(t).find(c.component).removeClass(h.loading).find(c.counter).text(e).toggleClass("empty",0===e)}function a(e,i){i.length&&app.config.currentUser.primaryProvider&&s().then(function(e){var s=e&&e.cart&&e.cart.items_count;i.each(function(){t(this),n(s,this)})})}function o(e,s){t(e.target),s.resolve(i($(e.target)))}function r(){var e=$(c.counterContainer+", "+c.sideMenuCounter);e.length&&e.first().trigger(d.update,[e])}function l(){$doc.on(d.update,a).on(d.getValue,o)}var c={component:".js-orders-cart-counter",counter:".js-orders-cart-counter-value",counterContainer:".js-orders-cart-counter-container",sideMenuCounter:".js-orders-menu-counter"},h={loading:"orders-cart-counter-loading"},d={update:"update:ordersCartCounter",getValue:"getValue:ordersCartCounter"},u="Event should be emmited on counter container element.";return e.load=function(){l(),r()},e}(app.modules.ordersCartCounter||{}),app.modules.showOrderInformer=function(e){function t(e){$("body").append($(HandlebarsTemplates["cosmos_client/cart/order_informer"]({data:e.data()}))),e.addClass("cart-with-items aui-button_cart-with-item").data({informerEvent:null,gaId:app.config.cartButtonEvent})}function i(){$doc.on("showInformer:addOrdersItem",function(e,i){t(i)})}return e.load=function(){i()},e}(app.modules.showOrderInformer||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/callback/phone_sent_with_success_popup"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div class='callback-result-popup__content js-order-callback-modal'>\n  <p class='callback-result-popup__text'>\n    \u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043b\u044c "+this.escapeExpression((n=null!=(n=t.companyNameRest||(null!=e?e.companyNameRest:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyNameRest",hash:{},data:s}):n))+" "+this.escapeExpression((n=null!=(n=t.companyName||(null!=e?e.companyName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyName",hash:{},data:s}):n))+" \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430.\n  </p>\n  <a class='callback-result-popup__link aui-link js-psws-button' href='"+this.escapeExpression((n=null!=(n=t.companyUrl||(null!=e?e.companyUrl:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyUrl",hash:{},data:s}):n))+"'>\n    \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438\n  </a>\n  <div class='callback-result-popup__mobile-apps'>\n    <p class='callback-result-popup__mobile-apps-text'>\n      \u041e\u0442\u0441\u043b\u0435\u0436\u0438\u0432\u0430\u0439\u0442\u0435 \u0432\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u0432 \u043c\u043e\u0431\u0438\u043b\u044c\u043d\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438\n    </p>\n    <div class='callback-result-popup__mobile-apps-buttons'><a class='callback-result-popup__mobile-apps-button aui-app-button aui-app-button_app-store js-ga-link' data-ga-id='PC4-23641-1' href='https://itunes.apple.com/us/app/pul-s-cen/id765375626' target='_blank'></a><a class='callback-result-popup__mobile-apps-button aui-app-button aui-app-button_google-play js-ga-link' data-ga-id='PC4-23641-2' href='https://play.google.com/store/apps/details?id=ru.apress.android.pc.mopc&amp;hl=ru' target='_blank'></a>\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/callback/phone_sent_with_success_popup"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/callback/callback"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<form class='aui-form orders-callback js-callback js-callback-popup'>\n  <div class='orders-callback__close-button js-callback-close'></div>\n  <div class='aui-form__section-label orders-callback__label'>\n    \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430 \u0438 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f \""+this.escapeExpression((n=null!=(n=t.companyName||(null!=e?e.companyName:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"companyName",hash:{},data:s}):n))+"\" \u0441 \u0432\u0430\u043c\u0438 \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f\n  </div>\n  <div class='aui-form__group orders-callback__input-wrapper js-callback-field-wrapper'>\n    <div class='aui-form__input-wrapper'>\n      <input autocomplete='tel' class='aui-form__text-field js-callback-phone-input' type='tel'>\n    </div>\n    <div class='aui-form__error-message dn'>\n      \u041d\u0435\u0432\u0435\u0440\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d \u0442\u0435\u043b\u0435\u0444\u043e\u043d\n    </div>\n  </div>\n  <button class='aui-button aui-button_big orders-callback__button'>\n    \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c\n  </button>\n</form>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/callback/callback"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/mobile/callback/callback"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return"<div class='create-order-popup dn js-callback-popup'>\n  <form class='apress-form orders js-callback'>\n    <div class='cop-header'>\n      \u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0432\u043e\u043d\u043e\u043a\n    </div>\n    <div class='cop-highlighted-content'>\n      <div class='form-group'>\n        <label class='orders-callback-label' for='phone'>\n          \u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d \u0438 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438 \""+this.escapeExpression((a=null!=(a=t.companyName||(null!=e?e.companyName:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"companyName",hash:{},data:s}):a))+"\" \u0441\u0432\u044f\u0436\u0443\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438\n        </label>\n      </div>\n      <div class='form-group'></div>\n      <div class='with-error apress-form orders-callback-input-wrapper js-callback-form'>\n        <div class='orders-callback-clear dn js-callback-clear'></div>\n        <input autocomplete='tel' class='text-field js-callback-phone-input' id='phone' type='tel'>\n        <div class='phone-block dn js-callback-error-msg'>\n          \u041d\u0435\u0432\u0435\u0440\u043d\u043e \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d \u0442\u0435\u043b\u0435\u0444\u043e\u043d\n        </div>\n      </div>\n    </div>\n    <div class='form-group bottom'>\n      <div class='form-group-inside'>\n        <button class='apress-button ab-default orders-callback-button'>\n          \u0417\u0430\u043a\u0430\u0437\u0430\u0442\u044c \u0437\u0432\u043e\u043d\u043e\u043a\n        </button>\n        <div class='help-block'>\n          "+(null!=(a=null!=(a=t.agreements||(null!=e?e.agreements:e))?a:t.helperMissing,n="function"==typeof a?a.call(e,{name:"agreements",hash:{},data:s}):a)?n:"")+"\n        </div>\n      </div>\n    </div>\n  </form>\n</div>"},useData:!0}),this.HandlebarsTemplates["cosmos_client/mobile/callback/callback"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["cosmos_client/mobile/callback/phone_sent_with_success_popup"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return"<div class='order-result-popup'>\n  <h2 class='orp-header'>\n    \u0417\u0430\u043f\u0440\u043e\u0441 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\n  </h2>\n  <div class='orp-block'>\n    \u0421\u043f\u0430\u0441\u0438\u0431\u043e! \u0412 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u0435\u0434\u0441\u0442\u0430\u0432\u0438\u0442\u0435\u043b\u044c "+this.escapeExpression((a=null!=(a=t.companyNameRest||(null!=e?e.companyNameRest:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"companyNameRest",hash:{},data:s}):a))+" "+this.escapeExpression((a=null!=(a=t.companyName||(null!=e?e.companyName:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"companyName",hash:{},data:s}):a))+" \u0441\u0432\u044f\u0436\u0435\u0442\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u043f\u043e \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u043e\u043c\u0443 \u043d\u043e\u043c\u0435\u0440\u0443 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0430.\n  </div>\n  <div class='orp-block'>\n    <a class='orders-cb-modal-link js-psws-button' href='"+this.escapeExpression((a=null!=(a=t.companyUrl||(null!=e?e.companyUrl:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"companyUrl",hash:{},data:s}):a))+"'>\n      \u0421\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435 \u0442\u043e\u0432\u0430\u0440\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438\n    </a>\n  </div>\n"+(null!=(n=this.invokePartial(i["cosmos_client/order_form_result_popups/_messengers"],e,{name:"cosmos_client/order_form_result_popups/_messengers",data:s,indent:"  ",helpers:t,partials:i}))?n:"")+(null!=(n=this.invokePartial(i["cosmos_client/mobile/order_form_result_popups/_mobile_apps"],e,{name:"cosmos_client/mobile/order_form_result_popups/_mobile_apps",hash:{textZone:null!=e?e.appOrderConfirm:e},data:s,indent:"  ",helpers:t,partials:i}))?n:"")+"</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["cosmos_client/mobile/callback/phone_sent_with_success_popup"]}.call(this),function(){Handlebars.registerPartial("cosmos_client/mobile/order_form_result_popups/_mobile_apps",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return"<div class='orp-footer'>\n  "+(null!=(a=null!=(a=t.textZone||(null!=e?e.textZone:e))?a:t.helperMissing,n="function"==typeof a?a.call(e,{name:"textZone",hash:{},data:s}):a)?n:"")+"\n  <div class='orp-logos'>\n    <a class='app-store-logo js-ga-link' data-ga-id='PC4-18498-1' href='https://itunes.apple.com/us/app/pul-s-cen/id765375626' target='_blank'></a>\n    <a class='google-play-logo js-ga-link' data-ga-id='PC4-18498-2' href='https://play.google.com/store/apps/details?id=ru.apress.android.pc.mopc&amp;hl=ru' target='_blank'></a>\n  </div>\n</div>"},useData:!0}))}.call(this),app.modules.ordersCallback=function(e){function t(){var e=S.data();return HandlebarsTemplates[app.modules.customerOrdersUtils.pathTemplateByPlatform()+"callback/phone_sent_with_success_popup"]({companyNameRest:e.companyNameRest,companyName:e.companyName,companyUrl:e.companyUrl,appOrderConfirm:e.appOrderConfirm})}function i(){E=$(t()).appendTo("body").dialog({autoOpen:!1,modal:!0,width:444,minHeight:0,dialogClass:"dialog-compact callback-result-popup"})}function s(e){$("body").append(I),a(e),I.show()}function n(){I&&I.hide()}function a(e){M=$("."+R.fieldClass).unmask().val(e).trigger("keyup").trigger("init:phoneMask")}function o(e){$(e.target).closest(I).length||(S.find(I).is(":visible")?n():app.config.isUserSigned?v().done(function(e){l(e.user.profile.contacts)}):l())}function r(){var e,t,i=S.offset();I.css({top:S.outerHeight()+H+i.top,left:S.outerWidth()/2-I.outerWidth()/2+i.left}),e=I[0].getBoundingClientRect(),e.top+e.height>(window.innerHeight||document.body.clientHeight)&&I.css({top:i.top-I.outerHeight()-H}),e.left+e.width>(document.body.clientWidth||window.innerHeight)&&(t=i.left-I.outerWidth()/2-F,I.css({left:t+e.width>document.body.clientWidth?document.body.clientWidth-I.outerWidth():t}))}function l(e){s(e),r(),$doc.trigger("showForm:callback",[S])}function c(e){(z?$(".js-one-click-field-wrapper"):$(".js-callback-field-wrapper")).toggleClass("aui-form__group_with-error",e)}function h(){if(M.val().replace(/[^0-9]/gi,"").length)return c(!1),!0;c(!0)}function d(){E.dialog("open")}function u(e,t,i){return A=!0,app.modules.customerOrdersAPI.createOrder({order_type:"callback",company_id:e,customer_phone:t,items_attributes:{0:{subject_id:i}}})}function p(e){return L=!0,$.ajax({url:app.config.api.validationURL,data:{phone:e}})}function f(e){$doc.trigger("phoneSentWithSuccess",[S,e]),S.data({statistics:null}),app.config.isMobile?(E.dialog("destroy"),i()):n(),z?$doc.trigger("successOrderInfo:callback"):d(),c(!1),b()}function m(e,t,i){return u(e,t,i).then(f.bind(this,t)).always(function(){A=!1})}function g(){var e=M.cleanVal(),t=S.data("company-id"),i=S.data("product-id")||$(".js-cosmos-create-order-data-container").data("subject-id");if(!(A||L||O))return p(e).then(function(s){if(!s.valid)return void c(!0);app.config.isUserSigned?m(t,e,i):app.modules.customerOrdersUtils.registerWithSID().then(function(){m(t,e,i),$doc.trigger("registerWithSid:callback",[S])}).always(function(){O=!1}),z&&$doc.trigger("processOrderInfo:callback")}).always(function(){L=!1}),!1}function v(){return $.ajax({url:app.config.api.updateUserURL.replace("_id_",app.config.currentUser.id),method:"GET"})}function _(){app.config.isUserSigned?v().done(function(e){a(e.user.profile.contacts)}):a()}function b(){var e=$(".js-callback-phone-input").val();app.config.currentUser.contacts||$.ajax({url:app.config.api.updateUserURL.replace("_id_",app.config.currentUser.id),method:"PUT",data:{"profile_attributes[contacts]":e},success:function(){$.extend(!0,app.config.currentUser,{contacts:e})}})}function y(){$doc.on("click",".js-callback-close",n).on("input propertychange focus","."+R.fieldClass,function(){M=$(this),S.data("user-phone",$(this).val())}).on("submit",".js-callback",function(){return $doc.trigger("submitForm:callback",[S]),z=$(this).hasClass("js-orders-one-click"),h()&&g(),!1}),document.addEventListener("showMenu:rubricsListPopup",n)}function w(e,t){S=t,N=$(".js-callback-field-wrapper"),k(t.data()),app.config.isMobile?d():o(e,t)}function k(e){app.config.isMobile?C(e):x(e)}function x(e){I||(I=$(HandlebarsTemplates[app.modules.customerOrdersUtils.pathTemplateByPlatform()+"callback/callback"](e)),P=$(".js-orders-callback-link"),i())}function C(e){var t=$(".js-callback-popup");t.length?E=t.dialog({modal:!0,resizable:!1,width:"440px",dialogClass:"order-form-dialog order-popup-wrapper",open:function(){app.modules.customerOrdersUtils.addPopupOpenedHistory(t)},close:function(){app.modules.customerOrdersUtils.removePopupOpenedHistory()}}):(I=$(HandlebarsTemplates[app.modules.customerOrdersUtils.pathTemplateByPlatform()+"callback/callback"](e)),j())}function j(){E=I.appendTo("body"),E.dialog({modal:!0,resizable:!1,width:"440px",dialogClass:"order-form-dialog order-popup-wrapper",open:function(){app.modules.customerOrdersUtils.addPopupOpenedHistory(E)},close:function(){app.modules.customerOrdersUtils.removePopupOpenedHistory()}}),_(),$doc.trigger("showForm:callback",[S])}function D(){$doc.on("click",".js-orders-callback-link",function(e){var t=$(e.currentTarget),i=t.data();if(app.modules.customerOrdersUtils.isLockedRequestCompanyOrder(i.type,app.config.company&&app.config.company.id,i.company_id))return void app.modules.closedOrderPopup.getPopup.call(this);w(e,t)})}function T(){(S=$(".js-orders-one-click"))&&_()}var S,P,I,E,M,N,A,L,O,z,R={fieldClass:"js-callback-phone-input"},H=10,F=36;return e.load=function(){T(),D(),y()},e.createCallBack=u,e}(app.modules.callback||{}),app.modules.userUtils=function(e){function t(e){app.modules.applicationUtils.invariant("string"==typeof e,"providerName should be a string, instead %s was passed.",e),app.modules.applicationUtils.invariant(~app.config.socialNetworkProviders.indexOf(e),"providerName should be in this range: "+app.config.socialNetworkProviders.join(", ")+" instead %s was given",e)}function i(t){return e.validateProviderName(t),app.config.currentUser[t+"UID"]}function s(){return"sid"===app.config.currentUser.primaryProvider}function n(e,t){return t=t||app.config.currentUser,Array.isArray(e)?e.reduce(function(t,i,s){return"string"==typeof t?t:s===e.length-1?t[i]||null:t[i]||t},t):t[e]||null}function a(e){return n(["primaryProvider","primary_provider"],e)}function o(e){appEL.set("app.config.currentUser.id",e.id).set("app.config.currentUser.sid",n("sid",e)).set("app.config.currentUser.email",n("email",e)).set("app.config.currentUser.phone",n("phone",e)).set("app.config.currentUser.primaryProvider",a(e))}function r(e){$.extend(!0,app.config,{currentUser:{id:e.id,sid:n("sid",e),email:n("email",e),phone:n("phone",e),primaryProvider:a(e)}})}function l(e,t){app.config.isUserSigned=!!e.id,appEL&&"simple"!==t?o(e):r(e)}function c(e,t){return app.modules.userAPI["sign"+e](t).then(function(e){return l(e.user),e})}return $.extend(e,{getCurrentUserSocialNetworkUID:i,validateProviderName:t,isSignedBySID:s,setConfigData:l,getUserAttribute:n,signUp:c.bind(null,"Up"),signIn:c.bind(null,"In")})}(app.modules.userUtils||{}),app.modules.userAPI=function(e){function t(e,t){var i=new FormData,s="in"===e?"session":"user";return t.withSID&&$.extend(t,{sid:d.generateUUID()}),t.type&&i.append("type",t.type),function e(t,s){Object.keys(t).forEach(function(n){if("type"!==n&&"response_token"!==n){var a=s+"["+n+"]";"object"==typeof t[n]?e(t[n],a):i.append(a,t[n])}})}(t,s),t.response_token&&i.append("response_token",t.response_token),i.__test__=t,i}function i(e,t){var i=Object.keys(t)[0];return e.replace("_"+i+"_",t[i])}function s(e){return"in"===e?app.config.usersSessionURL:app.config.usersRegistrationURL}function n(e,i){return $.ajax({url:s(e),method:"POST",data:t(e,i),processData:!1,contentType:!1})}function a(e){return $.ajax({url:app.config.api.mergesURL,method:"POST",data:e})}function o(e,t){return $.ajax({url:app.config.api.updateUserURL.replace("_id_",e),method:"PUT",data:t})}function r(e){return $.ajax({url:i(app.config.api.userSocialProviderURL,{provider:e}),method:"DELETE"})}function l(e){return d.invariant("string"==typeof e,"url should be a string, instead %s was passed",e),app.modules.applicationUtils.listenProcess({url:e})}function c(e){return d.validateOnObjectType(e),n("in",e)}function h(e){return d.validateOnObjectType(e),n("up",e)}var d=app.modules.applicationUtils;return $.extend(e,{deleteSocialProvider:r,listenSocialRegistrationProcess:l,signIn:c,signUp:h,updateUser:o,mergeUsers:a})}(app.modules.userAPI||{}),app.modules.clearanceConfigChangesHandler=function(e){function t(e){app.config.disableSessionsSynchronization||app.config.currentUser.id===e.id||location.reload(!0)}function i(e){!app.config.disableSessionsSynchronization&&IStorage.trigger(n,e)}function s(){appEL&&appEL.addEventListener(n,i),IStorage.on(n,t)}var n="app.config.currentUser";return e.load=function(){s(),i(app.config.currentUser)},e}(app.modules.clearanceConfigChangesHandler||{}),function(){function e(e){t(e,"Need schema to initialize Validation Service"),t("object"==typeof e&&Object.keys(e).length,"Need schema to be an object with keys"),this._schema=e}var t=app.modules.applicationUtils.invariant;e.prototype={_prepareDataToSendRequest:function(e,t,i){var s={};return s[t]=e,$.extend({},s,i)},_validateDataWithAPI:function(e,t){return $.ajax({url:e,data:t})},_validateDataWithRegExp:function(e,t){var i=!!this._schema[t]&&this._schema[t].test(e);return $.Deferred().resolve({valid:i})},_isURL:function(e){return/^http/.test(e)},validate:function(e,i,s){return t(null!=e,"value argument is required"),t(null!=i,"type argument is required"),t("string"==typeof i,"type argument should be a string"),t(s===undefined||"object"==typeof s&&Object.keys(s).length,"additionalData argument should be an object with data"),this._isURL(this._schema[i])?this._validateDataWithAPI(this._schema[i],this._prepareDataToSendRequest(e,i,s)):this._validateDataWithRegExp(e,i)}},app.ValidationService=e}(),app.modules.userValidationService=function(e){function t(e){return Object.keys(e).reduce(function(t,i){return t[i]=new RegExp(e[i],"i"),t},{})}function i(){return $.extend({},s(),{phone:app.config.api.validationURL})}function s(){return t({email:app.config.validation.user.emailRegExpTemplate,name:app.config.validation.user.nameRegExpTemplate,nameWithAllowedSymbols:app.config.validation.user.nameWithAllowedSymbolsRegExpTemplate,nameWithDisallowedSymbols:app.config.validation.user.nameWithDisallowedSymbolsRegExpTemplate,password:app.config.validation.user.passwordRegExpTemplate})}return e.load=function(){app.config.validation.user&&(app.modules.userValidationService=new app.ValidationService(i()))},e}(app.modules.userValidationService||{}),app.modules.crossDomainAuthBridge=function(e){function t(e){return e+C}function i(e,i){return{type:t(e),payload:i}}function s(e){return $.post(app.config.ssoUsersSessionHandleSigninURL,{token:e})}function n(){return $.get(app.config.ssoUsersSessionRequestURL)}function a(){return k?k[0].contentWindow:window.parent}function o(e,t){return a().postMessage(i(e,t),"*"),$.Deferred().resolve()}function r(){app.config.isUserSigned?o("checkUser:anotherDomain",{currentUser:app.config.currentUser}):o("getAuthToken:anotherDomain")}function l(e){return app.config.isUserSigned&&app.config.currentUser.id===e}function c(){return $("<iframe>").addClass(x.iframe).attr({src:app.config.crossDomainIframe})}function h(e){return e.appendTo("body")}function d(){return h(c())}function u(e){return $.Deferred().resolve({crossdomainProcessCompleted:!0,currentUser:e&&e.currentUser})}function p(e){switch(e.type){case t("continueLoadModules:mainDomain"):return u(e.payload);case t("getAuthToken:mainDomain"):return n().then(m.bind(null,"anotherDomain"));case t("sendAuthToken:mainDomain"):return s(e.payload);case t("checkUser:anotherDomain"):return l(e.payload.currentUser.id)?o("continueLoadModules:mainDomain",{currentUser:e.payload.currentUser}):o("getAuthToken:mainDomain");case t("authorizeUser:anotherDomain"):case t("authorizeUser:mainDomain"):return s(e.payload).then(f.bind(null,t("authorizeUser:mainDomain")===e.type));case t("getAuthToken:anotherDomain"):return app.config.isUserSigned?n().then(m.bind(null,"mainDomain")):o("continueLoadModules:mainDomain")}}function f(e,t){var i=t.user;return e?u({currentUser:i}):o("continueLoadModules:mainDomain",{currentUser:i})}function m(e,t){return o("authorizeUser:"+e,t.token)}function g(e){e.originalEvent.data.type&&~e.originalEvent.data.type.indexOf(C)&&p(e.originalEvent.data).done(function(e){e&&e.crossdomainProcessCompleted&&(app.modules.userUtils.setConfigData(e.currentUser||{},"simple"),j.resolve())})}function v(){y(),r(),setTimeout(function(){j.resolve()},3e3)}function _(e,t,i){i.crossDomain&&(i.xhrFields={withCredentials:!i.declineCredentials},t.setRequestHeader("X-Requested-With","XMLHttpRequest"))}function b(){$(document).ajaxSend(_)}function y(){$(window).on("message",g)}function w(){return k?r():k=d().one("load",v),j}var k,x={iframe:"cross-domain-auth-bridge js-cross-domain-auth-bridge"},C=":crossDomainAuthBridge",j=$.Deferred();return e.authorizeUser=w,e.listenParentWindow=y,e.load=function(){b()},e}(app.modules.crossDomainAuthBridge||{}),$(window).load(app.modules.crossDomainAuthBridge.listenParentWindow),app.modules.authComponentLoader=function(e){function t(e){e.target.closest(".js-show-dynamic-auth-component")&&!app.modules.dynamicAuthComponent&&app.config.authComponent.deferredLoadUrl&&(document.removeEventListener("click",t),r("dynamicAuthComponent","onClickItem",e))}function i(e,t){!app.modules.dynamicAuthComponent&&app.config.authComponent.deferredLoadUrl&&($doc.off("show:dynamicAuthComponent",i),r("dynamicAuthComponent","onShowDynamicAuthComponent",e,t))}function s(e,t,i){!app.modules.authComponent&&app.config.authComponent.deferredLoadUrl&&($doc.off("render:authComponent",s),r("authComponent","onRenderComponent",e,t,i))}function n(e,t){!app.modules.staticAuthComponent&&app.config.authComponent.deferredLoadUrl&&($doc.off("forceRender:staticAuthComponent",n),r("staticAuthComponent","onForceRenderStaticAuthComponent",e,t))}function a(e,t,i){!app.modules.authComponent&&app.config.authComponent.deferredLoadUrl&&($doc.off("register:authComponent",a),r("authComponent","onRegister",e,t,i))}function o(e,t){!app.modules.authComponent&&app.config.authComponent.deferredLoadUrl&&($doc.off("render:socialNetworksAuthComponent",a),r("socialNetworksAuthComponent","onRenderComponent",e,t))}function r(e,t,i,s,n){apressImport(app.config.authComponent.deferredLoadUrl).then(function(){app.modules[e][t](i,s,n)})}function l(){document.addEventListener("click",t),$doc.on("show:dynamicAuthComponent",i).on("render:authComponent",s).on("forceRender:staticAuthComponent",n).on("register:authComponent",a).on("render:socialNetworksAuthComponent",o)}return e.load=l,e}(app.modules.authComponentLoader||{}),function(e,t,i){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports&&"undefined"==typeof Meteor?module.exports=e(require("jquery")):e(t||i)}(function(e){"use strict";var t=function(t,i,s){var n={invalid:[],getCaret:function(){try{var e,i=0,s=t.get(0),a=document.selection,o=s.selectionStart;return a&&-1===navigator.appVersion.indexOf("MSIE 10")?(e=a.createRange(),e.moveStart("character",-n.val().length),i=e.text.length):(o||"0"===o)&&(i=o),i}catch(e){}},setCaret:function(e){try{if(t.is(":focus")){var i,s=t.get(0);s.setSelectionRange?s.setSelectionRange(e,e):(i=s.createTextRange(),i.collapse(!0),i.moveEnd("character",e),i.moveStart("character",e),i.select())}}catch(e){}},events:function(){t.on("keydown.mask",function(e){t.data("mask-keycode",e.keyCode||e.which),t.data("mask-previus-value",t.val()),t.data("mask-previus-caret-pos",n.getCaret()),n.maskDigitPosMapOld=n.maskDigitPosMap}).on(e.jMaskGlobals.useInput?"input.mask":"keyup.mask",n.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){r===n.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("blur.mask",function(){r=n.val()}).on("focus.mask",function(t){!0===s.selectOnFocus&&e(t.target).select()}).on("focusout.mask",function(){s.clearIfNotMatch&&!a.test(n.val())&&n.val("")})},getRegexMask:function(){for(var e,t,s,n,a,r,l=[],c=0;c<i.length;c++)e=o.translation[i.charAt(c)],e?(t=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),s=e.optional,n=e.recursive,n?(l.push(i.charAt(c)),a={digit:i.charAt(c),pattern:t}):l.push(s||n?t+"?":t)):l.push(i.charAt(c).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return r=l.join(""),a&&(r=r.replace(new RegExp("("+a.digit+"(.*"+a.digit+")?)"),"($1)?").replace(new RegExp(a.digit,"g"),a.pattern)),new RegExp(r)},destroyEvents:function(){t.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(e){var i,s=t.is("input"),n=s?"val":"text";return arguments.length>0?(t[n]()!==e&&t[n](e),i=t):i=t[n](),i},calculateCaretPosition:function(e){var i=n.getMasked(),s=n.getCaret();if(e!==i){var a=t.data("mask-previus-caret-pos")||0,o=i.length,r=e.length,l=0,c=0,h=0,d=0,u=0;for(u=s;u<o&&n.maskDigitPosMap[u];u++)c++;for(u=s-1;u>=0&&n.maskDigitPosMap[u];u--)l++;for(u=s-1;u>=0;u--)n.maskDigitPosMap[u]&&h++;for(u=a-1;u>=0;u--)n.maskDigitPosMapOld[u]&&d++;if(s>r)s=10*o;else if(a>=s&&a!==r){if(!n.maskDigitPosMapOld[s]){var p=s;s-=d-h,s-=l,n.maskDigitPosMap[s]&&(s=p)}}else s>a&&(s+=h-d,s+=c)}return s},behaviour:function(i){i=i||window.event,n.invalid=[];var s=t.data("mask-keycode");if(-1===e.inArray(s,o.byPassKeys)){var a=n.getMasked(),r=n.getCaret(),l=t.data("mask-previus-value")||"";return setTimeout(function(){n.setCaret(n.calculateCaretPosition(l))},e.jMaskGlobals.keyStrokeCompensation),n.val(a),n.setCaret(r),n.callbacks(i)}},getMasked:function(e,t){var a,r,l=[],c=t===undefined?n.val():t+"",h=0,d=i.length,u=0,p=c.length,f=1,m="push",g=-1,v=0,_=[];s.reverse?(m="unshift",f=-1,a=0,h=d-1,u=p-1,r=function(){return h>-1&&u>-1}):(a=d-1,r=function(){return h<d&&u<p});for(var b;r();){var y=i.charAt(h),w=c.charAt(u),k=o.translation[y];k?(w.match(k.pattern)?(l[m](w),k.recursive&&(-1===g?g=h:h===a&&h!==g&&(h=g-f),a===g&&(h-=f)),h+=f):w===b?(v--,b=undefined):k.optional?(h+=f,u-=f):k.fallback?(l[m](k.fallback),h+=f,u-=f):n.invalid.push({p:u,v:w,e:k.pattern}),u+=f):(e||l[m](y),w===y?(_.push(u),
u+=f):(b=y,_.push(u+v),v++),h+=f)}var x=i.charAt(a);d!==p+1||o.translation[x]||l.push(x);var C=l.join("");return n.mapMaskdigitPositions(C,_,p),C},mapMaskdigitPositions:function(e,t,i){var a=s.reverse?e.length-i:0;n.maskDigitPosMap={};for(var o=0;o<t.length;o++)n.maskDigitPosMap[t[o]+a]=1},callbacks:function(e){var a=n.val(),o=a!==r,l=[a,e,t,s],c=function(e,t,i){"function"==typeof s[e]&&t&&s[e].apply(this,i)};c("onChange",!0===o,l),c("onKeyPress",!0===o,l),c("onComplete",a.length===i.length,l),c("onInvalid",n.invalid.length>0,[a,e,t,n.invalid,s])}};t=e(t);var a,o=this,r=n.val();i="function"==typeof i?i(n.val(),undefined,t,s):i,o.mask=i,o.options=s,o.remove=function(){var e=n.getCaret();return o.options.placeholder&&t.removeAttr("placeholder"),t.data("mask-maxlength")&&t.removeAttr("maxlength"),n.destroyEvents(),n.val(o.getCleanVal()),n.setCaret(e),t},o.getCleanVal=function(){return n.getMasked(!0)},o.getMaskedVal=function(e){return n.getMasked(!1,e)},o.init=function(r){if(r=r||!1,s=s||{},o.clearIfNotMatch=e.jMaskGlobals.clearIfNotMatch,o.byPassKeys=e.jMaskGlobals.byPassKeys,o.translation=e.extend({},e.jMaskGlobals.translation,s.translation),o=e.extend(!0,{},o,s),a=n.getRegexMask(),r)n.events(),n.val(n.getMasked());else{s.placeholder&&t.attr("placeholder",s.placeholder),t.data("mask")&&t.attr("autocomplete","off");for(var l=0,c=!0;l<i.length;l++){var h=o.translation[i.charAt(l)];if(h&&h.recursive){c=!1;break}}c&&t.attr("maxlength",i.length).data("mask-maxlength",!0),n.destroyEvents(),n.events();var d=n.getCaret();n.val(n.getMasked()),n.setCaret(d)}},o.init(!t.is("input"))};e.maskWatchers={};var i=function(){var i=e(this),n={},a="data-mask-",o=i.attr("data-mask");if(i.attr(a+"reverse")&&(n.reverse=!0),i.attr(a+"clearifnotmatch")&&(n.clearIfNotMatch=!0),"true"===i.attr(a+"selectonfocus")&&(n.selectOnFocus=!0),s(i,o,n))return i.data("mask",new t(this,o,n))},s=function(t,i,s){s=s||{};var n=e(t).data("mask"),a=JSON.stringify,o=e(t).val()||e(t).text();try{return"function"==typeof i&&(i=i(o)),"object"!=typeof n||a(n.options)!==a(s)||n.mask!==i}catch(e){}},n=function(e){var t,i=document.createElement("div");return e="on"+e,t=e in i,t||(i.setAttribute(e,"return;"),t="function"==typeof i[e]),i=null,t};e.fn.mask=function(i,n){n=n||{};var a=this.selector,o=e.jMaskGlobals,r=o.watchInterval,l=n.watchInputs||o.watchInputs,c=function(){if(s(this,i,n))return e(this).data("mask",new t(this,i,n))};return e(this).each(c),a&&""!==a&&l&&(clearInterval(e.maskWatchers[a]),e.maskWatchers[a]=setInterval(function(){e(document).find(a).each(c)},r)),this},e.fn.masked=function(e){return this.data("mask").getMaskedVal(e)},e.fn.unmask=function(){return clearInterval(e.maskWatchers[this.selector]),delete e.maskWatchers[this.selector],this.each(function(){var t=e(this).data("mask");t&&t.remove().removeData("mask")})},e.fn.cleanVal=function(){return this.data("mask").getCleanVal()},e.applyDataMask=function(t){t=t||e.jMaskGlobals.maskElements,(t instanceof e?t:e(t)).filter(e.jMaskGlobals.dataMaskAttr).each(i)};var a={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,keyStrokeCompensation:10,useInput:!/Chrome\/[2-4][0-9]|SamsungBrowser/.test(window.navigator.userAgent)&&n("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};e.jMaskGlobals=e.jMaskGlobals||{},a=e.jMaskGlobals=e.extend(!0,{},a,e.jMaskGlobals),a.dataMask&&e.applyDataMask(),setInterval(function(){e.jMaskGlobals.watchDataMask&&e.applyDataMask()},a.watchInterval)},window.jQuery,window.Zepto),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return i===undefined&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i),i}:e(jQuery)}(function(e){"use strict";var t=e(document),i=e(window),s="selectric",n=".sl",a=["a","e","i","o","u","n","c","y"],o=[/[\xE0-\xE5]/g,/[\xE8-\xEB]/g,/[\xEC-\xEF]/g,/[\xF2-\xF6]/g,/[\xF9-\xFC]/g,/[\xF1]/g,/[\xE7]/g,/[\xFD-\xFF]/g],r=function(t,i){var s=this;s.element=t,s.$element=e(t),s.state={multiple:!!s.$element.attr("multiple"),enabled:!1,opened:!1,currValue:-1,selectedIdx:-1,highlightedIdx:-1},s.eventTriggers={open:s.open,close:s.close,destroy:s.destroy,refresh:s.refresh,init:s.init},s.init(i)};r.prototype={utils:{isMobile:function(){return/android|ip(hone|od|ad)/i.test(navigator.userAgent)},escapeRegExp:function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},replaceDiacritics:function(e){for(var t=o.length;t--;)e=e.toLowerCase().replace(o[t],a[t]);return e},format:function(e){var t=arguments;return(""+e).replace(/\{(?:(\d+)|(\w+))\}/g,function(e,i,s){return s&&t[1]?t[1][s]:t[i]})},nextEnabledItem:function(e,t){for(;e[t=(t+1)%e.length].disabled;);return t},previousEnabledItem:function(e,t){for(;e[t=(t>0?t:e.length)-1].disabled;);return t},toDash:function(e){return e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()},triggerCallback:function(t,i){var n=i.element,a=i.options["on"+t],o=[n].concat([].slice.call(arguments).slice(1));e.isFunction(a)&&a.apply(n,o),e(n).trigger(s+"-"+this.toDash(t),o)},arrayToClassname:function(t){var i=e.grep(t,function(e){return!!e});return e.trim(i.join(" "))}},init:function(t){var i=this;if(i.options=e.extend(!0,{},e.fn[s].defaults,i.options,t),i.utils.triggerCallback("BeforeInit",i),i.destroy(!0),i.options.disableOnMobile&&i.utils.isMobile())return void(i.disableOnMobile=!0);i.classes=i.getClassNames();var n=e("<input/>",{"class":i.classes.input,readonly:i.utils.isMobile()}),a=e("<div/>",{"class":i.classes.items,tabindex:-1}),o=e("<div/>",{"class":i.classes.scroll}),r=e("<div/>",{"class":i.classes.prefix,html:i.options.arrowButtonMarkup}),l=e("<span/>",{"class":"label"}),c=i.$element.wrap("<div/>").parent().append(r.prepend(l),a,n),h=e("<div/>",{"class":i.classes.hideselect});i.elements={input:n,items:a,itemsScroll:o,wrapper:r,label:l,outerWrapper:c},i.options.nativeOnMobile&&i.utils.isMobile()&&(i.elements.input=undefined,h.addClass(i.classes.prefix+"-is-native"),i.$element.on("change",function(){i.refresh()})),i.$element.on(i.eventTriggers).wrap(h),i.originalTabindex=i.$element.prop("tabindex"),i.$element.prop("tabindex",-1),i.populate(),i.activate(),i.utils.triggerCallback("Init",i)},activate:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.$element.width();t.removeClass(e.classes.tempshow),e.utils.triggerCallback("BeforeActivate",e),e.elements.outerWrapper.prop("class",e.utils.arrayToClassname([e.classes.wrapper,e.$element.prop("class").replace(/\S+/g,e.classes.prefix+"-$&"),e.options.responsive?e.classes.responsive:""])),e.options.inheritOriginalWidth&&i>0&&e.elements.outerWrapper.width(i),e.unbindEvents(),e.$element.prop("disabled")?(e.elements.outerWrapper.addClass(e.classes.disabled),e.elements.input&&e.elements.input.prop("disabled",!0)):(e.state.enabled=!0,e.elements.outerWrapper.removeClass(e.classes.disabled),e.$li=e.elements.items.removeAttr("style").find("li"),e.bindEvents()),e.utils.triggerCallback("Activate",e)},getClassNames:function(){var t=this,i=t.options.customClass,s={};return e.each("Input Items Open Disabled TempShow HideSelect Wrapper Focus Hover Responsive Above Below Scroll Group GroupLabel".split(" "),function(e,n){var a=i.prefix+n;s[n.toLowerCase()]=i.camelCase?a:t.utils.toDash(a)}),s.prefix=i.prefix,s},setLabel:function(){var t=this,i=t.options.labelBuilder;if(t.state.multiple){var s=e.isArray(t.state.currValue)?t.state.currValue:[t.state.currValue];s=0===s.length?[0]:s;var n=e.map(s,function(i){return e.grep(t.lookupItems,function(e){return e.index===i})[0]});n=e.grep(n,function(t){return n.length>1||0===n.length?""!==e.trim(t.value):t}),n=e.map(n,function(s){return e.isFunction(i)?i(s):t.utils.format(i,s)}),t.options.multiple.maxLabelEntries&&(n.length>=t.options.multiple.maxLabelEntries+1?(n=n.slice(0,t.options.multiple.maxLabelEntries),n.push(e.isFunction(i)?i({text:"..."}):t.utils.format(i,{text:"..."}))):n.slice(n.length-1)),t.elements.label.html(n.join(t.options.multiple.separator))}else{var a=t.lookupItems[t.state.currValue];t.elements.label.html(e.isFunction(i)?i(a):t.utils.format(i,a))}},populate:function(){var t=this,i=t.$element.children(),s=t.$element.find("option"),n=s.filter(":selected"),a=s.index(n),o=0,r=t.state.multiple?[]:0;n.length>1&&t.state.multiple&&(a=[],n.each(function(){a.push(e(this).index())})),t.state.currValue=~a?a:r,t.state.selectedIdx=t.state.currValue,t.state.highlightedIdx=t.state.currValue,t.items=[],t.lookupItems=[],i.length&&(i.each(function(i){var s=e(this);if(s.is("optgroup")){var n={element:s,label:s.prop("label"),groupDisabled:s.prop("disabled"),items:[]};s.children().each(function(i){var s=e(this);n.items[i]=t.getItemData(o,s,n.groupDisabled||s.prop("disabled")),t.lookupItems[o]=n.items[i],o++}),t.items[i]=n}else t.items[i]=t.getItemData(o,s,s.prop("disabled")),t.lookupItems[o]=t.items[i],o++}),t.setLabel(),t.elements.items.append(t.elements.itemsScroll.html(t.getItemsMarkup(t.items))))},getItemData:function(t,i,s){var n=this;return{index:t,element:i,value:i.val(),className:i.prop("class"),text:i.html(),slug:e.trim(n.utils.replaceDiacritics(i.html())),selected:i.prop("selected"),disabled:s}},getItemsMarkup:function(t){var i=this,s="<ul>";return e.isFunction(i.options.listBuilder)&&i.options.listBuilder&&(t=i.options.listBuilder(t)),e.each(t,function(t,n){n.label!==undefined?(s+=i.utils.format('<ul class="{1}"><li class="{2}">{3}</li>',i.utils.arrayToClassname([i.classes.group,n.groupDisabled?"disabled":"",n.element.prop("class")]),i.classes.grouplabel,n.element.prop("label")),e.each(n.items,function(e,t){s+=i.getItemMarkup(t.index,t)}),s+="</ul>"):s+=i.getItemMarkup(n.index,n)}),s+"</ul>"},getItemMarkup:function(t,i){var s=this,n=s.options.optionsItemBuilder,a={value:i.value,text:i.text,slug:i.slug,index:i.index};return s.utils.format('<li data-index="{1}" class="{2}">{3}</li>',t,s.utils.arrayToClassname([i.className,t===s.items.length-1?"last":"",i.disabled?"disabled":"",i.selected?"selected":""]),e.isFunction(n)?s.utils.format(n(i,this.$element,t),i):s.utils.format(n,a))},unbindEvents:function(){var e=this;e.elements.wrapper.add(e.$element).add(e.elements.outerWrapper).add(e.elements.input).off(n)},bindEvents:function(){var t=this;t.elements.outerWrapper.on("mouseenter"+n+" mouseleave"+n,function(i){e(this).toggleClass(t.classes.hover,"mouseenter"===i.type),t.options.openOnHover&&(clearTimeout(t.closeTimer),"mouseleave"===i.type?t.closeTimer=setTimeout(e.proxy(t.close,t),t.options.hoverIntentTimeout):t.open())}),t.elements.wrapper.on("click"+n,function(e){t.state.opened?t.close():t.open(e)}),t.options.nativeOnMobile&&t.utils.isMobile()||(t.$element.on("focus"+n,function(){t.elements.input.focus()}),t.elements.input.prop({tabindex:t.originalTabindex,disabled:!1}).on("keydown"+n,e.proxy(t.handleKeys,t)).on("focusin"+n,function(e){t.elements.outerWrapper.addClass(t.classes.focus),t.elements.input.one("blur",function(){t.elements.input.blur()}),t.options.openOnFocus&&!t.state.opened&&t.open(e)}).on("focusout"+n,function(){t.elements.outerWrapper.removeClass(t.classes.focus)}).on("input propertychange",function(){var i=t.elements.input.val(),s=new RegExp("^"+t.utils.escapeRegExp(i),"i");clearTimeout(t.resetStr),t.resetStr=setTimeout(function(){t.elements.input.val("")},t.options.keySearchTimeout),i.length&&e.each(t.items,function(e,i){if(!i.disabled&&s.test(i.text)||s.test(i.slug))return void t.highlight(e)})})),t.$li.on({mousedown:function(e){e.preventDefault(),e.stopPropagation()},click:function(){return t.select(e(this).data("index")),!1}})},handleKeys:function(t){var i=this,s=t.which,n=i.options.keys,a=e.inArray(s,n.previous)>-1,o=e.inArray(s,n.next)>-1,r=e.inArray(s,n.select)>-1,l=e.inArray(s,n.open)>-1,c=i.state.highlightedIdx,h=a&&0===c||o&&c+1===i.items.length,d=0;if(13!==s&&32!==s||t.preventDefault(),a||o){if(!i.options.allowWrap&&h)return;a&&(d=i.utils.previousEnabledItem(i.lookupItems,c)),o&&(d=i.utils.nextEnabledItem(i.lookupItems,c)),i.highlight(d)}if(r&&i.state.opened)return i.select(c),void(i.state.multiple&&i.options.multiple.keepMenuOpen||i.close());l&&!i.state.opened&&i.open()},refresh:function(){var e=this;e.populate(),e.activate(),e.utils.triggerCallback("Refresh",e)},setOptionsDimensions:function(){var e=this,t=e.elements.items.closest(":visible").children(":hidden").addClass(e.classes.tempshow),i=e.options.maxHeight,s=e.elements.items.outerWidth(),n=e.elements.wrapper.outerWidth()-(s-e.elements.items.width());!e.options.expandToItemText||n>s?e.finalWidth=n:(e.elements.items.css("overflow","scroll"),e.elements.outerWrapper.width(9e4),e.finalWidth=e.elements.items.width(),e.elements.items.css("overflow",""),e.elements.outerWrapper.width("")),e.elements.items.width(e.finalWidth).height()>i&&e.elements.items.height(i),t.removeClass(e.classes.tempshow)},isInViewport:function(){var e=this;if(!0===e.options.forceRenderAbove)e.elements.outerWrapper.addClass(e.classes.above);else if(!0===e.options.forceRenderBelow)e.elements.outerWrapper.addClass(e.classes.below);else{var t=i.scrollTop(),s=i.height(),n=e.elements.outerWrapper.offset().top,a=e.elements.outerWrapper.outerHeight(),o=n+a+e.itemsHeight<=t+s,r=n-e.itemsHeight>t,l=!o&&r,c=!l;e.elements.outerWrapper.toggleClass(e.classes.above,l),e.elements.outerWrapper.toggleClass(e.classes.below,c)}},detectItemVisibility:function(t){var i=this,s=i.$li.filter("[data-index]");i.state.multiple&&(t=e.isArray(t)&&0===t.length?0:t,t=e.isArray(t)?Math.min.apply(Math,t):t);var n=s.eq(t).outerHeight(),a=s[t].offsetTop,o=i.elements.itemsScroll.scrollTop(),r=a+2*n;i.elements.itemsScroll.scrollTop(r>o+i.itemsHeight?r-i.itemsHeight:a-n<o?a-n:o)},open:function(i){var a=this;if(a.options.nativeOnMobile&&a.utils.isMobile())return!1;a.utils.triggerCallback("BeforeOpen",a),i&&(i.preventDefault(),a.options.stopPropagation&&i.stopPropagation()),a.state.enabled&&(a.setOptionsDimensions(),e("."+a.classes.hideselect,"."+a.classes.open).children()[s]("close"),a.state.opened=!0,a.itemsHeight=a.elements.items.outerHeight(),a.itemsInnerHeight=a.elements.items.height(),a.elements.outerWrapper.addClass(a.classes.open),a.elements.input.val(""),i&&"focusin"!==i.type&&a.elements.input.focus(),setTimeout(function(){t.on("click"+n,e.proxy(a.close,a)).on("scroll"+n,e.proxy(a.isInViewport,a))},1),a.isInViewport(),a.options.preventWindowScroll&&t.on("mousewheel"+n+" DOMMouseScroll"+n,"."+a.classes.scroll,function(t){var i=t.originalEvent,s=e(this).scrollTop(),n=0;"detail"in i&&(n=-1*i.detail),"wheelDelta"in i&&(n=i.wheelDelta),"wheelDeltaY"in i&&(n=i.wheelDeltaY),"deltaY"in i&&(n=-1*i.deltaY),(s===this.scrollHeight-a.itemsInnerHeight&&n<0||0===s&&n>0)&&t.preventDefault()}),a.detectItemVisibility(a.state.selectedIdx),a.highlight(a.state.multiple?-1:a.state.selectedIdx),a.utils.triggerCallback("Open",a))},close:function(){var e=this;e.utils.triggerCallback("BeforeClose",e),t.off(n),e.elements.outerWrapper.removeClass(e.classes.open),e.state.opened=!1,e.utils.triggerCallback("Close",e)},change:function(){var t=this;t.utils.triggerCallback("BeforeChange",t),t.state.multiple?(e.each(t.lookupItems,function(e){t.lookupItems[e].selected=!1,t.$element.find("option").prop("selected",!1)}),e.each(t.state.selectedIdx,function(e,i){t.lookupItems[i].selected=!0,t.$element.find("option").eq(i).prop("selected",!0)}),t.state.currValue=t.state.selectedIdx,t.setLabel(),t.utils.triggerCallback("Change",t)):t.state.currValue!==t.state.selectedIdx&&(t.$element.prop("selectedIndex",t.state.currValue=t.state.selectedIdx).data("value",t.lookupItems[t.state.selectedIdx].text),t.setLabel(),t.utils.triggerCallback("Change",t))},highlight:function(e){var t=this,i=t.$li.filter("[data-index]").removeClass("highlighted");t.utils.triggerCallback("BeforeHighlight",t),e===undefined||-1===e||t.lookupItems[e].disabled||(i.eq(t.state.highlightedIdx=e).addClass("highlighted"),t.detectItemVisibility(e),t.utils.triggerCallback("Highlight",t))},select:function(t){var i=this,s=i.$li.filter("[data-index]");if(i.utils.triggerCallback("BeforeSelect",i,t),t!==undefined&&-1!==t&&!i.lookupItems[t].disabled){if(i.state.multiple){i.state.selectedIdx=e.isArray(i.state.selectedIdx)?i.state.selectedIdx:[i.state.selectedIdx];var n=e.inArray(t,i.state.selectedIdx);-1!==n?i.state.selectedIdx.splice(n,1):i.state.selectedIdx.push(t),s.removeClass("selected").filter(function(t){return-1!==e.inArray(t,i.state.selectedIdx)}).addClass("selected")}else s.removeClass("selected").eq(i.state.selectedIdx=t).addClass("selected");i.state.multiple&&i.options.multiple.keepMenuOpen||i.close(),i.change(),i.utils.triggerCallback("Select",i,t)}},destroy:function(e){var t=this;t.state&&t.state.enabled&&(t.elements.items.add(t.elements.wrapper).add(t.elements.input).remove(),e||t.$element.removeData(s).removeData("value"),t.$element.prop("tabindex",t.originalTabindex).off(n).off(t.eventTriggers).unwrap().unwrap(),t.state.enabled=!1)}},e.fn[s]=function(t){return this.each(function(){var i=e.data(this,s);i&&!i.disableOnMobile?"string"==typeof t&&i[t]?i[t]():i.init(t):e.data(this,s,new r(this,t))})},e.fn[s].defaults={onChange:function(t){e(t).change()},maxHeight:300,keySearchTimeout:500,arrowButtonMarkup:'<b class="button">&#x25be;</b>',disableOnMobile:!1,nativeOnMobile:!0,openOnFocus:!0,openOnHover:!1,hoverIntentTimeout:500,expandToItemText:!1,responsive:!1,preventWindowScroll:!0,inheritOriginalWidth:!1,allowWrap:!0,forceRenderAbove:!1,forceRenderBelow:!1,stopPropagation:!0,optionsItemBuilder:"{text}",labelBuilder:"{text}",listBuilder:!1,keys:{previous:[37,38],next:[39,40],select:[9,13,27],open:[13,32,37,38,39,40],close:[9,27]},customClass:{prefix:s,camelCase:!1},multiple:{separator:", ",keepMenuOpen:!0,maxLabelEntries:!1}}}),function(e,t){function i(t,i){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,!(!t.href||!a||"map"!==n.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+a+"]")[0])&&s(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,n,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(s=a.css("position"))||"relative"===s||"fixed"===s)&&(n=parseInt(a.css("zIndex"),10),!isNaN(n)&&0!==n))return n;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function n(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?r["inner"+s].call(this):this.each(function(){e(this).css(o,n(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?r["outer"+s].call(this,t):this.each(function(){e(this).css(o,n(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i){var s,n=e.plugins[t];if(n&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;s<n.length;s++)e.options[n[s][0]]&&n[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0||(t[s]=1,n=t[s]>0,t[s]=0,n)}})}(jQuery),function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(e){}n(t)},e.widget=function(t,i,s){var n,a,o,r,l={},c=t.split(".")[0];t=t.split(".")[1],n=c+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[c]=e[c]||{},a=e[c][t],o=e[c][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){if(!e.isFunction(s))return void(l[t]=s);l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}()}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var n,a,o=s.call(arguments,1),r=0,l=o.length;r<l;r++)for(n in o[r])a=o[r][n],o[r].hasOwnProperty(n)&&a!==t&&(e.isPlainObject(a)?i[n]=e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):i[n]=a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(o){var r="string"==typeof o,l=s.call(arguments,1),c=this;return o=!r&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(s=n[o].apply(n,l),s!==n&&s!==t?(c=s&&s.jquery?c.pushStack(s.get()):s,!1):void 0):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(o||{})._init():e.data(this,a,new n(o,this))}),c}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,o,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(a=r[i]=e.widget.extend({},this.options[i]),o=0;o<n.length-1;o++)a[n[o]]=a[n[o]]||{},a=a[n[o]];if(i=n.pop(),1===arguments.length)return a[i]===t?null:a[i];a[i]=s}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=s.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,h=l[2];h?n.delegate(h,c,r):i.bind(c,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?!0===n||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})}(jQuery),function(e){var t,i="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",n=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},a=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,n),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,o=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){s.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var t=s.element[0];a(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),t=this,s.document.one("mouseup",function(){t=null})}).bind("mouseup"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(o.disabled)return!1;t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){if(this._super(e,t),"disabled"===e)return this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"));this._resetButton()},refresh:function(){
var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?a(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(s),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,a=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(a?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",t,s))return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;return n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),void((s=i[0])&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),!1!==n&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,l,c,h,d,u,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,_=i.offset.top,b=_+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)r=p.snapElements[d].left,l=r+p.snapElements[d].width,c=p.snapElements[d].top,h=c+p.snapElements[d].height,v<r-m||g>l+m||b<c-m||_>h+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(s=Math.abs(c-b)<=m,n=Math.abs(h-_)<=m,a=Math.abs(r-v)<=m,o=Math.abs(l-g)<=m,s&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),u=s||n||a||o,"outer"!==f.snapMode&&(s=Math.abs(c-_)<=m,n=Math.abs(h-b)<=m,a=Math.abs(r-g)<=m,o=Math.abs(l-v)<=m,s&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(s||n||a||o||u)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=s||n||a||o||u)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function s(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,o=Math.max,r=Math.abs,l=Math.round,c=/left|center|right/,h=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(a!==t)return a;var i,s,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return e("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]);return{element:i,isWindow:s,isDocument:!!i[0]&&9===i[0].nodeType,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var a,p,m,g,v,_,b=e(t.of),y=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(y),k=(t.collision||"flip").split(" "),x={};return _=n(b),b[0].preventDefault&&(t.at="left top"),p=_.width,m=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,s=(t[this]||"").split(" ");1===s.length&&(s=c.test(s[0])?s.concat(["center"]):h.test(s[0])?["center"].concat(s):["center","center"]),s[0]=c.test(s[0])?s[0]:"center",s[1]=h.test(s[1])?s[1]:"center",e=d.exec(s[0]),i=d.exec(s[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(s[0])[0],u.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),a=i(x.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,c,h=e(this),d=h.outerWidth(),u=h.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),C=d+f+s(this,"marginRight")+w.width,j=u+_+s(this,"marginBottom")+w.height,D=e.extend({},v),T=i(x.my,h.outerWidth(),h.outerHeight());"right"===t.my[0]?D.left-=d:"center"===t.my[0]&&(D.left-=d/2),"bottom"===t.my[1]?D.top-=u:"center"===t.my[1]&&(D.top-=u/2),D.left+=T[0],D.top+=T[1],e.support.offsetFractions||(D.left=l(D.left),D.top=l(D.top)),n={marginLeft:f,marginTop:_},e.each(["left","top"],function(i,s){e.ui.position[k[i]]&&e.ui.position[k[i]][s](D,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:u,collisionPosition:n,collisionWidth:C,collisionHeight:j,offset:[a[0]+T[0],a[1]+T[1]],my:t.my,at:t.at,within:y,elem:h})}),t.using&&(c=function(e){var i=g.left-D.left,s=i+p-d,n=g.top-D.top,a=n+m-u,l={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:h,left:D.left,top:D.top,width:d,height:u},horizontal:s<0?"left":i>0?"right":"center",vertical:a<0?"top":n>0?"bottom":"middle"};p<d&&r(i+s)<p&&(l.horizontal="center"),m<u&&r(n+a)<m&&(l.vertical="middle"),o(r(i),r(s))>o(r(n),r(a))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),h.offset(e.extend(D,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,l=n-r,c=r+t.collisionWidth-a-n;t.collisionWidth>a?l>0&&c<=0?(i=e.left+l+t.collisionWidth-a-n,e.left+=l-i):e.left=c>0&&l<=0?n:l>c?n+a-t.collisionWidth:n:l>0?e.left+=l:c>0?e.left-=c:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,l=n-r,c=r+t.collisionHeight-a-n;t.collisionHeight>a?l>0&&c<=0?(i=e.top+l+t.collisionHeight-a-n,e.top+=l-i):e.top=c>0&&l<=0?n:l>c?n+a-t.collisionHeight:n:l>0?e.top+=l:c>0?e.top-=c:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,c=e.left-t.collisionPosition.marginLeft,h=c-l,d=c+t.collisionWidth-o-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];h<0?((i=e.left+u+p+f+t.collisionWidth-o-a)<0||i<r(h))&&(e.left+=u+p+f):d>0&&((s=e.left-t.collisionPosition.marginLeft+u+p+f-l)>0||r(s)<d)&&(e.left+=u+p+f)},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,l=n.isWindow?n.scrollTop:n.offset.top,c=e.top-t.collisionPosition.marginTop,h=c-l,d=c+t.collisionHeight-o-l,u="top"===t.my[1],p=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];h<0?(s=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>h&&(s<0||s<r(h))&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(i>0||r(i)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)t.style[a]=s[a];t.appendChild(r),i=o||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=e(r).offset().left,e.support.offsetFractions=n>10&&n<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},
this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)((s=e(this.handles[i])[0])===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=t(this.helper.css("left")),n=t(this.helper.css("top")),o.containment&&(s+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,l=this.position.left,c=this.size.width,h=this.size.height,d=t.pageX-a.left||0,u=t.pageY-a.top||0,p=this._change[o];return!!p&&(i=p.apply(this,[t,d,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==l&&(n.left=this.position.left+"px"),this.size.width!==c&&(n.width=this.size.width+"px"),this.size.height!==h&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,l,c=this.options,h=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&e.ui.hasScroll(i[0],"left")?0:h.sizeDiff.height,a=s?0:h.sizeDiff.width,o={width:h.helper.width()-a,height:h.helper.height()-n},r=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,c.animate||this.element.css(e.extend(o,{top:l,left:r})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:Infinity,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:Infinity},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),s<o.maxWidth&&(o.maxWidth=s),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,s=this.size,n=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(s.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(s.height-e.height),e.left=t.left+(s.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,s=this.axis,n=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,h=/sw|nw|w/.test(s),d=/nw|ne|n/.test(s);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&h&&(e.left=l-t.minWidth),n&&h&&(e.left=l-t.maxWidth),r&&d&&(e.top=c-t.minHeight),a&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,h&&c?{top:h,left:c}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,l,c=e(this).data("ui-resizable"),h=c.options,d=c.element,u=h.containment,p=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;p&&(c.containerElement=e(p),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=t(i.css("padding"+n))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=c.containerOffset,a=c.containerSize.height,o=c.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,l=e.ui.hasScroll(p)?p.scrollHeight:a,c.parentData={element:p,left:n.left,top:n.top,width:r,height:l}))},resize:function(t){var i,s,n,a,o=e(this).data("ui-resizable"),r=o.options,l=o.containerOffset,c=o.position,h=o._aspectRatio||t.shiftKey,d={top:0,left:0},u=o.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),h&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),h&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper,o.offset.left-d.left+o.sizeDiff.width)),s=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=Math.abs(o.parentData.left)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,h&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,h&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),l=o.outerWidth()-t.sizeDiff.width,c=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?l(n.alsoResize):e.each(n.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,n=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,c=r[1]||1,h=Math.round((s.width-n.width)/l)*l,d=Math.round((s.height-n.height)/c)*c,u=n.width+h,p=n.height+d,f=i.maxWidth&&i.maxWidth<u,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(u+=l),v&&(p+=c),f&&(u-=l),m&&(p-=c),/^(se|s|e)$/.test(o)?(t.size.width=u,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.top=a.top-d):/^(sw)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.left=a.left-h):(p-c>0?(t.size.height=p,t.position.top=a.top-d):(t.size.height=c,t.position.top=a.top+n.height-c),u-l>0?(t.size.width=u,t.position.left=a.left-h):(t.size.width=l,t.position.left=a.left+n.width-l))}})}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t)){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;if(this._isOpen)return void(this._moveToTop()&&this._focusTabbable());this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(n.focus(1),t.preventDefault()):(s.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length)return void this.uiDialog.removeClass("ui-dialog-buttons");e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){s.height=e(this).height(),s.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(s){var n=this,a=!1,o={};e.each(s,function(e,s){n._setOption(e,s),e in t&&(a=!0),e in i&&(o[e]=s)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){t._allowInteraction(s)||(s.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),e.each(["left","top"],function(e,t){+s[e]===s[e]&&(n[e]=s[e],s[e]=t)}),i={my:s[0]+(n[0]<0?n[0]:"+"+n[0])+" "+s[1]+(n[1]<0?n[1]:"+"+n[1]),at:s.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);n!==undefined&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur)return void delete this.cancelBlur;this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&e<s.min?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),$.widget("custom.extendedSpinner",$.ui.spinner,{_create:function(){return this._on(this.element,{blur:this._onBlur,input:this._onInput}),this._super()},_onBlur:function(){this.options.min&&this.element.val()<this.options.min&&this.element.val(this.options.min)},_onInput:function(){var e=this.element.val();this.options.max&&Math.floor(e)>this.options.max&&this.element.val(e.substring(0,this.options.max.toString().length))}}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["toolbar/managed_companies"]=Handlebars.template({1:function(e,t,i,s){var n;return null!=(n=t["if"].call(e,null!=e?e.can_manage:e,{name:"if",hash:{},
fn:this.program(2,s,0),inverse:this.program(4,s,0),data:s}))?n:""},2:function(e){return"<a class='tcs-item' href='"+this.escapeExpression(this.lambda(null!=e?e.html_url:e,e))+"/admin/start'>\n  <div class='tcs-name'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</div>\n  <div class='tcs-link'>"+this.escapeExpression(this.lambda(null!=e?e.html_url:e,e))+"/admin/start</div>\n</a>\n"},4:function(e){return"<a class='tcs-item' href='"+this.escapeExpression(this.lambda(null!=e?e.html_url:e,e))+"'>\n  <div class='tcs-name'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</div>\n  <div class='tcs-link'>"+this.escapeExpression(this.lambda(null!=e?e.html_url:e,e))+"</div>\n</a>\n"},6:function(e,t,i,s){var n;return"<a class='tcs-item tcs-link tcs-center' href='"+this.escapeExpression((n=null!=(n=t.viewAllLink||(null!=e?e.viewAllLink:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"viewAllLink",hash:{},data:s}):n))+"'>\n  \u041f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0432\u0441\u0435\n</a>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return(null!=(n=t.each.call(e,null!=e?e.companies:e,{name:"each",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=e?e.viewAllLink:e,{name:"if",hash:{},fn:this.program(6,s,0),inverse:this.noop,data:s}))?n:"")},useData:!0}),this.HandlebarsTemplates["toolbar/managed_companies"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["toolbar/companies_list"]=Handlebars.template({1:function(e){return"    <li class='cnl-item js-cnl-item' data-href='"+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+"'>\n      <div class='cnli-name'>"+this.escapeExpression(this.lambda(null!=e?e.name:e,e))+"</div>\n      <div class='cnli-url'>"+this.escapeExpression(this.lambda(null!=e?e.url:e,e))+"</div>\n    </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div class='companies-names js-companies-names dn'>\n  <div class='cn-header'>\n    \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044e\n  </div>\n  <ul class='cn-list'>\n"+(null!=(n=t.each.call(e,null!=e?e.companies:e,{name:"each",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+"  </ul>\n</div>"},useData:!0}),this.HandlebarsTemplates["toolbar/companies_list"]}.call(this),app.modules.toolbar=function(e){function t(){var e=+_.text();0===e&&_.removeClass("empty"),_.text(++e),b.addClass("marked"),clearTimeout(w),w=setTimeout(function(){b.removeClass("marked")},1e4)}function i(){var e=_.text()-1;_.text(e),0===e&&_.addClass("empty")}function s(e,t,i,s){if(i===undefined)return v.text(++j),void v.removeClass("empty");v.toggleClass("empty",0===i),i>0&&v.text(i),s||(g.addClass("marked"),clearTimeout(y),y=setTimeout(function(){g.removeClass("marked")},1e4))}function n(){k||(k=$(".js-managed-companies-list"),$.get(k.data("companies_url"),function(e){k.append(HandlebarsTemplates["toolbar/managed_companies"]({companies:e.companies,viewAllLink:e.pagination.total_pages>1&&app.config.myCompaniesDashboardURL}))}))}function a(e){$(".js-toolbar-link-button-add-price, .js-footer-link-button-add-price, .js-firms-recent-link-button-add-price").parent().append(HandlebarsTemplates["toolbar/companies_list"]({companies:e}))}function o(){window.location.href=$(this).data("href")}function r(){$doc.trigger("hideForm:callback")}function l(){$(".js-toolbar-link-cabinet").toggleClass("active"),x=!x}function c(e){$(e.target).closest(".js-dashboard-toolbar-button").length||($(".js-toolbar-link-cabinet").removeClass("active"),x=!1)}function h(e){e.forEach(function(e){e.element.attr("href",e.url+"?return_to="+window.location.href)})}function d(e){var t;app.config.isUserSigned||(t=$(this).attr("href"),app.modules.customerOrdersUtils.registerWithSID().then(function(){location.href=t}),e.preventDefault())}function u(){clearTimeout(C),C=setTimeout(function(){$doc.trigger("demandsHover:toolbar")},500)}function p(){$doc.on("toolbarLoadedSuccess:toolbarLoad",f).on("change-product:comparison",s).on("removeFromFavorites:FavoriteCompaniesPage",i).on("addFavoriteCompany:userFavorites",t).on("mouseenter",".js-managed-companies",n).on("mouseleave",".js-select-container",r).on("click",".js-cnl-item",o).on("click",".js-orders-cart-counter",d).on("click",".js-dashboard-toolbar-button",l).on("click",".js-body",function(e){x&&c(e)}).on("mouseenter",".js-ga-toolbar-demands",u).on("mouseleave",".js-ga-toolbar-demands",function(){clearTimeout(C)})}function f(){var e=app.config.toolbar,t=$(".js-orders-cart-counter-container");m=$(".js-toolbar"),g=m.find(".js-toolbar-compare-block"),v=m.find(".js-compare-counter"),_=m.find(".js-favorite-counter"),b=m.find(".js-user-favorite-companies-count-link"),$doc.trigger("spansToLinks"),e&&a(e.companiesList.companies),app.config.favoritesCompanies&&$doc.trigger("hideFavoritesCompanies",[app.config.favoritesCompanies]),t.length&&t.first().trigger("update:ordersCartCounter",[t]),checkBrowser(params={chrome:40,safari:4,msie:11,opera:21,firefox:40,yandex:14}),h([{element:$("#toolbar_sign_in_link"),url:app.config.ssoUsersSessionRequestURL},{element:$("#toolbar_sign_up_link"),url:app.config.toolbarLoad.newSsoUserUrlWithReturn}])}var m,g,v,_,b,y,w,k,x,C,j=0;return e.load=function(){p()},e}(app.modules.toolbar||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.help_company_callback=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return"<div class='help-company-callback'>\n  <div class='cd-message'>\u0412\u0430\u0448\u0430 \u0437\u0430\u044f\u0432\u043a\u0430 \u043f\u0440\u0438\u043d\u044f\u0442\u0430, \u043c\u044b \u0441\u0432\u044f\u0436\u0435\u043c\u0441\u044f \u0441 \u0432\u0430\u043c\u0438 \u0432 \u0431\u043b\u0438\u0436\u0430\u0439\u0448\u0435\u0435 \u0432\u0440\u0435\u043c\u044f.</div>\n  <div class='ui-dialog-buttonset'>\n    <button class='modern-button js-callback-dialog-close'>\u0425\u043e\u0440\u043e\u0448\u043e, \u0436\u0434\u0443 \u0437\u0432\u043e\u043d\u043a\u0430</button>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates.help_company_callback}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.phone_popup=Handlebars.template({1:function(e,t,i,s){var n;return"  <div class='phone-popup-contacts-block phone-popup-header'>\n"+(null!=(n=t["if"].call(e,null!=(n=null!=(n=null!=e?e.adressContacts:e)?n.manager:n)?n.avatar:n,{name:"if",hash:{},fn:this.program(2,s,0),inverse:this.noop,data:s}))?n:"")+"    <div class='phone-popup-person-info"+(null!=(n=t["if"].call(e,null!=(n=null!=(n=null!=e?e.adressContacts:e)?n.manager:n)?n.avatar:n,{name:"if",hash:{},fn:this.program(4,s,0),inverse:this.noop,data:s}))?n:"")+"'>\n      <div class='phone-popup-title'>\n        "+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=e?e.adressContacts:e)?n.manager:n)?n.fio:n,e))+"\n      </div>\n"+(null!=(n=t["if"].call(e,null!=(n=null!=(n=null!=e?e.adressContacts:e)?n.manager:n)?n.position:n,{name:"if",hash:{},fn:this.program(6,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=(n=null!=(n=null!=e?e.adressContacts:e)?n.manager:n)?n.contacts:n,{name:"if",hash:{},fn:this.program(8,s,0),inverse:this.noop,data:s}))?n:"")+"    </div>\n  </div>\n  <div class='phone-popup-contacts-block'>\n    <div class='phone-popup-title'>\n      "+this.escapeExpression(this.lambda(null!=(n=null!=(n=null!=(n=null!=e?e.adressContacts:e)?n.phones:n)?n[0]:n)?n.region_name:n,e))+"\n    </div>\n"+(null!=(n=t.each.call(e,null!=(n=null!=(n=null!=(n=null!=e?e.adressContacts:e)?n.phones:n)?n[0]:n)?n.contacts:n,{name:"each",hash:{},fn:this.program(10,s,0),inverse:this.noop,data:s}))?n:"")+"  </div>\n"},2:function(e){var t;return"    <div class='phone-popup-image-container'>\n      <img alt='"+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.adressContacts:e)?t.manager:t)?t.fio:t,e))+"' class='phone-popup-image' src='"+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=(t=null!=e?e.adressContacts:e)?t.manager:t)?t.avatar:t)?t.medium:t,e))+"'>\n    </div>\n"},4:function(){return" with-img"},6:function(e){var t;return"      <div class='phone-popup-person-position'>\n        "+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.adressContacts:e)?t.manager:t)?t.position:t,e))+"\n      </div>\n"},8:function(e){var t;return"      <a class='phone-popup-number' href='tel:"+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.adressContacts:e)?t.manager:t)?t.contacts:t,e))+"'>\n        "+this.escapeExpression(this.lambda(null!=(t=null!=(t=null!=e?e.adressContacts:e)?t.manager:t)?t.contacts:t,e))+"\n      </a>\n"},10:function(e){return"    <a class='phone-popup-number' href='tel:"+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"'>\n      "+this.escapeExpression(this.lambda(null!=e?e.phone:e,e))+"\n    </a>\n"},12:function(e,t,i,s){var n;return null!=(n=t.each.call(e,null!=(n=null!=e?e.adressContacts:e)?n.phones:n,{name:"each",hash:{},fn:this.program(13,s,0),inverse:this.noop,data:s}))?n:""},13:function(e,t,i,s){var n;return"  <div class='phone-popup-contacts-block'>\n    <div class='phone-popup-title'>\n      "+this.escapeExpression(this.lambda(null!=e?e.region_name:e,e))+"\n    </div>\n"+(null!=(n=t.each.call(e,null!=e?e.contacts:e,{name:"each",hash:{},fn:this.program(10,s,0),inverse:this.noop,data:s}))?n:"")+"  </div>\n"},15:function(e){var t;return"  <div class='phone-popup-hint'>\n    "+this.escapeExpression(this.lambda(null!=(t=null!=e?e.options:e)?t.hintText:t,e))+"\n  </div>\n"},17:function(e){var t;return"  <div class='phone-popup-whatsapp'>\n    <span class='phone-popup-whatsapp-label'>\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0443</span>\n    <a class='phone-popup-whatsapp-link js-phone-popup-whatsapp-link js-ga-link' data-ga-id='PC4-24649' href='https://wa.me/"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.options:e)?t.whatsappNumber:t,e))+"' target='_blank'></a>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<div class='phone-popup company-address-phones js-phone-popup'>\n  <div class='phone-popup-close-button js-phone-popup-close-button'></div>\n"+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.adressContacts:e)?n.manager:n,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.program(12,s,0),data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.options:e)?n.hintText:n,{name:"if",hash:{},fn:this.program(15,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.options:e)?n.whatsappNumber:n,{name:"if",hash:{},fn:this.program(17,s,0),inverse:this.noop,data:s}))?n:"")+"  <div class='phone-popup-footer'>\n    <a class='aui-link aui-link_highlighted' href='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.options:e)?n.url:n,e))+"/contacts'>\n      \u0412\u0441\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u044b \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0438\n    </a>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates.phone_popup}.call(this),app.modules.phonePopup=function(e){function t(){var e=$("."+m.linkClassName),t=new URLSearchParams(location.search).getAll("open_phone_popup");e.length&&t.length&&(f=t[0],e.trigger("click"))}function i(e,t){p=$(HandlebarsTemplates.phone_popup({adressContacts:t,options:e})),p.appendTo("body"),u.removeClass("loading"),$doc.trigger("phonePopup:showPhonesSuccess",[u]),f&&setTimeout(function(){$doc.trigger(f+"PhonePopupShow:PhonePopup"),f=null},100),t.statisticIsSend||c(e)}function s(){var e=u.closest(u.data("popup-parent")),t=e.length?u.parent().position():u.offset(),i=p.outerHeight(),s=t.top+i+m.arrowHeight>$win.scrollTop()+$win.height()?p.addClass("reverse")&&t.top-i-m.arrowHeight:t.top+u.outerHeight()+m.arrowHeight;e.length&&e.append(p),p.css({left:t.left+u.outerWidth()/2-p.outerWidth()/2,top:s})}function n(e,t){e.hideManager&&delete t.manager,i(e,t)}function a(e){var t,i,a,c;e.stopPropagation(),r(e)||(u=$(this),t=u.parents(".js-company-contacts-settings").data(),i=u.data(),u.addClass("loading"),a=$.extend(!0,t,{addressId:i.addressId,companyId:i.companyId,userId:i.userId,regionId:i.regionId,sendStat:!0,whatsappNumber:i.whatsappNumber}),$.when(l(a)).done(function(e){n(a,e),s(),c=e.manager&&e.manager.contacts&&!t.hideManager?[e.manager.contacts]:e.phones,o(c)}))}function o(e,t){var i=e[0].contacts||e,s=t||u;i&&s.text(i[0].phone||i[0]).removeClass("js-create-appeal-order").addClass(s.data("active-class-name"))}function r(e){var t=$(e.target);if(p&&!t.closest(".js-phone-popup").length||t.filter("."+m.linkClassName+".js-phone-active").length){if(p.remove(),t.hasClass("js-phone-active"))return u.removeClass("js-phone-active"),!0;u.removeClass("js-phone-active")}}function l(e){var t=$.Deferred();return $doc.trigger("request:companyPhoneContacts",[e,t]),t}function c(e){$.ajax({url:app.config.companyContactsStatistics,data:{activity_type:e.activityType||"phone_hits",company_id:e.companyId}})}function h(){$(".phone-popup").remove(),u&&u.removeClass("js-phone-active")}function d(){$doc.on("click","."+m.linkClassName,a).on("click.phonesPopup touchstart.phonesPopup",function(e){r(e),e.stopPropagation()}).on("click","."+m.allContactsLinkClassName,function(){$doc.trigger("phonePopup.showAllContacts")}).on("changeWidth",function(){$(".phone-popup").remove()}).on("click",".js-phone-popup-close-button",h).on("click","."+m.whatsappLinkClassName,function(){c({companyId:u?u.data().companyId:$(this).data().companyId,activityType:"whatsapp_hits"})}),$win.on("scroll resize",function(){!p||p.outerWidth()>=$win.width()||h()}),document.addEventListener("showMenu:rubricsListPopup",h)}var u,p,f,m={linkClassName:"js-show-phone-number",popupClassName:"phone-popup js-phone-popup",popupRegionClassName:"php-region",popupListClassName:"php-list",popupListItemClassName:"phpl-item",popupItemClassName:"php-item",usersItemClassName:"users",popupFooterClassName:"php-footer",allContactsLinkClassName:"php-all-contacts js-ga-link",whatsappLinkClassName:"js-phone-popup-whatsapp-link",arrowHeight:10,link:null};return e.load=function(){d(),t()},e}(app.modules.phonePopup||{}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing."));var i=e.data(this[0],"validator");return i||(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit&&(this.on("click.validate",":submit",function(t){i.settings.submitHandler&&(i.submitButton=t.target),e(this).hasClass("cancel")&&(i.cancelSubmit=!0),e(this).attr("formnovalidate")!==undefined&&(i.cancelSubmit=!0)}),this.on("submit.validate",function(t){function s(){var s,n;return!i.settings.submitHandler||(i.submitButton&&(s=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(e(i.submitButton).val()).appendTo(i.currentForm)),n=i.settings.submitHandler.call(i,i.currentForm,t),i.submitButton&&s.remove(),n!==undefined&&n)}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,s()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):s():(i.focusInvalid(),!1)})),i)},valid:function(){var t,i,s;return e(this[0]).is("form")?t=this.validate().form():(s=[],t=!0,i=e(this[0].form).validate(),this.each(function(){(t=i.element(this)&&t)||(s=s.concat(i.errorList))}),i.errorList=s),t},rules:function(t,i){if(this.length){var s,n,a,o,r,l,c=this[0];if(t)switch(s=e.data(c.form,"validator").settings,n=s.rules,a=e.validator.staticRules(c),t){case"add":e.extend(a,e.validator.normalizeRule(i)),delete a.messages,n[c.name]=a,i.messages&&(s.messages[c.name]=e.extend(s.messages[c.name],i.messages));break;case"remove":return i?(l={},e.each(i.split(/\s/),function(t,i){l[i]=a[i],delete a[i],"required"===i&&e(c).removeAttr("aria-required")}),l):(delete n[c.name],a)}return o=e.validator.normalizeRules(e.extend({},e.validator.classRules(c),e.validator.attributeRules(c),e.validator.dataRules(c),e.validator.staticRules(c)),c),o.required&&(r=o.required,delete o.required,o=e.extend({required:r},o),e(c).attr("aria-required","true")),o.remote&&(r=o.remote,delete o.remote,o=e.extend(o,{remote:r})),o}}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){var i=e(t).val();return null!==i&&!!e.trim(""+i)},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1===arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:i===undefined?t:(arguments.length>2&&i.constructor!==Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return i})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(t,i){var s=[16,17,18,20,35,36,37,38,39,40,45,144,225];9===i.which&&""===this.elementValue(t)||-1!==e.inArray(i.keyCode,s)||(t.name in this.submitted||t.name in this.invalid)&&this.element(t)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(s):e(t).addClass(i).removeClass(s)},unhighlight:function(t,i,s){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(s):e(t).removeClass(i).addClass(s)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}."),step:e.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this.form,"validator"),s="on"+t.type.replace(/^validate/,""),n=i.settings;n[s]&&!e(this).is(n.ignore)&&n[s].call(i,this,t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,s=this.groups={};e.each(this.settings.groups,function(t,i){"string"==typeof i&&(i=i.split(/\s/)),e.each(i,function(e,i){s[i]=t})}),i=this.settings.rules,e.each(i,function(t,s){i[t]=e.validator.normalizeRule(s)}),e(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",t).on("click.validate","select, option, [type='radio'], [type='checkbox']",t),this.settings.invalidHandler&&e(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var i,s,n=this.clean(t),a=this.validationTargetFor(n),o=this,r=!0;return a===undefined?delete this.invalid[n.name]:(this.prepareElement(a),this.currentElements=e(a),s=this.groups[a.name],s&&e.each(this.groups,function(e,t){t===s&&e!==a.name&&(n=o.validationTargetFor(o.clean(o.findByName(e))))&&n.name in o.invalid&&(o.currentElements.push(n),r=r&&o.check(n))}),i=!1!==this.check(a),r=r&&i,this.invalid[a.name]=!i,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),e(t).attr("aria-invalid",!i)),r},showErrors:function(t){if(t){var i=this;e.extend(this.errorMap,t),this.errorList=e.map(this.errorMap,function(e,t){return{message:e,element:i.findByName(t)[0]}}),this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var t=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(t)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)e[t]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===e.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return e(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var s=this.name||e(this).attr("name");return!s&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=e(this).closest("form")[0]),!(s in i||!t.objectLength(e(this).rules()))&&(i[s]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([])},reset:function(){this.resetInternals(),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var i,s,n=e(t),a=t.type;return"radio"===a||"checkbox"===a?this.findByName(t.name).filter(":checked").val():"number"===a&&"undefined"!=typeof t.validity?t.validity.badInput?"NaN":n.val():(i=t.hasAttribute("contenteditable")?n.text():n.val(),"file"===a?"C:\\fakepath\\"===i.substr(0,12)?i.substr(12):(s=i.lastIndexOf("/"))>=0?i.substr(s+1):(s=i.lastIndexOf("\\"),s>=0?i.substr(s+1):i):"string"==typeof i?i.replace(/\r/g,""):i)},check:function(t){t=this.validationTargetFor(this.clean(t));var i,s,n,a=e(t).rules(),o=e.map(a,function(e,t){return t}).length,r=!1,l=this.elementValue(t);if("function"==typeof a.normalizer){if("string"!=typeof(l=a.normalizer.call(t,l)))throw new TypeError("The normalizer should return a string value.");delete a.normalizer}for(s in a){n={method:s,parameters:a[s]};try{if("dependency-mismatch"===(i=e.validator.methods[s].call(this,l,t,n.parameters))&&1===o){r=!0;continue}if(r=!1,"pending"===i)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!i)return this.formatAndAdd(t,n),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+n.method+"' method."),e}}if(!r)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(t,i){return e(t).data("msg"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,i){var s=this.findDefined(this.customMessage(t.name,i.method),this.customDataMessage(t,i.method),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[i.method],"<strong>Warning: No message defined for "+t.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof s?s=s.call(this,i.parameters,t):n.test(s)&&(s=e.validator.format(s.replace(n,"{$1}"),i.parameters)),s},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t);this.errorList.push({message:i,element:e,method:t.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var s,n,a,o,r=this.errorsFor(t),l=this.idOrName(t),c=e(t).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(i)):(r=e("<"+this.settings.errorElement+">").attr("id",l+"-error").addClass(this.settings.errorClass).html(i||""),s=r,this.settings.wrapper&&(s=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(s):this.settings.errorPlacement?this.settings.errorPlacement(s,e(t)):s.insertAfter(t),r.is("label")?r.attr("for",l):0===r.parents("label[for='"+this.escapeCssMeta(l)+"']").length&&(a=r.attr("id"),c?c.match(new RegExp("\\b"+this.escapeCssMeta(a)+"\\b"))||(c+=" "+a):c=a,e(t).attr("aria-describedby",c),(n=this.groups[t.name])&&(o=this,e.each(o.groups,function(t,i){i===n&&e("[name='"+o.escapeCssMeta(t)+"']",o.currentForm).attr("aria-describedby",r.attr("id"))})))),!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,t)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.escapeCssMeta(this.idOrName(t)),s=e(t).attr("aria-describedby"),n="label[for='"+i+"'], label[for='"+i+"'] *";return s&&(n=n+", #"+this.escapeCssMeta(s).replace(/\s+/g,", #")),this.errors().filter(n)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,.\/:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+this.escapeCssMeta(t)+"']")},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{"boolean":function(e){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){var i=this.elementValue(t);return!e.validator.methods.required.call(this,i,t)&&"dependency-mismatch"},startRequest:function(t){this.pending[t.name]||(this.pendingRequest++,e(t).addClass(this.settings.pendingClass),this.pending[t.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],e(t).removeClass(this.settings.pendingClass),i&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0===this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t,i){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,{method:i})})},destroy:function(){this.resetForm(),e(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor===String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},s=e(t).attr("class");return s&&e.each(s.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},normalizeAttributeRule:function(e,t,i,s){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(s=Number(s),isNaN(s)&&(s=undefined)),s||0===s?e[i]=s:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(t){var i,s,n={},a=e(t),o=t.getAttribute("type");for(i in e.validator.methods)"required"===i?(s=t.getAttribute(i),""===s&&(s=!0),s=!!s):s=a.attr(i),this.normalizeAttributeRule(n,o,i,s);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var i,s,n={},a=e(t),o=t.getAttribute("type");for(i in e.validator.methods)s=a.data("rule"+i.charAt(0).toUpperCase()+i.substring(1).toLowerCase()),this.normalizeAttributeRule(n,o,i,s);return n},staticRules:function(t){var i={},s=e.data(t.form,"validator");return s.settings.rules&&(i=e.validator.normalizeRule(s.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(s,n){if(!1===n)return void delete t[s];if(n.param||n.depends){var a=!0;switch(typeof n.depends){case"string":a=!!e(n.depends,i.form).length;break;case"function":a=n.depends.call(i,i)}a?t[s]=n.param===undefined||n.param:(e.data(i.form,"validator").resetElements(e(i)),delete t[s])}}),e.each(t,function(s,n){t[s]=e.isFunction(n)&&"normalizer"!==s?n(i):n}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var i;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:"string"==typeof t[this]&&(i=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),
t[this]=[Number(i[0]),Number(i[1])]))}),e.validator.autoCreateRanges&&(null!=t.min&&null!=t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),null!=t.minlength&&null!=t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,s){e.validator.methods[t]=i,e.validator.messages[t]=s!==undefined?s:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,s){if(!this.depend(s,i))return"dependency-mismatch";if("select"===i.nodeName.toLowerCase()){var n=e(i).val();return n&&n.length>0}return this.checkable(i)?this.getLength(t,i)>0:t.length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[\/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=s},maxlength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n<=s},rangelength:function(t,i,s){var n=e.isArray(t)?t.length:this.getLength(t,i);return this.optional(i)||n>=s[0]&&n<=s[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},step:function(t,i,s){var n=e(i).attr("type"),a="Step attribute on input type "+n+" is not supported.",o=["text","number","range"],r=new RegExp("\\b"+n+"\\b");if(n&&!r.test(o.join()))throw new Error(a);return this.optional(i)||t%s==0},equalTo:function(t,i,s){var n=e(s);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){e(i).valid()}),t===n.val()},remote:function(t,i,s,n){if(this.optional(i))return"dependency-mismatch";n="string"==typeof n&&n||"remote";var a,o,r,l=this.previousValue(i,n);return this.settings.messages[i.name]||(this.settings.messages[i.name]={}),l.originalMessage=l.originalMessage||this.settings.messages[i.name][n],this.settings.messages[i.name][n]=l.message,s="string"==typeof s&&{url:s}||s,r=e.param(e.extend({data:t},s.data)),l.old===r?l.valid:(l.old=r,a=this,this.startRequest(i),o={},o[i.name]=t,e.ajax(e.extend(!0,{mode:"abort",port:"validate"+i.name,dataType:"json",data:o,context:a.currentForm,success:function(e){var s,o,r,c=!0===e||"true"===e;a.settings.messages[i.name][n]=l.originalMessage,c?(r=a.formSubmitted,a.resetInternals(),a.toHide=a.errorsFor(i),a.formSubmitted=r,a.successList.push(i),a.invalid[i.name]=!1,a.showErrors()):(s={},o=e||a.defaultMessage(i,{method:n,parameters:t}),s[i.name]=l.message=o,a.invalid[i.name]=!0,a.showErrors(s)),l.valid=c,a.stopRequest(i,c)}},s)),"pending")}}});var t,i={};e.ajaxPrefilter?e.ajaxPrefilter(function(e,t,s){var n=e.port;"abort"===e.mode&&(i[n]&&i[n].abort(),i[n]=s)}):(t=e.ajax,e.ajax=function(s){var n=("mode"in s?s:e.ajaxSettings).mode,a=("port"in s?s:e.ajaxSettings).port;return"abort"===n?(i[a]&&i[a].abort(),i[a]=t.apply(this,arguments),i[a]):t.apply(this,arguments)})}),$.validator.addMethod("pattern",function(e,t,i){return!!this.optional(t)||("string"==typeof i&&(i=new RegExp("^(?:"+i+")$")),i.test(e))},"Invalid format."),$.validator.addMethod("allowed-symbols",function(e,t){return this.optional(t)||app.modules.validationService.validate(e,"nameWithAllowedSymbols")},"Invalid format."),$.validator.addMethod("allowed-without-required-symbols",function(e,t){return this.optional(t)||!app.modules.validationService.validate(e,"nameWithDisallowedSymbols")},"Invalid format."),$.validator.addMethod("letters-required",function(e,t){return this.optional(t)||/[a-z\u0430-\u044f\u0451]/i.test(e)},"Invalid format."),function(e,t){"$:nomunge";var i,s=e.jQuery||e.Cowboy||(e.Cowboy={});s.throttle=i=function(e,i,n,a){function o(){function s(){l=+new Date,n.apply(c,d)}function o(){r=t}var c=this,h=+new Date-l,d=arguments;a&&!r&&s(),r&&clearTimeout(r),a===t&&h>e?s():!0!==i&&(r=setTimeout(a?o:s,a===t?e-h:e))}var r,l=0;return"boolean"!=typeof i&&(a=n,n=i,i=t),s.guid&&(o.guid=n.guid=n.guid||s.guid++),o},s.debounce=function(e,s,n){return n===t?i(e,s,!1):i(e,n,!1!==s)}}(this),function(e){var t,i,s=e.event;t=s.special.debouncedresize={setup:function(){e(this).on("resize",t.handler)},teardown:function(){e(this).off("resize",t.handler)},handler:function(e,n){var a=this,o=arguments,r=function(){e.type="debouncedresize",s.dispatch.apply(a,o)};i&&clearTimeout(i),n?r():i=setTimeout(r,t.threshold)},threshold:150}}(jQuery),function(e){var t,i=function(t,i){t.each(function(){var t=e(this),a=t.children("li");a.detach(),t.html(a),n(t),s(t,i),t.data("$nextArrow",t.data("$wrapper").find('[data-dir="next"]')),t.data("$wrapper").find('[data-dir="prev"]').text(t.data("prevArrowText")),t.data("$nextArrow").text(t.data("nextArrowText")),void 0!==t.data("activeItem")&&t.data("$items").eq(t.data("activeItem")).addClass("active"),t.data("$items").each(function(){var t=e(this);t.data("index",t.index())}),p(t),c(t),g(t),$win.trigger("resize")})},s=function(e,t){var i=e.children("li"),s=e.closest(".flexible-slider-wrapper"),n=t||{};e.data({$wrapper:s,visibleItems:null,slidingType:n.slidingType||"slide-one",$items:i,itemWidth:i.outerWidth(),itemsCount:i.length,$movingItem:i.eq(0),$arrows:s.find("[data-dir]"),current:0,currentMargin:null,last:null,activeItem:n.activeItem,type:n.type,prevArrowText:n.prevArrowText?n.prevArrowText:"",nextArrowText:n.nextArrowText?n.nextArrowText:"",minMargin:"undefined"!=typeof n.minMargin?n.minMargin:20,maxMargin:n.maxMargin?n.maxMargin:30,initScroll:n.initScroll?n.initScroll:null,toggleArrows:"undefined"==typeof n.toggleArrows||n.toggleArrows,loadNewItems:n.loadNewItems?n.loadNewItems:null,$nextArrow:null})},n=function(t){t.wrap(e("<div>").addClass("flexible-slider-wrapper")).parent().append(e("<div>").attr("data-dir","prev"),e("<div>").attr("data-dir","next"))},a=function(e){var t=Math.floor((e.data("$wrapper").width()+e.data("minMargin"))/(e.data("minMargin")+e.data("itemWidth")));return e.data("visibleItems",t),t},o=function(e){var t=Math.floor((e.data("$wrapper").width()-e.data("itemWidth")*e.data("visibleItems"))/(e.data("visibleItems")-1));return e.data("currentMargin",t),t},r=function(e){return-e.data("current")*(e.data("itemWidth")+e.data("currentMargin"))},l=function(t){t.data("$items").outerWidth(t.data("itemWidth")).each(function(){var i=e(this);0!==i.index()&&i.css("margin-left",o(t))})},c=function(e){var t;e.data("$arrows").removeClass("disable"),0===e.data("current")?t="prev":e.data("current")!==e.data("last")||e.data("loadNewItems")||(t="next"),e.data("$wrapper").find("[data-dir="+t+"]").addClass("disable")},h=function(e,i){if(!t){if("prev"===i&&0!==e.data("current"))e.data("current","slide-one"===e.data("slidingType")?e.data("current")-1:e.data("current")-e.data("visibleItems")>=0?e.data("current")-e.data("visibleItems"):0);else{if(!("next"===i&&e.data("current")<e.data("last")))return void("next"===i&&e.data("current")===e.data("last")&&e.data("loadNewItems")&&$doc.trigger("loadNewItems.flexibleSlider",[e]));e.data("current","slide-one"===e.data("slidingType")?e.data("current")+1:e.data("current")+2*e.data("visibleItems")<=e.data("itemsCount")?e.data("current")+e.data("visibleItems"):e.data("last"))}t=!0,c(e),e.data("$movingItem").animate({marginLeft:r(e)},800,function(){t=!1,"next"===i&&g(e)})}},d=function(e,t){var i;"prev"===t&&0===e.data("activeItem")?(i=e.data("$items").filter(function(t){return t>=e.data("visibleItems")}),e.prepend(i).data({current:i.length,activeItem:i.length})):"next"===t&&e.data("activeItem")===e.data("last")+e.data("visibleItems")-1&&(i=e.data("$items").filter(function(t){return t<e.data("last")}),e.append(i).data({current:e.data("current")-i.length,activeItem:e.data("$items").length-1-i.length})),e.data("$items",e.children()).data("$items").eq(0).css("margin-left",r(e)),e.data("$movingItem",e.data("$items").eq(0)),l(e)},u=function(e,i){t||("circle"===e.data("type")&&d(e,i),"next"===i?e.data("activeItem",e.data("activeItem")!==e.data("$items").length-1?e.data("activeItem")+1:"circle"===e.data("type")?0:e.data("$items").length-1):"prev"===i&&e.data("activeItem",0!==e.data("activeItem")?e.data("activeItem")-1:"circle"===e.data("type")?e.data("$items").length-1:0),e.data("$items").removeClass("active").eq(e.data("activeItem")).addClass("active"),e.data("activeItem")===e.data("current")+e.data("visibleItems")?h(e,"next"):e.data("activeItem")===e.data("current")-1&&h(e,"prev"),e.trigger("showActiveItem.flexibleSlider",[e.data("$items").eq(e.data("activeItem")).data("index")]))},p=function(t){t.data("$arrows").on("click.flexibleSlider",function(){var i=e(this);void 0!==t.data("activeItem")?u(t,i.data("dir")):h(t,i.data("dir"))}),t.data("$items").click(function(){void 0!==t.data("activeItem")&&(t.data("activeItem",e(this).index()),t.data("$items").removeClass("active").eq(t.data("activeItem")).addClass("active"),t.trigger("showActiveItem.flexibleSlider",[e(this).data("index")]))}),t.on("changePreview.fullScreenGallery",function(i,s){var n,s;void 0!==s&&(n=t.data("$items").filter(function(){return e(this).data("index")===s}),s=n.index(),t.data({activeItem:s,current:s>=t.data("last")?t.data("last"):s})),u(t,void 0===s?"next":null)}),$win.on("debouncedresize.flexibleSlider",function(){var e,i,s=t.data("visibleItems");a(t),l(t),e=o(t),(e<t.data("minMargin")||e>t.data("maxMargin"))&&a(t),t.data("visibleItems")!==s&&(l(t),s=t.data("visibleItems")),i=t.data("itemsCount")-t.data("visibleItems"),t.data("last",i>0?i:0),t.data("toggleArrows")&&(t.data("visibleItems")>=t.data("itemsCount")?(t.data("$movingItem").css({marginLeft:0}),t.data("$arrows").hide()):t.data("$arrows").show()),t.data("activeItem")>=t.data("current")+t.data("visibleItems")&&t.data("current",t.data("activeItem")-t.data("visibleItems")+1),t.data("current")>=t.data("last")&&t.data("current",t.data("itemsCount")-t.data("visibleItems")>0?t.data("itemsCount")-t.data("visibleItems"):0),t.data("$movingItem").css({marginLeft:r(t)})}),t.data("initScroll")&&t.on("mousewheel",function(e,i){u(t,1===i?"next":"prev")})},f=function(){$win.trigger("debouncedresize.flexibleSlider")},m=function(e,t){var i;e.append(t),i=e.children().detach(),e.append(i),e.data("$items",i),e.data({itemsCount:i.length,last:i.length-e.data("visibleItems")}),l(e),g(e),$doc.trigger("spansToLinks")},g=function(e){var t=e.data("current"),i=e.data("visibleItems")||a(e);e.data("$items").slice(t,t+i).find(".js-lazyload").lazyload()},v={init:function(e){return i(this,e),this},update:function(){return f(),this},insertItems:function(e){m(this,e)},showNextItems:function(){this.data("$nextArrow").trigger("click")},lazyLoad:function(){g(this)}};e.fn.flexibleSlider=function(t){return this.length?"object"!=typeof t&&t?v[t]?v[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.flexibleSlider"):v.init.apply(this,arguments):this}}(jQuery),function(e,t){$window=e(t),e.fn.lazyload=function(i){function s(){var t=0;n.each(function(){var i=e(this);if(!a.skip_invisible||i.is(":visible"))if(e.abovethetop(this,a)||e.leftofbegin(this,a));else if(e.belowthefold(this,a)||e.rightoffold(this,a)){if(++t>a.failure_limit)return!1}else i.trigger("appear")})}var n=this,a={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};return i&&(undefined!==i.failurelimit&&(i.failure_limit=i.failurelimit,delete i.failurelimit),undefined!==i.effectspeed&&(i.effect_speed=i.effectspeed,delete i.effectspeed),e.extend(a,i)),$container=a.container===undefined||a.container===t?$window:e(a.container),0===a.event.indexOf("scroll")&&$container.bind(a.event,function(){return s()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,i.one("appear",function(){if(!this.loaded){if(a.appear){var s=n.length;a.appear.call(t,s,a)}e("<img />").bind("load",function(){i.hide().attr("src",i.data(a.data_attribute))[a.effect](a.effect_speed),t.loaded=!0;var s=e.grep(n,function(e){return!e.loaded});if(n=e(s),a.load){var o=n.length;a.load.call(t,o,a)}}).attr("src",i.data(a.data_attribute))}}),0!==a.event.indexOf("scroll")&&i.bind(a.event,function(){t.loaded||i.trigger("appear")})}),$window.bind("resize",function(){s()}),s(),this},e.belowthefold=function(i,s){return(s.container===undefined||s.container===t?$window.height()+$window.scrollTop():$container.offset().top+$container.height())<=e(i).offset().top-s.threshold},e.rightoffold=function(i,s){return(s.container===undefined||s.container===t?$window.width()+$window.scrollLeft():$container.offset().left+$container.width())<=e(i).offset().left-s.threshold},e.abovethetop=function(i,s){return(s.container===undefined||s.container===t?$window.scrollTop():$container.offset().top)>=e(i).offset().top+s.threshold+e(i).height()},e.leftofbegin=function(i,s){return(s.container===undefined||s.container===t?$window.scrollLeft():$container.offset().left)>=e(i).offset().left+s.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightofscreen(t,i)||e.leftofscreen(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(i){return e.belowthefold(i,{threshold:0,container:t})},"above-the-top":function(i){return!e.belowthefold(i,{threshold:0,container:t})},"right-of-screen":function(i){return e.rightoffold(i,{threshold:0,container:t})},"left-of-screen":function(i){return!e.rightoffold(i,{threshold:0,container:t})},"in-viewport":function(i){return!e.inviewport(i,{threshold:0,container:t})},"above-the-fold":function(i){return!e.belowthefold(i,{threshold:0,container:t})},"right-of-fold":function(i){return e.rightoffold(i,{threshold:0,container:t})},"left-of-fold":function(i){return!e.rightoffold(i,{threshold:0,container:t})}})}(jQuery,window),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){function t(i,s){s=s||e("<div>");for(var n in i)"object"==typeof i[n]?t(i[n],e("<"+n.replace(/[0-9]/,"")+">").appendTo(s)):~e.inArray(n,["text","html"])?s[n](i[n]):s.attr(n,i[n]);return s}(e.JSONTemplate=function(e){return t(e)}).defaults={}}),function(e){function t(){e.each(i,function(){this.refresh(!0)})}var i=[],s=/^url\(["']?([^"'\)]*)["']?\);?$/i,n=/\.png$/i,a=!!window.createPopup&&"undefined"==document.documentElement.currentStyle.minWidth;e(window).resize(t),e.Poshytip=function(t,i){this.$elm=e(t),this.opts=e.extend({},e.fn.poshytip.defaults,i),this.$tip=e(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"></div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"></div>',"</div>"].join("")).appendTo(document.body),this.$arrow=this.$tip.find("div.tip-arrow"),this.$inner=this.$tip.find("div.tip-inner"),this.disabled=!1,this.content=null,this.init()},e.Poshytip.prototype={init:function(){i.push(this);var t=this.$elm.attr("title");if(this.$elm.data("title.poshytip",t!==undefined?t:null).data("poshytip",this),"none"!=this.opts.showOn)switch(this.$elm.bind({"mouseenter.poshytip":e.proxy(this.mouseenter,this),"mouseleave.poshytip":e.proxy(this.mouseleave,this)}),this.opts.showOn){case"hover":"cursor"==this.opts.alignTo&&this.$elm.bind("mousemove.poshytip",e.proxy(this.mousemove,this)),this.opts.allowTipHover&&this.$tip.hover(e.proxy(this.clearTimeouts,this),e.proxy(this.mouseleave,this));break;case"focus":this.$elm.bind({"focus.poshytip":e.proxy(this.showDelayed,this),"blur.poshytip":e.proxy(this.hideDelayed,this)})}},mouseenter:function(){return!!this.disabled||(this.$elm.attr("title",""),"focus"==this.opts.showOn||void this.showDelayed())},mouseleave:function(e){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===e.relatedTarget||jQuery.contains(this.$tip[0],e.relatedTarget)))return!0;if(!this.$tip.data("active")){var t=this.$elm.data("title.poshytip");null!==t&&this.$elm.attr("title",t)}if("focus"==this.opts.showOn)return!0;this.hideDelayed()},mousemove:function(e){if(this.disabled)return!0;this.eventX=e.pageX,this.eventY=e.pageY,this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow))},show:function(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.content&&(this.display(),this.opts.timeOnScreen&&this.hideDelayed(this.opts.timeOnScreen)))},showDelayed:function(t){this.clearTimeouts(),this.showTimeout=setTimeout(e.proxy(this.show,this),"number"==typeof t?t:this.opts.showTimeout)},hide:function(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},hideDelayed:function(t){this.clearTimeouts(),this.hideTimeout=setTimeout(e.proxy(this.hide,this),"number"==typeof t?t:this.opts.hideTimeout)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1),this.$inner.find("*").poshytip("hide"),this.opts.fade&&this.$tip.css("opacity",this.opacity),this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left",this.asyncAnimating=!1},update:function(e,t){if(!this.disabled){var i=e!==undefined;if(i){if(t||(this.opts.content=e),!this.$tip.data("active"))return}else e=this.opts.content;var s=this,n="function"==typeof e?e.call(this.$elm[0],function(e){s.update(e)}):"[title]"==e?this.$elm.data("title.poshytip"):e;this.content!==n&&(this.$inner.empty().append(n),this.content=n),this.refresh(i)}},refresh:function(t){if(!this.disabled){if(t){if(!this.$tip.data("active"))return;var i={left:this.$tip.css("left"),top:this.$tip.css("top")}}this.$tip.css({left:0,top:0}).appendTo(document.body),this.opacity===undefined&&(this.opacity=this.$tip.css("opacity"));var o=this.$tip.css("background-image").match(s),r=this.$arrow.css("background-image").match(s);if(o){var l=n.test(o[1]);a&&l?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),o=l=!1):this.$tip.prepend('<table class="tip-table" border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span></span></td><td class="tip-right tip-bg-image" rowspan="2"><span></span></td></tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span></span></td><td></td></tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span></span></td></tr></table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+o[1]+'")').end().find("td").eq(3).append(this.$inner),l&&!e.support.opacity&&(this.opts.fade=!1)}r&&!e.support.opacity&&(a&&n.test(r[1])&&(r=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1);var c=this.$tip.find("> table.tip-table");if(a){this.$tip[0].style.width="",c.width("auto").find("td").eq(3).width("auto");var h=this.$tip.width(),d=parseInt(this.$tip.css("min-width")),u=parseInt(this.$tip.css("max-width"));!isNaN(d)&&h<d?h=d:!isNaN(u)&&h>u&&(h=u),this.$tip.add(c).width(h).eq(0).find("td").eq(3).width("100%")}else c[0]&&c.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");if(this.tipOuterW=this.$tip.outerWidth(),this.tipOuterH=this.$tip.outerHeight(),this.calcPos(),r&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit")),t&&this.opts.refreshAniDuration){this.asyncAnimating=!0;var p=this;this.$tip.css(i).animate({left:this.pos.l,top:this.pos.t},this.opts.refreshAniDuration,function(){p.asyncAnimating=!1})}else this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(t){var i=this.$tip.data("active");if(!(i&&!t||!i&&t)){if(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(t&&this.opts.hideAniDuration||!t&&this.opts.showAniDuration)){var s={},n={};if(this.opts.slide&&this.pos.arrow){var a,o;"bottom"==this.pos.arrow||"top"==this.pos.arrow?(a="top",o="bottom"):(a="left",o="right");var r=parseInt(this.$tip.css(a));s[a]=r+(t?0:this.pos.arrow==o?-this.opts.slideOffset:this.opts.slideOffset),n[a]=r+(t?this.pos.arrow==o?this.opts.slideOffset:-this.opts.slideOffset:0)+"px"}this.opts.fade&&(s.opacity=t?this.$tip.css("opacity"):0,n.opacity=t?0:this.opacity),this.$tip.css(s).animate(n,this.opts[t?"hideAniDuration":"showAniDuration"])}if(t?this.$tip.queue(e.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),i){var l=this.$elm.data("title.poshytip");null!==l&&this.$elm.attr("title",l)}this.$tip.data("active",!i)}},disable:function(){this.reset(),this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset(),this.$tip.remove(),delete this.$tip,this.content=null,this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip"),i.splice(e.inArray(this,i),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0),this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function(){var t,i,s,n,a,o,r={l:0,t:0,arrow:""},l=e(window),c={l:l.scrollLeft(),t:l.scrollTop(),w:l.width(),h:l.height()};if("cursor"==this.opts.alignTo)t=i=s=this.eventX,n=a=o=this.eventY;else{var h=this.$elm.offset(),d={l:h.left,t:h.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()};t=d.l+("inner-right"!=this.opts.alignX?0:d.w),i=t+Math.floor(d.w/2),s=t+("inner-left"!=this.opts.alignX?d.w:0),n=d.t+("inner-bottom"!=this.opts.alignY?0:d.h),a=n+Math.floor(d.h/2),o=n+("inner-top"!=this.opts.alignY?d.h:0)}switch(this.opts.alignX){case"right":case"inner-left":r.l=s+this.opts.offsetX,this.opts.keepInViewport&&r.l+this.tipOuterW>c.l+c.w&&(r.l=c.l+c.w-this.tipOuterW),"right"!=this.opts.alignX&&"center"!=this.opts.alignY||(r.arrow="left");break;case"center":r.l=i-Math.floor(this.tipOuterW/2),this.opts.keepInViewport&&(r.l+this.tipOuterW>c.l+c.w?r.l=c.l+c.w-this.tipOuterW:r.l<c.l&&(r.l=c.l));break;default:r.l=t-this.tipOuterW-this.opts.offsetX,this.opts.keepInViewport&&r.l<c.l&&(r.l=c.l),"left"!=this.opts.alignX&&"center"!=this.opts.alignY||(r.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":r.t=o+this.opts.offsetY,r.arrow&&"cursor"!=this.opts.alignTo||(r.arrow="top"),this.opts.keepInViewport&&r.t+this.tipOuterH>c.t+c.h&&(r.t=n-this.tipOuterH-this.opts.offsetY,"top"==r.arrow&&(r.arrow="bottom"));break;case"center":r.t=a-Math.floor(this.tipOuterH/2),this.opts.keepInViewport&&(r.t+this.tipOuterH>c.t+c.h?r.t=c.t+c.h-this.tipOuterH:r.t<c.t&&(r.t=c.t));break;default:r.t=n-this.tipOuterH-this.opts.offsetY,r.arrow&&"cursor"!=this.opts.alignTo||(r.arrow="bottom"),this.opts.keepInViewport&&r.t<c.t&&(r.t=o+this.opts.offsetY,"bottom"==r.arrow&&(r.arrow="top"))}this.pos=r}},e.fn.poshytip=function(t){if("string"==typeof t){var i=arguments,s=t;return Array.prototype.shift.call(i),"destroy"==s&&(this.die?this.die("mouseenter.poshytip").die("focus.poshytip"):e(document).undelegate(this.selector,"mouseenter.poshytip").undelegate(this.selector,"focus.poshytip")),this.each(function(){var t=e(this).data("poshytip");t&&t[s]&&t[s].apply(t,i)})}var n=e.extend({},e.fn.poshytip.defaults,t);if(e("#poshytip-css-"+n.className)[0]||e(['<style id="poshytip-css-',n.className,'" type="text/css">',"div.",n.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",n.className," table.tip-table, div.",n.className," table.tip-table td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;vertical-align:middle;}","div.",n.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",n.bgImageFrameSize,"px;width:",n.bgImageFrameSize,"px;overflow:hidden;}","div.",n.className," td.tip-right{background-position:100% 0;}","div.",n.className," td.tip-bottom{background-position:100% 100%;}","div.",n.className," td.tip-left{background-position:0 100%;}","div.",n.className," div.tip-inner{background-position:-",n.bgImageFrameSize,"px -",n.bgImageFrameSize,"px;}","div.",n.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","</style>"].join("")).appendTo("head"),n.liveEvents&&"none"!=n.showOn){var a,o=e.extend({},n,{liveEvents:!1});switch(n.showOn){case"hover":a=function(){var t=e(this);t.data("poshytip")||t.poshytip(o).poshytip("mouseenter")},this.live?this.live("mouseenter.poshytip",a):e(document).delegate(this.selector,"mouseenter.poshytip",a);break;case"focus":a=function(){var t=e(this);t.data("poshytip")||t.poshytip(o).poshytip("showDelayed")},this.live?this.live("focus.poshytip",a):e(document).delegate(this.selector,"focus.poshytip",a)}return this}return this.each(function(){new e.Poshytip(this,n)})},e.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:!1,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,keepInViewport:!0,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300,refreshAniDuration:200}}(jQuery);var $doc=$(document),$win=$(window),$html=$("html"),$body=$("body"),areAllIE=!$.support.noCloneChecked;!function(e,t){function i(t,i){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,!(!t.href||!a||"map"!==n.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+a+"]")[0])&&s(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,n,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(s=a.css("position"))||"relative"===s||"fixed"===s)&&(n=parseInt(a.css("zIndex"),10),!isNaN(n)&&0!==n))return n;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function n(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?r["inner"+s].call(this):this.each(function(){e(this).css(o,n(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?r["outer"+s].call(this,t):this.each(function(){e(this).css(o,n(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i){var s,n=e.plugins[t];if(n&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;s<n.length;s++)e.options[n[s][0]]&&n[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0||(t[s]=1,n=t[s]>0,t[s]=0,n)}})}(jQuery),function(e,t){var i=0,s=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(e){}n(t)},e.widget=function(t,i,s){var n,a,o,r,l={},c=t.split(".")[0];t=t.split(".")[1],n=c+"-"+t,s||(s=i,i=e.Widget),e.expr[":"][n.toLowerCase()]=function(t){return!!e.data(t,n)},e[c]=e[c]||{},a=e[c][t],o=e[c][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,a,{version:s.version,_proto:e.extend({},s),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(s,function(t,s){if(!e.isFunction(s))return void(l[t]=s);l[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,a=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=a,t}}()}),o.prototype=e.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix||t:t},l,{constructor:o,namespace:c,widgetName:t,widgetFullName:n}),a?(e.each(a._childConstructors,function(t,i){var s=i.prototype;e.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(i){for(var n,a,o=s.call(arguments,1),r=0,l=o.length;r<l;r++)for(n in o[r])a=o[r][n],o[r].hasOwnProperty(n)&&a!==t&&(e.isPlainObject(a)?i[n]=e.isPlainObject(i[n])?e.widget.extend({},i[n],a):e.widget.extend({},a):i[n]=a);return i},e.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;e.fn[i]=function(o){var r="string"==typeof o,l=s.call(arguments,1),c=this;return o=!r&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var s,n=e.data(this,a);return n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(s=n[o].apply(n,l),s!==n&&s!==t?(c=s&&s.jquery?c.pushStack(s.get()):s,!1):void 0):e.error("no such method '"+o+"' for "+i+" widget instance"):e.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,a);t?t.option(o||{})._init():e.data(this,a,new n(o,this))}),c}},e.Widget=function(){},
e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,s){s=e(s||this.defaultElement||this)[0],this.element=e(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),s!==this&&(e.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===s&&this.destroy()}}),this.document=e(s.style?s.ownerDocument:s.document||s),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,s){var n,a,o,r=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(a=r[i]=e.widget.extend({},this.options[i]),o=0;o<n.length-1;o++)a[n[o]]=a[n[o]]||{},a=a[n[o]];if(i=n.pop(),1===arguments.length)return a[i]===t?null:a[i];a[i]=s}else{if(1===arguments.length)return this.options[i]===t?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,s){var n,a=this;"boolean"!=typeof t&&(s=i,i=t,t=!1),s?(i=n=e(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),e.each(s,function(s,o){function r(){if(t||!0!==a.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||e.guid++);var l=s.match(/^(\w+)\s*(.*)$/),c=l[1]+a.eventNamespace,h=l[2];h?n.delegate(h,c,r):i.bind(c,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?s[e]:e).apply(s,arguments)}var s=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,s){var n,a,o=this.options[t];if(s=s||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(e.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?!0===n||"number"==typeof n?i:n.effect||i:t;n=n||{},"number"==typeof n&&(n={duration:n}),o=!e.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&e.effects&&e.effects.effect[r]?s[t](n):r!==t&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){e(this)[t](),a&&a.call(s[0]),i()})}})}(jQuery),function(e){var t=!1;e(document).mouseup(function(){t=!1}),e.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return s._mouseMove(e)},this._mouseUpDelegate=function(e){return s._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function i(e,t,i){return[parseFloat(e[0])*(p.test(e[0])?t/100:1),parseFloat(e[1])*(p.test(e[1])?i/100:1)]}function s(t,i){return parseInt(e.css(t,i),10)||0}function n(t){var i=t[0];return 9===i.nodeType?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(i)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var a,o=Math.max,r=Math.abs,l=Math.round,c=/left|center|right/,h=/top|center|bottom/,d=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,p=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(a!==t)return a;var i,s,n=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return e("body").append(n),i=o.offsetWidth,n.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=n[0].clientWidth),n.remove(),a=i-s},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),s=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),n="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===s||"auto"===s&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:n?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),s=e.isWindow(i[0]);return{element:i,isWindow:s,isDocument:!!i[0]&&9===i[0].nodeType,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var a,p,m,g,v,_,b=e(t.of),y=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(y),k=(t.collision||"flip").split(" "),x={};return _=n(b),b[0].preventDefault&&(t.at="left top"),p=_.width,m=_.height,g=_.offset,v=e.extend({},g),e.each(["my","at"],function(){var e,i,s=(t[this]||"").split(" ");1===s.length&&(s=c.test(s[0])?s.concat(["center"]):h.test(s[0])?["center"].concat(s):["center","center"]),s[0]=c.test(s[0])?s[0]:"center",s[1]=h.test(s[1])?s[1]:"center",e=d.exec(s[0]),i=d.exec(s[1]),x[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(s[0])[0],u.exec(s[1])[0]]}),1===k.length&&(k[1]=k[0]),"right"===t.at[0]?v.left+=p:"center"===t.at[0]&&(v.left+=p/2),"bottom"===t.at[1]?v.top+=m:"center"===t.at[1]&&(v.top+=m/2),a=i(x.at,p,m),v.left+=a[0],v.top+=a[1],this.each(function(){var n,c,h=e(this),d=h.outerWidth(),u=h.outerHeight(),f=s(this,"marginLeft"),_=s(this,"marginTop"),C=d+f+s(this,"marginRight")+w.width,j=u+_+s(this,"marginBottom")+w.height,D=e.extend({},v),T=i(x.my,h.outerWidth(),h.outerHeight());"right"===t.my[0]?D.left-=d:"center"===t.my[0]&&(D.left-=d/2),"bottom"===t.my[1]?D.top-=u:"center"===t.my[1]&&(D.top-=u/2),D.left+=T[0],D.top+=T[1],e.support.offsetFractions||(D.left=l(D.left),D.top=l(D.top)),n={marginLeft:f,marginTop:_},e.each(["left","top"],function(i,s){e.ui.position[k[i]]&&e.ui.position[k[i]][s](D,{targetWidth:p,targetHeight:m,elemWidth:d,elemHeight:u,collisionPosition:n,collisionWidth:C,collisionHeight:j,offset:[a[0]+T[0],a[1]+T[1]],my:t.my,at:t.at,within:y,elem:h})}),t.using&&(c=function(e){var i=g.left-D.left,s=i+p-d,n=g.top-D.top,a=n+m-u,l={target:{element:b,left:g.left,top:g.top,width:p,height:m},element:{element:h,left:D.left,top:D.top,width:d,height:u},horizontal:s<0?"left":i>0?"right":"center",vertical:a<0?"top":n>0?"bottom":"middle"};p<d&&r(i+s)<p&&(l.horizontal="center"),m<u&&r(n+a)<m&&(l.vertical="middle"),o(r(i),r(s))>o(r(n),r(a))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),h.offset(e.extend(D,{using:c}))})},e.ui.position={fit:{left:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollLeft:s.offset.left,a=s.width,r=e.left-t.collisionPosition.marginLeft,l=n-r,c=r+t.collisionWidth-a-n;t.collisionWidth>a?l>0&&c<=0?(i=e.left+l+t.collisionWidth-a-n,e.left+=l-i):e.left=c>0&&l<=0?n:l>c?n+a-t.collisionWidth:n:l>0?e.left+=l:c>0?e.left-=c:e.left=o(e.left-r,e.left)},top:function(e,t){var i,s=t.within,n=s.isWindow?s.scrollTop:s.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,l=n-r,c=r+t.collisionHeight-a-n;t.collisionHeight>a?l>0&&c<=0?(i=e.top+l+t.collisionHeight-a-n,e.top+=l-i):e.top=c>0&&l<=0?n:l>c?n+a-t.collisionHeight:n:l>0?e.top+=l:c>0?e.top-=c:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,s,n=t.within,a=n.offset.left+n.scrollLeft,o=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,c=e.left-t.collisionPosition.marginLeft,h=c-l,d=c+t.collisionWidth-o-l,u="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];h<0?((i=e.left+u+p+f+t.collisionWidth-o-a)<0||i<r(h))&&(e.left+=u+p+f):d>0&&((s=e.left-t.collisionPosition.marginLeft+u+p+f-l)>0||r(s)<d)&&(e.left+=u+p+f)},top:function(e,t){var i,s,n=t.within,a=n.offset.top+n.scrollTop,o=n.height,l=n.isWindow?n.scrollTop:n.offset.top,c=e.top-t.collisionPosition.marginTop,h=c-l,d=c+t.collisionHeight-o-l,u="top"===t.my[1],p=u?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,f="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,m=-2*t.offset[1];h<0?(s=e.top+p+f+m+t.collisionHeight-o-a,e.top+p+f+m>h&&(s<0||s<r(h))&&(e.top+=p+f+m)):d>0&&(i=e.top-t.collisionPosition.marginTop+p+f+m-l,e.top+p+f+m>d&&(i>0||r(i)<d)&&(e.top+=p+f+m))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)t.style[a]=s[a];t.appendChild(r),i=o||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=e(r).offset().left,e.support.offsetFractions=n>10&&n<11,t.innerHTML="",i.removeChild(t)}()}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",t,s))return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,s=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!e.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!s||"valid"===this.options.revert&&s||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;return n.containment?"window"===n.containment?void(this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===n.containment?void(this.containment=[0,0,e(document).width()-this.helperProportions.width-this.margins.left,(e(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):n.containment.constructor===Array?void(this.containment=n.containment):("parent"===n.containment&&(n.containment=this.helper[0].parentNode),i=e(n.containment),void((s=i[0])&&(t="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:n.scrollTop(),left:n.scrollLeft()}),{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*s}},_generatePosition:function(t){var i,s,n,a,o=this.options,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=t.pageX,c=t.pageY;return this.offset.scroll||(this.offset.scroll={top:r.scrollTop(),left:r.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(s=this.relative_container.offset(),i=[this.containment[0]+s.left,this.containment[1]+s.top,this.containment[2]+s.left,this.containment[3]+s.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(n=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?n-this.offset.click.top>=i[1]||n-this.offset.click.top>i[3]?n:n-this.offset.click.top>=i[1]?n-o.grid[1]:n+o.grid[1]:n,a=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?a-this.offset.click.left>=i[0]||a-this.offset.click.left>i[2]?a:a-this.offset.click.left>=i[0]?a-o.grid[0]:a+o.grid[0]:a)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,s){return s=s||this._uiHash(),e.ui.plugin.call(this,t,[i,s]),"drag"===t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var s=e(this).data("ui-draggable"),n=s.options,a=e.extend({},i,{item:s.element});s.sortables=[],e(n.connectToSortable).each(function(){var i=e.data(this,"ui-sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,a))})},stop:function(t,i){var s=e(this).data("ui-draggable"),n=e.extend({},i,{item:s.element});e.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"===s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,n))})},drag:function(t,i){var s=e(this).data("ui-draggable"),n=this;e.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(n).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",t),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",t),s.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),i=e(this).data("ui-draggable").options;t.css("cursor")&&(i._cursor=t.css("cursor")),t.css("cursor",i.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._opacity&&e(i.helper).css("opacity",s._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&"HTML"!==t.scrollParent[0].tagName&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var i=e(this).data("ui-draggable"),s=i.options,n=!1;i.scrollParent[0]!==document&&"HTML"!==i.scrollParent[0].tagName?(s.axis&&"x"===s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),!1!==n&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(i,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),i=t.options;t.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var i=e(this),s=i.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(t,i){var s,n,a,o,r,l,c,h,d,u,p=e(this).data("ui-draggable"),f=p.options,m=f.snapTolerance,g=i.offset.left,v=g+p.helperProportions.width,_=i.offset.top,b=_+p.helperProportions.height;for(d=p.snapElements.length-1;d>=0;d--)r=p.snapElements[d].left,l=r+p.snapElements[d].width,c=p.snapElements[d].top,h=c+p.snapElements[d].height,v<r-m||g>l+m||b<c-m||_>h+m||!e.contains(p.snapElements[d].item.ownerDocument,p.snapElements[d].item)?(p.snapElements[d].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(s=Math.abs(c-b)<=m,n=Math.abs(h-_)<=m,a=Math.abs(r-v)<=m,o=Math.abs(l-g)<=m,s&&(i.position.top=p._convertPositionTo("relative",{top:c-p.helperProportions.height,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:h,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r-p.helperProportions.width}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l}).left-p.margins.left)),u=s||n||a||o,"outer"!==f.snapMode&&(s=Math.abs(c-_)<=m,n=Math.abs(h-b)<=m,a=Math.abs(r-g)<=m,o=Math.abs(l-v)<=m,s&&(i.position.top=p._convertPositionTo("relative",{top:c,left:0}).top-p.margins.top),n&&(i.position.top=p._convertPositionTo("relative",{top:h-p.helperProportions.height,left:0}).top-p.margins.top),a&&(i.position.left=p._convertPositionTo("relative",{top:0,left:r}).left-p.margins.left),o&&(i.position.left=p._convertPositionTo("relative",{top:0,left:l-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[d].snapping&&(s||n||a||o||u)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[d].item})),p.snapElements[d].snapping=s||n||a||o||u)}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,i=this.data("ui-draggable").options,s=e.makeArray(e(i.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});s.length&&(t=parseInt(e(s[0]).css("zIndex"),10)||0,e(s).each(function(i){e(this).css("zIndex",t+i)}),this.css("zIndex",t+s.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var s=e(i.helper),n=e(this).data("ui-draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(t,i){var s=e(this).data("ui-draggable").options;s._zIndex&&e(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(e){function t(e,t,i){return e>t&&e<t+i}e.widget("ui.droppable",{version:"1.10.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,s=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(s)?s:function(e){return e.is(s)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},e.ui.ddmanager.droppables[i.scope]=e.ui.ddmanager.droppables[i.scope]||[],e.ui.ddmanager.droppables[i.scope].push(this),i.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=0,i=e.ui.ddmanager.droppables[this.options.scope];t<i.length;t++)i[t]===this&&i.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,i){"accept"===t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},
_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var s=i||e.ui.ddmanager.current,n=!1;return!(!s||(s.currentItem||s.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===s.options.scope&&t.accept.call(t.element[0],s.currentItem||s.element)&&e.ui.intersect(s,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return n=!0,!1}),!n&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(s)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,i,s){if(!i.offset)return!1;var n,a,o=(e.positionAbs||e.position.absolute).left,r=(e.positionAbs||e.position.absolute).top,l=o+e.helperProportions.width,c=r+e.helperProportions.height,h=i.offset.left,d=i.offset.top,u=h+i.proportions().width,p=d+i.proportions().height;switch(s){case"fit":return h<=o&&l<=u&&d<=r&&c<=p;case"intersect":return h<o+e.helperProportions.width/2&&l-e.helperProportions.width/2<u&&d<r+e.helperProportions.height/2&&c-e.helperProportions.height/2<p;case"pointer":return n=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,a=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(a,d,i.proportions().height)&&t(n,h,i.proportions().width);case"touch":return(r>=d&&r<=p||c>=d&&c<=p||r<d&&c>p)&&(o>=h&&o<=u||l>=h&&l<=u||o<h&&l>u);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var s,n,a=e.ui.ddmanager.droppables[t.options.scope]||[],o=i?i.type:null,r=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(s=0;s<a.length;s++)if(!(a[s].options.disabled||t&&!a[s].accept.call(a[s].element[0],t.currentItem||t.element))){for(n=0;n<r.length;n++)if(r[n]===a[s].element[0]){a[s].proportions().height=0;continue e}a[s].visible="none"!==a[s].element.css("display"),a[s].visible&&("mousedown"===o&&a[s]._activate.call(a[s],i),a[s].offset=a[s].element.offset(),a[s].proportions({width:a[s].element[0].offsetWidth,height:a[s].element[0].offsetHeight}))}},drop:function(t,i){var s=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),s},dragStart:function(t,i){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s,n,a,o=e.ui.intersect(t,this,this.options.tolerance),r=!o&&this.isover?"isout":o&&!this.isover?"isover":null;r&&(this.options.greedy&&(n=this.options.scope,a=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===n}),a.length&&(s=e.data(a[0],"ui-droppable"),s.greedyChild="isover"===r)),s&&"isover"===r&&(s.isover=!1,s.isout=!0,s._out.call(s,i)),this[r]=!0,this["isout"===r?"isover":"isout"]=!1,this["isover"===r?"_over":"_out"].call(this,i),s&&"isout"===r&&(s.isout=!1,s.isover=!0,s._over.call(s,i)))}})},dragStop:function(t,i){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),function(e){function t(e){return parseInt(e,10)||0}function i(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,i,s,n,a,o=this,r=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!r.aspectRatio,aspectRatio:r.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:r.helper||r.ghost||r.animate?r.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={},i=0;i<t.length;i++)s=e.trim(t[i]),a="ui-resizable-"+s,n=e("<div class='ui-resizable-handle "+a+"'></div>"),n.css({zIndex:r.zIndex}),"se"===s&&n.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(n);this._renderAxis=function(t){var i,s,n,a;t=t||this.element;for(i in this.handles)this.handles[i].constructor===String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(s=e(this.handles[i],this.element),a=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth(),n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(n,a),this._proportionallyResize()),e(this.handles[i]).length},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(n=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=n&&n[1]?n[1]:"se")}),r.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){r.disabled||(e(this).removeClass("ui-resizable-autohide"),o._handles.show())}).mouseleave(function(){r.disabled||o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_mouseCapture:function(t){var i,s,n=!1;for(i in this.handles)((s=e(this.handles[i])[0])===t.target||e.contains(s,t.target))&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(i){var s,n,a,o=this.options,r=this.element.position(),l=this.element;return this.resizing=!0,/absolute/.test(l.css("position"))?l.css({position:"absolute",top:l.css("top"),left:l.css("left")}):l.is(".ui-draggable")&&l.css({position:"absolute",top:r.top,left:r.left}),this._renderProxy(),s=t(this.helper.css("left")),n=t(this.helper.css("top")),o.containment&&(s+=e(o.containment).scrollLeft()||0,n+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:s,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:l.width(),height:l.height()},this.originalSize=this._helper?{width:l.outerWidth(),height:l.outerHeight()}:{width:l.width(),height:l.height()},this.originalPosition={left:s,top:n},this.sizeDiff={width:l.outerWidth()-l.width(),height:l.outerHeight()-l.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof o.aspectRatio?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,a=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===a?this.axis+"-resize":a),l.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var i,s=this.helper,n={},a=this.originalMousePosition,o=this.axis,r=this.position.top,l=this.position.left,c=this.size.width,h=this.size.height,d=t.pageX-a.left||0,u=t.pageY-a.top||0,p=this._change[o];return!!p&&(i=p.apply(this,[t,d,u]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),this.position.top!==r&&(n.top=this.position.top+"px"),this.position.left!==l&&(n.left=this.position.left+"px"),this.size.width!==c&&(n.width=this.size.width+"px"),this.size.height!==h&&(n.height=this.size.height+"px"),s.css(n),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||this._trigger("resize",t,this.ui()),!1)},_mouseStop:function(t){this.resizing=!1;var i,s,n,a,o,r,l,c=this.options,h=this;return this._helper&&(i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),n=s&&e.ui.hasScroll(i[0],"left")?0:h.sizeDiff.height,a=s?0:h.sizeDiff.width,o={width:h.helper.width()-a,height:h.helper.height()-n},r=parseInt(h.element.css("left"),10)+(h.position.left-h.originalPosition.left)||null,l=parseInt(h.element.css("top"),10)+(h.position.top-h.originalPosition.top)||null,c.animate||this.element.css(e.extend(o,{top:l,left:r})),h.helper.height(h.size.height),h.helper.width(h.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:Infinity,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:Infinity},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),n>o.minHeight&&(o.minHeight=n),s<o.maxWidth&&(o.maxWidth=s),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),i(e.left)&&(this.position.left=e.left),i(e.top)&&(this.position.top=e.top),i(e.height)&&(this.size.height=e.height),i(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,s=this.size,n=this.axis;return i(e.height)?e.width=e.height*this.aspectRatio:i(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(s.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(s.height-e.height),e.left=t.left+(s.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,s=this.axis,n=i(e.width)&&t.maxWidth&&t.maxWidth<e.width,a=i(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=i(e.width)&&t.minWidth&&t.minWidth>e.width,r=i(e.height)&&t.minHeight&&t.minHeight>e.height,l=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,h=/sw|nw|w/.test(s),d=/nw|ne|n/.test(s);return o&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),a&&(e.height=t.maxHeight),o&&h&&(e.left=l-t.minWidth),n&&h&&(e.left=l-t.maxWidth),r&&d&&(e.top=c-t.minHeight),a&&d&&(e.top=c-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var e,t,i,s,n,a=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){if(n=this._proportionallyResizeElements[e],!this.borderDif)for(this.borderDif=[],i=[n.css("borderTopWidth"),n.css("borderRightWidth"),n.css("borderBottomWidth"),n.css("borderLeftWidth")],s=[n.css("paddingTop"),n.css("paddingRight"),n.css("paddingBottom"),n.css("paddingLeft")],t=0;t<i.length;t++)this.borderDif[t]=(parseInt(i[t],10)||0)+(parseInt(s[t],10)||0);n.css({height:a.height()-this.borderDif[0]-this.borderDif[2]||0,width:a.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var s=this.originalSize;return{top:this.originalPosition.top+i,height:s.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},sw:function(t,i,s){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,s]))},ne:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,s]))},nw:function(t,i,s){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,s]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).data("ui-resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&e.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},c=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,h=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,h&&c?{top:h,left:c}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i,s,n,a,o,r,l,c=e(this).data("ui-resizable"),h=c.options,d=c.element,u=h.containment,p=u instanceof e?u.get(0):/parent/.test(u)?d.parent().get(0):u;p&&(c.containerElement=e(p),/document/.test(u)||u===document?(c.containerOffset={left:0,top:0},c.containerPosition={left:0,top:0},c.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(i=e(p),s=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){s[e]=t(i.css("padding"+n))}),c.containerOffset=i.offset(),c.containerPosition=i.position(),c.containerSize={height:i.innerHeight()-s[3],width:i.innerWidth()-s[1]},n=c.containerOffset,a=c.containerSize.height,o=c.containerSize.width,r=e.ui.hasScroll(p,"left")?p.scrollWidth:o,l=e.ui.hasScroll(p)?p.scrollHeight:a,c.parentData={element:p,left:n.left,top:n.top,width:r,height:l}))},resize:function(t){var i,s,n,a,o=e(this).data("ui-resizable"),r=o.options,l=o.containerOffset,c=o.position,h=o._aspectRatio||t.shiftKey,d={top:0,left:0},u=o.containerElement;u[0]!==document&&/static/.test(u.css("position"))&&(d=l),c.left<(o._helper?l.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-l.left:o.position.left-d.left),h&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=r.helper?l.left:0),c.top<(o._helper?l.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-l.top:o.position.top),h&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?l.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,i=Math.abs((o._helper,o.offset.left-d.left+o.sizeDiff.width)),s=Math.abs((o._helper?o.offset.top-d.top:o.offset.top-l.top)+o.sizeDiff.height),n=o.containerElement.get(0)===o.element.parent().get(0),a=/relative|absolute/.test(o.containerElement.css("position")),n&&a&&(i-=Math.abs(o.parentData.left)),i+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-i,h&&(o.size.height=o.size.width/o.aspectRatio)),s+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-s,h&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.containerOffset,n=t.containerPosition,a=t.containerElement,o=e(t.helper),r=o.offset(),l=o.outerWidth()-t.sizeDiff.width,c=o.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:r.left-n.left-s.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,i){var s=e(this).data("ui-resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(t,s){e(t).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),a={},o=s&&s.length?s:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(n[t]||0)+(r[t]||0);i&&i>=0&&(a[t]=i||null)}),t.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?l(n.alsoResize):e.each(n.alsoResize,function(e,t){l(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),i=t.options,s=t.size,n=t.originalSize,a=t.originalPosition,o=t.axis,r="number"==typeof i.grid?[i.grid,i.grid]:i.grid,l=r[0]||1,c=r[1]||1,h=Math.round((s.width-n.width)/l)*l,d=Math.round((s.height-n.height)/c)*c,u=n.width+h,p=n.height+d,f=i.maxWidth&&i.maxWidth<u,m=i.maxHeight&&i.maxHeight<p,g=i.minWidth&&i.minWidth>u,v=i.minHeight&&i.minHeight>p;i.grid=r,g&&(u+=l),v&&(p+=c),f&&(u-=l),m&&(p-=c),/^(se|s|e)$/.test(o)?(t.size.width=u,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.top=a.top-d):/^(sw)$/.test(o)?(t.size.width=u,t.size.height=p,t.position.left=a.left-h):(p-c>0?(t.size.height=p,t.position.top=a.top-d):(t.size.height=c,t.position.top=a.top+n.height-c),u-l>0?(t.size.width=u,t.position.left=a.left-h):(t.size.width=l,t.position.left=a.left+n.width-l))}})}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.4",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,i=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(i.options.filter,i.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var i=this,s=this.options;this.opos=[t.pageX,t.pageY],this.options.disabled||(this.selectees=e(s.filter,this.element[0]),this._trigger("start",t),e(s.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=e.data(this,"selectable-item");s.startselected=!0,t.metaKey||t.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",t,{unselecting:s.element}))}),e(t.target).parents().addBack().each(function(){var s,n=e.data(this,"selectable-item");if(n)return s=!t.metaKey&&!t.ctrlKey||!n.$element.hasClass("ui-selected"),n.$element.removeClass(s?"ui-unselecting":"ui-selected").addClass(s?"ui-selecting":"ui-unselecting"),n.unselecting=!s,n.selecting=s,n.selected=s,s?i._trigger("selecting",t,{selecting:n.element}):i._trigger("unselecting",t,{unselecting:n.element}),!1}))},_mouseDrag:function(t){if(this.dragged=!0,!this.options.disabled){var i,s=this,n=this.options,a=this.opos[0],o=this.opos[1],r=t.pageX,l=t.pageY;return a>r&&(i=r,r=a,a=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:a,top:o,width:r-a,height:l-o}),this.selectees.each(function(){var i=e.data(this,"selectable-item"),c=!1;i&&i.element!==s.element[0]&&("touch"===n.tolerance?c=!(i.left>r||i.right<a||i.top>l||i.bottom<o):"fit"===n.tolerance&&(c=i.left>a&&i.right<r&&i.top>o&&i.bottom<l),c?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,s._trigger("selecting",t,{selecting:i.element}))):(i.selecting&&((t.metaKey||t.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),s._trigger("unselecting",t,{unselecting:i.element}))),i.selected&&(t.metaKey||t.ctrlKey||i.startselected||(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,s._trigger("unselecting",t,{unselecting:i.element})))))}),!1}},_mouseStop:function(t){var i=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",t,{unselected:s.element})}),e(".ui-selecting",this.element[0]).each(function(){var s=e.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",t,{selected:s.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){function t(e,t,i){return e>t&&e<t+i}function i(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||i(this.items[0].item)),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var s=null,n=!1,a=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,a.widgetName+"-item")===a)return s=e(this),!1}),e.data(t.target,a.widgetName+"-item")===a&&(s=e(t.target)),!!s&&(!(this.options.handle&&!i&&(e(this.options.handle,s).find("*").addBack().each(function(){this===t.target&&(n=!0)}),!n))&&(this.currentItem=s,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,s){var n,a,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(a=this.document.find("body"),this.storedCursor=a.css("cursor"),a.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(a)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,s,n,a,o=this.options,r=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),!1!==r&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(s=this.items[i],n=s.item[0],(a=this._intersectsWithPointer(s))&&s.instance===this.currentContainer&&!(n===this.currentItem[0]||this.placeholder[1===a?"next":"prev"]()[0]===n||e.contains(this.placeholder[0],n)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],n))){if(this.direction=1===a?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var s=this,n=this.placeholder.offset(),a=this.options.axis,o={};a&&"x"!==a||(o.left=n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft)),a&&"y"!==a||(o.top=n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){s._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show()
;for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&s.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!s.length&&t.key&&s.push(t.key+"="),s.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),s=[];return t=t||{},i.each(function(){s.push(e(t.item||this).attr(t.attribute||"id")||"")}),s},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=e.left,o=a+e.width,r=e.top,l=r+e.height,c=this.offset.click.top,h=this.offset.click.left,d="x"===this.options.axis||s+c>r&&s+c<l,u="y"===this.options.axis||t+h>a&&t+h<o,p=d&&u;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:a<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&r<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t(this.positionAbs.top+this.offset.click.top,e.top,e.height),s="y"===this.options.axis||t(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=i&&s,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!n&&(this.floating?o&&"right"===o||"down"===a?2:1:a&&("down"===a?2:1))},_intersectsWithSides:function(e){var i=t(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"===a&&s||"left"===a&&!s:n&&("down"===n&&i||"up"===n&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function i(){r.push(this)}var s,n,a,o,r=[],l=[],c=this._connectWith();if(c&&t)for(s=c.length-1;s>=0;s--)for(a=e(c[s]),n=a.length-1;n>=0;n--)(o=e.data(a[n],this.widgetFullName))&&o!==this&&!o.options.disabled&&l.push([e.isFunction(o.options.items)?o.options.items.call(o.element):e(o.options.items,o.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),o]);for(l.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),s=l.length-1;s>=0;s--)l[s][0].each(i);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,s,n,a,o,r,l,c,h=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],u=this._connectWith();if(u&&this.ready)for(i=u.length-1;i>=0;i--)for(n=e(u[i]),s=n.length-1;s>=0;s--)(a=e.data(n[s],this.widgetFullName))&&a!==this&&!a.options.disabled&&(d.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a));for(i=d.length-1;i>=0;i--)for(o=d[i][1],r=d[i][0],s=0,c=r.length;s<c;s++)l=e(r[s]),l.data(this.widgetName+"-item",o),h.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var i,s,n,a;for(i=this.items.length-1;i>=0;i--)s=this.items[i],s.instance!==this.currentContainer&&this.currentContainer&&s.item[0]!==this.currentItem[0]||(n=this.options.toleranceElement?e(this.options.toleranceElement,s.item):s.item,t||(s.width=n.outerWidth(),s.height=n.outerHeight()),a=n.offset(),s.left=a.left,s.top=a.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)a=this.containers[i].element.offset(),this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var i,s=t.options;s.placeholder&&s.placeholder.constructor!==String||(i=s.placeholder,s.placeholder={element:function(){var s=t.currentItem[0].nodeName.toLowerCase(),n=e("<"+s+">",t.document[0]).addClass(i||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tr"===s?t.currentItem.children().each(function(){e("<td>&#160;</td>",t.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)}):"img"===s&&n.attr("src",t.currentItem.attr("src")),i||n.css("visibility","hidden"),n},update:function(e,n){i&&!s.forcePlaceholderSize||(n.height()||n.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(s.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),s.placeholder.update(t,t.placeholder)},_contactContainers:function(s){var n,a,o,r,l,c,h,d,u,p,f=null,m=null;for(n=this.containers.length-1;n>=0;n--)if(!e.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(f&&e.contains(this.containers[n].element[0],f.element[0]))continue;f=this.containers[n],m=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",s,this._uiHash(this)),this.containers[n].containerCache.over=0);if(f)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(o=1e4,r=null,p=f.floating||i(this.currentItem),l=p?"left":"top",c=p?"width":"height",h=this.positionAbs[l]+this.offset.click[l],a=this.items.length-1;a>=0;a--)e.contains(this.containers[m].element[0],this.items[a].item[0])&&this.items[a].item[0]!==this.currentItem[0]&&(p&&!t(this.positionAbs.top+this.offset.click.top,this.items[a].top,this.items[a].height)||(d=this.items[a].item.offset()[l],u=!1,Math.abs(d-h)>Math.abs(d+this.items[a][c]-h)&&(u=!0,d+=this.items[a][c]),Math.abs(d-h)<o&&(o=Math.abs(d-h),r=this.items[a],this.direction=u?"up":"down")));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return;r?this._rearrange(s,r,null,!0):this._rearrange(s,null,this.containers[m].element,!0),this._trigger("change",s,this._uiHash()),this.containers[m]._trigger("change",s,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",s,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(t){var i=this.options,s=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),s[0].style.width&&!i.forceHelperSize||s.width(this.currentItem.width()),s[0].style.height&&!i.forceHelperSize||s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,s,n=this.options;"parent"===n.containment&&(n.containment=this.helper[0].parentNode),"document"!==n.containment&&"window"!==n.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"===n.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"===n.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(n.containment)||(t=e(n.containment)[0],i=e(n.containment).offset(),s="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(s?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(s?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var s="absolute"===t?1:-1,n="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(t){var i,s,n=this.options,a=t.pageX,o=t.pageY,r="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(r[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==document&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-n.grid[1]:i+n.grid[1]:i,s=this.originalPageX+Math.round((a-this.originalPageX)/n.grid[0])*n.grid[0],a=this.containment?s-this.offset.click.left>=this.containment[0]&&s-this.offset.click.left<=this.containment[2]?s:s-this.offset.click.left>=this.containment[0]?s-n.grid[0]:s+n.grid[0]:s)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:r.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:r.scrollLeft())}},_rearrange:function(e,t,i,s){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n===this.counter&&this.refreshPositions(!s)})},_clear:function(e,t){function i(e,t,i){return function(s){i._trigger(e,s,t._uiHash(t))}}this.reverting=!1;var s,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(s in this._storedCSS)"auto"!==this._storedCSS[s]&&"static"!==this._storedCSS[s]||(this._storedCSS[s]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),s=this.containers.length-1;s>=0;s--)t||n.push(i("deactivate",this,this.containers[s])),this.containers[s].containerCache.over&&(n.push(i("out",this,this.containers[s])),this.containers[s].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!t){for(this._trigger("beforeStop",e,this._uiHash()),s=0;s<n.length;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null,!t){for(s=0;s<n.length;s++)n[s].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})}(jQuery),function(e){var t=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.4",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),t.collapsible||!1!==t.active&&null!=t.active||(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,panel:this.active.length?this.active.next():e(),content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&e.css("height","")},_setOption:function(e,t){if("active"===e)return void this._activate(t);"event"===e&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),"collapsible"!==e||t||!1!==this.options.active||this._activate(0),"icons"===e&&(this._destroyIcons(),t&&this._createIcons()),"disabled"===e&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(!t.altKey&&!t.ctrlKey){var i=e.ui.keyCode,s=this.headers.length,n=this.headers.index(t.target),a=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(t);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(e(t.target).attr("tabIndex",-1),e(a).attr("tabIndex",0),a.focus(),t.preventDefault())}},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels(),!1===t.active&&!0===t.collapsible||!this.headers.length?(t.active=!1,this.active=e()):!1===t.active?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var i,s=this.options,n=s.heightStyle,a=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++t);this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active ui-corner-top").removeClass("ui-corner-all"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var i=e(this),s=i.attr("id"),n=i.next(),a=n.attr("id");s||(s=o+"-header-"+t,i.attr("id",s)),a||(a=o+"-panel-"+t,n.attr("id",a)),i.attr("aria-controls",a),n.attr("aria-labelledby",s)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false","aria-expanded":"false",tabIndex:-1}).next().attr({"aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true","aria-expanded":"true",tabIndex:0}).next().attr({"aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(s.event),"fill"===n?(i=a.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.headers.each(function(){i-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===n&&(i=0,this.headers.next().each(function(){i=Math.max(i,e(this).css("height","").height())}).height(i))},_activate:function(t){var i=this._findActive(t)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return"number"==typeof t?this.headers.eq(t):e()},_setupEvents:function(t){var i={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,i),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?e():n.next(),l=s.next(),c={oldHeader:s,oldPanel:l,newHeader:o?e():n,newPanel:r};t.preventDefault(),a&&!i.collapsible||!1===this._trigger("beforeActivate",t,c)||(i.active=!o&&this.headers.index(n),this.active=a?e():n,this._toggle(c),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(t){var i=t.newPanel,s=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,t):(s.hide(),i.show(),this._toggleComplete(t)),s.attr({"aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr({tabIndex:-1,"aria-expanded":"false"}):i.length&&this.headers.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr("aria-hidden","false").prev().attr({"aria-selected":"true",tabIndex:0,"aria-expanded":"true"})},_animate:function(e,t,n){var a,o,r,l=this,c=0,h=e.length&&(!t.length||e.index()<t.index()),d=this.options.animate||{},u=h&&d.down||d,p=function(){l._toggleComplete(n)};return"number"==typeof u&&(r=u),"string"==typeof u&&(o=u),o=o||u.easing||d.easing,r=r||u.duration||d.duration,t.length?e.length?(a=e.show().outerHeight(),t.animate(i,{duration:r,easing:o,step:function(e,t){t.now=Math.round(e)}}),void e.hide().animate(s,{duration:r,easing:o,complete:p,step:function(e,i){i.now=Math.round(e),"height"!==i.prop?c+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(a-t.outerHeight()-c),c=0)}})):t.animate(i,r,o,p):e.animate(s,r,o,p)},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})}(jQuery),function(e){e.widget("ui.autocomplete",{version:"1.10.4",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},requestIndex:0,pending:0,_create:function(){var t,i,s,n=this.element[0].nodeName.toLowerCase(),a="textarea"===n,o="input"===n;this.isMultiLine=!!a||!o&&this.element.prop("isContentEditable"),this.valueMethod=this.element[a||o?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return t=!0,s=!0,void(i=!0);t=!1,s=!1,i=!1;var a=e.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:t=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:t=!0,this._move("nextPage",n);break;case a.UP:t=!0,this._keyEvent("previous",n);break;case a.DOWN:t=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(t=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(t)return t=!1,void(this.isMultiLine&&!this.menu.element.is(":visible")||s.preventDefault());if(!i){var n=e.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(e){if(s)return s=!1,void e.preventDefault();this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(s){s.target===t.element[0]||s.target===i||e.contains(i,s.target)||t.close()})})},menufocus:function(t,i){if(this.isNewMenu&&(this.isNewMenu=!1,t.originalEvent&&/^mouse/.test(t.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});var s=i.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:s})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(e,t){var i=t.item.data("ui-autocomplete-item"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",e,{item:i})&&this._value(i.value),this.term=this._value(),this.close(e),this.selectedItem=i}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),"source"===e&&this._initSource(),"appendTo"===e&&this.menu.element.appendTo(this._appendTo()),"disabled"===e&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_initSource:function(){var t,i,s=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,s){s(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,n){s.xhr&&s.xhr.abort(),s.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e){n(e)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){return e=null!=e?e:this._value(),this.term=this._value(),e.length<this.options.minLength?this.close(t):!1!==this._trigger("search",t)?this._search(e):void 0},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var t=++this.requestIndex;return e.proxy(function(e){t===this.requestIndex&&this.__response(e),--this.pending||this.element.removeClass("ui-autocomplete-loading")},this)},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty();this._renderMenu(i,t),this.isNewMenu=!0,this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var s=this;e.each(i,function(e,i){s._renderItemData(t,i)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,i){return e("<li>").append(e("<a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)?(this._value(this.term),void this.menu.blur()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,i){var s=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return s.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments),this.options.disabled||this.cancelSearch||(t=e&&e.length?this.options.messages.results(e.length):this.options.messages.noResults,this.liveRegion.text(t))}})}(jQuery),function(e){
var t,i="ui-button ui-widget ui-state-default ui-corner-all",s="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",n=function(){var t=e(this);setTimeout(function(){t.find(":ui-button").button("refresh")},1)},a=function(t){var i=t.name,s=t.form,n=e([]);return i&&(i=i.replace(/'/g,"\\'"),n=s?e(s).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),n};e.widget("ui.button",{version:"1.10.4",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,n),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var s=this,o=this.options,r="checkbox"===this.type||"radio"===this.type,l=r?"":"ui-state-active";null===o.label&&(o.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(i).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){o.disabled||this===t&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){o.disabled||e(this).removeClass(l)}).bind("click"+this.eventNamespace,function(e){o.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this._on({focus:function(){this.buttonElement.addClass("ui-state-focus")},blur:function(){this.buttonElement.removeClass("ui-state-focus")}}),r&&this.element.bind("change"+this.eventNamespace,function(){s.refresh()}),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),s.buttonElement.attr("aria-pressed","true");var t=s.element[0];a(t).not(t).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).addClass("ui-state-active"),t=this,s.document.one("mouseup",function(){t=null})}).bind("mouseup"+this.eventNamespace,function(){if(o.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(o.disabled)return!1;t.keyCode!==e.ui.keyCode.SPACE&&t.keyCode!==e.ui.keyCode.ENTER||e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",o.disabled),this._resetButton()},_determineButtonType:function(){var e,t,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(i+" ui-state-active "+s).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){if(this._super(e,t),"disabled"===e)return this.element.prop("disabled",!!t),void(t&&this.buttonElement.removeClass("ui-state-focus"));this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?a(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(s),i=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),n=this.options.icons,a=n.primary&&n.secondary,o=[];n.primary||n.secondary?(this.options.text&&o.push("ui-button-text-icon"+(a?"s":n.primary?"-primary":"-secondary")),n.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+n.primary+"'></span>"),n.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+n.secondary+"'></span>"),this.options.text||(o.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(i)))):o.push("ui-button-text-only"),t.addClass(o.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.4",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){"disabled"===e&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(a.inline?t.parent()[0]:a.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function n(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}e.extend(e.ui,{datepicker:{version:"1.10.4"}});var a,o="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return n(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,o,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),"focus"!==s&&"both"!==s||t.focus(this._showDatepicker),"button"!==s&&"both"!==s||(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;n<e.length;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,a,r){var l,c,h,d,u,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],o,p)),n(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,h=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,o);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!==i&&"span"!==i||s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,a){var o,r,l,c,h=this._getInst(i);if(2===arguments.length&&"string"==typeof s)return"defaults"===s?e.extend({},e.datepicker._defaults):h?"all"===s?e.extend({},h.settings):this._get(h,s):null;o=s||{},"string"==typeof s&&(o={},o[s]=a),h&&(this._curInst===h&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(h,"min"),c=this._getMinMaxDate(h,"max"),n(h.settings,o),null!==l&&o.dateFormat!==t&&o.minDate===t&&(h.settings.minDate=this._formatDate(h,l)),null!==c&&o.dateFormat!==t&&o.maxDate===t&&(h.settings.maxDate=this._formatDate(h,c)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),h),this._autoSize(h),this._setDate(h,r),this._updateAlternate(h),this._updateDatepicker(h))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,s,n=e.datepicker._getInst(t.target);if(e.datepicker._get(n,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(n,"dateFormat")),s=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||s<" "||!i||i.indexOf(s)>-1},_doKeyUp:function(t){var i,s=e.datepicker._getInst(t.target);if(s.input.val()!==s.lastVal)try{i=e.datepicker.parseDate(e.datepicker._get(s,"dateFormat"),s.input?s.input.val():null,e.datepicker._getFormatConfig(s)),i&&(e.datepicker._setDateFromField(s),e.datepicker._updateAlternate(s),e.datepicker._updateDatepicker(s))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,s,a,o,r,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),s=e.datepicker._get(i,"beforeShow"),a=s?s.apply(t,[t,i]):{},!1!==a&&(n(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return!(o|="fixed"===e(this).css("position"))}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,a=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(t),n=s[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+a>c&&c>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,r=this._curInst;!r||t&&r!==e.data(t,o)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(r,"onClose"),a&&a.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===s)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,s){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var n,a,o,r,l=0,c=(s?s.shortYearCutoff:null)||this._defaults.shortYearCutoff,h="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(s?s.dayNamesShort:null)||this._defaults.dayNamesShort,u=(s?s.dayNames:null)||this._defaults.dayNames,p=(s?s.monthNamesShort:null)||this._defaults.monthNamesShort,f=(s?s.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,_=-1,b=!1,y=function(e){var i=n+1<t.length&&t.charAt(n+1)===e;return i&&n++,i},w=function(e){var t=y(e),s="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n=new RegExp("^\\d{1,"+s+"}"),a=i.substring(l).match(n);if(!a)throw"Missing number at position "+l;return l+=a[0].length,parseInt(a[0],10)},k=function(t,s,n){var a=-1,o=e.map(y(t)?n:s,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(o,function(e,t){var s=t[1];if(i.substr(l,s.length).toLowerCase()===s.toLowerCase())return a=t[0],l+=s.length,!1}),-1!==a)return a+1;throw"Unknown name at position "+l},x=function(){if(i.charAt(l)!==t.charAt(n))throw"Unexpected literal at position "+l;l++};for(n=0;n<t.length;n++)if(b)"'"!==t.charAt(n)||y("'")?x():b=!1;else switch(t.charAt(n)){case"d":v=w("d");break;case"D":k("D",d,u);break;case"o":_=w("o");break;case"m":g=w("m");break;case"M":g=k("M",p,f);break;case"y":m=w("y");break;case"@":r=new Date(w("@")),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"!":r=new Date((w("!")-this._ticksTo1970)/1e4),m=r.getFullYear(),g=r.getMonth()+1,v=r.getDate();break;case"'":y("'")?x():b=!0;break;default:x()}if(l<i.length&&(o=i.substr(l),!/^\s+/.test(o)))throw"Extra/unparsed characters found in date: "+o;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=h?0:-100)),_>-1)for(g=1,v=_;;){if(a=this._getDaysInMonth(m,g-1),v<=a)break;g++,v-=a}if(r=this._daylightSavingAdjust(new Date(m,g-1,v)),r.getFullYear()!==m||r.getMonth()+1!==g||r.getDate()!==v)throw"Invalid date";return r},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=s+1<e.length&&e.charAt(s+1)===t;return i&&s++,i},c=function(e,t,i){var s=""+t;if(l(e))for(;s.length<i;)s="0"+s;return s},h=function(e,t,i,s){return l(e)?s[t]:i[t]},d="",u=!1;if(t)for(s=0;s<e.length;s++)if(u)"'"!==e.charAt(s)||l("'")?d+=e.charAt(s):u=!1;else switch(e.charAt(s)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=h("D",t.getDay(),n,a);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=h("M",t.getMonth(),o,r);break;case"y":d+=l("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":u=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=t+1<e.length&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;t<e.length;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(e){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),a=s.getMonth(),o=s.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,a))}l=r.exec(i)}return new Date(n,a,o)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"===o.toString()?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){
var t,i,s,n,a,o,r,l,c,h,d,u,p,f,m,g,v,_,b,y,w,k,x,C,j,D,T,S,$,P,I,E,M,N,A,L,O,z,R,H=new Date,F=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),q=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),B=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),Q=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-Y,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),t=G&&t<G?G:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=B?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=B?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+n+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:F,o=B?this.formatDate(o,r,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(q?"":l)+"</div>":"",h=parseInt(this._get(e,"firstDay"),10),h=isNaN(h)?0:h,d=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),y="",k=0;k<V[0];k++){for(x="",this.maxRows=4,C=0;C<V[1];C++){if(j=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),D=" ui-corner-all",T="",Q){if(T+="<div class='ui-datepicker-group",V[1]>1)switch(C){case 0:T+=" ui-datepicker-group-first",D=" ui-corner-"+(q?"right":"left");break;case V[1]-1:T+=" ui-datepicker-group-last",D=" ui-corner-"+(q?"left":"right");break;default:T+=" ui-datepicker-group-middle",D=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===k?q?a:s:"")+(/all|right/.test(D)&&0===k?q?s:a:"")+this._generateMonthYearHeader(e,Z,ee,G,J,k>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",S=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;w<7;w++)$=(w+h)%7,S+="<th"+((w+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[$]+"'>"+p[$]+"</span></th>";for(T+=S+"</tr></thead><tbody>",P=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,P)),I=(this._getFirstDayOfMonth(ee,Z)-h+7)%7,E=Math.ceil((I+P)/7),M=Q&&this.maxRows>E?this.maxRows:E,this.maxRows=M,N=this._daylightSavingAdjust(new Date(ee,Z,1-I)),A=0;A<M;A++){for(T+="<tr>",L=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",w=0;w<7;w++)O=g?g.apply(e.input?e.input[0]:null,[N]):[!0,""],z=N.getMonth()!==Z,R=z&&!_||!O[0]||G&&N<G||J&&N>J,L+="<td class='"+((w+h+6)%7>=5?" ui-datepicker-week-end":"")+(z?" ui-datepicker-other-month":"")+(N.getTime()===j.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===N.getTime()&&b.getTime()===j.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(z&&!v?"":" "+O[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+(z&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(z&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===F.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(z?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);T+=L+"</tr>"}Z++,Z>11&&(Z=0,ee++),T+="</tbody></table>"+(Q?"</div>"+(V[0]>0&&C===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=T}y+=x}return y+=c,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var l,c,h,d,u,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=s&&s.getFullYear()===i,c=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;h<12;h++)(!l||h>=s.getMonth())&&(!c||h<=n.getMonth())&&(y+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+r[h]+"</option>");y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&t<i?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(t<0?t:n[0]*n[1]),1));return t<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||t.getFullYear()<=r)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.4"}(jQuery),function(e){var t={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.4",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i,s=this;if(this._isOpen&&!1!==this._trigger("beforeClose",t)){if(this._isOpen=!1,this._destroyOverlay(),!this.opener.filter(":focusable").focus().length)try{i=this.document[0].activeElement,i&&"body"!==i.nodeName.toLowerCase()&&e(i).blur()}catch(e){}this._hide(this.uiDialog,this.options.hide,function(){s._trigger("close",t)})}},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var i=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return i&&!t&&this._trigger("focus",e),i},open:function(){var t=this;if(this._isOpen)return void(this._moveToTop()&&this._focusTabbable());this._isOpen=!0,this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._trigger("open")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function i(){var t=this.document[0].activeElement;this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB){var i=this.uiDialog.find(":tabbable"),s=i.filter(":first"),n=i.filter(":last");t.target!==n[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==s[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(n.focus(1),t.preventDefault()):(s.focus(1),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;if(this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length)return void this.uiDialog.removeClass("ui-dialog-buttons");e.each(i,function(i,s){var n,a;s=e.isFunction(s)?{click:s,text:i}:s,s=e.extend({type:"button"},s),n=s.click,s.click=function(){n.apply(t.element[0],arguments)},a={icons:s.icons,text:s.showText},delete s.icons,delete s.showText,e("<button></button>",s).button(a).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){e(this).addClass("ui-dialog-dragging"),i._blockFrames(),i._trigger("dragStart",s,t(n))},drag:function(e,s){i._trigger("drag",e,t(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),i._unblockFrames(),i._trigger("dragStop",n,t(a))}})},_makeResizable:function(){function t(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var i=this,s=this.options,n=s.resizable,a=this.uiDialog.css("position"),o="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:this._minHeight(),handles:o,start:function(s,n){e(this).addClass("ui-dialog-resizing"),i._blockFrames(),i._trigger("resizeStart",s,t(n))},resize:function(e,s){i._trigger("resize",e,t(s))},stop:function(n,a){s.height=e(this).height(),s.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),i._unblockFrames(),i._trigger("resizeStop",n,t(a))}}).css("position",a)},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(s){var n=this,a=!1,o={};e.each(s,function(e,s){n._setOption(e,s),e in t&&(a=!0),e in i&&(o[e]=s)}),a&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var i,s,n=this.uiDialog;"dialogClass"===e&&n.removeClass(this.options.dialogClass).addClass(t),"disabled"!==e&&(this._super(e,t),"appendTo"===e&&this.uiDialog.appendTo(this._appendTo()),"buttons"===e&&this._createButtons(),"closeText"===e&&this.uiDialogTitlebarClose.button({label:""+t}),"draggable"===e&&(i=n.is(":data(ui-draggable)"),i&&!t&&n.draggable("destroy"),!i&&t&&this._makeDraggable()),"position"===e&&this._position(),"resizable"===e&&(s=n.is(":data(ui-resizable)"),s&&!t&&n.resizable("destroy"),s&&"string"==typeof t&&n.resizable("option","handles",t),s||!1===t||this._makeResizable()),"title"===e&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,s=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),s.minWidth>s.width&&(s.width=s.minWidth),e=this.uiDialog.css({height:"auto",width:s.width}).outerHeight(),t=Math.max(0,s.minHeight-e),i="number"==typeof s.maxHeight?Math.max(0,s.maxHeight-e):"none","auto"===s.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,s.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=this,i=this.widgetFullName;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(s){t._allowInteraction(s)||(s.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data(i)._focusTabbable())})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),e.ui.dialog.overlayInstances=0,!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t,i=this.options.position,s=[],n=[0,0];i?(("string"==typeof i||"object"==typeof i&&"0"in i)&&(s=i.split?i.split(" "):[i[0],i[1]],1===s.length&&(s[1]=s[0]),e.each(["left","top"],function(e,t){+s[e]===s[e]&&(n[e]=s[e],s[e]=t)}),i={my:s[0]+(n[0]<0?n[0]:"+"+n[0])+" "+s[1]+(n[1]<0?n[1]:"+"+n[1]),at:s.join(" ")}),i=e.extend({},e.ui.dialog.prototype.options.position,i)):i=e.ui.dialog.prototype.options.position,t=this.uiDialog.is(":visible"),t||this.uiDialog.show(),this.uiDialog.position(i),t||this.uiDialog.hide()}})}(jQuery),function(e){e.widget("ui.menu",{version:"1.10.4",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var i=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&i.not(".ui-state-disabled").length&&(this.select(t),t.isPropagationStopped()||(this.mouseHandled=!0),i.has(".ui-menu").length?this.expand(t):!this.element.is(":focus")&&e(this.document[0].activeElement).closest(".ui-menu").length&&(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var i=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,i)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,l=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:l=!1,n=this.previousFilter||"",a=String.fromCharCode(t.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=new RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(t.keyCode),r=new RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(e(this).children("a").text())})),s.length?(this.focus(t,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,i=this.options.icons.submenu,s=this.element.find(this.options.menus);this.element.toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length),s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),s=t.prev("a"),n=e("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),t.attr("aria-labelledby",s.attr("id"))}),t=s.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-\u2014\u2013\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){"icons"===e&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var i,s;this.blur(e,e&&"focus"===e.type),this._scrollIntoView(t),this.active=t.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&"keydown"===e.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=t.children(".ui-menu"),i.length&&e&&/^mouse/.test(e.type)&&this._startOpening(i),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,n=t.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=t.height(),n<0?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(e,t){t||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){var i=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(t),this.activeMenu=s},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var s;this.active&&(s="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[e+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,s)},nextPage:function(t){var i,s,n;if(!this.active)return void this.next(t);this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s-n<0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))},previousPage:function(t){var i,s,n;if(!this.active)return void this.next(t);this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=e(this),i.offset().top-s+n>0}),this.focus(t,i)):this.focus(t,this.activeMenu.children(".ui-menu-item").first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,i)}})}(jQuery),function(e,t){e.widget("ui.progressbar",{version:"1.10.4",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=!1===e,"number"!=typeof e&&(e=0),!this.indeterminate&&Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){"max"===e&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,i=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(i.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})}(jQuery),function(e){var t=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.4",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){this._keySliding=!1,this._mouseSliding=!1,
this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"),this._refresh(),this._setOption("disabled",this.options.disabled),this._animateOff=!1},_refresh:function(){this._createRange(),this._createHandles(),this._setupEvents(),this._refreshValue()},_createHandles:function(){var t,i,s=this.options,n=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),a=[];for(i=s.values&&s.values.length||1,n.length>i&&(n.slice(i).remove(),n=n.slice(0,i)),t=n.length;t<i;t++)a.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=n.add(e(a.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)})},_createRange:function(){var t=this.options,i="";t.range?(!0===t.range&&(t.values?t.values.length&&2!==t.values.length?t.values=[t.values[0],t.values[0]]:e.isArray(t.values)&&(t.values=t.values.slice(0)):t.values=[this._valueMin(),this._valueMin()]),this.range&&this.range.length?this.range.removeClass("ui-slider-range-min ui-slider-range-max").css({left:"",bottom:""}):(this.range=e("<div></div>").appendTo(this.element),i="ui-slider-range ui-widget-header ui-corner-all"),this.range.addClass(i+("min"===t.range||"max"===t.range?" ui-slider-range-"+t.range:""))):(this.range&&this.range.remove(),this.range=null)},_setupEvents:function(){var e=this.handles.add(this.range).filter("a");this._off(e),this._on(e,this._handleEvents),this._hoverable(e),this._focusable(e)},_destroy:function(){this.handles.remove(),this.range&&this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,s,n,a,o,r,l,c=this,h=this.options;return!h.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(s-c.values(t));(n>i||n===i&&(t===c._lastChangedValue||c.values(t)===h.min))&&(n=i,a=e(this),o=t)}),!1!==this._start(t,o)&&(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),r=a.offset(),l=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-a.width()/2,top:t.pageY-r.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,s,n,a;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/t,s>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>s||1===t&&i<s)&&(i=s),i!==this.values(t)&&(n=this.values(),n[t]=i,a=this._trigger("slide",e,{handle:this.handles[t],value:i,values:n}),s=this.values(t?0:1),!1!==a&&this.values(t,i))):i!==this.value()&&!1!==(a=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var s,n,a;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(s=this.options.values,n=arguments[0],a=0;a<s.length;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(t,i){var s,n=0;switch("range"===t&&!0===this.options.range&&("min"===i?(this.options.value=this._values(0),this.options.values=null):"max"===i&&(this.options.value=this._values(this.options.values.length-1),this.options.values=null)),e.isArray(this.options.values)&&(n=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;s<n;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1;break;case"range":this._animateOff=!0,this._refresh(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,s;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);if(this.options.values&&this.options.values.length){for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i}return[]},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,s=e-i;return 2*Math.abs(i)>=t&&(s+=i>0?t:-t),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,s,n,a,o=this.options.range,r=this.options,l=this,c=!this._animateOff&&r.animate,h={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,h["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[c?"animate":"css"](h,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[c?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[c?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[c?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[c?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?(s-n)/(a-n)*100:0,h["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[c?"animate":"css"](h,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[c?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[c?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[c?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))},_handleEvents:{keydown:function(i){var s,n,a,o=e(i.target).data("ui-slider-handle-index");switch(i.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(i.target).addClass("ui-state-active"),!1===this._start(i,o)))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),i.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/t);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(i,o,n)},click:function(e){e.preventDefault()},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}})}(jQuery),function(e){function t(e){return function(){var t=this.element.val();e.apply(this,arguments),this._refresh(),t!==this.element.val()&&this._trigger("change")}}e.widget("ui.spinner",{version:"1.10.4",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),""!==this.value()&&this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var t={},i=this.element;return e.each(["min","max","step"],function(e,s){var n=i.attr(s);n!==undefined&&n.length&&(t[s]=n)}),t},_events:{keydown:function(e){this._start(e)&&this._keydown(e)&&e.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(e){if(this.cancelBlur)return void delete this.cancelBlur;this._stop(),this._refresh(),this.previous!==this.element.val()&&this._trigger("change",e)},mousewheel:function(e,t){if(t){if(!this.spinning&&!this._start(e))return!1;this._spin((t>0?1:-1)*this.options.step,e),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(e)},100),e.preventDefault()}},"mousedown .ui-spinner-button":function(t){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),t.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(t)&&this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(t){if(e(t.currentTarget).hasClass("ui-state-active"))return!1!==this._start(t)&&void this._repeat(null,e(t.currentTarget).hasClass("ui-spinner-up")?1:-1,t)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var e=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=e.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*e.height())&&e.height()>0&&e.height(e.height()),this.options.disabled&&this.disable()},_keydown:function(t){var i=this.options,s=e.ui.keyCode;switch(t.keyCode){case s.UP:return this._repeat(null,1,t),!0;case s.DOWN:return this._repeat(null,-1,t),!0;case s.PAGE_UP:return this._repeat(null,i.page,t),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,t),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(e){return!(!this.spinning&&!1===this._trigger("start",e))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(e,t,i){e=e||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,t,i)},e),this._spin(t*this.options.step,i)},_spin:function(e,t){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+e*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",t,{value:i})||(this._value(i),this.counter++)},_increment:function(t){var i=this.options.incremental;return i?e.isFunction(i)?i(t):Math.floor(t*t*t/5e4-t*t/500+17*t/200+1):1},_precision:function(){var e=this._precisionOf(this.options.step);return null!==this.options.min&&(e=Math.max(e,this._precisionOf(this.options.min))),e},_precisionOf:function(e){var t=e.toString(),i=t.indexOf(".");return-1===i?0:t.length-i-1},_adjustValue:function(e){var t,i,s=this.options;return t=null!==s.min?s.min:0,i=e-t,i=Math.round(i/s.step)*s.step,e=t+i,e=parseFloat(e.toFixed(this._precision())),null!==s.max&&e>s.max?s.max:null!==s.min&&e<s.min?s.min:e},_stop:function(e){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",e))},_setOption:function(e,t){if("culture"===e||"numberFormat"===e){var i=this._parse(this.element.val());return this.options[e]=t,void this.element.val(this._format(i))}"max"!==e&&"min"!==e&&"step"!==e||"string"==typeof t&&(t=this._parse(t)),"icons"===e&&(this.buttons.first().find(".ui-icon").removeClass(this.options.icons.up).addClass(t.up),this.buttons.last().find(".ui-icon").removeClass(this.options.icons.down).addClass(t.down)),this._super(e,t),"disabled"===e&&(t?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:t(function(e){this._super(e),this._value(this.element.val())}),_parse:function(e){return"string"==typeof e&&""!==e&&(e=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(e,10,this.options.culture):+e),""===e||isNaN(e)?null:e},_format:function(e){return""===e?"":window.Globalize&&this.options.numberFormat?Globalize.format(e,this.options.numberFormat,this.options.culture):e},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(e,t){var i;""!==e&&null!==(i=this._parse(e))&&(t||(i=this._adjustValue(i)),e=this._format(i)),this.element.val(e),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:t(function(e){this._stepUp(e)}),_stepUp:function(e){this._start()&&(this._spin((e||1)*this.options.step),this._stop())},stepDown:t(function(e){this._stepDown(e)}),_stepDown:function(e){this._start()&&(this._spin((e||1)*-this.options.step),this._stop())},pageUp:t(function(e){this._stepUp((e||1)*this.options.page)}),pageDown:t(function(e){this._stepDown((e||1)*this.options.page)}),value:function(e){if(!arguments.length)return this._parse(this.element.val());t(this._value).call(this,e)},widget:function(){return this.uiSpinner}})}(jQuery),function(e,t){function i(){return++n}function s(e){return e=e.cloneNode(!1),e.hash.length>1&&decodeURIComponent(e.href.replace(a,""))===decodeURIComponent(location.href.replace(a,""))}var n=0,a=/#.*$/;e.widget("ui.tabs",{version:"1.10.4",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,i=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),i.active=this._initialActive(),e.isArray(i.disabled)&&(i.disabled=e.unique(i.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(i.active):this.active=e(),this._refresh(),this.active.length&&this.load(i.active)},_initialActive:function(){var t=this.options.active,i=this.options.collapsible,s=location.hash.substring(1);return null===t&&(s&&this.tabs.each(function(i,n){if(e(n).attr("aria-controls")===s)return t=i,!1}),null===t&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==t&&-1!==t||(t=!!this.tabs.length&&0)),!1!==t&&-1===(t=this.tabs.index(this.tabs.eq(t)))&&(t=!i&&0),!i&&!1===t&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var i=e(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(t)){switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:s++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:n=!1,s--;break;case e.ui.keyCode.END:s=this.anchors.length-1;break;case e.ui.keyCode.HOME:s=0;break;case e.ui.keyCode.SPACE:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s);case e.ui.keyCode.ENTER:return t.preventDefault(),clearTimeout(this.activating),void this._activate(s!==this.options.active&&s);default:return}t.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),t.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(t){this._handlePageNav(t)||t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){return t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(t,i){function s(){return t>n&&(t=0),t<0&&(t=n),t}for(var n=this.tabs.length-1;-1!==e.inArray(s(),this.options.disabled);)t=i?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){return"active"===e?void this._activate(t):"disabled"===e?void this._setupDisabled(t):(this._super(e,t),"collapsible"===e&&(this.element.toggleClass("ui-tabs-collapsible",t),t||!1!==this.options.active||this._activate(0)),"event"===e&&this._setupEvents(t),void("heightStyle"===e&&this._setupHeightStyle(t)))},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,i=this.tablist.children(":has(a[href])");t.disabled=e.map(i.filter(".ui-state-disabled"),function(e){return i.index(e)}),this._processTabs(),!1!==t.active&&this.anchors.length?this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active):(t.active=!1,this.active=e()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(i,n){var a,o,r,l=e(n).uniqueId().attr("id"),c=e(n).closest("li"),h=c.attr("aria-controls");s(n)?(a=n.hash,o=t.element.find(t._sanitizeSelector(a))):(r=t._tabId(c),a="#"+r,o=t.element.find(a),o.length||(o=t._createPanel(r),o.insertAfter(t.panels[i-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),h&&c.data("ui-tabs-aria-controls",h),c.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.tablist||this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var i,s=0;i=this.tabs[s];s++)!0===t||-1!==e.inArray(s,t)?e(i).addClass("ui-state-disabled").attr("aria-disabled","true"):e(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var i={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){i[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var i,s=this.element.parent();"fill"===t?(i=s.height(),i-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),s=t.css("position");"absolute"!==s&&"fixed"!==s&&(i-=t.outerHeight(!0))}),this.element.children().not(this.panels).each(function(){i-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,i-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):"auto"===t&&(i=0,this.panels.each(function(){i=Math.max(i,e(this).height("").height())}).height(i))},_eventHandler:function(t){var i=this.options,s=this.active,n=e(t.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,l=r?e():this._getPanelForTab(a),c=s.length?this._getPanelForTab(s):e(),h={oldTab:s,oldPanel:c,newTab:r?e():a,newPanel:l};t.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",t,h)||(i.active=!r&&this.tabs.index(a),this.active=o?e():a,this.xhr&&this.xhr.abort(),c.length||l.length||e.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(a),t),this._toggle(t,h))},_toggle:function(t,i){function s(){a.running=!1,a._trigger("activate",t,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===e(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var i,s=this._findActive(t);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:e.noop}))},_findActive:function(t){return!1===t?e():this.tabs.eq(t)},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),i=t.data("ui-tabs-aria-controls");i?t.attr("aria-controls",i).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;!1!==s&&(i===t?s=!1:(i=this._getIndex(i),s=e.isArray(s)?e.map(s,function(e){return e!==i?e:null}):e.map(this.tabs,function(e,t){return t!==i?t:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(!0!==s){if(i===t)s=!0;else{if(i=this._getIndex(i),-1!==e.inArray(i,s))return;s=e.isArray(s)?e.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(t,i){t=this._getIndex(t);var n=this,a=this.tabs.eq(t),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),l={tab:a,panel:r};s(o[0])||(this.xhr=e.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){r.html(e),n._trigger("load",i,l)},1)}).complete(function(e,t){setTimeout(function(){"abort"===t&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),e===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(t,i,s){var n=this;return{url:t.attr("href"),beforeSend:function(t,a){return n._trigger("beforeLoad",i,e.extend({jqXHR:t,ajaxSettings:a},s))}}},_getPanelForTab:function(t){var i=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}})}(jQuery),function(e){function t(t,i){var s=(t.attr("aria-describedby")||"").split(/\s+/);s.push(i),t.data("ui-tooltip-id",i).attr("aria-describedby",e.trim(s.join(" ")))}function i(t){var i=t.data("ui-tooltip-id"),s=(t.attr("aria-describedby")||"").split(/\s+/),n=e.inArray(i,s);-1!==n&&s.splice(n,1),t.removeData("ui-tooltip-id"),s=e.trim(s.join(" ")),s?t.attr("aria-describedby",s):t.removeAttr("aria-describedby")}var s=0;e.widget("ui.tooltip",{version:"1.10.4",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,i){var s=this;if("disabled"===t)return this[i?"_disable":"_enable"](),void(this.options[t]=i);this._super(t,i),"content"===t&&e.each(this.tooltips,function(e,t){s._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s[0],t.close(n,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var i=this,s=e(t?t.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),t&&"mouseover"===t.type&&s.parents().each(function(){var t,s=e(this);s.data("ui-tooltip-open")&&(t=e.Event("blur"),t.target=t.currentTarget=this,i.close(t,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,t))},_updateContent:function(e,t){var i,s=this.options.content,n=this,a=t?t.type:null;if("string"==typeof s)return this._open(t,e,s);(i=s.call(e[0],function(i){e.data("ui-tooltip-open")&&n._delay(function(){t&&(t.type=a),this._open(t,e,i)})}))&&this._open(t,e,i)},_open:function(i,s,n){function a(e){c.of=e,o.is(":hidden")||o.position(c)}var o,r,l,c=e.extend({},this.options.position);if(n){if(o=this._find(s),o.length)return void o.find(".ui-tooltip-content").html(n);s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),o=this._tooltip(s),t(s,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:a}),a(i)):o.position(e.extend({of:s},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=this.delayedShow=setInterval(function(){o.is(":visible")&&(a(c.of),clearInterval(l))},e.fx.interval)),this._trigger("open",i,{tooltip:o}),r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var i=e.Event(t);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(t){var s=this,n=e(t?t.currentTarget:this.element),a=this._find(n);this.closing||(clearInterval(this.delayedShow),n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),a.stop(!0),this._hide(a,this.options.hide,function(){s._removeTooltip(e(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),t&&"mouseleave"===t.type&&e.each(this.parents,function(t,i){e(i.element).attr("title",i.title),delete s.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:a}),this.closing=!1)},_tooltip:function(t){var i="ui-tooltip-"+s++,n=e("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),this.tooltips[i]=t,n},_find:function(t){var i=t.data("ui-tooltip-id");return i?e("#"+i):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(i,s){var n=e.Event("blur");n.target=n.currentTarget=s[0],t.close(n,!0),e("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery),jQuery.cookie=function(e,t,i){if(void 0===t){var s=null;if(document.cookie&&""!=document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){
var o=jQuery.trim(n[a]);if(o.substring(0,e.length+1)==e+"="){s=decodeURIComponent(o.substring(e.length+1));break}}return s}i=i||{},null===t&&(t="",i.expires=-1);var r="";if(i.expires&&("number"==typeof i.expires||i.expires.toUTCString)){var l;"number"==typeof i.expires?(l=new Date,l.setTime(l.getTime()+24*i.expires*60*60*1e3)):l=i.expires,r="; expires="+l.toUTCString()}var c=i.path?"; path="+i.path:"",h=i.domain?"; domain="+i.domain:"",d=i.secure?"; secure":"";document.cookie=[e,"=",encodeURIComponent(t),r,c,h,d].join("")};var _canLog=!0,getDynaTreePersistData=null,DTNodeStatus_Error=-1,DTNodeStatus_Loading=1,DTNodeStatus_Ok=0;!function($){function getDtNodeFromElement(e){for(var t=5;e&&t--;){if(e.dtnode)return e.dtnode;e=e.parentNode}return null}function noop(){}function _initDragAndDrop(e){var t=e.options.dnd||null;t&&(t.onDragStart||t.onDrop)&&_registerDnd(),t&&t.onDragStart&&e.$tree.draggable({addClasses:!1,appendTo:"body",containment:!1,delay:0,distance:4,revert:!1,connectToDynatree:!0,helper:function(e){var t=getDtNodeFromElement(e.target);return t.tree._onDragEvent("helper",t,null,e,null,null)},_last:null}),t&&t.onDrop&&e.$tree.droppable({addClasses:!1,tolerance:"intersect",greedy:!1,_last:null})}var Class={create:function(){return function(){this.initialize.apply(this,arguments)}}},DynaTreeNode=Class.create();DynaTreeNode.prototype={initialize:function(e,t,i){this.parent=e,this.tree=t,"string"==typeof i&&(i={title:i}),i.key===undefined&&(i.key="_"+t._nodeCount++),this.data=$.extend({},$.ui.dynatree.nodedatadefaults,i),this.li=null,this.span=null,this.ul=null,this.childList=null,this.isLoading=!1,this.hasSubSel=!1,this.bExpanded=!1,this.bSelected=!1},toString:function(){return"DynaTreeNode<"+this.data.key+">: '"+this.data.title+"'"},toDict:function(e,t){var i=$.extend({},this.data);if(i.activate=this.tree.activeNode===this,i.focus=this.tree.focusNode===this,i.expand=this.bExpanded,i.select=this.bSelected,t&&t(i),e&&this.childList){i.children=[];for(var s=0,n=this.childList.length;s<n;s++)i.children.push(this.childList[s].toDict(!0,t))}else delete i.children;return i},fromDict:function(e){var t=e.children;if(t===undefined)return this.data=$.extend(this.data,e),void this.render();e=$.extend({},e),e.children=undefined,this.data=$.extend(this.data,e),this.removeChildren(),this.addChild(t)},_getInnerHtml:function(){var e=this.tree,t=e.options,i=e.cache,s=this.getLevel(),n=this.data,a="";s<t.minExpandLevel?s>1&&(a+=i.tagConnector):!1!==this.hasChildren()?a+=i.tagExpander:a+=i.tagConnector,t.checkbox&&!0!==n.hideCheckbox&&!n.isStatusNode&&(a+=i.tagCheckbox),n.icon?a+="<img src='"+t.imagePath+n.icon+"' alt='' />":!1===n.icon?noop():a+=i.tagNodeIcon;var o="";if(t.onCustomRender&&(o=t.onCustomRender.call(e,this)||""),!o){var r=n.tooltip?" title='"+n.tooltip+"'":"";o=t.noLink||n.noLink?"<span style='display: inline-block;' class='"+t.classNames.title+"'"+r+">"+n.title+"</span>":"<a href='#' class='"+t.classNames.title+"'"+r+">"+n.title+"</a>"}return a+=o},_fixOrder:function(){var e=this.childList;if(e&&this.ul)for(var t=this.ul.firstChild,i=0,s=e.length-1;i<s;i++){var n=e[i],a=t.dtnode;n!==a?(this.tree.logDebug("_fixOrder: mismatch at index "+i+": "+n+" != "+a),this.ul.insertBefore(n.li,a.li)):t=t.nextSibling}},render:function(e,t){var i=this.tree,s=this.parent,n=this.data,a=i.options,o=a.classNames,r=this.isLastSibling();if(s||this.ul){if(s){this.li||(this.li=document.createElement("li"),this.li.dtnode=this,n.key&&a.generateIds&&(this.li.id=a.idPrefix+n.key),this.span=document.createElement("span"),this.span.className=o.title,this.li.appendChild(this.span),s.ul||(s.ul=document.createElement("ul"),s.ul.style.display="none",s.li.appendChild(s.ul)),s.ul.appendChild(this.li)),this.span.innerHTML=this._getInnerHtml();var l=[];l.push(o.node),n.isFolder&&l.push(o.folder),this.bExpanded&&l.push(o.expanded),!1!==this.hasChildren()&&l.push(o.hasChildren),n.isLazy&&null===this.childList&&l.push(o.lazy),r&&l.push(o.lastsib),this.bSelected&&l.push(o.selected),this.hasSubSel&&l.push(o.partsel),i.activeNode===this&&l.push(o.active),n.addClass&&l.push(n.addClass),l.push(o.combinedExpanderPrefix+(this.bExpanded?"e":"c")+(n.isLazy&&null===this.childList?"d":"")+(r?"l":"")),l.push(o.combinedIconPrefix+(this.bExpanded?"e":"c")+(n.isFolder?"f":"")),this.span.className=l.join(" "),this.li.className=r?o.lastsib:"",a.onRender&&a.onRender.call(i,this,this.span)}}else this.li=this.span=null,this.ul=document.createElement("ul"),a.minExpandLevel>1?this.ul.className=o.container+" "+o.noConnector:this.ul.className=o.container;if((this.bExpanded||!0===t)&&this.childList){for(var c=0,h=this.childList.length;c<h;c++)this.childList[c].render(!1,t);this._fixOrder()}if(this.ul){var d="none"===this.ul.style.display,u=!!this.bExpanded;if(e&&a.fx&&d===u){var p=a.fx.duration||200;$(this.ul).animate(a.fx,p)}else this.ul.style.display=this.bExpanded||!s?"":"none"}},getKeyPath:function(e){var t=[];return this.visitParents(function(e){e.parent&&t.unshift(e.data.key)},!e),"/"+t.join(this.tree.options.keyPathSeparator)},getParent:function(){return this.parent},getChildren:function(){return this.childList},hasChildren:function(){return this.data.isLazy?null===this.childList||this.childList===undefined?undefined:0!==this.childList.length&&(1!==this.childList.length||!this.childList[0].isStatusNode()||undefined):!!this.childList},isFirstSibling:function(){var e=this.parent;return!e||e.childList[0]===this},isLastSibling:function(){var e=this.parent;return!e||e.childList[e.childList.length-1]===this},getPrevSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=1,i=e.length;t<i;t++)if(e[t]===this)return e[t-1];return null},getNextSibling:function(){if(!this.parent)return null;for(var e=this.parent.childList,t=0,i=e.length-1;t<i;t++)if(e[t]===this)return e[t+1];return null},isStatusNode:function(){return!0===this.data.isStatusNode},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(e){if(!e)return!1;for(var t=this.parent;t;){if(t===e)return!0;t=t.parent}return!1},countChildren:function(){var e=this.childList;if(!e)return 0;for(var t=e.length,i=0,s=t;i<s;i++){t+=e[i].countChildren()}return t},sortChildren:function(e,t){var i=this.childList;if(i){if(e=e||function(e,t){return e.data.title===t.data.title?0:e.data.title>t.data.title?1:-1},i.sort(e),t)for(var s=0,n=i.length;s<n;s++)i[s].childList&&i[s].sortChildren(e,"$norender$");"$norender$"!==t&&this.render()}},_setStatusNode:function(e){var t=this.childList?this.childList[0]:null;if(e)t?(e.isStatusNode=!0,e.key="_statusNode",t.data=e,t.render()):(e.isStatusNode=!0,e.key="_statusNode",t=this.addChild(e));else if(t&&t.isStatusNode()){try{this.ul&&this.ul.removeChild(t.li)}catch(e){}1===this.childList.length?this.childList=[]:this.childList.shift()}},setLazyNodeStatus:function(e,t){var i=t&&t.tooltip?t.tooltip:null,s=t&&t.info?" ("+t.info+")":"";switch(e){case DTNodeStatus_Ok:this._setStatusNode(null),$(this.span).removeClass(this.tree.options.classNames.nodeLoading),this.isLoading=!1,this.tree.options.autoFocus&&(this===this.tree.tnRoot&&this.childList&&this.childList.length>0?this.childList[0].focus():this.focus());break;case DTNodeStatus_Loading:this.isLoading=!0,$(this.span).addClass(this.tree.options.classNames.nodeLoading),this.parent||this._setStatusNode({title:this.tree.options.strings.loading+s,tooltip:i,addClass:this.tree.options.classNames.nodeWait});break;case DTNodeStatus_Error:this.isLoading=!1,this._setStatusNode({title:this.tree.options.strings.loadError+s,tooltip:i,addClass:this.tree.options.classNames.nodeError});break;default:throw"Bad LazyNodeStatus: '"+e+"'."}},_parentList:function(e,t){for(var i=[],s=t?this:this.parent;s;)(e||s.parent)&&i.unshift(s),s=s.parent;return i},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},_getTypeForOuterNodeEvent:function(e){var t=this.tree.options.classNames,i=e.target;if(i.className.indexOf(t.node)<0)return null;for(var s=e.pageX-i.offsetLeft,n=e.pageY-i.offsetTop,a=0,o=i.childNodes.length;a<o;a++){var r=i.childNodes[a],l=r.offsetLeft-i.offsetLeft,c=r.offsetTop-i.offsetTop,h=r.clientWidth,d=r.clientHeight;if(s>=l&&s<=l+h&&n>=c&&n<=c+d){if(r.className==t.title)return"title";if(r.className==t.expander)return"expander";if(r.className==t.checkbox)return"checkbox";if(r.className==t.nodeIcon)return"icon"}}return"prefix"},getEventTargetType:function(e){var t=e&&e.target?e.target.className:"",i=this.tree.options.classNames;return t===i.title?"title":t===i.expander?"expander":t===i.checkbox?"checkbox":t===i.nodeIcon?"icon":t===i.empty||t===i.vline||t===i.connector?"prefix":t.indexOf(i.node)>=0?this._getTypeForOuterNodeEvent(e):null},isVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;t<i;t++)if(!e[t].bExpanded)return!1;return!0},makeVisible:function(){for(var e=this._parentList(!0,!1),t=0,i=e.length;t<i;t++)e[t]._expand(!0)},focus:function(){this.makeVisible();try{$(this.span).find(">a").focus()}catch(e){}},isFocused:function(){return this.tree.tnFocused===this},_activate:function(e,t){this.tree.logDebug("dtnode._activate(%o, fireEvents=%o) - %o",e,t,this);var i=this.tree.options;if(!(this.data.isStatusNode||t&&i.onQueryActivate&&!1===i.onQueryActivate.call(this.tree,e,this)))if(e){if(this.tree.activeNode){if(this.tree.activeNode===this)return;this.tree.activeNode.deactivate()}i.activeVisible&&this.makeVisible(),this.tree.activeNode=this,i.persist&&$.cookie(i.cookieId+"-active",this.data.key,i.cookie),this.tree.persistence.activeKey=this.data.key,$(this.span).addClass(i.classNames.active),t&&i.onActivate&&i.onActivate.call(this.tree,this)}else if(this.tree.activeNode===this){if(i.onQueryActivate&&!1===i.onQueryActivate.call(this.tree,!1,this))return;$(this.span).removeClass(i.classNames.active),i.persist&&$.cookie(i.cookieId+"-active","",i.cookie),this.tree.persistence.activeKey=null,this.tree.activeNode=null,t&&i.onDeactivate&&i.onDeactivate.call(this.tree,this)}},activate:function(){this._activate(!0,!0)},activateSilently:function(){this._activate(!0,!1)},deactivate:function(){this._activate(!1,!0)},isActive:function(){return this.tree.activeNode===this},_userActivate:function(){var e=!0,t=!1;if(this.data.isFolder)switch(this.tree.options.clickFolderMode){case 2:e=!1,t=!0;break;case 3:e=t=!0}null===this.parent&&(t=!1),t&&(this.toggleExpand(),this.focus()),e&&this.activate()},_setSubSel:function(e){e?(this.hasSubSel=!0,$(this.span).addClass(this.tree.options.classNames.partsel)):(this.hasSubSel=!1,$(this.span).removeClass(this.tree.options.classNames.partsel))},_fixSelectionState:function(){var e,t,i;if(this.bSelected)for(this.visit(function(e){e.parent._setSubSel(!0),e._select(!0,!1,!1)}),e=this.parent;e;){e._setSubSel(!0);var s=!0;for(t=0,i=e.childList.length;t<i;t++){var n=e.childList[t];if(!n.bSelected&&!n.data.isStatusNode){s=!1;break}}s&&e._select(!0,!1,!1),e=e.parent}else for(this._setSubSel(!1),this.visit(function(e){e._setSubSel(!1),e._select(!1,!1,!1)}),e=this.parent;e;){e._select(!1,!1,!1);var a=!1;for(t=0,i=e.childList.length;t<i;t++)if(e.childList[t].bSelected||e.childList[t].hasSubSel){a=!0;break}e._setSubSel(a),e=e.parent}},_select:function(e,t,i){var s=this.tree.options;this.data.isStatusNode||this.bSelected!==e&&(t&&s.onQuerySelect&&!1===s.onQuerySelect.call(this.tree,e,this)||(1==s.selectMode&&e&&this.tree.visit(function(e){if(e.bSelected)return e._select(!1,!1,!1),!1}),this.bSelected=e,e?(s.persist&&this.tree.persistence.addSelect(this.data.key),$(this.span).addClass(s.classNames.selected),i&&3===s.selectMode&&this._fixSelectionState(),t&&s.onSelect&&s.onSelect.call(this.tree,!0,this)):(s.persist&&this.tree.persistence.clearSelect(this.data.key),$(this.span).removeClass(s.classNames.selected),i&&3===s.selectMode&&this._fixSelectionState(),t&&s.onSelect&&s.onSelect.call(this.tree,!1,this))))},select:function(e){return this.data.unselectable?this.bSelected:this._select(!1!==e,!0,!0)},toggleSelect:function(){return this.select(!this.bSelected)},isSelected:function(){return this.bSelected},_loadContent:function(){try{var e=this.tree.options;this.tree.logDebug("_loadContent: start - %o",this),this.setLazyNodeStatus(DTNodeStatus_Loading),!0===e.onLazyRead.call(this.tree,this)&&(this.setLazyNodeStatus(DTNodeStatus_Ok),this.tree.logDebug("_loadContent: succeeded - %o",this))}catch(e){this.tree.logWarning("_loadContent: failed - %o",e),this.setLazyNodeStatus(DTNodeStatus_Error,{tooltip:""+e})}},_expand:function(e,t){if(this.bExpanded===e)return void this.tree.logDebug("dtnode._expand(%o) IGNORED - %o",e,this);this.tree.logDebug("dtnode._expand(%o) - %o",e,this);var i=this.tree.options;if(!e&&this.getLevel()<i.minExpandLevel)return void this.tree.logDebug("dtnode._expand(%o) prevented collapse - %o",e,this);if(!i.onQueryExpand||!1!==i.onQueryExpand.call(this.tree,e,this)){this.bExpanded=e,i.persist&&(e?this.tree.persistence.addExpand(this.data.key):this.tree.persistence.clearExpand(this.data.key));var s=!(this.data.isLazy&&null===this.childList||this.isLoading||t);if(this.render(s),this.bExpanded&&this.parent&&i.autoCollapse)for(var n=this._parentList(!1,!0),a=0,o=n.length;a<o;a++)n[a].collapseSiblings();if(i.activeVisible&&this.tree.activeNode&&!this.tree.activeNode.isVisible()&&this.tree.activeNode.deactivate(),e&&this.data.isLazy&&null===this.childList&&!this.isLoading)return void this._loadContent();i.onExpand&&i.onExpand.call(this.tree,e,this)}},expand:function(e){e=!1!==e,(this.childList||this.data.isLazy||!e)&&(null!==this.parent||e)&&this._expand(e)},scheduleAction:function(e,t){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.logDebug("clearTimeout(%o)",this.tree.timer));var i=this;switch(e){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger expand"),i.expand(!0)},t);break;case"activate":this.tree.timer=setTimeout(function(){i.tree.logDebug("setTimeout: trigger activate"),i.activate()},t);break;default:throw"Invalid mode "+e}this.tree.logDebug("setTimeout(%s, %s): %s",e,t,this.tree.timer)},toggleExpand:function(){this.expand(!this.bExpanded)},collapseSiblings:function(){if(null!==this.parent)for(var e=this.parent.childList,t=0,i=e.length;t<i;t++)e[t]!==this&&e[t].bExpanded&&e[t]._expand(!1)},_onClick:function(e){var t=this.getEventTargetType(e);if("expander"===t)this.toggleExpand(),this.focus();else if("checkbox"===t)this.toggleSelect(),this.focus();else{this._userActivate();var i=this.span.getElementsByTagName("a");if(!i[0])return!0;$.browser.msie||i[0].focus()}e.preventDefault()},_onDblClick:function(){},_onKeydown:function(e){var t,i=!0;switch(e.which){case 107:case 187:this.bExpanded||this.toggleExpand();break;case 109:case 189:this.bExpanded&&this.toggleExpand();break;case 32:this._userActivate();break;case 8:this.parent&&this.parent.focus();break;case 37:this.bExpanded?(this.toggleExpand(),this.focus()):this.parent&&this.parent.parent&&this.parent.focus();break;case 39:this.bExpanded||!this.childList&&!this.data.isLazy?this.childList&&this.childList[0].focus():(this.toggleExpand(),this.focus());break;case 38:for(t=this.getPrevSibling();t&&t.bExpanded&&t.childList;)t=t.childList[t.childList.length-1];!t&&this.parent&&this.parent.parent&&(t=this.parent),t&&t.focus();break;case 40:if(this.bExpanded&&this.childList)t=this.childList[0];else for(var s=this._parentList(!1,!0),n=s.length-1;n>=0&&!(t=s[n].getNextSibling());n--);t&&t.focus();break;default:i=!1}i&&e.preventDefault()},_onKeypress:function(){},_onFocus:function(e){var t=this.tree.options;"blur"==e.type||"focusout"==e.type?(t.onBlur&&t.onBlur.call(this.tree,this),this.tree.tnFocused&&$(this.tree.tnFocused.span).removeClass(t.classNames.focused),this.tree.tnFocused=null,t.persist&&$.cookie(t.cookieId+"-focus","",t.cookie)):"focus"!=e.type&&"focusin"!=e.type||(this.tree.tnFocused&&this.tree.tnFocused!==this&&(this.tree.logDebug("dtnode.onFocus: out of sync: curFocus: %o",this.tree.tnFocused),$(this.tree.tnFocused.span).removeClass(t.classNames.focused)),this.tree.tnFocused=this,t.onFocus&&t.onFocus.call(this.tree,this),$(this.tree.tnFocused.span).addClass(t.classNames.focused),t.persist&&$.cookie(t.cookieId+"-focus",this.data.key,t.cookie))},visit:function(e,t){var i=!0;if(!0===t&&(!1===(i=e(this))||"skip"==i))return i;if(this.childList)for(var s=0,n=this.childList.length;s<n&&!1!==(i=this.childList[s].visit(e,!0));s++);return i},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var i=this.parent;i;){if(!1===e(i))return!1;i=i.parent}return!0},remove:function(){if(this===this.tree.root)throw"Cannot remove system root";return this.parent.removeChild(this)},removeChild:function(e){var t=this.childList;if(1==t.length){if(e!==t[0])throw"removeChild: invalid child";return this.removeChildren()}e===this.tree.activeNode&&e.deactivate(),this.tree.options.persist&&(e.bSelected&&this.tree.persistence.clearSelect(e.data.key),e.bExpanded&&this.tree.persistence.clearExpand(e.data.key)),e.removeChildren(!0),this.ul.removeChild(e.li);for(var i=0,s=t.length;i<s;i++)if(t[i]===e){this.childList.splice(i,1);break}},removeChildren:function(e,t){this.tree.logDebug("%s.removeChildren(%o)",this,e);var i=this.tree,s=this.childList;if(s){for(var n=0,a=s.length;n<a;n++){var o=s[n];o!==i.activeNode||t||o.deactivate(),this.tree.options.persist&&!t&&(o.bSelected&&this.tree.persistence.clearSelect(o.data.key),o.bExpanded&&this.tree.persistence.clearExpand(o.data.key)),o.removeChildren(!0,t),this.ul&&this.ul.removeChild(o.li)}this.childList=null}e||(this.isLoading=!1,this.render())},setTitle:function(e){this.fromDict({title:e})},reload:function(){throw"Use reloadChildren() instead"},reloadChildren:function(e){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.reloadChildren() requires lazy nodes.";if(e){var t=this,i="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key;this.tree.$tree.bind(i,function(s,n,a){if(t.tree.$tree.unbind(i),t.tree.logInfo("loaded %o, %o, %o",s,n,a),n!==t)throw"got invalid load event";e.call(t.tree,n,a)})}this.removeChildren(),this._loadContent()},_loadKeyPath:function(e,t){var i=this.tree;if(i.logDebug("%s._loadKeyPath(%s)",this,e),""===e)throw"Key path must not be empty";var s=e.split(i.options.keyPathSeparator);if(""===s[0])throw"Key path must be relative (don't start with '/')";for(var n=s.shift(),a=0,o=this.childList.length;a<o;a++){var r=this.childList[a];if(r.data.key===n){if(0===s.length)t.call(i,r,"ok");else if(!r.data.isLazy||null!==r.childList&&r.childList!==undefined)t.call(i,r,"loaded"),r._loadKeyPath(s.join(i.options.keyPathSeparator),t);else{i.logDebug("%s._loadKeyPath(%s) -> reloading %s...",this,e,r);var l=this;r.reloadChildren(function(n,a){a?(i.logDebug("%s._loadKeyPath(%s) -> reloaded %s.",n,e,n),t.call(i,r,"loaded"),n._loadKeyPath(s.join(i.options.keyPathSeparator),t)):(i.logWarning("%s._loadKeyPath(%s) -> reloadChildren() failed.",l,e),t.call(i,r,"error"))})}return}}i.logWarning("Node not found: "+n)},resetLazy:function(){if(null===this.parent)throw"Use tree.reload() instead";if(!this.data.isLazy)throw"node.resetLazy() requires lazy nodes.";this.expand(!1),this.removeChildren()},_addChildNode:function(e,t){var i=this.tree,s=i.options,n=i.persistence;if(e.parent=this,null===this.childList?this.childList=[]:t||this.childList.length>0&&$(this.childList[this.childList.length-1].span).removeClass(s.classNames.lastsib),t){var a=$.inArray(t,this.childList);if(a<0)throw"<beforeNode> must be a child of <this>";this.childList.splice(a,0,e)}else this.childList.push(e);var o=i.isInitializing();if(s.persist&&n.cookiesFound&&o?(n.activeKey==e.data.key&&(i.activeNode=e),n.focusedKey==e.data.key&&(i.focusNode=e),e.bExpanded=$.inArray(e.data.key,n.expandedKeyList)>=0,e.bSelected=$.inArray(e.data.key,n.selectedKeyList)>=0):(e.data.activate&&(i.activeNode=e,s.persist&&(n.activeKey=e.data.key)),e.data.focus&&(i.focusNode=e,s.persist&&(n.focusedKey=e.data.key)),e.bExpanded=!0===e.data.expand,e.bExpanded&&s.persist&&n.addExpand(e.data.key),e.bSelected=!0===e.data.select,e.bSelected&&s.persist&&n.addSelect(e.data.key)),s.minExpandLevel>=e.getLevel()&&(this.bExpanded=!0),e.bSelected&&3==s.selectMode)for(var r=this;r;)r.hasSubSel||r._setSubSel(!0),r=r.parent;return i.bEnableUpdate&&this.render(),e},addChild:function(e,t){if("string"==typeof e)throw"Invalid data type for "+e;if(e&&0!==e.length){if(e instanceof DynaTreeNode)return this._addChildNode(e,t);e.length||(e=[e]);for(var i=this.tree.enableUpdate(!1),s=null,n=0,a=e.length;n<a;n++){var o=e[n],r=this._addChildNode(new DynaTreeNode(this,this.tree,o),t);s||(s=r),o.children&&r.addChild(o.children,null)}return this.tree.enableUpdate(i),s}},append:function(e){return this.tree.logWarning("node.append() is deprecated (use node.addChild() instead)."),this.addChild(e,null)},appendAjax:function(e){var t=this;if(this.removeChildren(!1,!0),this.setLazyNodeStatus(DTNodeStatus_Loading),e.debugLazyDelay){var i=e.debugLazyDelay;return e.debugLazyDelay=0,this.tree.logInfo("appendAjax: waiting for debugLazyDelay "+i),void setTimeout(function(){t.appendAjax(e)},i)}var s=e.success,n=e.error,a="nodeLoaded.dynatree."+this.tree.$tree.attr("id")+"."+this.data.key,o=$.extend({},this.tree.options.ajaxDefaults,e,{success:function(e){var i=t.tree.phase;t.tree.phase="init",o.postProcess&&(e=o.postProcess.call(this,e,this.dataType)),$.isArray(e)&&0===e.length||t.addChild(e,null),t.tree.phase="postInit",s&&s.call(o,t),t.tree.logInfo("trigger "+a),t.tree.$tree.trigger(a,[t,!0]),t.tree.phase=i,t.setLazyNodeStatus(DTNodeStatus_Ok),$.isArray(e)&&0===e.length&&(t.childList=[],t.render())},error:function(e,i,s){t.tree.logWarning("appendAjax failed:",i,":\n",e,"\n",s),n&&n.call(o,t,e,i,s),t.tree.$tree.trigger(a,[t,!1]),t.setLazyNodeStatus(DTNodeStatus_Error,{info:i,tooltip:""+s})}});$.ajax(o)},move:function(e,t){var i;if(this!==e){if(!this.parent)throw"Cannot move system root";t!==undefined&&"over"!=t||(t="child");var s=this.parent,n="child"===t?e:e.parent;if(n.isDescendantOf(this))throw"Cannot move a node to it's own descendant";if(1==this.parent.childList.length)this.parent.childList=null,this.parent.bExpanded=!1;else{if((i=$.inArray(this,this.parent.childList))<0)throw"Internal error";this.parent.childList.splice(i,1)}if(this.parent.ul.removeChild(this.li),this.parent=n,n.hasChildren())switch(t){case"child":n.childList.push(this);break;case"before":if((i=$.inArray(e,n.childList))<0)throw"Internal error";n.childList.splice(i,0,this);break;case"after":if((i=$.inArray(e,n.childList))<0)throw"Internal error";n.childList.splice(i+1,0,this);break;default:throw"Invalid mode "+t}else n.childList=[this],n.ul||(n.ul=document.createElement("ul"),n.ul.style.display="none",n.li.appendChild(n.ul));if(n.ul.appendChild(this.li),this.tree!==e.tree)throw this.visit(function(t){t.tree=e.tree},null,!0),"Not yet implemented.";s.isDescendantOf(n)||s.render(),n.isDescendantOf(s)||n.render()}},lastentry:undefined};var DynaTreeStatus=Class.create();DynaTreeStatus._getTreePersistData=function(e,t){var i=new DynaTreeStatus(e,t);return i.read(),i.toDict()},getDynaTreePersistData=DynaTreeStatus._getTreePersistData,DynaTreeStatus.prototype={initialize:function(e,t){e===undefined&&(e=$.ui.dynatree.prototype.options.cookieId),t=$.extend({},$.ui.dynatree.prototype.options.cookie,t),this.cookieId=e,this.cookieOpts=t,this.cookiesFound=undefined,this.activeKey=null,this.focusedKey=null,this.expandedKeyList=null,this.selectedKeyList=null},_log:function(){Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments)},read:function(){this._log("DynaTreeStatus: read"),this.cookiesFound=!1;var e=$.cookie(this.cookieId+"-active");this.activeKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-focus"),this.focusedKey=null===e?"":e,null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-expand"),this.expandedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0),e=$.cookie(this.cookieId+"-select"),this.selectedKeyList=null===e?[]:e.split(","),null!==e&&(this.cookiesFound=!0)},write:function(){this._log("DynaTreeStatus: write"),$.cookie(this.cookieId+"-active",null===this.activeKey?"":this.activeKey,this.cookieOpts),$.cookie(this.cookieId+"-focus",null===this.focusedKey?"":this.focusedKey,this.cookieOpts),$.cookie(this.cookieId+"-expand",null===this.expandedKeyList?"":this.expandedKeyList.join(","),this.cookieOpts),$.cookie(this.cookieId+"-select",null===this.selectedKeyList?"":this.selectedKeyList.join(","),this.cookieOpts)},addExpand:function(e){this._log("addExpand(%o)",e),$.inArray(e,this.expandedKeyList)<0&&(this.expandedKeyList.push(e),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},clearExpand:function(e){this._log("clearExpand(%o)",e);var t=$.inArray(e,this.expandedKeyList);t>=0&&(this.expandedKeyList.splice(t,1),$.cookie(this.cookieId+"-expand",this.expandedKeyList.join(","),this.cookieOpts))},addSelect:function(e){this._log("addSelect(%o)",e),$.inArray(e,this.selectedKeyList)<0&&(this.selectedKeyList.push(e),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},clearSelect:function(e){this._log("clearSelect(%o)",e);var t=$.inArray(e,this.selectedKeyList);t>=0&&(this.selectedKeyList.splice(t,1),$.cookie(this.cookieId+"-select",this.selectedKeyList.join(","),this.cookieOpts))},isReloading:function(){return!0===this.cookiesFound},toDict:function(){return{cookiesFound:this.cookiesFound,activeKey:this.activeKey,focusedKey:this.activeKey,expandedKeyList:this.expandedKeyList,selectedKeyList:this.selectedKeyList}},lastentry:undefined};var DynaTree=Class.create();DynaTree.version="$Version: 1.1.1$",DynaTree.prototype={initialize:function(e){this.phase="init",this.$widget=e,this.options=e.options,this.$tree=e.element,this.timer=null,this.divTree=this.$tree.get(0),_initDragAndDrop(this)},_load:function(e){var t=(this.$widget,this.options);this.bEnableUpdate=!0,this._nodeCount=1,this.activeNode=null,this.focusNode=null,t.rootVisible!==undefined&&_log("warn","Option 'rootVisible' is no longer supported."),t.minExpandLevel<1&&(_log("warn","Option 'minExpandLevel' must be >= 1."),t.minExpandLevel=1),t.classNames!==$.ui.dynatree.prototype.options.classNames&&(t.classNames=$.extend({},$.ui.dynatree.prototype.options.classNames,t.classNames)),t.ajaxDefaults!==$.ui.dynatree.prototype.options.ajaxDefaults&&(t.ajaxDefaults=$.extend({},$.ui.dynatree.prototype.options.ajaxDefaults,t.ajaxDefaults)),t.dnd!==$.ui.dynatree.prototype.options.dnd&&(t.dnd=$.extend({},$.ui.dynatree.prototype.options.dnd,t.dnd)),t.imagePath||$("script").each(function(){var e=/.*dynatree[^\/]*\.js$/i;if(this.src.search(e)>=0)return this.src.indexOf("/")>=0?t.imagePath=this.src.slice(0,this.src.lastIndexOf("/"))+"/skin/":t.imagePath="skin/",logMsg("Guessing imagePath from '%s': '%s'",this.src,t.imagePath),!1}),this.persistence=new DynaTreeStatus(t.cookieId,t.cookie),t.persist&&($.cookie||_log("warn","Please include jquery.cookie.js to use persistence."),this.persistence.read()),this.logDebug("DynaTree.persistence: %o",this.persistence.toDict()),this.cache={tagEmpty:"<span class='"+t.classNames.empty+"'></span>",tagVline:"<span class='"+t.classNames.vline+"'></span>",tagExpander:"<span class='"+t.classNames.expander+"'></span>",tagConnector:"<span class='"+t.classNames.connector+"'></span>",tagNodeIcon:"<span class='"+t.classNames.nodeIcon+"'></span>",tagCheckbox:"<span class='"+t.classNames.checkbox+"'></span>",lastentry:undefined},(t.children||t.initAjax&&t.initAjax.url||t.initId)&&$(this.divTree).empty();var i=this.$tree.find(">ul:first").hide();this.tnRoot=new DynaTreeNode(null,this,{}),this.tnRoot.bExpanded=!0,this.tnRoot.render(),this.divTree.appendChild(this.tnRoot.ul);var s=this.tnRoot,n=t.persist&&this.persistence.isReloading(),a=!1,o=this.enableUpdate(!1);this.logDebug("Dynatree._load(): read tree structure..."),t.children?s.addChild(t.children):t.initAjax&&t.initAjax.url?(a=!0,s.data.isLazy=!0,this._reloadAjax(e)):t.initId?this._createFromTag(s,$("#"+t.initId)):(this._createFromTag(s,i),i.remove()),this._checkConsistency(),this.logDebug("Dynatree._load(): render nodes..."),this.enableUpdate(o),this.logDebug("Dynatree._load(): bind events..."),this.$widget.bind(),this.logDebug("Dynatree._load(): postInit..."),this.phase="postInit",t.persist&&this.persistence.write(),this.focusNode&&this.focusNode.isVisible()&&(this.logDebug("Focus on init: %o",this.focusNode),this.focusNode.focus()),!a&&t.onPostInit&&t.onPostInit.call(this,n,!1),this.phase="idle"},_reloadAjax:function(e){var t=this.options;if(!t.initAjax||!t.initAjax.url)throw"tree.reload() requires 'initAjax' mode.";var i=this.persistence,s=$.extend({},t.initAjax);if(s.addActiveKey&&(s.data.activeKey=i.activeKey),s.addFocusedKey&&(s.data.focusedKey=i.focusedKey),s.addExpandedKeyList&&(s.data.expandedKeyList=i.expandedKeyList.join(",")),s.addSelectedKeyList&&(s.data.selectedKeyList=i.selectedKeyList.join(",")),t.onPostInit){s.success&&this.logWarning("initAjax: success callback is ignored when onPostInit was specified."),s.error&&this.logWarning("initAjax: error callback is ignored when onPostInit was specified.");var n=i.isReloading();s.success=function(i){t.onPostInit.call(i.tree,n,!1),e&&e.call(i.tree,"ok")},s.error=function(i){t.onPostInit.call(i.tree,n,!0),e&&e.call(i.tree,"error")}}this.logDebug("Dynatree._init(): send Ajax request..."),this.tnRoot.appendAjax(s)},toString:function(){return"Dynatree '"+this.$tree.attr("id")+"'"},toDict:function(){return this.tnRoot.toDict(!0)},serializeArray:function(e){for(var t=this.getSelectedNodes(e),i=this.$tree.attr("name")||this.$tree.attr("id"),s=[],n=0,a=t.length;n<a;n++)s.push({name:i,value:t[n].data.key});return s},getPersistData:function(){return this.persistence.toDict()},logDebug:function(){this.options.debugLevel>=2&&(Array.prototype.unshift.apply(arguments,["debug"]),_log.apply(this,arguments))},logInfo:function(){this.options.debugLevel>=1&&(Array.prototype.unshift.apply(arguments,["info"]),_log.apply(this,arguments))},logWarning:function(){Array.prototype.unshift.apply(arguments,["warn"]),_log.apply(this,arguments)},isInitializing:function(){return"init"==this.phase||"postInit"==this.phase},isReloading:function(){return("init"==this.phase||"postInit"==this.phase)&&this.options.persist&&this.persistence.cookiesFound},isUserEvent:function(){return"userEvent"==this.phase},redraw:function(){this.tnRoot.render(!1,!1)},renderInvisibleNodes:function(){this.tnRoot.render(!1,!0)},reload:function(e){this._load(e)},getRoot:function(){return this.tnRoot},enable:function(){this.$widget.enable()},disable:function(){this.$widget.disable()},getNodeByKey:function(e){var t=document.getElementById(this.options.idPrefix+e);if(t)return t.dtnode?t.dtnode:null;var i=null;return this.visit(function(t){if(t.data.key==e)return i=t,!1},!0),i},getActiveNode:function(){return this.activeNode},reactivate:function(e){var t=this.activeNode;t&&(this.activeNode=null,t.activate(),e&&t.focus())},getSelectedNodes:function(e){var t=[];return this.tnRoot.visit(function(i){if(i.bSelected&&(t.push(i),!0===e))return"skip"}),t},activateKey:function(e){var t=null===e?null:this.getNodeByKey(e);return t?(t.focus(),t.activate(),t):(this.activeNode&&this.activeNode.deactivate(),this.activeNode=null,null)},loadKeyPath:function(e,t){var i=e.split(this.options.keyPathSeparator);return""===i[0]&&i.shift(),i[0]==this.tnRoot.data.key&&(this.logDebug("Removed leading root key."),i.shift()),e=i.join(this.options.keyPathSeparator),this.tnRoot._loadKeyPath(e,t)},selectKey:function(e,t){var i=this.getNodeByKey(e);return i?(i.select(t),i):null},enableUpdate:function(e){return this.bEnableUpdate==e?e:(this.bEnableUpdate=e,e&&this.redraw(),!e)},count:function(){return this.tnRoot.countChildren()},visit:function(e,t){return this.tnRoot.visit(e,t)},_createFromTag:function(parentTreeNode,$ulParent){var self=this;$ulParent.find(">li").each(function(){var $li=$(this),$liSpan=$li.find(">span:first"),title;if($liSpan.length)title=$liSpan.html();else{title=$li.html();var iPos=title.search(/<ul/i);title=iPos>=0?$.trim(title.substring(0,iPos)):$.trim(title)}var data={title:title,isFolder:$li.hasClass("folder"),isLazy:$li.hasClass("lazy"),expand:$li.hasClass("expanded"),select:$li.hasClass("selected"),activate:$li.hasClass("active"),focus:$li.hasClass("focused"),noLink:$li.hasClass("noLink")};if($li.attr("title")&&(data.tooltip=$li.attr("title")),$li.attr("id")&&(data.key=$li.attr("id")),$li.attr("data")){var dataAttr=$.trim($li.attr("data"));if(dataAttr){"{"!=dataAttr.charAt(0)&&(dataAttr="{"+dataAttr+"}");try{$.extend(data,eval("("+dataAttr+")"))}catch(e){
throw"Error parsing node data: "+e+"\ndata:\n'"+dataAttr+"'"}}}var childNode=parentTreeNode.addChild(data),$ul=$li.find(">ul:first");$ul.length&&self._createFromTag(childNode,$ul)})},_checkConsistency:function(){},_setDndStatus:function(e,t,i,s,n){var a=e?$(e.span):null,o=$(t.span);if(this.$dndMarker||(this.$dndMarker=$("<div id='dynatree-drop-marker'></div>").hide().prependTo($(this.divTree).parent())),"after"===s||"before"===s||"over"===s){var r=o.position();switch(s){case"before":this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-before"),r.top-=8;break;case"after":this.$dndMarker.removeClass("dynatree-drop-before dynatree-drop-over"),this.$dndMarker.addClass("dynatree-drop-after"),r.top+=8;break;default:this.$dndMarker.removeClass("dynatree-drop-after dynatree-drop-before"),this.$dndMarker.addClass("dynatree-drop-over"),o.addClass("dynatree-drop-target"),r.left+=8}this.$dndMarker.css({left:r.left+"px",top:r.top+"px"}).show()}else o.removeClass("dynatree-drop-target"),this.$dndMarker.hide();"after"===s?o.addClass("dynatree-drop-after"):o.removeClass("dynatree-drop-after"),"before"===s?o.addClass("dynatree-drop-before"):o.removeClass("dynatree-drop-before"),!0===n?(a&&a.addClass("dynatree-drop-accept"),o.addClass("dynatree-drop-accept"),i.addClass("dynatree-drop-accept")):(a&&a.removeClass("dynatree-drop-accept"),o.removeClass("dynatree-drop-accept"),i.removeClass("dynatree-drop-accept")),!1===n?(a&&a.addClass("dynatree-drop-reject"),o.addClass("dynatree-drop-reject"),i.addClass("dynatree-drop-reject")):(a&&a.removeClass("dynatree-drop-reject"),o.removeClass("dynatree-drop-reject"),i.removeClass("dynatree-drop-reject"))},_onDragEvent:function(e,t,i,s,n,a){var o,r=(this.options,this.options.dnd),l=null,c=$(t.span);switch(e){case"helper":var h=$("<div class='dynatree-drag-helper'><span class='dynatree-drag-helper-img' /></div>").append($(s.target).closest("a").clone());h.data("dtSourceNode",t),l=h;break;case"start":t.isStatusNode()?l=!1:r.onDragStart&&(l=r.onDragStart(t)),!1===l?(this.logDebug("tree.onDragStart() cancelled"),n.helper.trigger("mouseup"),n.helper.hide()):c.addClass("dynatree-drag-source");break;case"enter":l=r.onDragEnter?r.onDragEnter(t,i):null,l={over:!1!==l&&(!0===l||"over"===l||$.inArray("over",l)>=0),before:!1!==l&&(!0===l||"before"===l||$.inArray("before",l)>=0),after:!1!==l&&(!0===l||"after"===l||$.inArray("after",l)>=0)},n.helper.data("enterResponse",l);break;case"over":var d=n.helper.data("enterResponse");if(o=null,!1===d)break;if("string"==typeof d)o=d;else{var u=c.offset(),p={x:s.pageX-u.left,y:s.pageY-u.top},f={x:p.x/c.width(),y:p.y/c.height()};d.after&&f.y>.75?o="after":!d.over&&d.after&&f.y>.5?o="after":d.before&&f.y<=.25?o="before":!d.over&&d.before&&f.y<=.5?o="before":d.over&&(o="over"),r.preventVoidMoves&&(t===i?o=null:"before"===o&&i&&t===i.getNextSibling()?o=null:"after"===o&&i&&t===i.getPrevSibling()?o=null:"over"===o&&i&&i.parent===t&&i.isLastSibling()&&(o=null)),n.helper.data("hitMode",o)}"over"===o&&r.autoExpandMS&&!1!==t.hasChildren()&&!t.bExpanded&&t.scheduleAction("expand",r.autoExpandMS),o&&r.onDragOver&&(l=r.onDragOver(t,i,o)),this._setDndStatus(i,t,n.helper,o,!1!==l);break;case"drop":o=n.helper.data("hitMode"),o&&r.onDrop&&r.onDrop(t,i,o,n,a);break;case"leave":t.scheduleAction("cancel"),n.helper.data("enterResponse",null),n.helper.data("hitMode",null),this._setDndStatus(i,t,n.helper,"out",undefined),r.onDragLeave&&r.onDragLeave(t,i);break;case"stop":c.removeClass("dynatree-drag-source"),r.onDragStop&&r.onDragStop(t);break;default:throw"Unsupported drag event: "+e}return l},cancelDrag:function(){var e=$.ui.ddmanager.current;e&&e.cancel()},lastentry:undefined},$.widget("ui.dynatree",{_init:function(){if(parseFloat($.ui.version)<1.8)return _log("warn","ui.dynatree._init() was called; you should upgrade to jquery.ui.core.js v1.8 or higher."),this._create()},_create:function(){this.options;this.options.event+=".dynatree";this.element.get(0);this.tree=new DynaTree(this),this.tree._load(),this.tree.logDebug("Dynatree._init(): done.")},bind:function(){function e(e){e=$.event.fix(e||window.event);var t=getDtNodeFromElement(e.target);return!!t&&t._onFocus(e)}this.unbind();var t="click.dynatree dblclick.dynatree";this.options.keyboard&&(t+=" keypress.dynatree keydown.dynatree"),this.element.bind(t,function(e){var t=getDtNodeFromElement(e.target);if(!t)return!0;var i=t.tree,s=i.options;i.logDebug("event(%s): dtnode: %s",e.type,t);var n=i.phase;i.phase="userEvent";try{switch(e.type){case"click":return(!s.onClick||!1!==s.onClick.call(i,t,e))&&t._onClick(e);case"dblclick":return(!s.onDblClick||!1!==s.onDblClick.call(i,t,e))&&t._onDblClick(e);case"keydown":return(!s.onKeydown||!1!==s.onKeydown.call(i,t,e))&&t._onKeydown(e);case"keypress":return(!s.onKeypress||!1!==s.onKeypress.call(i,t,e))&&t._onKeypress(e)}}catch(s){i.logWarning("bind(%o): dtnode: %o, error: %o",e,t,s)}finally{i.phase=n}});var i=this.tree.divTree;i.addEventListener?(i.addEventListener("focus",e,!0),i.addEventListener("blur",e,!0)):i.onfocusin=i.onfocusout=e},unbind:function(){this.element.unbind(".dynatree")},enable:function(){this.bind(),$.Widget.prototype.enable.apply(this,arguments)},disable:function(){this.unbind(),$.Widget.prototype.disable.apply(this,arguments)},getTree:function(){return this.tree},getRoot:function(){return this.tree.getRoot()},getActiveNode:function(){return this.tree.getActiveNode()},getSelectedNodes:function(){return this.tree.getSelectedNodes()},lastentry:undefined}),parseFloat($.ui.version)<1.8&&($.ui.dynatree.getter="getTree getRoot getActiveNode getSelectedNodes"),$.ui.dynatree.prototype.options={title:"Dynatree",minExpandLevel:1,imagePath:null,children:null,initId:null,initAjax:null,autoFocus:!0,keyboard:!0,persist:!1,autoCollapse:!1,clickFolderMode:3,activeVisible:!0,checkbox:!1,selectMode:2,fx:null,noLink:!1,onClick:null,onDblClick:null,onKeydown:null,onKeypress:null,onFocus:null,onBlur:null,onQueryActivate:null,onQuerySelect:null,onQueryExpand:null,onPostInit:null,onActivate:null,onDeactivate:null,onSelect:null,onExpand:null,onLazyRead:null,onCustomRender:null,onRender:null,dnd:{onDragStart:null,onDragStop:null,autoExpandMS:1e3,preventVoidMoves:!0,onDragEnter:null,onDragOver:null,onDrop:null,onDragLeave:null},ajaxDefaults:{cache:!1,dataType:"json"},strings:{loading:"Loading&#8230;",loadError:"Load error!"},generateIds:!1,idPrefix:"dynatree-id-",keyPathSeparator:"/",cookieId:"dynatree",cookie:{expires:null},classNames:{container:"dynatree-container",node:"dynatree-node",folder:"dynatree-folder",empty:"dynatree-empty",vline:"dynatree-vline",expander:"dynatree-expander",connector:"dynatree-connector",checkbox:"dynatree-checkbox",nodeIcon:"dynatree-icon",title:"dynatree-title",noConnector:"dynatree-no-connector",nodeError:"dynatree-statusnode-error",nodeWait:"dynatree-statusnode-wait",hidden:"dynatree-hidden",combinedExpanderPrefix:"dynatree-exp-",combinedIconPrefix:"dynatree-ico-",nodeLoading:"dynatree-loading",hasChildren:"dynatree-has-children",active:"dynatree-active",selected:"dynatree-selected",expanded:"dynatree-expanded",lazy:"dynatree-lazy",focused:"dynatree-focused",partsel:"dynatree-partsel",lastsib:"dynatree-lastsib"},debugLevel:1,lastentry:undefined},parseFloat($.ui.version)<1.8&&($.ui.dynatree.defaults=$.ui.dynatree.prototype.options),$.ui.dynatree.nodedatadefaults={title:null,key:null,isFolder:!1,isLazy:!1,tooltip:null,icon:null,addClass:null,noLink:!1,activate:!1,focus:!1,expand:!1,select:!1,hideCheckbox:!1,unselectable:!1,children:null,lastentry:undefined};var didRegisterDnd=!1,_registerDnd=function(){didRegisterDnd||($.ui.plugin.add("draggable","connectToDynatree",{start:function(e,t){var i=$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null;if(s)return i.offset.click.top=-2,i.offset.click.left=16,s.tree._onDragEvent("start",s,null,e,t,i)},drag:function(e,t){var i=$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null,n=t.helper.data("dtTargetNode")||null,a=getDtNodeFromElement(e.target);if(e.target&&!a){if($(e.target).closest("div.dynatree-drag-helper,#dynatree-drop-marker").length>0)return}t.helper.data("dtTargetNode",a),n&&n!==a&&n.tree._onDragEvent("leave",n,s,e,t,i),a&&(a.tree.options.dnd.onDrop?a===n?a.tree._onDragEvent("over",a,s,e,t,i):a.tree._onDragEvent("enter",a,s,e,t,i):noop())},stop:function(e,t){var i=$(this).data("draggable"),s=t.helper.data("dtSourceNode")||null,n=t.helper.data("dtTargetNode")||null,a=(i._mouseDownEvent,e.type),o="mouseup"==a&&1==e.which;o||logMsg("Drag was cancelled"),n&&(o&&n.tree._onDragEvent("drop",n,s,e,t,i),n.tree._onDragEvent("leave",n,s,e,t,i)),s&&s.tree._onDragEvent("stop",s,null,e,t,i)}}),didRegisterDnd=!0)}}(jQuery),function(e){function t(t,i){return parseInt(e.css(t[0],i))||0}function i(e){return e[0].offsetWidth+t(e,"marginLeft")+t(e,"marginRight")}function s(e){return e[0].offsetHeight+t(e,"marginTop")+t(e,"marginBottom")}e.fn.jCarouselLite=function(t){return t=e.extend({btnPrev:null,btnNext:null,btnGo:null,mouseWheel:!1,auto:null,speed:200,easing:null,vertical:!1,circular:!0,visible:3,start:0,scroll:1,beforeStart:null,afterEnd:null},t||{}),this.each(function(){function n(){return f.slice(g).slice(0,p)}function a(i){if(!o){if(t.beforeStart&&t.beforeStart.call(this,n()),t.circular)i<=t.start-p-1?(h.css(r,-(m-2*p)*v+"px"),g=i==t.start-p-1?m-2*p-1:m-2*p-t.scroll):i>=m-p+1?(h.css(r,-p*v+"px"),g=i==m-p+1?p+1:p+t.scroll):g=i;else{if(i<0||i>m-p)return;g=i}o=!0,h.animate("left"==r?{left:-g*v}:{top:-g*v},t.speed,t.easing,function(){t.afterEnd&&t.afterEnd.call(this,n()),o=!1}),t.circular||(e(t.btnPrev+","+t.btnNext).removeClass("disabled"),e(g-t.scroll<0&&t.btnPrev||g+t.scroll>m-p&&t.btnNext||[]).addClass("disabled"))}return!1}var o=!1,r=t.vertical?"top":"left",l=t.vertical?"height":"width",c=e(this),h=e("ul",c),d=e("li",h),u=d.size(),p=t.visible;t.circular&&(h.prepend(d.slice(u-p-1+1).clone()).append(d.slice(0,p).clone()),t.start+=p);var f=e("li",h),m=f.size(),g=t.start;c.css("visibility","visible"),f.css({overflow:"hidden","float":t.vertical?"none":"left"}),h.css({margin:"0",padding:"0",position:"relative","list-style-type":"none","z-index":"1"}),c.css({overflow:"hidden",position:"relative","z-index":"2",left:"0px"});var v=t.vertical?s(f):i(f),_=v*m,b=v*p;f.css({width:f.width(),height:f.height()}),h.css(l,_+"px").css(r,-g*v),c.css(l,b+"px"),t.btnPrev&&e(t.btnPrev).click(function(){return a(g-t.scroll)}),t.btnNext&&e(t.btnNext).click(function(){return a(g+t.scroll)}),t.btnGo&&e.each(t.btnGo,function(i,s){e(s).click(function(){return a(t.circular?t.visible+i:i)})}),t.mouseWheel&&c.mousewheel&&c.mousewheel(function(e,i){return a(i>0?g-t.scroll:g+t.scroll)}),t.auto&&setInterval(function(){a(g+t.scroll)},t.auto+t.speed)})}}(jQuery),function(e){e.fn.fillingBar=function(t){var i=e.extend({fields:{},maxFields:2},t);i.fields.sort(function(e,t){return e.rate>t.rate?-1:e.rate<t.rate?1:0}),this.data("FillingBar",!0),this.data("FillingBarFields",i.fields),this.data("FillingBarMaxFields",i.maxFields);var s=e(document);s.data("FillingBarCounter")?s.data("FillingBarCounter",s.data("FillingBarCounter")+1):s.data("FillingBarCounter",1),s.data("FillingBar_"+s.data("FillingBarCounter"),this),this.empty();var n=e('<div class="prm-header">\u0412\u044b\u0448\u0435 \u0437\u0430\u0440\u044f\u0434 -<br>\u0432\u044b\u0448\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u044f</div>'),a=e('<div class="prm-value js-prm-value">0%</div>'),o=e('<div class="battery-level"></div>'),r=e('<div class="battery"></div>'),l=e('<span class="js-prm-help-link blue-dashed-span">\u0412\u0441\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b</span>'),c=e('<div class = "prm-success dn">\u0412\u044b \u043c\u043e\u043b\u043e\u0434\u0435\u0446!</div>'),h=e('<span class="prm-arrow js-prm-arrow"></span>');this.data("FillingBarValue","prm-value"),this.data("FillingBarLevel",o),this.data("FillingBarLevelWidth",0);var d=e('<ul class="prm-tips"></ul>');this.data("FillingBarList",d);for(var u=0;u<i.fields.length;u++){i.fields[u].level=0;var p=e('<li id="'+i.fields[u].name+'" class="prmt-item"><b class="prmt-percent">+'+i.fields[u].rate*i.fields[u].num+"%</b> "+i.fields[u].text+"</li>");p.data("settings",i.fields[u]).hide(),this.data("field_"+i.fields[u].name,p),d.append(p)}return this.append(n).append(a).append(r).append(d).append(c).append(l).append(h),e(r).append(o),this},e.fn.fillingBarSetUl=function(){this.data("FillingBarList");if(this.data("FillingBar")){for(var t=this.data("FillingBarFields"),i=0,s=this.data("FillingBarMaxFields"),n=0;n<t.length;n++){var a=this.data("field_"+t[n].name),o=a.data("settings");i<s&&o.num>o.level?(a.show(),i++):a.hide()}e(".prm-success:hidden").length&&!e(".prmt-item:visible").length?e(".prm-success").show():e(".prm-success:visible").length&&e(".prmt-item:visible").length&&e(".prm-success").hide()}return this},e.fn.fillingBarSet=function(t,i){if(this.data("FillingBar")&&this.data("field_"+t)){var s=this.data("FillingBarValue"),n=this.data("FillingBarLevel"),a=this.data("FillingBarLevelWidth"),o=this.data("field_"+t),r=o.find("b"),l=o.data("settings");if(i<=l.num&&i>=0){var c=i-l.level;l.level=i,a+=c*l.rate,this.data("FillingBarLevelWidth",a),o.data("settings",l)}this.data("FillingBarLevelWidth",a),n.css({width:a+"%"}).empty(),e("."+s).text(a+"%"),r.empty().html("+"+(l.num-l.level)*l.rate+"%")}return this.fillingBarSetUl()},e.fn.fillingBarAdd=function(e){var t=this.data("field_"+e).data("settings");return t.num&&this.fillingBarSet(e,t.num),this},e.fn.fillingBarRemove=function(e){return this.fillingBarSet(e,0)}}(jQuery),function(e){function t(t,i,s){var n=this;n.id=s,n.options=i,n.status={animated:!1,rendered:!1,disabled:!1,focused:!1},n.elements={target:t.addClass(n.options.style.classes.target),tooltip:null,wrapper:null,content:null,contentWrapper:null,title:null,button:null,tip:null,bgiframe:null},n.cache={mouse:{},position:{},toggle:0},n.timers={},e.extend(n,n.options.api,{show:function(t){function i(){"static"!==n.options.position.type&&n.focus(),n.onShow.call(n,t),e.browser.msie&&n.elements.tooltip.get(0).style.removeAttribute("filter")}var s;if(!n.status.rendered)return e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"show");if("none"!==n.elements.tooltip.css("display"))return n;if(n.elements.tooltip.stop(!0,!1),!1===n.beforeShow.call(n,t))return n;if(n.cache.toggle=1,"static"!==n.options.position.type&&n.updatePosition(t,n.options.show.effect.length>0),"object"==typeof n.options.show.solo?s=e(n.options.show.solo):!0===n.options.show.solo&&(s=e("div.qtip").not(n.elements.tooltip)),s&&s.each(function(){!0===e(this).qtip("api").status.rendered&&e(this).qtip("api").hide()}),"function"==typeof n.options.show.effect.type)n.options.show.effect.type.call(n.elements.tooltip,n.options.show.effect.length),n.elements.tooltip.queue(function(){i(),e(this).dequeue()});else{switch(n.options.show.effect.type.toLowerCase()){case"fade":n.elements.tooltip.fadeIn(n.options.show.effect.length,i);break;case"slide":n.elements.tooltip.slideDown(n.options.show.effect.length,function(){i(),"static"!==n.options.position.type&&n.updatePosition(t,!0)});break;case"grow":n.elements.tooltip.show(n.options.show.effect.length,i);break;default:n.elements.tooltip.show(null,i)}n.elements.tooltip.addClass(n.options.style.classes.active)}return e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_SHOWN,"show")},hide:function(t){function i(){n.onHide.call(n,t)}if(!n.status.rendered)return e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"hide");if("none"===n.elements.tooltip.css("display"))return n;if(clearTimeout(n.timers.show),n.elements.tooltip.stop(!0,!1),!1===n.beforeHide.call(n,t))return n;if(n.cache.toggle=0,"function"==typeof n.options.hide.effect.type)n.options.hide.effect.type.call(n.elements.tooltip,n.options.hide.effect.length),n.elements.tooltip.queue(function(){i(),e(this).dequeue()});else{switch(n.options.hide.effect.type.toLowerCase()){case"fade":n.elements.tooltip.fadeOut(n.options.hide.effect.length,i);break;case"slide":n.elements.tooltip.slideUp(n.options.hide.effect.length,i);break;case"grow":n.elements.tooltip.hide(n.options.hide.effect.length,i);break;default:n.elements.tooltip.hide(null,i)}n.elements.tooltip.removeClass(n.options.style.classes.active)}return e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_HIDDEN,"hide")},updatePosition:function(t,i){var s,a,o,r,l,c,h,u,p,f,m;if(!n.status.rendered)return e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updatePosition");if("static"==n.options.position.type)return e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.CANNOT_POSITION_STATIC,"updatePosition");if(a={position:{left:0,top:0},dimensions:{height:0,width:0},corner:n.options.position.corner.target},o={position:n.getPosition(),dimensions:n.getDimensions(),corner:n.options.position.corner.tooltip},"mouse"!==n.options.position.target){if("area"==n.options.position.target.get(0).nodeName.toLowerCase()){for(r=n.options.position.target.attr("coords").split(","),s=0;s<r.length;s++)r[s]=parseInt(r[s]);switch(l=n.options.position.target.parent("map").attr("name"),c=e('img[usemap="#'+l+'"]:first').offset(),a.position={left:Math.floor(c.left+r[0]),top:Math.floor(c.top+r[1])},n.options.position.target.attr("shape").toLowerCase()){case"rect":a.dimensions={width:Math.ceil(Math.abs(r[2]-r[0])),height:Math.ceil(Math.abs(r[3]-r[1]))};break;case"circle":a.dimensions={width:r[2]+1,height:r[2]+1};break;case"poly":for(a.dimensions={width:r[0],height:r[1]},s=0;s<r.length;s++)s%2==0?(r[s]>a.dimensions.width&&(a.dimensions.width=r[s]),r[s]<r[0]&&(a.position.left=Math.floor(c.left+r[s]))):(r[s]>a.dimensions.height&&(a.dimensions.height=r[s]),r[s]<r[1]&&(a.position.top=Math.floor(c.top+r[s])));a.dimensions.width=a.dimensions.width-(a.position.left-c.left),a.dimensions.height=a.dimensions.height-(a.position.top-c.top);break;default:return e.fn.qtip.log.error.call(n,4,e.fn.qtip.constants.INVALID_AREA_SHAPE,"updatePosition")}a.dimensions.width-=2,a.dimensions.height-=2}else 1===n.options.position.target.add(document.body).length?(a.position={left:e(document).scrollLeft(),top:e(document).scrollTop()},a.dimensions={height:e(window).height(),width:e(window).width()}):(void 0!==n.options.position.target.attr("qtip")?a.position=n.options.position.target.qtip("api").cache.position:a.position=n.options.position.target.offset(),a.dimensions={height:n.options.position.target.outerHeight(),width:n.options.position.target.outerWidth()});h=e.extend({},a.position),-1!==a.corner.search(/right/i)&&(h.left+=a.dimensions.width),-1!==a.corner.search(/bottom/i)&&(h.top+=a.dimensions.height),-1!==a.corner.search(/((top|bottom)Middle)|center/)&&(h.left+=a.dimensions.width/2),-1!==a.corner.search(/((left|right)Middle)|center/)&&(h.top+=a.dimensions.height/2)}else a.position=h={left:n.cache.mouse.x,top:n.cache.mouse.y},a.dimensions={height:1,width:1};if(-1!==o.corner.search(/right/i)&&(h.left-=o.dimensions.width),-1!==o.corner.search(/bottom/i)&&(h.top-=o.dimensions.height),-1!==o.corner.search(/((top|bottom)Middle)|center/)&&(h.left-=o.dimensions.width/2),-1!==o.corner.search(/((left|right)Middle)|center/)&&(h.top-=o.dimensions.height/2),u=e.browser.msie?1:0,e.browser.msie&&6===parseInt(e.browser.version.charAt(0))?1:0,n.options.style.border.radius>0&&(-1!==o.corner.search(/Left/)?h.left-=n.options.style.border.radius:-1!==o.corner.search(/Right/)&&(h.left+=n.options.style.border.radius),-1!==o.corner.search(/Top/)?h.top-=n.options.style.border.radius:-1!==o.corner.search(/Bottom/)&&(h.top+=n.options.style.border.radius)),u&&(-1!==o.corner.search(/top/)?h.top-=u:-1!==o.corner.search(/bottom/)&&(h.top+=u),-1!==o.corner.search(/left/)?h.left-=u:-1!==o.corner.search(/right/)&&(h.left+=u),-1!==o.corner.search(/leftMiddle|rightMiddle/)&&(h.top-=1)),!0===n.options.position.adjust.screen&&(h=d.call(n,h,a,o)),"mouse"===n.options.position.target&&!0===n.options.position.adjust.mouse&&(p=!0===n.options.position.adjust.screen&&n.elements.tip?n.elements.tip.attr("rel"):n.options.position.corner.tooltip,h.left+=-1!==p.search(/right/i)?-6:6,h.top+=-1!==p.search(/bottom/i)?-6:6),!n.elements.bgiframe&&e.browser.msie&&6==parseInt(e.browser.version.charAt(0))&&e("select, object").each(function(){f=e(this).offset(),f.bottom=f.top+e(this).height(),f.right=f.left+e(this).width(),h.top+o.dimensions.height>=f.top&&h.left+o.dimensions.width>=f.left&&v.call(n)}),h.left+=n.options.position.adjust.x,h.top+=n.options.position.adjust.y,m=n.getPosition(),h.left!=m.left||h.top!=m.top){if(!1===n.beforePositionUpdate.call(n,t))return n;n.cache.position=h,!0===i?(n.status.animated=!0,n.elements.tooltip.animate(h,200,"swing",function(){n.status.animated=!1})):n.elements.tooltip.css(h),n.onPositionUpdate.call(n,t),void 0!==t&&t.type&&"mousemove"!==t.type&&e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_POSITION_UPDATED,"updatePosition")}return n},updateWidth:function(t){var i;return n.status.rendered?t&&"number"!=typeof t?e.fn.qtip.log.error.call(n,2,"newWidth must be of type number","updateWidth"):(i=n.elements.contentWrapper.siblings().add(n.elements.tip).add(n.elements.button),t||("number"==typeof n.options.style.width.value?t=n.options.style.width.value:(n.elements.tooltip.css({width:"auto"}),i.hide(),e.browser.msie&&n.elements.wrapper.add(n.elements.contentWrapper.children()).css({zoom:"normal"}),t=n.getDimensions().width+1,n.options.style.width.value||(t>n.options.style.width.max&&(t=n.options.style.width.max),t<n.options.style.width.min&&(t=n.options.style.width.min)))),t%2!=0&&(t-=1),n.elements.tooltip.width(t),i.show(),n.options.style.border.radius&&n.elements.tooltip.find(".qtip-betweenCorners").each(function(){e(this).width(t-2*n.options.style.border.radius)}),e.browser.msie&&(n.elements.wrapper.add(n.elements.contentWrapper.children()).css({zoom:"1"}),n.elements.wrapper.width(t),n.elements.bgiframe&&n.elements.bgiframe.width(t).height(n.getDimensions.height)),e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_WIDTH_UPDATED,"updateWidth")):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateWidth")},updateStyle:function(t){var i,s,o,l,c;return n.status.rendered?"string"==typeof t&&e.fn.qtip.styles[t]?(n.options.style=f.call(n,e.fn.qtip.styles[t],n.options.user.style),n.elements.content.css(u(n.options.style)),!1!==n.options.content.title.text&&n.elements.title.css(u(n.options.style.title,!0)),n.elements.contentWrapper.css({borderColor:n.options.style.border.color}),!1!==n.options.style.tip.corner&&(e("<canvas>").get(0).getContext?(i=n.elements.tooltip.find(".qtip-tip canvas:first"),o=i.get(0).getContext("2d"),o.clearRect(0,0,300,300),l=i.parent("div[rel]:first").attr("rel"),c=m(l,n.options.style.tip.size.width,n.options.style.tip.size.height),r.call(n,i,c,n.options.style.tip.color||n.options.style.border.color)):e.browser.msie&&(i=n.elements.tooltip.find('.qtip-tip [nodeName="shape"]'),i.attr("fillcolor",n.options.style.tip.color||n.options.style.border.color))),n.options.style.border.radius>0&&(n.elements.tooltip.find(".qtip-betweenCorners").css({backgroundColor:n.options.style.border.color}),e("<canvas>").get(0).getContext?(s=g(n.options.style.border.radius),n.elements.tooltip.find(".qtip-wrapper canvas").each(function(){o=e(this).get(0).getContext("2d"),o.clearRect(0,0,300,300),l=e(this).parent("div[rel]:first").attr("rel"),a.call(n,e(this),s[l],n.options.style.border.radius,n.options.style.border.color)})):e.browser.msie&&n.elements.tooltip.find('.qtip-wrapper [nodeName="arc"]').each(function(){e(this).attr("fillcolor",n.options.style.border.color)})),e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_STYLE_UPDATED,"updateStyle")):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.STYLE_NOT_DEFINED,"updateStyle"):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateStyle")},updateContent:function(t,i){function s(){n.updateWidth(),!1!==i&&("static"!==n.options.position.type&&n.updatePosition(n.elements.tooltip.is(":visible"),!0),!1!==n.options.style.tip.corner&&l.call(n))}var a,o,r;if(!n.status.rendered)return e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateContent");if(!t)return e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateContent");if("string"==typeof(a=n.beforeContentUpdate.call(n,t)))t=a;else if(!1===a)return;return e.browser.msie&&n.elements.contentWrapper.children().css({zoom:"normal"}),t.jquery&&t.length>0?t.clone(!0).appendTo(n.elements.content).show():n.elements.content.html(t),o=n.elements.content.find("img[complete=false]"),o.length>0?(r=0,o.each(function(){e('<img src="'+e(this).attr("src")+'" />').load(function(){++r==o.length&&s()})})):s(),n.onContentUpdate.call(n),e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_CONTENT_UPDATED,"loadContent")},loadContent:function(t,i,s){function a(t){n.onContentLoad.call(n),e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_CONTENT_LOADED,"loadContent"),n.updateContent(t)}return n.status.rendered?!1===n.beforeContentLoad.call(n)?n:("post"==s?e.post(t,i,a):e.get(t,i,a),n):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"loadContent")},updateTitle:function(t){return n.status.rendered?t?(returned=n.beforeTitleUpdate.call(n),!1===returned?n:(n.elements.button&&(n.elements.button=n.elements.button.clone(!0)),n.elements.title.html(t),n.elements.button&&n.elements.title.prepend(n.elements.button),n.onTitleUpdate.call(n),e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_TITLE_UPDATED,"updateTitle"))):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.NO_CONTENT_PROVIDED,"updateTitle"):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"updateTitle")},focus:function(t){var i,s,a;if(!n.status.rendered)return e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"focus");if("static"==n.options.position.type)return e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.CANNOT_FOCUS_STATIC,"focus");if(i=parseInt(n.elements.tooltip.css("z-index")),s=6e3+e("div.qtip[qtip]").length-1,!n.status.focused&&i!==s){if(!1===n.beforeFocus.call(n,t))return n;e("div.qtip[qtip]").not(n.elements.tooltip).each(function(){!0===e(this).qtip("api").status.rendered&&(a=parseInt(e(this).css("z-index")),"number"==typeof a&&a>-1&&e(this).css({zIndex:parseInt(e(this).css("z-index"))-1}),e(this).qtip("api").status.focused=!1)}),n.elements.tooltip.css({zIndex:s}),n.status.focused=!0,n.onFocus.call(n,t),e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_FOCUSED,"focus")}return n},disable:function(t){return n.status.rendered?(t?n.status.disabled?e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.TOOLTIP_ALREADY_DISABLED,"disable"):(n.status.disabled=!0,e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_DISABLED,"disable")):n.status.disabled?(n.status.disabled=!1,e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_ENABLED,"disable")):e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.TOOLTIP_ALREADY_ENABLED,"disable"),n):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"disable")},destroy:function(){var t,i;if(!1===n.beforeDestroy.call(n))return n;if(n.status.rendered?(n.options.show.when.target.unbind("mousemove.qtip",n.updatePosition),n.options.show.when.target.unbind("mouseout.qtip",n.hide),n.options.show.when.target.unbind(n.options.show.when.event+".qtip"),n.options.hide.when.target.unbind(n.options.hide.when.event+".qtip"),n.elements.tooltip.unbind(n.options.hide.when.event+".qtip"),n.elements.tooltip.unbind("mouseover.qtip",n.focus),n.elements.tooltip.remove()):n.options.show.when.target.unbind(n.options.show.when.event+".qtip-create"),"object"==typeof n.elements.target.data("qtip")&&"object"==typeof(i=n.elements.target.data("qtip").interfaces)&&i.length>0)for(t=0;t<i.length-1;t++)i[t].id==n.id&&i.splice(t,1);return delete e.fn.qtip.interfaces[n.id],"object"==typeof i&&i.length>0?n.elements.target.data("qtip").current=i.length-1:n.elements.target.removeData("qtip"),n.onDestroy.call(n),e.fn.qtip.log.error.call(n,1,e.fn.qtip.constants.EVENT_DESTROYED,"destroy"),n.elements.target},getPosition:function(){var t,i;return n.status.rendered?(t="none"===n.elements.tooltip.css("display"),t&&n.elements.tooltip.css({visiblity:"hidden"}).show(),i=n.elements.tooltip.offset(),t&&n.elements.tooltip.css({visiblity:"visible"}).hide(),i):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getPosition")},getDimensions:function(){var t,i;return n.status.rendered?(t=!n.elements.tooltip.is(":visible"),t&&n.elements.tooltip.css({visiblity:"hidden"}).show(),i={height:n.elements.tooltip.outerHeight(),width:n.elements.tooltip.outerWidth()},t&&n.elements.tooltip.css({visiblity:"visible"}).hide(),i):e.fn.qtip.log.error.call(n,2,e.fn.qtip.constants.TOOLTIP_NOT_RENDERED,"getDimensions")}})}function s(){var t,i,s,a,r;t=this,t.beforeRender.call(t),t.status.rendered=!0,t.elements.tooltip='<div qtip="'+t.id+'" class="qtip '+(t.options.style.classes.tooltip||t.options.style)+'"style="display:none; -moz-border-radius:0; -webkit-border-radius:0; border-radius:0;position:'+t.options.position.type+';">  <div class="qtip-wrapper" style="position:relative; overflow:hidden; text-align:left;">    <div class="qtip-contentWrapper" style="overflow:hidden;">       <div class="qtip-content '+t.options.style.classes.content+'"></div></div></div></div>',t.elements.tooltip=e(t.elements.tooltip),t.elements.tooltip.appendTo(t.options.position.container),t.elements.tooltip.data("qtip",{current:0,interfaces:[t]}),t.elements.wrapper=t.elements.tooltip.children("div:first"),t.elements.contentWrapper=t.elements.wrapper.children("div:first").css({background:t.options.style.background}),t.elements.content=t.elements.contentWrapper.children("div:first").css(u(t.options.style)),e.browser.msie&&t.elements.wrapper.add(t.elements.content).css({zoom:1}),"unfocus"==t.options.hide.when.event&&t.elements.tooltip.attr("unfocus",!0),"number"==typeof t.options.style.width.value&&t.updateWidth(),e("<canvas>").get(0).getContext||e.browser.msie?(t.options.style.border.radius>0?n.call(t):t.elements.contentWrapper.css({border:t.options.style.border.width+"px solid "+t.options.style.border.color}),!1!==t.options.style.tip.corner&&o.call(t)):(t.elements.contentWrapper.css({border:t.options.style.border.width+"px solid "+t.options.style.border.color}),t.options.style.border.radius=0,t.options.style.tip.corner=!1,e.fn.qtip.log.error.call(t,2,e.fn.qtip.constants.CANVAS_VML_NOT_SUPPORTED,"render")),"string"==typeof t.options.content.text&&t.options.content.text.length>0||t.options.content.text.jquery&&t.options.content.text.length>0?i=t.options.content.text:"string"==typeof t.elements.target.attr("title")&&t.elements.target.attr("title").length>0?(i=t.elements.target.attr("title").replace("\\n","<br />"),t.elements.target.attr("title","")):"string"==typeof t.elements.target.attr("alt")&&t.elements.target.attr("alt").length>0?(i=t.elements.target.attr("alt").replace("\\n","<br />"),t.elements.target.attr("alt","")):(i=" ",e.fn.qtip.log.error.call(t,1,e.fn.qtip.constants.NO_VALID_CONTENT,"render")),!1!==t.options.content.title.text&&c.call(t),t.updateContent(i),h.call(t),!0===t.options.show.ready&&t.show(),!1!==t.options.content.url&&"undefined"!=typeof t.options.content.url&&(s=t.options.content.url,a=t.options.content.data,r=t.options.content.method||"get",t.loadContent(s,a,r)),t.onRender.call(t),e.fn.qtip.log.error.call(t,1,e.fn.qtip.constants.EVENT_RENDERED,"render")}function n(){var t,i,s,n,o,r,l,c,h,d,u,p,f,m,v;t=this,t.elements.wrapper.find(".qtip-borderBottom, .qtip-borderTop").remove(),s=t.options.style.border.width,n=t.options.style.border.radius,o=t.options.style.border.color||t.options.style.tip.color,r=g(n),l={};for(i in r)l[i]='<div rel="'+i+'" style="'+(-1!==i.search(/Left/)?"left":"right")+":0; position:absolute; height:"+n+"px; width:"+n+'px; overflow:hidden; line-height:0.1px; font-size:1px">',e("<canvas>").get(0).getContext?l[i]+='<canvas height="'+n+'" width="'+n+'" style="vertical-align: top"></canvas>':e.browser.msie&&(c=2*n+3,l[i]+='<v:arc stroked="false" fillcolor="'+o+'" startangle="'+r[i][0]+'" endangle="'+r[i][1]+'" style="width:'+c+"px; height:"+c+"px; margin-top:"+(-1!==i.search(/bottom/)?-2:-1)+"px; margin-left:"+(-1!==i.search(/Right/)?r[i][2]-3.5:-1)+'px; vertical-align:top; display:inline-block; behavior:url(#default#VML)"></v:arc>'),l[i]+="</div>";h=t.getDimensions().width-2*Math.max(s,n),d='<div class="qtip-betweenCorners" style="height:'+n+"px; width:"+h+"px; overflow:hidden; background-color:"+o+'; line-height:0.1px; font-size:1px;">',
u='<div class="qtip-borderTop" dir="ltr" style="height:'+n+"px; margin-left:"+n+'px; line-height:0.1px; font-size:1px; padding:0;">'+l.topLeft+l.topRight+d,t.elements.wrapper.prepend(u),p='<div class="qtip-borderBottom" dir="ltr" style="height:'+n+"px; margin-left:"+n+'px; line-height:0.1px; font-size:1px; padding:0;">'+l.bottomLeft+l.bottomRight+d,t.elements.wrapper.append(p),e("<canvas>").get(0).getContext?t.elements.wrapper.find("canvas").each(function(){f=r[e(this).parent("[rel]:first").attr("rel")],a.call(t,e(this),f,n,o)}):e.browser.msie&&t.elements.tooltip.append('<v:image style="behavior:url(#default#VML);"></v:image>'),m=Math.max(n,n+(s-n)),v=Math.max(s-n,0),t.elements.contentWrapper.css({border:"0px solid "+o,borderWidth:v+"px "+m+"px"})}function a(e,t,i,s){var n=e.get(0).getContext("2d");n.fillStyle=s,n.beginPath(),n.arc(t[0],t[1],i,0,2*Math.PI,!1),n.fill()}function o(t){var i,s,n,a,o;i=this,null!==i.elements.tip&&i.elements.tip.remove(),s=i.options.style.tip.color||i.options.style.border.color,!1!==i.options.style.tip.corner&&(t||(t=i.options.style.tip.corner),n=m(t,i.options.style.tip.size.width,i.options.style.tip.size.height),i.elements.tip='<div class="'+i.options.style.classes.tip+'" dir="ltr" rel="'+t+'" style="position:absolute; height:'+i.options.style.tip.size.height+"px; width:"+i.options.style.tip.size.width+'px; margin:0 auto; line-height:0.1px; font-size:1px;">',e("<canvas>").get(0).getContext?i.elements.tip+='<canvas height="'+i.options.style.tip.size.height+'" width="'+i.options.style.tip.size.width+'"></canvas>':e.browser.msie&&(a=i.options.style.tip.size.width+","+i.options.style.tip.size.height,o="m"+n[0][0]+","+n[0][1],o+=" l"+n[1][0]+","+n[1][1],o+=" "+n[2][0]+","+n[2][1],o+=" xe",i.elements.tip+='<v:shape fillcolor="'+s+'" stroked="false" filled="true" path="'+o+'" coordsize="'+a+'" style="width:'+i.options.style.tip.size.width+"px; height:"+i.options.style.tip.size.height+"px; line-height:0.1px; display:inline-block; behavior:url(#default#VML); vertical-align:"+(-1!==t.search(/top/)?"bottom":"top")+'"></v:shape>',i.elements.tip+='<v:image style="behavior:url(#default#VML);"></v:image>',i.elements.contentWrapper.css("position","relative")),i.elements.tooltip.prepend(i.elements.tip+"</div>"),i.elements.tip=i.elements.tooltip.find("."+i.options.style.classes.tip).eq(0),e("<canvas>").get(0).getContext&&r.call(i,i.elements.tip.find("canvas:first"),n,s),-1!==t.search(/top/)&&e.browser.msie&&6===parseInt(e.browser.version.charAt(0))&&i.elements.tip.css({marginTop:-4}),l.call(i,t))}function r(e,t,i){var s=e.get(0).getContext("2d");s.fillStyle=i,s.beginPath(),s.moveTo(t[0][0],t[0][1]),s.lineTo(t[1][0],t[1][1]),s.lineTo(t[2][0],t[2][1]),s.fill()}function l(t){var i,s,n,a,o;i=this,!1!==i.options.style.tip.corner&&i.elements.tip&&(t||(t=i.elements.tip.attr("rel")),s=positionAdjust=e.browser.msie?1:0,i.elements.tip.css(t.match(/left|right|top|bottom/)[0],0),-1!==t.search(/top|bottom/)?(e.browser.msie&&(6===parseInt(e.browser.version.charAt(0))?positionAdjust=-1!==t.search(/top/)?-3:1:positionAdjust=-1!==t.search(/top/)?1:2),-1!==t.search(/Middle/)?i.elements.tip.css({left:"50%",marginLeft:-i.options.style.tip.size.width/2}):-1!==t.search(/Left/)?i.elements.tip.css({left:i.options.style.border.radius-s}):-1!==t.search(/Right/)&&i.elements.tip.css({right:i.options.style.border.radius+s}),-1!==t.search(/top/)?i.elements.tip.css({top:-positionAdjust}):i.elements.tip.css({bottom:positionAdjust})):-1!==t.search(/left|right/)&&(e.browser.msie&&(positionAdjust=6===parseInt(e.browser.version.charAt(0))?1:-1!==t.search(/left/)?1:2),-1!==t.search(/Middle/)?i.elements.tip.css({top:"50%",marginTop:-i.options.style.tip.size.height/2}):-1!==t.search(/Top/)?i.elements.tip.css({top:i.options.style.border.radius-s}):-1!==t.search(/Bottom/)&&i.elements.tip.css({bottom:i.options.style.border.radius+s}),-1!==t.search(/left/)?i.elements.tip.css({left:-positionAdjust}):i.elements.tip.css({right:positionAdjust})),n="padding-"+t.match(/left|right|top|bottom/)[0],a=i.options.style.tip.size[-1!==n.search(/left|right/)?"width":"height"],i.elements.tooltip.css("padding",0),i.elements.tooltip.css(n,a),e.browser.msie&&6==parseInt(e.browser.version.charAt(0))&&(o=parseInt(i.elements.tip.css("margin-top"))||0,o+=parseInt(i.elements.content.css("margin-top"))||0,i.elements.tip.css({marginTop:o})))}function c(){var t=this;null!==t.elements.title&&t.elements.title.remove(),t.elements.title=e('<div class="'+t.options.style.classes.title+'">').css(u(t.options.style.title,!0)).css({zoom:e.browser.msie?1:0}).prependTo(t.elements.contentWrapper),t.options.content.title.text&&t.updateTitle.call(t,t.options.content.title.text),!1!==t.options.content.title.button&&"string"==typeof t.options.content.title.button&&(t.elements.button=e('<a class="'+t.options.style.classes.button+'" style="float:right; position: relative"></a>').css(u(t.options.style.button,!0)).html(t.options.content.title.button).prependTo(t.elements.title).click(function(e){t.status.disabled||t.hide(e)}))}function h(){function t(t){!0!==n.status.disabled&&(clearTimeout(n.timers.inactive),n.timers.inactive=setTimeout(function(){e(r).each(function(){o.unbind(this+".qtip-inactive"),n.elements.content.unbind(this+".qtip-inactive")}),n.hide(t)},n.options.hide.delay))}function i(i){!0!==n.status.disabled&&("inactive"==n.options.hide.when.event&&(e(r).each(function(){o.bind(this+".qtip-inactive",t),n.elements.content.bind(this+".qtip-inactive",t)}),t()),clearTimeout(n.timers.show),clearTimeout(n.timers.hide),n.timers.show=setTimeout(function(){n.show(i)},n.options.show.delay))}function s(t){if(!0!==n.status.disabled){if(!0===n.options.hide.fixed&&-1!==n.options.hide.when.event.search(/mouse(out|leave)/i)&&e(t.relatedTarget).parents("div.qtip[qtip]").length>0)return t.stopPropagation(),t.preventDefault(),clearTimeout(n.timers.hide),!1;clearTimeout(n.timers.show),clearTimeout(n.timers.hide),n.elements.tooltip.stop(!0,!0),n.timers.hide=setTimeout(function(){n.hide(t)},n.options.hide.delay)}}var n,a,o,r;n=this,a=n.options.show.when.target,o=n.options.hide.when.target,n.options.hide.fixed&&(o=o.add(n.elements.tooltip)),"inactive"==n.options.hide.when.event?r=["click","dblclick","mousedown","mouseup","mousemove","mouseout","mouseenter","mouseleave","mouseover"]:!0===n.options.hide.fixed&&n.elements.tooltip.bind("mouseover.qtip",function(){!0!==n.status.disabled&&clearTimeout(n.timers.hide)}),1===n.options.show.when.target.add(n.options.hide.when.target).length&&n.options.show.when.event==n.options.hide.when.event&&"inactive"!==n.options.hide.when.event||"unfocus"==n.options.hide.when.event?(n.cache.toggle=0,a.bind(n.options.show.when.event+".qtip",function(e){0==n.cache.toggle?i(e):s(e)})):(a.bind(n.options.show.when.event+".qtip",i),"inactive"!==n.options.hide.when.event&&o.bind(n.options.hide.when.event+".qtip",s)),-1!==n.options.position.type.search(/(fixed|absolute)/)&&n.elements.tooltip.bind("mouseover.qtip",n.focus),"mouse"===n.options.position.target&&"static"!==n.options.position.type&&a.bind("mousemove.qtip",function(e){n.cache.mouse={x:e.pageX,y:e.pageY},!1===n.status.disabled&&!0===n.options.position.adjust.mouse&&"static"!==n.options.position.type&&"none"!==n.elements.tooltip.css("display")&&n.updatePosition(e)})}function d(t,i,s){var n,a,r,l,c;return n=this,"center"==s.corner?i.position:(a=e.extend({},t),l={x:!1,y:!1},c={left:a.left<e.fn.qtip.cache.screen.scroll.left,right:a.left+s.dimensions.width+2>=e.fn.qtip.cache.screen.width+e.fn.qtip.cache.screen.scroll.left,top:a.top<e.fn.qtip.cache.screen.scroll.top,bottom:a.top+s.dimensions.height+2>=e.fn.qtip.cache.screen.height+e.fn.qtip.cache.screen.scroll.top},r={left:c.left&&(-1!=s.corner.search(/right/i)||-1==s.corner.search(/right/i)&&!c.right),right:c.right&&(-1!=s.corner.search(/left/i)||-1==s.corner.search(/left/i)&&!c.left),top:c.top&&-1==s.corner.search(/top/i),bottom:c.bottom&&-1==s.corner.search(/bottom/i)},r.left?("mouse"!==n.options.position.target?a.left=i.position.left+i.dimensions.width:a.left=n.cache.mouse.x,l.x="Left"):r.right&&("mouse"!==n.options.position.target?a.left=i.position.left-s.dimensions.width:a.left=n.cache.mouse.x-s.dimensions.width,l.x="Right"),r.top?("mouse"!==n.options.position.target?a.top=i.position.top+i.dimensions.height:a.top=n.cache.mouse.y,l.y="top"):r.bottom&&("mouse"!==n.options.position.target?a.top=i.position.top-s.dimensions.height:a.top=n.cache.mouse.y-s.dimensions.height,l.y="bottom"),a.left<0&&(a.left=t.left,l.x=!1),a.top<0&&(a.top=t.top,l.y=!1),!1!==n.options.style.tip.corner&&(a.corner=new String(s.corner),!1!==l.x&&(a.corner=a.corner.replace(/Left|Right|Middle/,l.x)),!1!==l.y&&(a.corner=a.corner.replace(/top|bottom/,l.y)),a.corner!==n.elements.tip.attr("rel")&&o.call(n,a.corner)),a)}function u(t,i){var s,n;s=e.extend(!0,{},t);for(n in s)!0===i&&-1!==n.search(/(tip|classes)/i)?delete s[n]:i||-1===n.search(/(width|border|tip|title|classes|user)/i)||delete s[n];return s}function p(e){return"object"!=typeof e.tip&&(e.tip={corner:e.tip}),"object"!=typeof e.tip.size&&(e.tip.size={width:e.tip.size,height:e.tip.size}),"object"!=typeof e.border&&(e.border={width:e.border}),"object"!=typeof e.width&&(e.width={value:e.width}),"string"==typeof e.width.max&&(e.width.max=parseInt(e.width.max.replace(/([0-9]+)/i,"$1"))),"string"==typeof e.width.min&&(e.width.min=parseInt(e.width.min.replace(/([0-9]+)/i,"$1"))),"number"==typeof e.tip.size.x&&(e.tip.size.width=e.tip.size.x,delete e.tip.size.x),"number"==typeof e.tip.size.y&&(e.tip.size.height=e.tip.size.y,delete e.tip.size.y),e}function f(){var t,i,s,n,a,o;for(t=this,s=[!0,{}],i=0;i<arguments.length;i++)s.push(arguments[i]);for(n=[e.extend.apply(e,s)];"string"==typeof n[0].name;)n.unshift(p(e.fn.qtip.styles[n[0].name]));return n.unshift(!0,{classes:{tooltip:"qtip-"+(arguments[0].name||"defaults")}},e.fn.qtip.styles.defaults),a=e.extend.apply(e,n),o=e.browser.msie?1:0,a.tip.size.width+=o,a.tip.size.height+=o,a.tip.size.width%2>0&&(a.tip.size.width+=1),a.tip.size.height%2>0&&(a.tip.size.height+=1),!0===a.tip.corner&&(a.tip.corner="center"!==t.options.position.corner.tooltip&&t.options.position.corner.tooltip),a}function m(e,t,i){var s={bottomRight:[[0,0],[t,i],[t,0]],bottomLeft:[[0,0],[t,0],[0,i]],topRight:[[0,i],[t,0],[t,i]],topLeft:[[0,0],[0,i],[t,i]],topMiddle:[[0,i],[t/2,0],[t,i]],bottomMiddle:[[0,0],[t,0],[t/2,i]],rightMiddle:[[0,0],[t,i/2],[0,i]],leftMiddle:[[t,0],[t,i],[0,i/2]]};return s.leftTop=s.bottomRight,s.rightTop=s.bottomLeft,s.leftBottom=s.topRight,s.rightBottom=s.topLeft,s[e]}function g(t){var i;return e("<canvas>").get(0).getContext?i={topLeft:[t,t],topRight:[0,t],bottomLeft:[t,0],bottomRight:[0,0]}:e.browser.msie&&(i={topLeft:[-90,90,0],topRight:[-90,90,-t],bottomLeft:[90,270,0],bottomRight:[90,270,-t]}),i}function v(){var e,t,i;e=this,i=e.getDimensions(),t='<iframe class="qtip-bgiframe" frameborder="0" tabindex="-1" src="javascript:false" style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=\'0\'); border: 1px solid red; height:'+i.height+"px; width:"+i.width+'px" />',e.elements.bgiframe=e.elements.wrapper.prepend(t).children(".qtip-bgiframe:first")}e.fn.qtip=function(i,n){var a,o,r,l,c,h,d,u;if("string"==typeof i){if("object"!=typeof e(this).data("qtip")&&e.fn.qtip.log.error.call(self,1,e.fn.qtip.constants.NO_TOOLTIP_PRESENT,!1),"api"==i)return e(this).data("qtip")?e(this).data("qtip").interfaces[e(this).data("qtip").current]:null;if("interfaces"==i)return e(this).data("qtip")?e(this).data("qtip").interfaces:null}else i||(i={}),("object"!=typeof i.content||i.content.jquery&&i.content.length>0)&&(i.content={text:i.content}),"object"!=typeof i.content.title&&(i.content.title={text:i.content.title}),"object"!=typeof i.position&&(i.position={corner:i.position}),"object"!=typeof i.position.corner&&(i.position.corner={target:i.position.corner,tooltip:i.position.corner}),"object"!=typeof i.show&&(i.show={when:i.show}),"object"!=typeof i.show.when&&(i.show.when={event:i.show.when}),"object"!=typeof i.show.effect&&(i.show.effect={type:i.show.effect}),"object"!=typeof i.hide&&(i.hide={when:i.hide}),"object"!=typeof i.hide.when&&(i.hide.when={event:i.hide.when}),"object"!=typeof i.hide.effect&&(i.hide.effect={type:i.hide.effect}),"object"!=typeof i.style&&(i.style={name:i.style}),i.style=p(i.style),l=e.extend(!0,{},e.fn.qtip.defaults,i),l.style=f.call({options:l},l.style),l.user=e.extend(!0,{},i);return e(this).each(function(){if("string"==typeof i){if(h=i.toLowerCase(),"object"==typeof(r=e(this).qtip("interfaces")))if(!0===n&&"destroy"==h)for(;r.length>0;)r[r.length-1].destroy();else for(!0!==n&&(r=[e(this).qtip("api")]),a=0;a<r.length;a++)"destroy"==h?r[a].destroy():r[a]&&!0===r[a].status.rendered&&("show"==h?r[a].show():"hide"==h?r[a].hide():"focus"==h?r[a].focus():"disable"==h?r[a].disable(!0):"enable"==h&&r[a].disable(!1))}else{for(d=e.extend(!0,{},l),d.hide.effect.length=l.hide.effect.length,d.show.effect.length=l.show.effect.length,!1===d.position.container&&(d.position.container=e(document.body)),!1===d.position.target&&(d.position.target=e(this)),!1===d.show.when.target&&(d.show.when.target=e(this)),!1===d.hide.when.target&&(d.hide.when.target=e(this)),o=e.fn.qtip.interfaces.length,a=0;a<o;a++)if("undefined"==typeof e.fn.qtip.interfaces[a]){o=a;break}c=new t(e(this),d,o),e.fn.qtip.interfaces[o]=c,"object"==typeof e(this).data("qtip")?(void 0===e(this).attr("qtip")&&(e(this).data("qtip").current=e(this).data("qtip").interfaces.length),e(this).data("qtip").interfaces.push(c)):e(this).data("qtip",{current:0,interfaces:[c]}),!1===d.content.prerender&&!1!==d.show.when.event&&!0!==d.show.ready?d.show.when.target.bind(d.show.when.event+".qtip-"+o+"-create",{qtip:o},function(t){u=e.fn.qtip.interfaces[t.data.qtip],u.options.show.when.target.unbind(u.options.show.when.event+".qtip-"+t.data.qtip+"-create"),u.cache.mouse={x:t.pageX,y:t.pageY},s.call(u),u.options.show.when.target.trigger(u.options.show.when.event)}):(c.cache.mouse={x:d.show.when.target.offset().left,y:d.show.when.target.offset().top},s.call(c))}})},e(document).ready(function(){e.fn.qtip.cache={screen:{scroll:{left:e(window).scrollLeft(),top:e(window).scrollTop()},width:e(window).width(),height:e(window).height()}};var t;e(window).bind("resize scroll",function(s){clearTimeout(t),t=setTimeout(function(){for("scroll"===s.type?e.fn.qtip.cache.screen.scroll={left:e(window).scrollLeft(),top:e(window).scrollTop()}:(e.fn.qtip.cache.screen.width=e(window).width(),e.fn.qtip.cache.screen.height=e(window).height()),i=0;i<e.fn.qtip.interfaces.length;i++){var t=e.fn.qtip.interfaces[i];!0===t.status.rendered&&("static"!==t.options.position.type||t.options.position.adjust.scroll&&"scroll"===s.type||t.options.position.adjust.resize&&"resize"===s.type)&&t.updatePosition(s,!0)}},100)}),e(document).bind("mousedown.qtip",function(t){0===e(t.target).parents("div.qtip").length&&e(".qtip[unfocus]").each(function(){var i=e(this).qtip("api");e(this).is(":visible")&&!i.status.disabled&&e(t.target).add(i.elements.target).length>1&&i.hide(t)})})}),e.fn.qtip.interfaces=[],e.fn.qtip.log={error:function(){return this}},e.fn.qtip.constants={},e.fn.qtip.defaults={content:{prerender:!1,text:!1,url:!1,data:null,title:{text:!1,button:!1}},position:{target:!1,corner:{target:"bottomRight",tooltip:"topLeft"},adjust:{x:0,y:0,mouse:!0,screen:!1,scroll:!0,resize:!0},type:"absolute",container:!1},show:{when:{target:!1,event:"mouseover"},effect:{type:"fade",length:100},delay:140,solo:!1,ready:!1},hide:{when:{target:!1,event:"mouseout"},effect:{type:"fade",length:100},delay:0,fixed:!1},api:{beforeRender:function(){},onRender:function(){},beforePositionUpdate:function(){},onPositionUpdate:function(){},beforeShow:function(){},onShow:function(){},beforeHide:function(){},onHide:function(){},beforeContentUpdate:function(){},onContentUpdate:function(){},beforeContentLoad:function(){},onContentLoad:function(){},beforeTitleUpdate:function(){},onTitleUpdate:function(){},beforeDestroy:function(){},onDestroy:function(){},beforeFocus:function(){},onFocus:function(){}}},e.fn.qtip.styles={defaults:{background:"white",color:"#111",overflow:"hidden",textAlign:"left",width:{min:0,max:250},padding:"5px 9px",border:{width:1,radius:0,color:"#d3d3d3"},tip:{corner:!1,color:!1,size:{width:13,height:13},opacity:1},title:{background:"#e1e1e1",fontWeight:"bold",padding:"7px 12px"},button:{cursor:"pointer"},classes:{target:"",tip:"qtip-tip",title:"qtip-title",button:"qtip-button",content:"qtip-content",active:"qtip-active"}},cream:{border:{width:3,radius:0,color:"#F9E98E"},title:{background:"#F0DE7D",color:"#A27D35"},background:"#FBF7AA",color:"#A27D35",classes:{tooltip:"qtip-cream"}},light:{border:{width:3,radius:0,color:"#E2E2E2"},title:{background:"#f1f1f1",color:"#454545"},background:"white",color:"#454545",classes:{tooltip:"qtip-light"}},dark:{border:{width:3,radius:0,color:"#303030"},title:{background:"#404040",color:"#f3f3f3"},background:"#505050",color:"#f3f3f3",classes:{tooltip:"qtip-dark"}},red:{border:{width:3,radius:0,color:"#CE6F6F"},title:{background:"#f28279",color:"#9C2F2F"},background:"#F79992",color:"#9C2F2F",classes:{tooltip:"qtip-red"}},green:{border:{width:3,radius:0,color:"#A9DB66"},title:{background:"#b9db8c",color:"#58792E"},background:"#CDE6AC",color:"#58792E",classes:{tooltip:"qtip-green"}},blue:{border:{width:3,radius:0,color:"#ADD9ED"},title:{background:"#D0E9F5",color:"#5E99BD"},background:"#E5F6FE",color:"#4D9FBF",classes:{tooltip:"qtip-blue"}}}}(jQuery),PopupManager=function(){var e={fullscreen:0,resizable:1,width:600,height:500,scrollbars:1},t="pc_popup",i=[];return{open:function(s,n,a){var o,r=n||t,l={};return s&&r?(!(o=i[r])||o.closed||o.location!=s)&&($.extend(l,e,a),o=window.open(s,"_blank",$.param(l).replace(/&/g,",")))?(i[r]=o,o.focus&&o.focus(),o):o?(o.focus&&o.focus(),o):(delete i[r],null):null},close:function(e){var s,n=e||t;if(!n)return null;(s=i[n])&&(s.close(),delete i[n])}}}(),app.modules.corePopups=app.modules.corePopups||{},app.modules.corePopups.load=function(){$doc.bind("keydown",function(e){if(27===(e.which||e.keyCode)){var t=$(".ui-widget-overlay"),i=$(".js-cover-all");return t.length&&t.is(":visible")||i.length&&i.is(":visible")?(closeAllPopup(),!1):!$.active}}),$doc.on("click",".js-p-close, .js-cn-cancel",function(e){$doc.trigger("closePopup"),hidePopup("popup-container"),closeStaticPopup(),e.preventDefault()})},formSubmitter=function(){function e(e){e.before('<input name="'+e.attr("name")+'" type="hidden" value="'+e.val()+'" />')}function t(e){e.parent().find('[name="'+e.attr("name")+'"][type="hidden"]').remove()}return{disableButtons:function(t,i,s){return $(t).find(":submit").each(function(){var t=$(this);e(t),t.prop("disabled",!0).blur().data("originalValue",t.val()).val(i||"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435...")}),setTimeout(function(){formSubmitter.enableButtons(t)},s||12e4),!0},enableButtons:function(e){$(e).find(":submit").each(function(){var e=$(this);e.prop("disabled",!1).val(e.data("originalValue")),t(e)})}}}(),app.modules.spanToLinks=function(e){function t(){var e=$("<a>");$("span[data-to]").each(function(){var t=e.clone(),i=this,s=i.attributes,n=i.parentNode,a=t[0];$(s).each(function(e){var i=s[e].nodeName,n=s[e].nodeValue;switch(i){case"data-alt":a.alt=n;break;case"data-title":a.title=n;break;case"data-to":a.href=n;break;case"data-target":a.target=n;break;case"data-text":a.innerHTML=n;break;default:try{t.attr(i,n)}catch(e){}}}),this.innerHTML&&(a.innerHTML=this.innerHTML),n.replaceChild(a,this)})}return e.load=function(){t(),$doc.on("spansToLinks",t).trigger("load:spanToLinks")},e}(app.modules.spanToLinks||{}),app.modules.coreApplicationBase=app.modules.coreApplicationBase||{},app.modules.coreApplicationBase.load=function(){areAllIE?location.href.replace(location.hostname,punycode.toASCII(location.hostname)):location.href.replace(location.pathname,escape(location.pathname));$doc.bind("keydown",function(e){if(13==e.which&&isEventCtrlPressed(e)){var t=e.target;t&&t.form&&(e.preventDefault(),$(t.form).submit())}}).trigger("spansToLinks"),$.ajaxPrefilter(function(e){if(e.crossDomain){var t=e.url,i=e.url.match(/^https?:\/\/.[^\/]*/gi)[0];e.url=punycode.toUnicode(i)+e.url.replace(i,""),t!=e.url&&(e.crossDomain=!1)}}),hideText()},Visualization=function(){var e=[],t=null,i=["corechart","AreaChart"],s=null,n=[],a=[],o=[],r={},l=!1,c=null,h=[],d=null,u=function(){for(var e=new google.visualization.DataTable,t=n.length,i=0;i<t;i++)e.addColumn(n[i][1],n[i][2],n[i][0]);return e.addRows(o),e},p=function(){var e=document.getElementById(t);s=new google.visualization[i[1]](e),c=u(),s.draw(c,r),l=!1,m()},f=function(t,i,s,n,a){e.push([t,i,s,n,a])},m=function(){if(e.length){var t=e.shift();t&&Visualization.draw(t[0],t[1],t[2],t[3],t[4])}},g=function(){a=[];for(var e=0;e<c.getNumberOfColumns();e++)a.push(e),e>0&&(h[e-1]={})},v=function(){var e,t,i=s.getSelection();i.length&&null===i[0].row&&(e=i[0].column,a[e]===e?(a[e]={label:c.getColumnLabel(e),type:c.getColumnType(e),calc:function(){return null}},h[e-1].color="#CCCCCC"):(a[e]=e,h[e-1].color=null),t=new google.visualization.DataView(c),t.setColumns(a),r.series=h,s.draw(t,r))},_=function(){google.load("visualization","1",{packages:[s[0]]}),google.setOnLoadCallback(function(){p()})},b=function(){window.onresize=function(){clearTimeout(d),d=setTimeout(function(){p(),g(),google.visualization.events.addListener(s,"select",v)},500)}};return{draw:function(e,a,c,h,d){return l?void f(e,a,c,h,d):(l=!0,e&&(t=e),a&&(i=a),c&&(n=c),h&&(o=h),d&&(r=d),!!google&&(google.visualization&&google.visualization[i[1]]?(p(),n.length>2&&(g(),google.visualization.events.addListener(s,"select",v)),b()):_(),!0))}}}(),RubricsTreeView=function(){var e="#rubrics-treeview",t={},i=function(e,t){var i=!1;if(e.data.unselectable)return void(RubricsTreeView.multiSelect&&e.bExpanded&&"checkbox"==e.getEventTargetType(t)&&($.each(e.childList,function(e,t){if(t.isSelected())return i=!0,!1}),$.each(e.childList,function(e,t){i?t.isSelected()&&t.select(!1):t.select()})));if(t.pageX||t.pageY){var s=e.getEventTargetType(t);if("expander"!==s&&"checkbox"!==s){var n=e.span.getElementsByTagName("a");n[0]&&($.browser.msie||n[0].focus())}}},s=function(e){if(!e.data.unselectable){e._userActivate();var t=e.span.getElementsByTagName("a");return t[0]&&!$.browser.msie&&t[0].focus(),!1}},n=function(e){if(e.data.is_symlink)return void e.tree.loadKeyPath(e.data.symlink_target_path,function(e){e.expand()});if(!e.data.unselectable){var t=[],i=e.parent;for(t.push({title:e.data.title,joined_path:e.data.joined_path});null!=i;)i.data.title&&t.push({title:i.data.title,joined_path:i.data.joined_path}),i=i.parent;if(RubricsTreeView.multiSelect)return e.toggleSelect(),!1;RubricsTreeViewSelector.selectRubric(e.data.key,e.data.title,t)}},a=function(e){if(!e.data.unselectable){var t=[],i=$(RubricsTreeView.searchTreeId).dynatree("getTree").getNodeByKey(e.data.parent_id);for(t.push({title:e.data.title.replace(/<span>.*?<\/span>/gi,""),joined_path:e.data.joined_path});null!=i;)i.data.title&&t.push({title:i.data.title,joined_path:i.data.joined_path}),i=i.parent;RubricsTreeViewSelector.selectRubric(e.data.key,e.data.title,t)}};return{treeId:"#tree_rubric",searchTreeId:"#search_tree",searchRubricsId:"#search_rubrics",popup:!1,pathOfLinks:!1,reversePath:!1,baseRubricUrl:null,callBacks:{},multiSelect:!1,init:function(o){var r=this;this.popup=o.popup||!1,this.pathOfLinks=o.path_of_links,this.reversePath=o.reverse_path,this.baseRubricUrl=o.base_rubric_url,this.multiSelect=o.multiSelect||!1,o.hidden_id&&RubricsTreeViewSelector.setRubricsId(o.hidden_id),t=o.ajax_params,RubricsTreeViewSearch.setSearchUrl(o.search_url),RubricsTreeViewSearch.setNotFoundResponse(o.not_found_response),RubricsTreeViewSearch.initKeys(),$(this.treeId).dynatree({children:o.root_rubrics,selectMode:r.multiSelect?3:1,checkbox:r.multiSelect,clickFolderMode:3,autoCollapse:!0,debugLevel:0,imagePath:"/images/dynatree/",onLazyRead:function(e){e.appendAjax({url:o.rubrics_tree_url,type:"POST",data:jQuery.extend({parent_id:e.data.key},t),success:function(e){$doc.trigger("load-node.rubrics",[e])}})},onPostInit:function(){o.selected_path&&this.loadKeyPath(o.selected_path,function(e,t){"loaded"==t?e.expand():"ok"==t&&e.activate()})},onClick:function(e,t){i(e,t),this.popup&&setTimeout(RubricsTreeView.repositionPopup,500)},onDblClick:function(e,t){return s(e,t)},onActivate:function(e){var t=n(e);return RubricsTreeView.callBacks.onActivated&&RubricsTreeView.callBacks.onActivated(),t}}),$(this.searchTreeId).dynatree({children:[],selectMode:1,clickFolderMode:1,debugLevel:0,imagePath:"/images/dynatree/",onActivate:function(e){RubricsTreeViewSearch.searchByRubric(e.data.key)},onKeydown:function(e,t){if(39==t.keyCode&&t.ctrlKey){t.preventDefault(),t.stopPropagation();var i=$(r.searchRubricsId).dynatree("getRoot");if(i.hasChildren()){i.getChildren()[0].focus()}return!1}},onExpand:function(){r.onResize(),$doc.trigger("expand-node.rubrics")}}),$(this.searchRubricsId).dynatree({children:[],selectMode:r.multiSelect?3:1,checkbox:r.multiSelect,debugLevel:0,imagePath:"/images/dynatree/",onClick:function(e,t){if(r.callBacks.onSelectSearchTree&&!r.callBacks.onSelectSearchTree(e,t))return!0;i(e,t),a(e),$doc.trigger("click-node.rubrics")},onDblClick:function(e,t){return s(e,t)},onKeydown:function(e,t){if(37==t.keyCode&&t.ctrlKey){t.preventDefault(),t.stopPropagation();var i=$(r.searchTreeId).dynatree("getRoot");if(i.hasChildren()){i.getChildren()[0].focus()}return!1}}}),$doc.on("click",".show-all-search-rubrics",function(e){e.preventDefault(),e.stopPropagation(),RubricsTreeViewSearch.search(null,"")}),$doc.on("click",".show-tree-action",function(e){e.preventDefault(),e.stopPropagation(),$(r.treeId).show(),$(this).parent().hide(),$("#search_rubrics_results").hide(),$(".uf-rubrics").removeClass("uf-rubrics-no-results"),$(".js-rubric-name").focus(),RubricsTreeViewSearch.emptyQueryEl(),$doc.trigger("clean-search-results.rubrics")}),this.popup&&$(e).dialog({autoOpen:!1,modal:!0,dialogClass:"dialog-popup",width:"auto",height:"auto",title:"\u0420\u0443\u0431\u0440\u0438\u043a\u0430\u0442\u043e\u0440",buttons:r.multiSelect?{"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c":function(){r.callBacks.onSave&&(r.callBacks.onSave(),$(this).dialog("close"))},"\u0417\u0430\u043a\u0440\u044b\u0442\u044c":function(){$(this).dialog("close")}}:"",popup:function(){RubricsTreeViewSearch.focusQueryElement(),setTimeout(r.repositionPopup,0)},close:function(){r.callBacks.onUnPopup&&r.callBacks.onUnPopup()}})},repositionPopup:function(){var t=$(e).dialog("widget"),i=$doc.scrollTop(),s=$doc.scrollLeft(),n=Math.max(s+($win.width()-t.outerWidth(!0))/2,s),a=Math.max(i+($win.height()-t.outerHeight(!0))/2,i);t.animate({left:n,top:a},{duration:300})},showTree:function(){RubricsTreeViewSearch.lock(),$("#choose_rubric").show(),$("#rubric_title").focus()},popupTreeView:function(t){var i=this;$(e).dialog("open"),this.callBacks.onPopup&&this.callBacks.onPopup(t);var s=$(i.treeId).dynatree("getActiveNode");s&&($("a",s.span).focus(),s.deactivate()),RubricsTreeViewSelector.changeRubric(),RubricsTreeViewSearch.focusQueryElement()},unPopupTreeView:function(){$(e).dialog("close")},isPopuped:function(){return!!$(e).dialog("isOpen")},onResize:function(){var e=Math.max($("#rubric_search_result .left-col .dynatree-container").height(),0);$("#rubric_search_result .right-col").css("height",e)}}}(),RubricsTreeViewSearch=function(){var e=!1,t=!1,i="#rubric_title",s="#rubric_search_result",n=null,a=2,o=null,r="",l="",c=function(e){n=null,e&&alert(e)},h=function(){t=!0,element=f(),element&&element.addClass("loading")},d=function(){element=f(),element&&element.removeClass("loading"),t=!1},u=function(e,t){o={query:e,rubric:t}},p=function(e){if(!e){var t=f();if(!t)return null;e=t.val()}return e=$.trim(e),e.length<a?null:e},f=function(){var e=$(i);return e.length?e:(c("Query string input element with id ["+i+"] was not found"),null)},m=function(){var e=$(s);return e.length?e:(c("Result conteiner element with id ["+s+"] was not found"),null)},g=function(e){var t;$(RubricsTreeView.treeId).hide(),$(".ui-dialog .dynatree-container").css("max-height",""),RubricsTreeViewSearch.previousRubric()||(t=$(RubricsTreeView.searchTreeId).dynatree("getTree").getRoot(),t.removeChildren(),t.addChild(e.tree),RubricsTreeViewSearch.focusQueryElement()),t=$(RubricsTreeView.searchRubricsId).dynatree("getTree").getRoot(),t.removeChildren(),t.addChild(e.rubrics),0==e.count?(RubricsTreeViewSearch.previousRubric()||RubricsTreeViewSearch.showNotFoundMessage(),$("#search_rubrics_results").html("\u0441\u043e\u0436\u0430\u043b\u0435\u0435\u043c, \u043f\u043e\u0438\u0441\u043a \u0432 \u0440\u0443\u0431\u0440\u0438\u043a\u0430\u0445 \u043d\u0435 \u0434\u0430\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432").show()):e.total_entries>e.count?(RubricsTreeViewSearch.hideNotFoundMessage(),$("#search_rubrics_results").html("\u043f\u043e\u043a\u0430\u0437\u0430\u043d\u043e "+e.count+" \u0438\u0437 "+e.total_entries+",  \u0443\u0442\u043e\u0447\u043d\u0438\u0442\u0435 \u043a\u043b\u044e\u0447\u0435\u0432\u043e\u0435 \u0441\u043b\u043e\u0432\u043e."),$(".uf-rubrics").removeClass("uf-rubrics-no-results")):(RubricsTreeViewSearch.hideNotFoundMessage(),$("#search_rubrics_results").empty(),$(".uf-rubrics").removeClass("uf-rubrics-no-results")),m().show(),RubricsTreeView.popup&&RubricsTreeView.repositionPopup(),RubricsTreeView.onResize(),d(),_(),$doc.trigger("search-success.rubrics")},v=function(){c("Search error"),d(),_()},_=function(){this._queue&&(params=this._queue.shift(),params&&RubricsTreeViewSearch.search(params.query,params.rubric))},b=function(e,t){this._queue=[{query:e,rubric:t}]};return{initKeys:function(){var e=this;$doc.keydown(function(t){70==t.keyCode&&t.ctrlKey&&RubricsTreeView.isPopuped()&&(t.preventDefault(),t.stopPropagation(),e.focusQueryElement())})},focusQueryElement:function(){f().focus()},setSearchUrl:function(e){r=e},setNotFoundResponse:function(e){l=e},lock:function(){e=!0},reset:function(){o=null,$(s).hide(),RubricsTreeViewSearch.hideNotFoundMessage(),this.focusQueryElement()},emptyQueryEl:function(){f().val("")},unlock:function(){e=!1},searchByRubric:function(e){this.search(null,e)},search:function(i,s){if(null===s&&(s=RubricsTreeViewSearch.previousRubric()),t)return void b(i,s);if(!(i=p(i))&&!s)return RubricsTreeView.showTree(),void(RubricsTreeView.popup&&RubricsTreeView.repositionPopup());if(o){if(i==o.query&&s==o.rubric)return;if(!i&&s&&o.rubric&&s==o.rubric)return}u(i,s),params={query:i},s&&(params.rubric_id=s);var n=this;e||h(),$.ajax({data:params,dataType:"json",type:"get",url:r,success:function(e){g.call(n,e||null)},error:function(){v.call(n)}})},previousRubric:function(){return o?o.rubric:null},showNotFoundMessage:function(){$("#rubrics-search-notfound-message").show(),$(".uf-rubrics").addClass("uf-rubrics-no-results"),$(".js-r-tree-header").hide()},hideNotFoundMessage:function(){$("#rubrics-search-notfound-message").hide(),$(".js-r-tree-header").show()}}}(),RubricsTreeViewSelector=function(){var e="#rubric_preview_edit",t="#rubric_preview_delete",i="#company-content #choose_rubric",s="#new_demand #choose_rubric",n="#rubrics-treeview #choose_rubric",a="body#admin #choose_rubric, #choose_rubric",o="#rubric_preview",r="#product_rubric_id",l="#rubric_preview_container",c=function(e){$(o).html(e)},h=function(e){$(r).val(e)},d=function(){$(l).show()},u=function(){$(e).hide()},p=function(){$(e).show()},f=function(){$(t).show()},m=function(){$(i).hide(),$(s).hide()},g=function(){$(a).hide()},v=function(){$(i).show(),$(n).show(),$(s).hide(),setTimeout(RubricsTreeView.repositionPopup,500)},_=function(e,t){if(RubricsTreeView.pathOfLinks){var i=RubricsTreeView.baseRubricUrl.replace("/_JOINED_PATH_",e.joined_path);t.push('<a href="'+i+'" target="_blank">'+e.title+"</a>")}else t.push(e.title)};return{setContainers:function(e,t,i){r=e,o=t,l=i},setRubricsId:function(e){r=e},selectRubric:function(e,t,i){d(),h(e),p(),f(),m(),g(),"undefined"!=typeof ProductsDataTable&&RubricsTreeView.popup&&ProductsDataTable.hideButtons();var s=[];i.length>1?$.each(i,function(e){(this.title!=i[1].title||0!=e)&&e<i.length-1&&_(this,s)}):$.each(i,function(){_(this,s)}),RubricsTreeView.reversePath||s.reverse(),c(s.join(" / ")),RubricsTreeView.callBacks.onSelectRubric&&RubricsTreeView.callBacks.onSelectRubric(e,t,s),RubricsTreeView.popup&&RubricsTreeView.unPopupTreeView()},changeRubric:function(){u(),v()}}}(),RubricSearcher=function(){var e=!1,t=!1,i=!1,s="rubric_title",n="rubric_search_result",a=null,o=3,r=null,l=null,c="",h="",d=null,u=function(e){a=null,e&&alert(e)},p=function(){i=!0;var e=v();e&&e.addClass("loading")},f=function(){var e=v()
;e&&e.removeClass("loading"),i=!1},m=function(e,t,i){r={query:e,rubric:t,page:i}},g=function(e){if(!e){var t=v();if(!t)return null;e=t.val()}return e=$.trim(e),e.length<o?null:e},v=function(){var e=$("#"+s);return e.length?e:(u("Query string input element with id ["+s+"] was not found"),null)},_=function(){var e=$("#"+n);return e.length?e:(u("Result container element with id ["+n+"] was not found"),null)},b=function(i){i=$.trim(i)||h,t?e||($("#tree_rubric").hide(),$("#rubric_search_result").show(),RubricSearcher.set_result(i)):RubricSearcher.set_result(i),f(),w()},y=function(){u("Search error"),f(),w()},w=function(){if(d){var e=d.shift();e&&RubricSearcher.search(e.query,e.rubric,e.page)}},k=function(e,t,i){d=[{query:e,rubric:t,page:i}]};return{set_search_url:function(e){c=e},set_not_found_response:function(e){h=e},set_token:function(e){l=e},set_alternative:function(){t=!0},lock:function(){e=!0},unlock:function(){e=!1},set_result:function(e){var i=_();i&&(e?(t&&(e+="<div style='text-align: right;'>\u041d\u0435 \u043d\u0430\u0448\u043b\u0438 \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0443\u044e \u0440\u0443\u0431\u0440\u0438\u043a\u0443? <a href='#' onclick='return showRubricTree()'>\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e</a></div>"),i.html(e),i.show()):(i.empty(),i.hide()))},search:function(t,s,n){if(i)return void k(t,s,n);if((t=g(t))&&(!r||t!=r.query||s!=r.rubric||n!=r.page)){m(t,s,n);var a={query:t};s&&(a.parent=s),n&&(a.page=n),l&&(a[l.key]=l.value),e||p(),$.ajax({data:a,type:"get",url:c,success:function(e){b(e||null)},error:y})}}}}(),RubricSelectror=function(){var e=!1,t="",i="",s="",n=null,a=!1,o=null,r="product_rubric_id",l="rubric_preview_container",c="rubric_preview_edit",h="rubric_preview_delete",d="choose_rubric",u=null,p=function(e,i){f(e,i);var s={id:e};o&&(s[o.key]=o.value),$.ajax({data:s,type:"get",dataType:"json",url:t,success:function(e){g(e||null)},error:v})},f=function(e,t){n={id:e,title:t}},m=function(){n=null},g=function(e){var t=RubricSelectror;n&&(e||v(),e.id&&e.path&&e.id==n.id&&(a||(t.set_id(e.id),t.set_text(e.path)),m()))},v=function(){RubricSelectror.set_text(n?n.title:i),m()};return{set_token:function(e){o=e},set_text:function(e){$("#rubric_preview").html(e)},set_alternative:function(){e=!0},set_id:function(e){$("#"+r).val(e)},set_rubric_id_id:function(e){r=e},set_loading_text:function(e){s=e},set_path_url:function(e){t=e},set_path_load_fail_msg:function(e){i=e},hide_conteiner:function(){$("#"+l).hide()},show_conteiner:function(){$("#"+l).show()},hide_edit_link:function(){$("#"+c).hide()},show_edit_link:function(){$("#"+c).show()},hide_delete_link:function(){$("#"+h).hide()},show_delete_link:function(){$("#"+h).show()},hide_search:function(){$("#"+d).hide()},show_search:function(){$("#"+d).show()},select_rubric:function(e,t,i){var n=RubricSelectror;if(n.show_conteiner(),n.set_text(s),n.set_id(e),n.show_edit_link(),n.show_delete_link(),n.hide_search(),p(e,t),u){var a=$(i).parents(".rubricator-str").map(function(){return $(this).attr("rel")}).get();u(e,t,a)}},on_select_rubric:function(e){u=e},change_rubric:function(){var e=RubricSelectror;e.hide_edit_link(),e.show_search()},delete_rubric:function(){var e=RubricSelectror;e.set_id(""),a=!0,e.set_text(""),e.hide_conteiner(),e.hide_edit_link(),e.hide_delete_link(),e.show_search()}}}(),function(){function log(){"undefined"!=typeof console&&"function"==typeof console.log&&(Array.prototype.unshift.call(arguments,"[Ajax Upload]"),console.log(Array.prototype.join.call(arguments," ")))}function addEvent(e,t,i){if(e.addEventListener)e.addEventListener(t,i,!1);else{if(!e.attachEvent)throw new Error("not supported or DOM not loaded");e.attachEvent("on"+t,function(){i.call(e)})}}function addResizeEvent(e){var t;addEvent(window,"resize",function(){t&&clearTimeout(t),t=setTimeout(e,100)})}function getBox(e){var t,i,s,n,a=getOffset(e);return t=a.left,s=a.top,i=t+e.offsetWidth,n=s+e.offsetHeight,{left:t,right:i,top:s,bottom:n}}function addStyles(e,t){for(var i in t)t.hasOwnProperty(i)&&(e.style[i]=t[i])}function copyLayout(e,t){var i=getBox(e);addStyles(t,{position:"absolute",left:i.left+"px",top:i.top+"px",width:e.offsetWidth+"px",height:e.offsetHeight+"px"})}function fileFromPath(e){return e.replace(/.*(\/|\\)/,"")}function getExt(e){return-1!==e.indexOf(".")?e.replace(/.*[.]/,""):""}function hasClass(e,t){return new RegExp("\\b"+t+"\\b").test(e.className)}function addClass(e,t){hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){var i=new RegExp("\\b"+t+"\\b");e.className=e.className.replace(i,"")}function removeNode(e){e.parentNode.removeChild(e)}if(document.documentElement.getBoundingClientRect)var getOffset=function(e){var t=e.getBoundingClientRect(),i=e.ownerDocument,s=i.body,n=i.documentElement,a=n.clientTop||s.clientTop||0,o=n.clientLeft||s.clientLeft||0,r=1;if(s.getBoundingClientRect){var l=s.getBoundingClientRect();r=(l.right-l.left)/s.clientWidth}return r>1&&(a=0,o=0),{top:t.top/r+(window.pageYOffset||n&&n.scrollTop/r||s.scrollTop/r)-a,left:t.left/r+(window.pageXOffset||n&&n.scrollLeft/r||s.scrollLeft/r)-o}};else var getOffset=function(e){var t=0,i=0;do{t+=e.offsetTop||0,i+=e.offsetLeft||0,e=e.offsetParent}while(e);return{left:i,top:t}};var toElement=function(){var e=document.createElement("div");return function(t){e.innerHTML=t;var i=e.firstChild;return e.removeChild(i)}}(),getUID=function(){var e=0;return function(){return"ValumsAjaxUpload"+e++}}();window.AjaxUpload=function(e,t){this._settings={action:"upload.php",name:"userfile",data:{},autoSubmit:!0,responseType:!1,hoverClass:"hover",focusClass:"focus",disabledClass:"disabled",onChange:function(){},onSubmit:function(){},onComplete:function(){}};for(var i in t)t.hasOwnProperty(i)&&(this._settings[i]=t[i]);if(e.jquery?e=e[0]:"string"==typeof e&&(/^#.*/.test(e)&&(e=e.slice(1)),e=document.getElementById(e)),!e||1!==e.nodeType)throw new Error("Please make sure that you're passing a valid element");"A"==e.nodeName.toUpperCase()&&addEvent(e,"click",function(e){e&&e.preventDefault?e.preventDefault():window.event&&(window.event.returnValue=!1)}),this._button=e,this._input=null,this._disabled=!1,this.enable(),this._rerouteClicks()},AjaxUpload.prototype={setData:function(e){this._settings.data=e},disable:function(){addClass(this._button,this._settings.disabledClass),this._disabled=!0;var e=this._button.nodeName.toUpperCase();"INPUT"!=e&&"BUTTON"!=e||this._button.setAttribute("disabled","disabled"),this._input&&(this._input.parentNode.style.visibility="hidden")},enable:function(){removeClass(this._button,this._settings.disabledClass),this._button.removeAttribute("disabled"),this._disabled=!1},_createInput:function(){var e=this,t=document.createElement("input");this._input=t,t.setAttribute("type","file"),t.setAttribute("name",this._settings.name),t.className="js-ajaxupload-button";var i=document.createElement("div");if(i.appendChild(t),addStyles(t,{position:"absolute",right:0,margin:0,padding:0,fontSize:"480px",fontFamily:"sans-serif",cursor:"pointer"}),addStyles(i,{display:"block",position:"absolute",overflow:"hidden",margin:0,padding:0,opacity:0,direction:"ltr",zIndex:2147483583}),"0"!==i.style.opacity){if("undefined"==typeof i.filters)throw new Error("Opacity not supported by the browser");i.style.filter="alpha(opacity=0)"}addEvent(t,"change",function(){if(t&&""!==t.value){var i=fileFromPath(t.value);if(!1===e._settings.onChange.call(e,i,getExt(i)))return void e._clearInput();e._settings.autoSubmit&&e.submit()}}),addEvent(t,"mouseover",function(){addClass(e._button,e._settings.hoverClass)}),addEvent(t,"mouseout",function(){removeClass(e._button,e._settings.hoverClass),removeClass(e._button,e._settings.focusClass),t.parentNode&&(t.parentNode.style.left=-9999)}),addEvent(t,"focus",function(){addClass(e._button,e._settings.focusClass)}),addEvent(t,"blur",function(){removeClass(e._button,e._settings.focusClass)}),document.body.appendChild(i)},_clearInput:function(){this._input&&(removeNode(this._input.parentNode),this._input=null,this._createInput(),removeClass(this._button,this._settings.hoverClass),removeClass(this._button,this._settings.focusClass))},_rerouteClicks:function(){var e=this;addEvent(e._button,"mouseover",function(){if(!e._disabled&&!this.disabled){e._input||e._createInput();var t=e._input.parentNode;copyLayout(e._button,t),t.style.visibility="visible"}})},_createIframe:function(){var e=getUID(),t=toElement('<iframe src="javascript:false;" name="'+e+'" />');return t.setAttribute("id",e),t.style.display="none",document.body.appendChild(t),t},_createForm:function(e){var t=this._settings,i=toElement('<form method="post" enctype="multipart/form-data"></form>');i.setAttribute("action",t.action),i.setAttribute("target",e.name),i.style.display="none",document.body.appendChild(i);for(var s in t.data)if(t.data.hasOwnProperty(s)){var n=document.createElement("input");n.setAttribute("type","hidden"),n.setAttribute("name",s),n.setAttribute("value",t.data[s]),i.appendChild(n)}return i},_getResponse:function(iframe,file){var toDeleteFlag=!1,self=this,settings=this._settings;addEvent(iframe,"load",function(){if("javascript:'%3Chtml%3E%3C/html%3E';"==iframe.src||"javascript:'<html></html>';"==iframe.src)return void(toDeleteFlag&&setTimeout(function(){removeNode(iframe)},0));var doc=iframe.contentDocument?iframe.contentDocument:window.frames[iframe.id].document;if(!(doc.readyState&&"complete"!=doc.readyState||doc.body&&"false"==doc.body.innerHTML)){var response;doc.XMLDocument?response=doc.XMLDocument:doc.body?(response=doc.body.innerHTML,settings.responseType&&"json"==settings.responseType.toLowerCase()&&(doc.body.firstChild&&"PRE"==doc.body.firstChild.nodeName.toUpperCase()&&(doc.normalize(),response=doc.body.firstChild.firstChild.nodeValue),response=response?eval("("+response+")"):{})):response=doc,settings.onComplete.call(self,file,response),toDeleteFlag=!0,iframe.src="javascript:'<html></html>';"}})},submit:function(){var e=this,t=this._settings;if(this._input&&""!==this._input.value){var i=fileFromPath(this._input.value);if(!1===t.onSubmit.call(this,i,getExt(i)))return void this._clearInput();var s=this._createIframe(),n=this._createForm(s);removeNode(this._input.parentNode),removeClass(e._button,e._settings.hoverClass),removeClass(e._button,e._settings.focusClass),n.appendChild(this._input),n.submit(),removeNode(n),n=null,removeNode(this._input),this._input=null,this._getResponse(s,i),this._createInput()}}}}(),ProductsListEdit=function(){var e={},t=function(){$doc.on("click",".product-set-priority",function(e){e.preventDefault();var t=$(this);a(t.data("id"),t.data("value"))}),$doc.on("click",".js-cost-dog-link, .js-edit-price, span.edit-box-link, .plilp-value span",function(){var e=$(this);return $.ajax({url:e.data("url"),type:"post",success:function(e){$("#popup-content").html(e).show()},failure:function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430. \u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u043d\u0430\u043c \u043e\u0431 \u044d\u0442\u043e\u043c \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e.")},beforeSend:function(){u_showLoading()},complete:function(){u_reRenderPopup(null,null,e.data("selector")),$doc.trigger("openPriceOrExistPopup")}}),!1})},i=function(){$(".js-fullness-edit").one("mouseenter",function(){qtipMessageS($(this),$(".js-qtip-content"),"hoverModern")}),$doc.on("reload:listing-switcher",function(){$(".js-modern-qtip").remove(),qtipMessageS(".js-fullness-edit",$(".js-qtip-content"),"hoverModern")}),$doc.on("editFormSubmit",function(e,t){qtipMessageS($(".js-fullness-edit[data-id = "+t+"]"),!1,"hoverModern")}),$doc.on("showModernQtip",function(e,t,i){var a,o=$(t);i.find(".qtip-content").is(":empty")&&s(i,o),a=i.find(".js-qc-items"),a.is(":empty")&&n(o,a),i.toggleClass("under",o.offset().top-$win.scrollTop()-o.height()<i.height())}),$doc.on("click",".js-qc-help-link",function(){openStaticPopup("js-battery-help-text")})},s=function(e,t){var i="\u0412\u044b\u0448\u0435 \u0437\u0430\u0440\u044f\u0434 - \u0432\u044b\u0448\u0435 \u043f\u043e\u0437\u0438\u0446\u0438\u044f!";t.data("full-rate")&&(i="\u0417\u0430\u0440\u044f\u0434 100%! <br/> \u041e\u0444\u043e\u0440\u043c\u0438\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0435 \u043f\u0440\u0435\u0434\u043b\u043e\u0436\u0435\u043d\u0438\u044f",e.addClass("full-rate")),e.find(".qtip-content").addClass("js-qtip-content").append($("<p>").html(i)).append($("<div>").addClass("qc-items js-qc-items")).append($("<span>").addClass("qc-help-link js-qc-help-link").html("\u0412\u0441\u0435 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440\u044b"))},n=function(t,i){$.each(e.product_rates[t.data("id")],function(e,s){var n=s.text;i.append($("<p>").addClass("qc-item").append($('<span class="fl mr5">').html("+ "+s.rate+"%")).append($("<a>").addClass("qci-link").attr("href",t.parents(".js-cpl-edit").find(".js-edit-good").attr("href")+"#"+e+"-anchor").html(n).toggleClass("announce-change",!!~n.indexOf("invalid"))))})},a=function(t,i){i||$.ajax({type:"post",url:e.set_priority_url.replace("9999",t),beforeSend:function(){ListingSwitcher.coverList()},success:function(){ListingSwitcher.reloadListing("list","",!0)},error:function(){alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0438 \u043f\u0440\u0438\u043e\u0440\u0438\u0442\u0435\u0442\u0430"),ListingSwitcher.unCoverList()}})};return{initialize:function(s){e=s||{},t(),i(),alertCheckWindow("a","*[data-index]","#alert-message",'<div id="alert-message"><div class="alert-message clearfix"><h1 class="rate-header">\u0412\u043d\u0438\u043c\u0430\u043d\u0438\u0435!</h1><div class="blue-box"><p>\u0412\u044b \u0432\u044b\u0434\u0435\u043b\u0438\u043b\u0438 \u0434\u043b\u044f \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f <strong class="amount">N.</strong></p><p>\u041f\u0440\u0438 \u043f\u0435\u0440\u0435\u0445\u043e\u0434\u0435 \u043d\u0430 \u0434\u0440\u0443\u0433\u0443\u044e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443 \u0432\u0441\u0435 \u0432\u044b\u0434\u0435\u043b\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b.</p><p><strong>\u0412\u044b \u0442\u043e\u0447\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0439\u0442\u0438 \u0441\u043e \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u044b?</strong></p></div><div class="spisok"><ul><li><a href="#" class="spisok-link spisok-link-left" onclick = "hidePopup(\'popup-container\'); return false;" ><i class="spisok-icon spisok-icon-left">&larr;</i>\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044e</a></li><li class="last"><a href="#" class="spisok-link spisok-link-right continue">\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c<i class="spisok-icon spisok-icon-right">&rarr;</i></a></li></ul></div></div></div>',".prod-cb-edit input"),exitButton(".js-toolbar-link-cabinet","#products-list input[type=checkbox]")},updateRate:function(t){e.product_rates[t.product_id]=t.rate}}}(),ListingSwitcher=function(){var e,t,i,s,n,a,o,r,l,c;return{initialize:function(a,o,r,l,c){e=r,t=o,i=l,s=c,n=a},afterChangeListingStyle:function(e){a=e},afterChangeListingSort:function(e){o=e},afterChangeListingGrouped:function(e){l=e},afterReloadListing:function(e){r=e},applyListingStyle:function(e,i,s){c||(e.attr("data-type",i),t=i,this.reloadListing(s),a&&a(i))},toggleListingSortOrder:function(t,i,s){!c&&i&&(t.attr("data-order","desc"===t.attr("data-order")?"asc":"desc"),e="rating"!==i&&"rubrics"!==i?i+"_"+t.attr("data-order"):"",this.reloadListing(s),o&&o(e))},toggleListingSortType:function(t,i,s,n){"rating"!==i&&"rubrics"!==i?(t.removeClass("disabled"),e=s?i:i+"_"+t.attr("data-order")):(t.attr("data-order","asc").addClass("disabled"),e=""),this.reloadListing(n),o&&o(e)},coverList:function(){var e,t=$("#"+n);$doc.data("listing-cover")||(e=$("<div>").attr({id:"listing-cover"}),$doc.data("listing-cover",e),$("body").append($doc.data("listing-cover"))),$doc.data("listing-cover").css({width:t.width()+40,height:t.height(),left:t.offset().left-20,top:t.offset().top}).show()},unCoverList:function(){$doc.data("listing-cover").hide()},reloadListing:function(){this.coverList(),c=!0,$.ajax({type:"GET",url:i,data:$.extend({},s,{listing_sort:e,listing_style:t}),success:function(i){$("#"+n).html(i),r&&r(t,e)},complete:function(){$doc.data("listing-cover").hide(),c=!1,$doc.trigger("reload:listing-switcher"),$doc.trigger("spansToLinks")}})},getCurrentStyle:function(){return t},getCurrentSort:function(){return e}}}(),$(document).ready(inputLengthCheck()),function(e){var t={},i=[],s=[],n={interval:5e3,showPager:!1,stopHover:!0,showClose:!0,pagerActiveClass:"active",sliderContentClass:"js-actum-content",classPagerContainer:"js-actum-pager",stopOnSelect:!1,cookiesPrefix:"disable-hint-",cookiesExpires:0},a=function(e,t){var i=e.data("options");e.find("."+i.sliderContentClass).html(t.body)},o=function(e){clearInterval(s[e])},r=function(e){var t=i[e].container.data("options");i[e].content.length>1&&(void 0===i[e].container.data("selected")||!t.stopOnSelect)&&t.interval&&(s[e]=setInterval(function(){v(e)},t.interval))},l=function(e){o(e),r(e)},c=function(){e.each(s,function(e){o(e)})},h=function(){e.each(s,function(e){r(e)})},d=function(e){v(e),!t.stopHover&&l(e),$doc.trigger("actum:arrowClick")},u=function(e){v(e,-1),!t.stopHover&&l(e),$doc.trigger("actum:arrowClick")},p=function(t){var s,n,a,r,l=t.data("id"),c=t.data("options");t.find("."+c.classPagerContainer).remove(),c.showPager&&i[l].content.length>1&&(s=e('<div class="'+c.classPagerContainer+'"></div>'),c.classLeftArrow&&c.classRightArrow&&(a=e('<a href="#" class="'+c.classLeftArrow+'"></a>').click(function(){return u(l),!1}),r=e('<a href="#" class="'+c.classRightArrow+'"></a>').click(function(){return d(l),!1})),s.append(a,r),n=e("<ul>").addClass(c.pagerClass),e(i[l].content).each(function(e){n.append("<li class="+c.pagerClass+'-item data-id="'+e+'">'+(e+1)+"</li>")}),n.children("li").click(function(){var i=parseInt(e(this).data("id"));return v(l,1,i),t.data("selected",i),c.stopOnSelect&&o(l),$doc.trigger("actum:pagerClick"),!1}),s.append(n),t.append(s))},f=function(t){var s=i[t].active,n=i[t].container.data("options");e.cookie(n.cookiesPrefix+i[t].content[s].id,1,{path:"/",expires:n.cookiesExpires||0}),i[t].content.splice(i[t].active,1),i[t].content.length?(p(i[t].container),v(t,1,s),n.stopHover||l(t)):(c(),i[t].container.remove()),$doc.trigger("actum:closePage")},m=function(i){var s=i.data("id"),n=e('<div class="js-actum-close-btn '+t.classCloseBtn+'"></div>');n.click(function(){f(s)}),i.append(n)},g=function(t){e.each(i[t].content,function(){f(t)})},v=function(e,t,s){var t=t||1,n=i[e].content,o=i[e].active+t,r=i[e].container,c=i[e].container.data("options");s!=undefined&&(o=s,c.stopHover||l(e)),o>=n.length&&(o=0),o<0&&(o=n.length-1),c.showPager&&(r.find("."+c.classPagerContainer+" li").removeClass(c.pagerActiveClass),r.find("."+c.classPagerContainer+" li:eq("+o+")").addClass(c.pagerActiveClass)),a(r,n[o]),i[e].active=o},_=function(e){var s=e.data("id"),n=e.append("<div class="+t.sliderContentClass+">");e.show(),t.stopHover&&n.hover(function(){o(s)},function(){r(s)}),p(e),i[s].content.length?(t.showClose&&m(e),v(s),r(s)):e.remove()},b=function(s){s.each(function(){var s,n=0,a=[],o=e(this).data({options:e.extend({},t)});o.children("div").each(function(){var i=e(this);e.cookie(t.cookiesPrefix+i.attr("id"))||(a[n++]={id:i.attr("id"),body:i.html()})}),o.empty(),s=i.push({content:a,active:-1,container:o})-1,o.data("id",s).show(),_(o)})},y={init:function(i){e.extend(t,n,i),b(this)},stop:function(e){o(e)},stopAll:function(){c()},start:function(e){r(e)},startAll:function(){h()},closeCurrentPage:function(){f(this.data("id"))},closeAllPages:function(){g(this.data("id"))},swipeleft:function(e){d(e)},swiperight:function(e){u(e)}};e.fn.actum=function(t){return"object"!=typeof t&&t?y[t]?y[t].apply(this,Array.prototype.slice.call(arguments,1)):void e.error("\u041c\u0435\u0442\u043e\u0434 "+t+" \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u0432 jQuery.actum"):y.init.apply(this,arguments)}}(jQuery),ClearanceInline=function(){var e=!1;return _init=function(){var e=$(".js-text-field-email-message-"),t=$(".js-textarea-cover-mes- textarea"),i=$(".js-textarea-placeholder-");$(".js-password-link").click(function(){var e=$(this),t=$(".js-text-field-password-"),i=t.prev();return""==t.val()||i.length&&""==i.val()?(alert('\u041f\u043e\u043b\u0435 "\u043f\u0430\u0440\u043e\u043b\u044c" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0437\u0430\u043f\u043e\u043b\u043d\u0435\u043d\u043e'),!1):(i.length||(t.before('<input class="text-field- dn" type="text">'),i=t.prev()),toggleText("\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c","\u0421\u043a\u0440\u044b\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c",e.text(),e),t.is(":visible")?i.val(t.val()):t.val(i.val()),t.toggle().prev().toggle(),!1)}),$(".js-textarea-cover-mes-").click(function(){i.hide(),t.focus()}),t.blur(function(){""==$(this).val()&&i.show()}),e.blur(function(){checkEmail($(this))?_emailCheck(e.val()):($(".js-form-error-email").toggle(!!e.parent(".js-input-email-").length),$(".if-wrong-email, .if-right-email").hide(),$(".message-form-password-message").remove(),u_reRenderPopup())}),$(".js-text-field-password-").blur(function(){$(".js-message-form-double-pass-").val($(this).val())}),e.length&&""!=e.val()&&_emailCheck(e.val()),$(".js-change-password").click(function(){var t=$(this),i=$(".js-message-form");return t.next().remove(),$.ajax({type:"post",url:"/users/password",data:{"password[email]":e.val()},dataType:"html",beforeSend:function(){i.addClass("message-form-loading")},success:function(e){t.after($(e).find(".flash-message").html()).next().addClass("message-form-password-message")},complete:function(){u_reRenderPopup(),i.removeClass("message-form-loading")}}),!1}),$(".js-text-field-password-").blur(function(){$(".message-form-password-message").remove()})},_emailCheck=function(t){var i=$(".js-text-field-email-message-");$.ajax({type:"post",url:"/ajax/check_uniq_email?email="+t,beforeSend:function(){i.addClass("text-field-loading-")},success:function(t){var s,n=$(".js-help-message-block-"),a=$(".js-form-error-email"),o=$(".if-right-email"),r=$(".if-wrong-email"),l=$(".if-right-email.if-wrong-email");$(".js-field-user- input").prop("checked",!1),"true"==t?(s="<p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c e-mail \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.</p><b>\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043f\u0430\u0440\u043e\u043b\u044c, \u0435\u0441\u043b\u0438 \u0432\u044b \u0435\u0433\u043e \u043d\u0435 \u043f\u043e\u043c\u043d\u0438\u0442\u0435, \u0432\u043e\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435\u0441\u044c \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435\u043c \u043f\u0430\u0440\u043e\u043b\u044f.</b>",o.show(),r.hide(),l.show(),$(".js-field-user- .message-form-old").prop("checked",!0),n.html(s),a.hide(),u_reRenderPopup(),e=!1):(s="<p>\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0441 \u0442\u0430\u043a\u0438\u043c e-mail \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.</p><b>\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f \u0438 \u0444\u0430\u043c\u0438\u043b\u0438\u044e, \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0439\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0434\u043b\u044f \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438.</b>",""==i.val()&&(s="<b>\u0414\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0439 e-mail.</b><p>\u041d\u0430 \u0432\u0430\u0448 e-mail \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435 \u043e\u0431 \u043e\u0442\u0432\u0435\u0442\u0435 \u0438 \u043f\u0438\u0441\u044c\u043c\u043e \u043e \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438.</p>"),r.show(),o.hide(),l.show(),$(".js-field-user- .message-form-new").prop("checked",!0),n.html(s),a.hide(),e=!0,u_reRenderPopup()),i.removeClass("text-field-loading-")}})},_toggleTextareaPlaceholder=function(){$(".js-textarea-cover-mes-").trigger("click").find("textarea").trigger("blur")},{init:function(){_init()},toggleTextareaPlaceholder:function(){_toggleTextareaPlaceholder()},isUserNew:function(){return e}}}(),window.fillTraitValueRequest=function(e,t){$("#trait-new-value-request-trait-id").val(e),$("#trait-new-value-request-rubric-id").val(t)},window.clearFlashInTraitPopup=function(){$("#traits-new-value-popup .flash-message").removeClass("failure success"),$("#traits-new-value-popup .flash-message p").empty(),$("#traits-new-value-popup .flash").hide()},window.changeFlashTraitMessage=function(e,t){$("#traits-new-value-popup .flash-message").addClass(e),$("#traits-new-value-popup .flash-message p").html(t),$("#traits-new-value-popup .flash").show()},window.showFlashTraitMessage=function(e,t,i,s,n){"error"==i?changeFlashTraitMessage("failure",s):t.responseText.length?changeFlashTraitMessage("failure",t.responseText):(fillTraitValueRequest("",""),changeFlashTraitMessage("success",n),setTimeout(function(){hidePopup("traits-new-value-popup"),clearFlashInTraitPopup()},500))},function(){if(!jQuery||!jQuery.jstree){var e=!1,t=!1,i=!1;!function(s){s.vakata={},s.vakata.css={get_css:function(e,t,i){e=e.toLowerCase();var s=i.cssRules||i.rules,n=0;do{if(s.length&&n>s.length+5)return!1;if(s[n].selectorText&&s[n].selectorText.toLowerCase()==e)return!0===t?(i.removeRule&&i.removeRule(n),i.deleteRule&&i.deleteRule(n),!0):s[n]}while(s[++n]);return!1},add_css:function(e,t){return!s.jstree.css.get_css(e,!1,t)&&(t.insertRule?t.insertRule(e+" { }",0):t.addRule(e,null,0),s.vakata.css.get_css(e))},remove_css:function(e,t){return s.vakata.css.get_css(e,!0,t)},add_sheet:function(e){var t=!1,i=!0;if(e.str)return e.title&&(t=s("style[id='"+e.title+"-stylesheet']")[0]),t?i=!1:(t=document.createElement("style"),t.setAttribute("type","text/css"),e.title&&t.setAttribute("id",e.title+"-stylesheet")),t.styleSheet?i?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str:(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return t=document.createElement("link"),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(e){}}}};var n=[],a=-1,o={},r={};s.fn.jstree=function(e){var t="string"==typeof e,i=Array.prototype.slice.call(arguments,1),a=this;if(t){if("_"==e.substring(0,1))return a;this.each(function(){var t=n[s.data(this,"jstree_instance_id")],o=t&&s.isFunction(t[e])?t[e].apply(t,i):t;if(void 0!==o&&(0===e.indexOf("is_")||!0!==o&&!1!==o))return a=o,!1})}else this.each(function(){var t=s.data(this,"jstree_instance_id"),a=[],r=e?s.extend({},!0,e):{},l=s(this),c=!1,h=[];a=a.concat(i),l.data("jstree")&&a.push(l.data("jstree")),r=a.length?s.extend.apply(null,[!0,r].concat(a)):r,void 0!==t&&n[t]&&n[t].destroy(),t=parseInt(n.push({}),10)-1,s.data(this,"jstree_instance_id",t),r.plugins=s.isArray(r.plugins)?r.plugins:s.jstree.defaults.plugins.slice(),r.plugins.unshift("core"),r.plugins=r.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),c=s.extend(!0,{},s.jstree.defaults,r),c.plugins=r.plugins,s.each(o,function(e){-1===s.inArray(e,c.plugins)?(c[e]=null,delete c[e]):h.push(e)}),c.plugins=h,n[t]=new s.jstree._instance(t,s(this).addClass("jstree jstree-"+t),c),s.each(n[t]._get_settings().plugins,function(e,i){n[t].data[i]={}}),s.each(n[t]._get_settings().plugins,function(e,i){o[i]&&o[i].__init.apply(n[t])}),setTimeout(function(){n[t]&&n[t].init()},0)});return a},s.jstree={defaults:{plugins:[]},_focused:function(){return n[a]||null},_reference:function(e){if(n[e])return n[e];var t=s(e);return t.length||"string"!=typeof e||(t=s("#"+e)),t.length?n[t.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(e,t,i){this.data={core:{}},this.get_settings=function(){return s.extend(!0,{},i)},this._get_settings=function(){return i},this.get_index=function(){return e},this.get_container=function(){return t},this.get_container_ul=function(){return t.children("ul:eq(0)")},this._set_settings=function(e){i=s.extend(!0,{},i,e)}},_fn:{},plugin:function(e,t){t=s.extend({},{__init:s.noop,__destroy:s.noop,_fn:{},defaults:!1},t),o[e]=t,s.jstree.defaults[e]=t.defaults,s.each(t._fn,function(t,i){i.plugin=e,i.old=s.jstree._fn[t],s.jstree._fn[t]=function(){var e,n=i,a=Array.prototype.slice.call(arguments),o=new s.Event("before.jstree"),r=!1;if(!0!==this.data.core.locked||"unlock"===t||"is_locked"===t){do{if(n&&n.plugin&&-1!==s.inArray(n.plugin,this._get_settings().plugins))break;n=n.old}while(n);if(n){if(0===t.indexOf("_"))e=n.apply(this,a);else{if(!1===(e=this.get_container().triggerHandler(o,{func:t,inst:this,args:a,plugin:n.plugin})))return;void 0!==e&&(a=e),e=n.apply(s.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:a,rslt:e,rlbk:r})},__rollback:function(){return r=this.get_rollback()},__call_old:function(e){return n.old.apply(this,e?Array.prototype.slice.call(arguments,1):a)}}),a)}return e}}},s.jstree._fn[t].old=i.old,s.jstree._fn[t].plugin=e})},rollback:function(e){e&&(s.isArray(e)||(e=[e]),s.each(e,function(e,t){n[t.i].set_rollback(t.h,t.d)}))}},s.jstree._fn=s.jstree._instance.prototype={},s(function(){var n=navigator.userAgent.toLowerCase(),a=(n.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],o=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(n)&&6==parseInt(a,10)){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}o+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(n)&&7==parseInt(a,10)&&(t=!0,o+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(n)&&/mozilla/.test(n)&&parseFloat(a,10)<1.9&&(i=!0,o+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),s.vakata.css.add_sheet({str:o,title:"jstree"})}),s.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),
this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",s.proxy(function(e){var t=s(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",s.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(){var e;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){e=window.getSelection();try{e.removeAllRanges(),e.collapse()}catch(e){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",s.proxy(function(e,t){var i=this._get_node(t.rslt.obj),n=this;-1===i&&(i=this.get_container_ul()),i.length&&i.find("li").each(function(){var e=s(this);e.data("jstree")&&s.each(e.data("jstree"),function(t,i){n.data[t]&&s.isFunction(n["_"+t+"_notify"])&&n["_"+t+"_notify"].call(n,e,i)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",s.proxy(function(e,t){var i=this._get_node(t.rslt.obj),n=this;-1===i&&(i=this.get_container_ul()),i.length&&i.find("li.jstree-open:not(:has(ul))").each(function(){n.load_node(this,s.noop,s.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),i=this._get_settings(),r=this;if(s.each(i.plugins,function(e,t){try{o[t].__destroy.apply(r)}catch(e){}}),this.__callback(),this.is_focused())for(e in n)if(n.hasOwnProperty(e)&&e!=t){n[e].set_focus();break}t===a&&(a=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),s(document).unbind(".jstree-"+t).undelegate(".jstree-"+t),n[t]=null,delete n[t]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,i=!0,n=[],a=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=s.map(s.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=s.map(s.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(s.each(this.data.core.to_load,function(e,t){if("#"==t)return!0;s(t).length?n.push(t):a.push(t)}),n.length&&(this.data.core.to_load=a,s.each(n,function(e,s){t._is_loaded(s)||(t.load_node(s,function(){t.reload_nodes(!0)},function(){t.reload_nodes(!0)}),i=!1)}))),this.data.core.to_open.length&&s.each(this.data.core.to_open,function(e,i){t.open_node(i,!1,!0)}),i&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var e=this;this.data.core.to_open.length&&s.each(this.data.core.to_open,function(t,i){e.open_node(i,!1,!0)}),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),e=this._get_node(e),e||(e=-1),-1!==e?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,function(){t.__callback({obj:e}),t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var e=s.jstree._focused();e&&e.unset_focus(),this.get_container().addClass("jstree-focused"),a=this.get_index(),this.__callback()}},is_focused:function(){return a==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),a=-1),this.__callback()},_get_node:function(e){var t=s(e,this.get_container());return t.is(".jstree")||-1==e?-1:(t=t.closest("li",this.get_container()),!!t.length&&t)},_get_next:function(e,t){return e=this._get_node(e),-1===e?this.get_container().find("> ul > li:first-child"):!!e.length&&(t?e.nextAll("li").size()>0&&e.nextAll("li:eq(0)"):e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0))},_get_prev:function(e,t){if(-1===(e=this._get_node(e)))return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0&&e.prevAll("li:eq(0)");if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass("jstree-open");)e=e.children("ul:eq(0)").children("li:last");return e}var i=e.parentsUntil(".jstree","li:eq(0)");return!!i.length&&i},_get_parent:function(e){if(-1==(e=this._get_node(e))||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return e=this._get_node(e),-1===e?this.get_container().children("ul:eq(0)").children("li"):!!e.length&&e.children("ul:eq(0)").children("li")},get_path:function(e,t){var i=[],s=this;return!(-1===(e=this._get_node(e))||!e||!e.length)&&(e.parentsUntil(".jstree","li").each(function(){i.push(t?this.id:s.get_text(this))}),i.reverse(),i.push(t?e.attr("id"):this.get_text(e)),i)},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-open")},is_closed:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-closed")},is_leaf:function(e){return(e=this._get_node(e))&&-1!==e&&e.hasClass("jstree-leaf")},correct_state:function(e){if(!(e=this._get_node(e))||-1===e)return!1;e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},open_node:function(t,i,s){if(t=this._get_node(t),!t.length)return!1;if(!t.hasClass("jstree-closed"))return i&&i.call(),!1;var n=s||e?0:this._get_settings().core.animation,a=this;this._is_loaded(t)?(this._get_settings().core.open_parents&&t.parentsUntil(".jstree",".jstree-closed").each(function(){a.open_node(this,!1,!0)}),n&&t.children("ul").css("display","none"),t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),n?t.children("ul").stop(!0,!0).slideDown(n,function(){this.style.display="",a.after_open(t)}):a.after_open(t),this.__callback({obj:t}),i&&i.call()):(t.children("a").addClass("jstree-loading"),this.load_node(t,function(){a.open_node(t,i,s)},i))},after_open:function(e){this.__callback({obj:e})},close_node:function(t,i){t=this._get_node(t);var s=i||e?0:this._get_settings().core.animation,n=this;if(!t.length||!t.hasClass("jstree-open"))return!1;s&&t.children("ul").attr("style","display:block !important"),t.removeClass("jstree-open").addClass("jstree-closed"),s?t.children("ul").stop(!0,!0).slideUp(s,function(){this.style.display="",n.after_close(t)}):n.after_close(t),this.__callback({obj:t})},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){return e=this._get_node(e),e.hasClass("jstree-closed")?this.open_node(e):e.hasClass("jstree-open")?this.close_node(e):void 0},open_all:function(e,t,i){e=e?this._get_node(e):-1,e&&-1!==e||(e=this.get_container_ul()),i?e=e.find("li.jstree-closed"):(i=e,e=e.is(".jstree-closed")?e.find("li.jstree-closed").andSelf():e.find("li.jstree-closed"));var s=this;e.each(function(){var e=this;s._is_loaded(this)?s.open_node(this,!1,!t):s.open_node(this,function(){s.open_all(e,t,i)},!t)}),0===i.find("li.jstree-closed").length&&this.__callback({obj:i})},close_all:function(e,t){var i=this;e=e?this._get_node(e):this.get_container(),e&&-1!==e||(e=this.get_container_ul()),e.find("li.jstree-open").andSelf().each(function(){i.close_node(this,!t)}),this.__callback({obj:e})},clean_node:function(e){e=e&&-1!=e?s(e):this.get_container_ul(),e=e.is("li")?e.find("li").andSelf():e.find("li"),e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e){this.__callback({obj:e})},_is_loaded:function(){return!0},create_node:function(e,t,i,n,a){e=this._get_node(e),t=void 0===t?"last":t;var o,r=s("<li />"),l=this._get_settings().core;if(-1!==e&&!e.length)return!1;if(!a&&!this._is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,n,!0)}),!1;switch(this.__rollback(),"string"==typeof i&&(i={data:i}),i||(i={}),i.attr&&r.attr(i.attr),i.metadata&&r.data(i.metadata),i.state&&r.addClass("jstree-"+i.state),i.data||(i.data=this._get_string("new_node")),s.isArray(i.data)||(o=i.data,i.data=[],i.data.push(o)),s.each(i.data,function(e,t){o=s("<a />"),s.isFunction(t)&&(t=t.call(this,i)),"string"==typeof t?o.attr("href","#")[l.html_titles?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),o.attr(t.attr)[l.html_titles?"html":"text"](t.title),t.language&&o.addClass(t.language)),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&i.icon&&(t.icon=i.icon),t.icon&&(-1===t.icon.indexOf("/")?o.children("ins").addClass(t.icon):o.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),r.append(o)}),r.prepend("<ins class='jstree-icon'>&#160;</ins>"),-1===e&&(e=this.get_container(),"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(r),o=this._get_parent(e);break;case"after":e.after(r),o=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(r),o=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(r),o=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),o=e.children("ul").children("li").eq(t),o.length?o.before(r):e.children("ul").append(r),o=e}return-1!==o&&o.get(0)!==this.get_container().get(0)||(o=-1),this.clean_node(o),this.__callback({obj:r,parent:o}),n&&n.call(this,r),r},get_text:function(e){if(e=this._get_node(e),!e.length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0],e.nodeValue)},set_text:function(e,t){if(e=this._get_node(e),!e.length)return!1;if(e=e.children("a:eq(0)"),this._get_settings().core.html_titles){var i=e.children("INS").clone();return e.html(t).prepend(i),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){if(e=this._get_node(e),!e.length)return!1;this.__rollback();var t=this._get_parent(e),i=s([]),n=this;return e.each(function(){i=i.add(n._get_prev(this))}),e=e.detach(),-1!==t&&0===t.find("> ul > li").length&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:i,parent:t}),e},prepare_move:function(e,t,i,n,a){var o={};if(o.ot=s.jstree._reference(e)||this,o.o=o.ot._get_node(e),o.r=-1===t?-1:this._get_node(t),o.p=void 0===i||!1===i?"last":i,!a&&r.o&&r.o[0]===o.o[0]&&r.r[0]===o.r[0]&&r.p===o.p)return this.__callback(r),void(n&&n.call(this,r));if(o.ot=s.jstree._reference(o.o)||this,o.rt=s.jstree._reference(o.r)||this,-1!==o.r&&o.r){if(!/^(before|after)$/.test(o.p)&&!this._is_loaded(o.r))return this.load_node(o.r,function(){this.prepare_move(e,t,i,n,!0)});switch(o.p){case"before":o.cp=o.r.index(),o.cr=o.rt._get_parent(o.r);break;case"after":o.cp=o.r.index()+1,o.cr=o.rt._get_parent(o.r);break;case"inside":case"first":o.cp=0,o.cr=o.r;break;case"last":o.cp=o.r.find(" > ul > li").length,o.cr=o.r;break;default:o.cp=o.p,o.cr=o.r}}else switch(o.cr=-1,o.p){case"first":case"before":case"inside":o.cp=0;break;case"after":case"last":o.cp=o.rt.get_container().find(" > ul > li").length;break;default:o.cp=o.p}o.np=-1==o.cr?o.rt.get_container():o.cr,o.op=o.ot._get_parent(o.o),o.cop=o.o.index(),-1===o.op&&(o.op=o.ot?o.ot.get_container():this.get_container()),!/^(before|after)$/.test(o.p)&&o.op&&o.np&&o.op[0]===o.np[0]&&o.o.index()<o.cp&&o.cp++,o.or=o.np.find(" > ul > li:nth-child("+(o.cp+1)+")"),r=o,this.__callback(r),n&&n.call(this,r)},check_move:function(){var e=r,t=!0,i=-1===e.r?this.get_container():e.r;return!(!e||!e.o||e.or[0]===e.o[0])&&((!e.op||!e.np||e.op[0]!==e.np[0]||e.cp-1!==e.o.index())&&(e.o.each(function(){if(-1!==i.parentsUntil(".jstree","li").andSelf().index(this))return t=!1,!1}),t))},move_node:function(e,t,i,n,a,o){if(!a)return this.prepare_move(e,t,i,function(e){this.move_node(e,!1,!1,n,!0,o)});if(n&&(r.cy=!0),!o&&!this.check_move())return!1;this.__rollback();var l=!1;n?(l=e.o.clone(!0),l.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||s("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(e){}return n&&(r.cy=!0,r.oc=l),this.__callback(r),r},_get_move:function(){return r}}})}(jQuery),function(e){var t,i,s;e(function(){/msie/.test(navigator.userAgent.toLowerCase())?(i=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),s=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=i.width()-s.width(),i.add(s).remove()):(i=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-i.width(),i.parent().remove())}),e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault(),t.currentTarget.blur(),e(t.currentTarget).hasClass("jstree-loading")||this.select_node(t.currentTarget,!0,t)},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.hover_node(t.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.dehover_node(t.target)},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,i){var s=this._get_settings().ui,n=this._get_node(i.rslt.obj),a=n&&n.length?n.children("ul").find("a.jstree-clicked"):e(),o=this;!1!==s.selected_parent_close&&a.length&&a.each(function(){o.deselect_node(this),"select_parent"===s.selected_parent_close&&o.select_node(n)})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var i=this._get_settings().ui.select_prev_on_delete,s=this._get_node(t.rslt.obj),n=s&&s.length?s.find("a.jstree-clicked"):[],a=this;n.each(function(){a.deselect_node(this)}),i&&n.length&&t.rslt.prev.each(function(){if(this.parentNode)return a.select_node(this),!1})},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,i){if(void 0===t||null===t)return i?this.data.ui.selected:this.data.ui.last_selected;var s=e(t,this.get_container());return s.is(".jstree")||-1==t?-1:(s=s.closest("li",this.get_container()),!!s.length&&s)},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),e.each(i,function(e,i){i&&"#"!==i&&t.select_node(i)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(){return this.save_selected(),this.__call_old()},hover_node:function(e){if(e=this._get_node(e),!e.length)return!1;e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),this.__callback({obj:e})},dehover_node:function(){var e,t=this.data.ui.hovered;if(!t||!t.length)return!1;e=t.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===e[0]&&(this.data.ui.hovered=null),this.__callback({obj:t})},select_node:function(e,t,i){if(-1==(e=this._get_node(e))||!e||!e.length)return!1;var s=this._get_settings().ui,n="on"==s.select_multiple_modifier||!1!==s.select_multiple_modifier&&i&&i[s.select_multiple_modifier+"Key"],a=!1!==s.select_range_modifier&&i&&i[s.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],o=this.is_selected(e),r=!0,l=this;if(t){if(s.disable_selecting_children&&n&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(r=!1,!0){case a:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf(),-1==s.select_limit||e.length<s.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),o=!1,r=!0):r=!1;break;case o&&!n:this.deselect_all(),o=!1,r=!0;break;case!o&&!n:(-1==s.select_limit||s.select_limit>0)&&(this.deselect_all(),r=!0);break;case o&&n:this.deselect_node(e);break;case!o&&n:(-1==s.select_limit||this.data.ui.selected.length+1<=s.select_limit)&&(r=!0)}}r&&!o&&(a||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),s.selected_parent_open&&e.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:i}))},_fix_scroll:function(e){var i,s=this.get_container()[0];if(s.scrollHeight>s.offsetHeight){if(!(e=this._get_node(e))||-1===e||!e.length||!e.is(":visible"))return;i=e.offset().top-this.get_container().offset().top,i<0&&(s.scrollTop=s.scrollTop+i-1),i+this.data.core.li_height+(s.scrollWidth>s.offsetWidth?t:0)>s.offsetHeight&&(s.scrollTop=s.scrollTop+(i-s.offsetHeight+this.data.core.li_height+1+(s.scrollWidth>s.offsetWidth?t:0)))}},deselect_node:function(e){if(e=this._get_node(e),!e.length)return!1;this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e}))},toggle_select:function(e){if(e=this._get_node(e),!e.length)return!1;this.is_selected(e)?this.deselect_node(e):this.select_node(e)},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var i=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();i.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback({obj:i})}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var i=this;t.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){i.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(){return!0}}},_fn:{_show_input:function(t,i){t=this._get_node(t);var s=this._get_settings().core.rtl,n=this._get_settings().crrm.input_width_limit,a=t.children("ins").width(),o=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,r=this.get_text(t),l=e("<div />",{css:{position:"absolute",top:"-200px",left:s?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),c=t.css("position","relative").append(e("<input />",{value:r,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:s?"auto":a+o+4+"px",right:s?a+o+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),s=e.val();""===s&&(s=r),l.remove(),e.remove(),this.set_text(t,r),this.rename_node(t,s),i.call(this,t,s,r),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;return 27==t?(this.value=r,void this.blur()):13==t?void this.blur():void c.width(Math.min(l.text("pW"+this.value).width(),n))},keypress:function(e){if(13==(e.keyCode||e.which))return!1}})).children(".jstree-rename-input");this.set_text(t,""),l.css({fontFamily:c.css("fontFamily")||"",fontSize:c.css("fontSize")||"",fontWeight:c.css("fontWeight")||"",fontStyle:c.css("fontStyle")||"",fontStretch:c.css("fontStretch")||"",fontVariant:c.css("fontVariant")||"",letterSpacing:c.css("letterSpacing")||"",wordSpacing:c.css("wordSpacing")||""}),c.width(Math.min(l.text("pW"+c[0].value).width(),n))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,function(e,i,s){t.call(this,{obj:e,new_name:i,old_name:s})})},create:function(t,i,s,n,a){var o=this;return t=this._get_node(t),t||(t=-1),this.__rollback(),this.create_node(t,i,s,function(t){var i=this._get_parent(t),s=e(t).index();n&&n.call(this,t),i.length&&i.hasClass("jstree-closed")&&this.open_node(i,!1,!0),a?o.__callback({obj:t,name:this.get_text(t),parent:i,position:s}):this._show_input(t,function(e,t){o.__callback({obj:e,name:t,parent:i,position:s})})})},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),i=this._get_prev(e);this.__rollback(),!1!==(e=this.delete_node(e))&&this.__callback({obj:e,prev:i,parent:t})},check_move:function(){return!!this.__call_old()&&!!this._get_settings().crrm.move.check_move.call(this,this._get_move())},move_node:function(e,t,i,s,n,a){var o=this._get_settings().crrm.move;if(!n)return void 0===i&&(i=o.default_position),"inside"!==i||o.default_position.match(/^(before|after)$/)||(i=o.default_position),this.__call_old(!0,e,t,i,s,!1,a);(!0===o.always_copy||"multitree"===o.always_copy&&e.rt.get_index()!==e.ot.get_index())&&(s=!0),this.__call_old(!0,e,t,i,s,!0,a)},cut:function(e){if(!(e=this._get_node(e,!0))||!e.length)return!1;this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,this.__callback({obj:e})},copy:function(e){if(!(e=this._get_node(e,!0))||!e.length)return!1;this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,this.__callback({obj:e})},paste:function(e){if(!(e=this._get_node(e))||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),this.__callback({obj:e,nodes:t})}}})}(jQuery),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(i,s){if(!i)return!1;s||(s=e.jstree._themes+i+"/style.css"),-1==e.inArray(s,t)&&(e.vakata.css.add_sheet({url:s}),t.push(s)),this.data.themes.theme!=i&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=i),this.get_container().addClass("jstree-"+i),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e(function(){!1===e.jstree._themes&&e("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1}),!1===e.jstree._themes&&(e.jstree._themes="themes/")}),e.jstree.defaults.plugins.push("themes")}(jQuery),function(e){function t(t,i){var s,n=e.jstree._focused();if(n&&n.data&&n.data.hotkeys&&n.data.hotkeys.enabled&&(s=n._get_settings().hotkeys[t]))return s.call(n,i)}var i=[];e.jstree.plugin("hotkeys",{__init:function(){if("undefined"==typeof e.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,function(s,n){!1!==n&&-1==e.inArray(s,i)&&(e(document).bind("keydown",s,function(e){return t(s,e)}),i.push(s))}),this.get_container().bind("lock.jstree",e.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",e.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(e){e.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,i){var s=this;this.load_node_json(e,function(){s.__callback({obj:s._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().json_data;return-1==(t=this._get_node(t))||!t||!i.ajax&&!i.progressive_render&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var i=this._get_settings().json_data;return t&&-1!==t&&i.progressive_unload&&(e.isFunction(i.data)||i.ajax)&&t.removeData("jstree_children"),this.__call_old()},load_node_json:function(t,i,s){var n,a=this.get_settings().json_data,o=function(){},r=function(){};if((t=this._get_node(t))&&-1!==t&&(a.progressive_render||a.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&0===t.children("ul").children("li").length&&t.data("jstree_children"))return n=this._parse_json(t.data("jstree_children"),t),n&&(t.append(n),a.progressive_unload||t.removeData("jstree_children")),this.clean_node(t),void(i&&i.call(this));if(t&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!a.data&&!a.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(a.data):a.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t),e?(-1!==t&&t?(t.append(e).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(t),i&&i.call(this)):(-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),a.correct_state&&this.correct_state(t)):a.correct_state&&this.get_container().children("ul").empty(),s&&s.call(this))},this));break
;case!!a.data&&!a.ajax||!!a.data&&!!a.ajax&&(!t||-1===t):t&&-1!=t||(n=this._parse_json(a.data,t),n?(this.get_container().children("ul").empty().append(n.children()),this.clean_node()):a.correct_state&&this.get_container().children("ul").empty()),i&&i.call(this);break;case!a.data&&!!a.ajax||!!a.data&&!!a.ajax&&t&&-1!==t:o=function(e,i,n){var o=this.get_settings().json_data.ajax.error;o&&o.call(this,e,i,n),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&a.correct_state&&this.correct_state(t)):"success"===i&&a.correct_state&&this.get_container().children("ul").empty(),s&&s.call(this)},r=function(s,n,r){var l=this.get_settings().json_data.ajax.success;if(l&&(s=l.call(this,s,n,r)||s),""===s||s&&s.toString&&""===s.toString().replace(/^[\s\n]+$/,"")||!e.isArray(s)&&!e.isPlainObject(s))return o.call(this,r,n,"");s=this._parse_json(s,t),s?(-1!==t&&t?(t.append(s).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(s.children()),this.clean_node(t),i&&i.call(this)):-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(t),i&&i.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},a.ajax.context=this,a.ajax.error=o,a.ajax.success=r,a.ajax.dataType||(a.ajax.dataType="json"),e.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,t)),e.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,t)),e.ajax(a.ajax)}},_parse_json:function(t,i,s){var n,a,o,r,l,c=!1,h=this._get_settings(),d=h.json_data,u=h.core.html_titles;if(!t)return c;if(d.progressive_unload&&i&&-1!==i&&i.data("jstree_children",c),e.isArray(t)){if(c=e(),!t.length)return!1;for(a=0,o=t.length;a<o;a++)n=this._parse_json(t[a],i,!0),n.length&&(c=c.add(n))}else{if("string"==typeof t&&(t={data:t}),!t.data&&""!==t.data)return c;c=e("<li />"),t.attr&&c.attr(t.attr),t.metadata&&c.data(t.metadata),t.state&&c.addClass("jstree-"+t.state),e.isArray(t.data)||(n=t.data,t.data=[],t.data.push(n)),e.each(t.data,function(i,s){n=e("<a />"),e.isFunction(s)&&(s=s.call(this,t)),"string"==typeof s?n.attr("href","#")[u?"html":"text"](s):(s.attr||(s.attr={}),s.attr.href||(s.attr.href="#"),n.attr(s.attr)[u?"html":"text"](s.title),s.language&&n.addClass(s.language)),n.prepend("<ins class='jstree-icon'>&#160;</ins>"),!s.icon&&t.icon&&(s.icon=t.icon),s.icon&&(-1===s.icon.indexOf("/")?n.children("ins").addClass(s.icon):n.children("ins").css("background","url('"+s.icon+"') center center no-repeat")),c.append(n)}),c.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(d.progressive_render&&"open"!==t.state?c.addClass("jstree-closed").data("jstree_children",t.children):(d.progressive_unload&&c.data("jstree_children",t.children),e.isArray(t.children)&&t.children.length&&(n=this._parse_json(t.children,i,!0),n.length&&(l=e("<ul />"),l.append(n),c.append(l)))))}return s||(r=e("<ul />"),r.append(c),c=r),c},get_json:function(t,i,s,n){var a,o,r,l,c,h,d=[],u=this._get_settings(),p=this;return t=this._get_node(t),t&&-1!==t||(t=this.get_container().find("> ul > li")),i=e.isArray(i)?i:["id","class"],!n&&this.data.types&&i.push(u.types.type_attr),s=e.isArray(s)?s:[],t.each(function(){r=e(this),a={data:[]},i.length&&(a.attr={}),e.each(i,function(e,t){(o=r.attr(t))&&o.length&&o.replace(/jstree[^ ]*/gi,"").length&&(a.attr[t]=(" "+o).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))}),r.hasClass("jstree-open")&&(a.state="open"),r.hasClass("jstree-closed")&&(a.state="closed"),r.data()&&(a.metadata=r.data()),l=r.children("a"),l.each(function(){c=e(this),s.length||-1!==e.inArray("languages",u.plugins)||c.children("ins").get(0).style.backgroundImage.length||c.children("ins").get(0).className&&c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(h=!1,-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){if(c.hasClass(t))return h=t,!1}),o={attr:{},title:p.get_text(c,h)},e.each(s,function(e,t){o.attr[t]=(" "+(c.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}),-1!==e.inArray("languages",u.plugins)&&e.isArray(u.languages)&&u.languages.length&&e.each(u.languages,function(e,t){if(c.hasClass(t))return o.language=t,!0}),c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(o.icon=c.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),c.children("ins").get(0).style.backgroundImage.length&&(o.icon=c.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):o=p.get_text(c),l.length>1?a.data.push(o):a.data=o}),r=r.find("> ul > li"),r.length&&(a.children=p.get_json(r,i,s,!0)),d.push(a)}),d}}})}(jQuery),function(e){e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(t){var i=this._get_settings().languages,s=!1,n=".jstree-"+this.get_index()+" a";if(!e.isArray(i)||0===i.length)return!1;if(-1==e.inArray(t,i)){if(!i[t])return!1;t=i[t]}return t==this.data.languages.current_language||(s=e.vakata.css.get_css(n+"."+this.data.languages.current_language,!1,this.data.languages.language_css),!1!==s&&(s.style.display="none"),s=e.vakata.css.get_css(n+"."+t,!1,this.data.languages.language_css),!1!==s&&(s.style.display=""),this.data.languages.current_language=t,this.__callback(t),!0)},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,i){var s=this._get_settings().languages,n=this._get_settings().core.strings;return e.isArray(s)&&s.length&&(i=i&&-1!=e.inArray(i,s)?i:this.data.languages.current_language),n[i]&&n[i][t]?n[i][t]:n[t]?n[t]:t},get_text:function(t,i){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var s=this._get_settings().languages,n=this._get_settings().core.html_titles;return e.isArray(s)&&s.length?(i=i&&-1!=e.inArray(i,s)?i:this.data.languages.current_language,t=t.children("a."+i)):t=t.children("a:eq(0)"),n?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return 3==this.nodeType})[0],t.nodeValue)},set_text:function(t,i,s){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var n,a=this._get_settings().languages,o=this._get_settings().core.html_titles;return e.isArray(a)&&a.length?(s=s&&-1!=e.inArray(s,a)?s:this.data.languages.current_language,t=t.children("a."+s)):t=t.children("a:eq(0)"),o?(n=t.children("INS").clone(),t.html(i).prepend(n),this.__callback({obj:t,name:i,lang:s}),!0):(t=t.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:t,name:i,lang:s}),t.nodeValue=i)},_load_css:function(){var t,i=this._get_settings().languages,s="/* languages css */",n=".jstree-"+this.get_index()+" a";if(e.isArray(i)&&i.length){for(this.data.languages.current_language=i[0],t=0;t<i.length;t++)s+=n+"."+i[t]+" {",i[t]!=this.data.languages.current_language&&(s+=" display:none; "),s+=" } ";this.data.languages.language_css=e.vakata.css.add_sheet({str:s,title:"jstree-languages"})}},create_node:function(t,i,s,n){return this.__call_old(!0,t,i,s,function(t){var i,s=this._get_settings().languages,a=t.children("a");if(e.isArray(s)&&s.length){for(i=0;i<s.length;i++)a.is("."+s[i])||t.append(a.eq(0).clone().removeClass(s.join(" ")).addClass(s[i]));a.not("."+s.join(", .")).remove()}n&&n.call(this,t)})}}})}(jQuery),function(e){e.jstree.plugin("cookies",{__init:function(){if("undefined"==typeof e.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var t,i=this._get_settings().cookies;i.save_loaded&&(t=e.cookie(i.save_loaded))&&t.length&&(this.data.core.to_load=t.split(",")),i.save_opened&&(t=e.cookie(i.save_opened))&&t.length&&(this.data.core.to_open=t.split(",")),i.save_selected&&(t=e.cookie(i.save_selected))&&t.length&&this.data.ui&&(this.data.ui.to_select=t.split(",")),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(t){if(!this.data.core.refreshing){var i=this._get_settings().cookies;if(!t)return i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options)),i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),void(i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options)));switch(t){case"open_node":case"close_node":i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options));break;case"select_node":case"deselect_node":i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options))}}}}})}(jQuery),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var i=this._get_node(t.rslt.obj);i=-1===i?this.get_container().children("ul"):i.children("ul"),this.sort(i)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var i=-1==t.rslt.np?this.get_container():t.rslt.np;this.sort(i.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var i=this._get_settings().sort,s=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(i,s))),t.find("> li > ul").each(function(){s.sort(e(this))}),this.clean_node(t)}}})}(jQuery),function(e){var t=!1,i=!1,s=!1,n=!1,a=!1,o=!1,r=!1,l=!1,c=!1;e.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,i,s){e.vakata.dnd.is_drag&&e.vakata.drag_stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.MozUserSelect="none")}catch(e){}return e.vakata.dnd.init_x=t.pageX,e.vakata.dnd.init_y=t.pageY,e.vakata.dnd.user_data=i,e.vakata.dnd.is_down=!0,e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(s),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.drag_stop),!1},drag:function(t){if(e.vakata.dnd.is_down){if(!e.vakata.dnd.is_drag){if(!(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5))return;e.vakata.dnd.helper.appendTo("body"),e.vakata.dnd.is_drag=!0,e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}if("mousemove"===t.type){var i=e(document),s=i.scrollTop(),n=i.scrollLeft();t.pageY-s<20?(o&&"down"===r&&(clearInterval(o),o=!1),o||(r="up",o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150))):o&&"up"===r&&(clearInterval(o),o=!1),e(window).height()-(t.pageY-s)<20?(o&&"up"===r&&(clearInterval(o),o=!1),o||(r="down",o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150))):o&&"down"===r&&(clearInterval(o),o=!1),t.pageX-n<20?(a&&"right"===l&&(clearInterval(a),a=!1),a||(l="left",a=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150))):a&&"left"===l&&(clearInterval(a),a=!1),e(window).width()-(t.pageX-n)<20?(a&&"left"===l&&(clearInterval(a),a=!1),a||(l="right",a=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150))):a&&"right"===l&&(clearInterval(a),a=!1)}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"}),e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})}},drag_stop:function(t){a&&clearInterval(a),o&&clearInterval(o),e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.drag_stop),e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data}),e.vakata.dnd.helper.remove(),e.vakata.dnd.init_x=0,e.vakata.dnd.init_y=0,e.vakata.dnd.user_data={},e.vakata.dnd.is_down=!1,e.vakata.dnd.is_drag=!1}},e(function(){e.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000000; } ",title:"vakata"})}),e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.themes&&(s.attr("class","jstree-"+this.data.themes.theme),n&&n.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target)){var a,o=e.jstree._reference(i.target);o.data.dnd.foreign?!0!==(a=o._get_settings().dnd.drag_check.call(this,{o:t,r:o.get_container(),is_root:!0}))&&!0!==a.inside&&!0!==a.before&&!0!==a.after||e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"):(o.prepare_move(t,o.get_container(),"last"),o.check_move()&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}},this)).bind("mouseup.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target){var s,n=e.jstree._reference(i.currentTarget);n.data.dnd.foreign?!0!==(s=n._get_settings().dnd.drag_check.call(this,{o:t,r:n.get_container(),is_root:!0}))&&!0!==s.inside&&!0!==s.before&&!0!==s.after||n._get_settings().dnd.drag_finish.call(this,{o:t,r:n.get_container(),is_root:!0}):n.move_node(t,n.get_container(),"last",i[n._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",e.proxy(function(t){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var i=this.get_container()[0];t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},i),100)):t.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},i),100)):t.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",e.proxy(function(){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&s&&n&&(s.hide(),n.hide())},this)).delegate("a","mousedown.jstree",e.proxy(function(e){if(1===e.which)return this.start_drag(e.currentTarget,e),!1},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_enter(t.currentTarget)},this)).delegate("a","mousemove.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(i&&i.length&&i.children("a")[0]===t.currentTarget||this.dnd_enter(t.currentTarget),"undefined"==typeof this.data.dnd.off.top&&(this.data.dnd.off=e(t.target).offset()),this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;s&&s.hide(),n&&n.hide(),this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_finish(t)},this)),e(document).bind("drag_stop.vakata",e.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,s&&s.css({top:"-2000px"}),n&&n.css({top:"-2000px"})},this)).bind("drag_start.vakata",e.proxy(function(t,i){if(i.data.jstree){var s=e(i.event.target);s.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(s)}},this));var a=this._get_settings().dnd;a.drag_target&&e(document).delegate(a.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(i){t=i.target,e.vakata.dnd.drag_start(i,{jstree:!0,obj:i.target},"<ins class='jstree-icon'></ins>"+e(i.target).text()),this.data.themes&&(s&&s.attr("class","jstree-"+this.data.themes.theme),n&&n.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var a=this.get_container();this.data.dnd.cof=a.offset(),this.data.dnd.cw=parseInt(a.width(),10),this.data.dnd.ch=parseInt(a.height(),10),this.data.dnd.foreign=!0,i.preventDefault()},this)),a.drop_target&&e(document).delegate(a.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(i.target),e:i})&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(a.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(a.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(i.target),e:i})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(){return!0},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(i&&i.length){if(this.data.dnd.off=i.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+i.width()),this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:i});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(t,i,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(t,i,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(i)?(this.prepare_move(t,i,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var t,i=["before","inside","after"],a=!1,o=this._get_settings().core.rtl;switch(i=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],e.each(i,e.proxy(function(t,i){if(this.data.dnd[i])return e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),a=i,!1},this)),!1===a&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),t=o?this.data.dnd.off.right-18:this.data.dnd.off.left+10,a){case"before":s.css({left:t+"px",top:this.data.dnd.off.top-6+"px"}).show(),n&&n.css({left:t+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":s.css({left:t+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),n&&n.css({left:t+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":s.css({left:t+(o?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),n&&n.hide();break;default:s.hide(),n&&n.hide()}return c=a,a}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(i,e.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:t,r:i,p:c}):(this.dnd_prepare(),this.move_node(t,i,c,e[this._get_settings().dnd.copy_modifier+"Key"])),t=!1,i=!1,s.hide(),n&&n.hide()},dnd_enter:function(t){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var s=this._get_settings().dnd;this.data.dnd.prepared=!1,i=this._get_node(t),s.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),s.check_timeout)):this.dnd_prepare(),s.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),i&&i.length&&i.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),s.open_timeout))):i&&i.length&&i.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(t){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),s.hide(),n&&n.hide(),i&&i[0]===t.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(i,a){t=this._get_node(i),this.data.ui&&this.is_selected(t)&&(t=this._get_node(null,!0));var o=t.length>1?this._get_string("multiple_selection"):this.get_text(t),r=this.get_container();this._get_settings().core.html_titles||(o=o.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),e.vakata.dnd.drag_start(a,{jstree:!0,obj:t},"<ins class='jstree-icon'></ins>"+o),this.data.themes&&(s&&s.attr("class","jstree-"+this.data.themes.theme),n&&n.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=r.offset(),this.data.dnd.cw=parseInt(r.width(),10),this.data.dnd.ch=parseInt(r.height(),10),this.data.dnd.active=!0}}}),e(function(){e.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",title:"jstree"}),s=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){return s.hide(),n.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),n=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(i&&i.length)return i.children("a").trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1}).bind("mouseleave",function(t){var a=e(t.relatedTarget);if((a.is(".jstree")||0===a.closest(".jstree").length)&&i&&i.length)return i.children("a").trigger(t),s.hide(),n.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1}).appendTo("body"),e(document).bind("drag_start.vakata",function(e,t){t.data.jstree&&(s.show(),n&&n.show())}),e(document).bind("drag_stop.vakata",function(e,t){t.data.jstree&&(s.hide(),n&&n.hide())})})}(jQuery),function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){if(e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),!this.data.ui||!this.data.checkbox.noui)return e.stopImmediatePropagation(),!1;this.save_selected(),this.data.cookies&&this.save_cookie("select_node")},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(t){if(!1!==(t=t&&-1!=t?this._get_node(t):this.get_container().find("> ul > li"))){var i,s,n=this,a=this._get_settings().checkbox.two_state,o=this._get_settings().checkbox.real_checkboxes,r=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){s=e(this),i=s.is("li")&&(s.hasClass("jstree-checked")||o&&s.children(":checked").length)?"jstree-checked":"jstree-unchecked",s.find("li").andSelf().each(function(){var t,s=e(this);s.children("a"+(n.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(a?"jstree-unchecked":i),o&&(s.children(":checkbox").length?s.children(":checkbox").addClass("jstree-real-checkbox"):(t=r.call(n,s),s.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+t[0]+"' name='"+t[0]+"' value='"+t[1]+"' />"))),a?(s.hasClass("jstree-checked")||s.children(":checked").length)&&s.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===i||s.hasClass("jstree-checked")||s.children(":checked").length)&&s.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),a||t.find(".jstree-checked").parent().parent().each(function(){n._repair_state(this)})}},change_state:function(t,i){t=this._get_node(t);var s=!1,n=this._get_settings().checkbox.real_checkboxes;if(!t||-1===t)return!1;if(i=!1===i||!0===i?i:t.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)i?(t.removeClass("jstree-checked").addClass("jstree-unchecked"),n&&t.children(":checkbox").prop("checked",!1)):(t.removeClass("jstree-unchecked").addClass("jstree-checked"),n&&t.children(":checkbox").prop("checked",!0));else{if(i){if(s=t.find("li").andSelf(),!s.filter(".jstree-checked, .jstree-undetermined").length)return!1;s.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),n&&s.children(":checkbox").prop("checked",!1)}else{if(s=t.find("li").andSelf(),!s.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;s.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),n&&s.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(i){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),n&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),n&&t.children(":checkbox").prop("checked",!1)}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),n&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),n&&t.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(t),!0},check_node:function(e){if(this.change_state(e,!1)){if(e=this._get_node(e),this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){e.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var e=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){e.change_state(this,!0)}),this.__callback()},is_checked:function(e){return e=this._get_node(e),!!e.length&&e.is(".jstree-checked")},get_checked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=e&&-1!==e?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){if(e=this._get_node(e),e.length){if(this._get_settings().checkbox.two_state)return void e.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);var t=this._get_settings().checkbox.real_checkboxes,i=e.find("> ul > .jstree-checked").length,s=e.find("> ul > .jstree-undetermined").length,n=e.find("> ul > li").length;0===n?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):0===i&&0===s?this.change_state(e,!0):i===n?this.change_state(e,!1):(e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){
var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),e.each(i,function(e,i){t.check_node(i)}),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&e.data.core.to_load.push("#"+this.id)})}}}),e(function(){e.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})}(jQuery),function(e){e.vakata.xslt=function(t,i,s){var n,a,o,r="";return document.recalc?(n=document.createElement("xml"),a=document.createElement("xml"),n.innerHTML=t,a.innerHTML=i,e("body").append(n).append(a),setTimeout(function(t,i,s){return function(){s.call(null,t.transformNode(i.XMLDocument)),setTimeout(function(t,i){return function(){e(t).remove(),e(i).remove()}}(t,i),200)}}(n,a,s),100),!0):("undefined"!=typeof window.DOMParser&&"undefined"!=typeof window.XMLHttpRequest&&"undefined"==typeof window.XSLTProcessor&&(t=(new DOMParser).parseFromString(t,"text/xml"),i=(new DOMParser).parseFromString(i,"text/xml")),"undefined"!=typeof window.DOMParser&&"undefined"!=typeof window.XMLHttpRequest&&"undefined"!=typeof window.XSLTProcessor&&(o=new XSLTProcessor,(!e.isFunction(o.transformDocument)||"undefined"!=typeof window.XMLSerializer)&&(t=(new DOMParser).parseFromString(t,"text/xml"),i=(new DOMParser).parseFromString(i,"text/xml"),e.isFunction(o.transformDocument)?(r=document.implementation.createDocument("","",null),o.transformDocument(t,i,r,null),s.call(null,(new XMLSerializer).serializeToString(r)),!0):(o.importStylesheet(i),r=o.transformToFragment(t,document),s.call(null,e("<div />").append(r).html()),!0))))};var t={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},i=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,i){var s=this;this.load_node_xml(e,function(){s.__callback({obj:s._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().xml_data;return-1==(t=this._get_node(t))||!t||!i.ajax&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,i,s){var n=this.get_settings().xml_data,a=function(){},o=function(){};if((t=this._get_node(t))&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!n.data&&!n.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(n.data):n.data.call(this,t,e.proxy(function(s){this.parse_xml(s,e.proxy(function(s){s&&(s=s.replace(/ ?xmlns="[^"]*"/gi,""),s.length>10?(s=e(s),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(s),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(s.children()),n.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(t),i&&i.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this))},this));break;case!!n.data&&!n.ajax||!!n.data&&!!n.ajax&&(!t||-1===t):t&&-1!=t||this.parse_xml(n.data,e.proxy(function(s){s?(s=s.replace(/ ?xmlns="[^"]*"/gi,""),s.length>10&&(s=e(s),this.get_container().children("ul").empty().append(s.children()),n.clean_node&&this.clean_node(t),i&&i.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!n.data&&!!n.ajax||!!n.data&&!!n.ajax&&t&&-1!==t:a=function(e,i,a){var o=this.get_settings().xml_data.ajax.error;o&&o.call(this,e,i,a),-1!==t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&n.correct_state&&this.correct_state(t)):"success"===i&&n.correct_state&&this.get_container().children("ul").empty(),s&&s.call(this)},o=function(s,o,r){s=r.responseText;var l=this.get_settings().xml_data.ajax.success;if(l&&(s=l.call(this,s,o,r)||s),""===s||s&&s.toString&&""===s.toString().replace(/^[\s\n]+$/,""))return a.call(this,r,o,"");this.parse_xml(s,e.proxy(function(s){s&&(s=s.replace(/ ?xmlns="[^"]*"/gi,""),s.length>10?(s=e(s),-1!==t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(s),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(s.children()),n.clean_node&&this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(t),i&&i.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this))},n.ajax.context=this,n.ajax.error=a,n.ajax.success=o,n.ajax.dataType||(n.ajax.dataType="xml"),e.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,t)),e.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,t)),e.ajax(n.ajax)}},parse_xml:function(i,s){var n=this._get_settings().xml_data;e.vakata.xslt(i,t[n.xsl],s)},get_xml:function(t,s,n,a,o){var r,l,c,h,d,u="",p=this._get_settings(),f=this;return t||(t="flat"),o||(o=0),s=this._get_node(s),s&&-1!==s||(s=this.get_container().find("> ul > li")),n=e.isArray(n)?n:["id","class"],!o&&this.data.types&&-1===e.inArray(p.types.type_attr,n)&&n.push(p.types.type_attr),a=e.isArray(a)?a:[],o||(p.xml_data.get_include_preamble&&(u+='<?xml version="1.0" encoding="UTF-8"?>'),u+="<root>"),s.each(function(){u+="<item",c=e(this),e.each(n,function(e,t){var s=c.attr(t);p.xml_data.get_skip_empty&&void 0===s||(u+=" "+t+'="'+i((" "+(s||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),c.hasClass("jstree-open")&&(u+=' state="open"'),c.hasClass("jstree-closed")&&(u+=' state="closed"'),"flat"===t&&(u+=' parent_id="'+i(o)+'"'),u+=">",u+="<content>",h=c.children("a"),h.each(function(){r=e(this),d=!1,u+="<name",-1!==e.inArray("languages",p.plugins)&&e.each(p.languages,function(e,t){if(r.hasClass(t))return u+=' lang="'+i(t)+'"',d=t,!1}),a.length&&e.each(a,function(e,t){var s=r.attr(t);p.xml_data.get_skip_empty&&void 0===s||(u+=" "+t+'="'+i((" "+s||"").replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),r.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(u+=' icon="'+i(r.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),r.children("ins").get(0).style.backgroundImage.length&&(u+=' icon="'+i(r.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),u+=">",u+="<![CDATA["+f.get_text(r,d)+"]]>",u+="</name>"}),u+="</content>",l=c[0].id||!0,c=c.find("> ul > li"),l=c.length?f.get_xml(t,c,n,a,l):"","nest"==t&&(u+=l),u+="</item>","flat"==t&&(u+=l)}),o||(u+="</root>"),u}}})}(jQuery),function(e){e.expr[":"].jstree_contains=function(e,t,i){return(e.textContent||e.innerText||"").toLowerCase().indexOf(i[3].toLowerCase())>=0},e.expr[":"].jstree_title_contains=function(e,t,i){return(e.getAttribute("title")||"").toLowerCase().indexOf(i[3].toLowerCase())>=0},e.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=e(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(t,i){e(this).children("ul").find("li").hide().removeClass("jstree-last"),i.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(t,i){if(""===e.trim(t))return void this.clear_search();var s=this.get_settings().search,n=this,a=function(){},o=function(){};if(this.data.search.str=t,!i&&!1!==s.ajax&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0)return this.search.supress_callback=!0,a=function(){},o=function(e,t,i){var s=this.get_settings().search.ajax.success;s&&(e=s.call(this,e,t,i)||e),this.data.search.to_open=e,this._search_open()},s.ajax.context=this,s.ajax.error=a,s.ajax.success=o,e.isFunction(s.ajax.url)&&(s.ajax.url=s.ajax.url.call(this,t)),e.isFunction(s.ajax.data)&&(s.ajax.data=s.ajax.data.call(this,t)),s.ajax.data||(s.ajax.data={search_string:t}),s.ajax.dataType&&!/^json/.exec(s.ajax.dataType)||(s.ajax.dataType="json"),void e.ajax(s.ajax);this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+s.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){n.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:t})},clear_search:function(){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=e()},_search_open:function(){var t=this,i=!0,s=[],n=[];this.data.search.to_open.length&&(e.each(this.data.search.to_open,function(t,i){if("#"==i)return!0;e(i).length&&e(i).is(".jstree-closed")?s.push(i):n.push(i)}),s.length&&(this.data.search.to_open=n,e.each(s,function(e,i){t.open_node(i,function(){t._search_open(!0)})}),i=!1)),i&&this.search(this.data.search.str,!0)}}})}(jQuery),function(e){e.vakata.context={hide_on_mouseleave:!1,cnt:e("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(t,i,s,n,a,o,r){e.vakata.context.rtl=!!r;var l,c,h=e.vakata.context.parse(t);h&&(e.vakata.context.vis=!0,e.vakata.context.tgt=i,e.vakata.context.par=o||i||null,e.vakata.context.data=a||null,e.vakata.context.cnt.html(h).css({visibility:"hidden",display:"block",left:0,top:0}),e.vakata.context.hide_on_mouseleave&&e.vakata.context.cnt.one("mouseleave",function(){e.vakata.context.hide()}),l=e.vakata.context.cnt.height(),c=e.vakata.context.cnt.width(),s+c>e(document).width()&&(s=e(document).width()-(c+5),e.vakata.context.cnt.find("li > ul").addClass("right")),n+l>e(document).height()&&(n-=l+i[0].offsetHeight,e.vakata.context.cnt.find("li > ul").addClass("bottom")),e.vakata.context.cnt.css({left:s,top:n}).find("li:has(ul)").bind("mouseenter",function(){var t=e(document).width(),i=e(document).height(),s=e(this).children("ul").show();t!==e(document).width()&&s.toggleClass("right"),i!==e(document).height()&&s.toggleClass("bottom")}).bind("mouseleave",function(){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),e(document).triggerHandler("context_show.vakata"))},hide:function(){e.vakata.context.vis=!1,e.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),e(document).triggerHandler("context_hide.vakata")},parse:function(t,i){if(!t)return!1;var s="",n=!1,a=!0;return i||(e.vakata.context.func={}),s+="<ul>",e.each(t,function(t,i){if(!i)return!0;e.vakata.context.func[t]=i.action,!a&&i.separator_before&&(s+="<li class='vakata-separator vakata-separator-before'></li>"),a=!1,s+="<li class='"+(i._class||"")+(i._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",i.icon&&-1===i.icon.indexOf("/")&&(s+=" class='"+i.icon+"' "),i.icon&&-1!==i.icon.indexOf("/")&&(s+=" style='background:url("+i.icon+") center center no-repeat;' "),s+=">&#160;</ins><a href='#' rel='"+t+"'>",i.submenu&&(s+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),s+=i.label+"</a>",i.submenu&&(n=e.vakata.context.parse(i.submenu,!0))&&(s+=n),s+="</li>",i.separator_after&&(s+="<li class='vakata-separator vakata-separator-after'></li>",a=!0)}),s=s.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),s+="</ul>",e(document).triggerHandler("context_parse.vakata"),s.length>10&&s},exec:function(t){return!!e.isFunction(e.vakata.context.func[t])&&(e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par),!0)}},e(function(){e.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",title:"vakata"}),e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(){!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))?e.vakata.context.hide():e(this).blur()}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),e(document).bind("mousedown",function(t){e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)&&e.vakata.context.hide()}),"undefined"!=typeof e.hotkeys&&e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","right",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","left",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","esc",function(t){e.vakata.context.hide(),t.preventDefault()}).bind("keydown","space",function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),t.preventDefault()})}),e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault(),e(t.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)},this)).delegate("a","click.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)).bind("destroy.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)),e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,i,s){t=this._get_node(t);var n=this.get_settings().contextmenu,a=t.children("a:visible:eq(0)"),o=!1,r=!1;n.select_node&&this.data.ui&&!this.is_selected(t)&&(this.deselect_all(),this.select_node(t,!0)),(n.show_at_node||void 0===i||void 0===s)&&(o=a.offset(),i=o.left,s=o.top+this.data.core.li_height),r=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:n.items,e.isFunction(r)&&(r=r.call(this,t)),this.data.contextmenu=!0,e.vakata.context.show(r,a,i,s,this,t,this._get_settings().core.rtl),this.data.themes&&e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(jQuery),function(t){t.jstree.plugin("types",{__init:function(){var i=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",t.proxy(function(){var e=i.types,s=i.type_attr,n="",a=this;t.each(e,function(e,i){if(t.each(i,function(e){/^(max_depth|max_children|icon|valid_children)$/.test(e)||a.data.types.attach_to.push(e)}),!i.icon)return!0;(i.icon.image||i.icon.position)&&(n+="default"==e?".jstree-"+a.get_index()+" a > .jstree-icon { ":".jstree-"+a.get_index()+" li["+s+'="'+e+'"] > a > .jstree-icon { ',i.icon.image&&(n+=" background-image:url("+i.icon.image+"); "),i.icon.position?n+=" background-position:"+i.icon.position+"; ":n+=" background-position:0 0; ",n+="} ")}),""!==n&&t.vakata.css.add_sheet({str:n,title:"jstree-types"})},this)).bind("before.jstree",t.proxy(function(e,i){var s,n,a=!!this._get_settings().types.use_data&&this._get_node(i.args[0]),o=!(!a||-1===a||!a.length)&&a.data("jstree");if(o&&o.types&&!1===o.types[i.func])return e.stopImmediatePropagation(),!1;if(-1!==t.inArray(i.func,this.data.types.attach_to)){if(!i.args[0]||!i.args[0].tagName&&!i.args[0].jquery)return;if(s=this._get_settings().types.types,n=this._get_type(i.args[0]),(s[n]&&"undefined"!=typeof s[n][i.func]||s["default"]&&"undefined"!=typeof s["default"][i.func])&&!1===this._check(i.func,i.args[0]))return e.stopImmediatePropagation(),!1}},this)),e&&this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,i){var s=i&&i.rslt&&i.rslt.obj&&-1!==i.rslt.obj?this._get_node(i.rslt.obj).parent():this.get_container_ul(),n=!1,a=this._get_settings().types;t.each(a.types,function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(n="default"===e?s.find("li > a > .jstree-icon"):s.find("li["+a.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&n.css("backgroundImage","url("+t.icon.image+")"),n.css("backgroundPosition",t.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return!(!(e=this._get_node(e))||!e.length)&&(e.attr(this._get_settings().types.type_attr)||"default")},set_type:function(e,t){t=this._get_node(t);var i=!(!t.length||!e)&&t.attr(this._get_settings().types.type_attr,e);return i&&this.__callback({obj:t,type:e}),i},_check:function(e,i,s){i=this._get_node(i);var n=!1,a=this._get_type(i),o=0,r=this,l=this._get_settings().types,c=!1;if(-1===i){if(!l[e])return;n=l[e]}else{if(!1===a)return;c=!!l.use_data&&i.data("jstree"),c&&c.types&&"undefined"!=typeof c.types[e]?n=c.types[e]:l.types[a]&&"undefined"!=typeof l.types[a][e]?n=l.types[a][e]:l.types["default"]&&"undefined"!=typeof l.types["default"][e]&&(n=l.types["default"][e])}return t.isFunction(n)&&(n=n.call(this,i)),"max_depth"===e&&-1!==i&&!1!==s&&-2!==l.max_depth&&0!==n&&i.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){return-1!==l.max_depth&&l.max_depth-(t+1)<=0?(n=0,!1):-1!==(o=0===t?n:r._check(e,this,!1))&&o-(t+1)<=0?(n=0,!1):(o>=0&&(o-(t+1)<n||n<0)&&(n=o-(t+1)),void(l.max_depth>=0&&(l.max_depth-(t+1)<n||n<0)&&(n=l.max_depth-(t+1))))}),n},check_move:function(){if(!this.__call_old())return!1;var e,i=this._get_move(),s=i.rt._get_settings().types,n=i.rt._check("max_children",i.cr),a=i.rt._check("max_depth",i.cr),o=i.rt._check("valid_children",i.cr),r=1;if("none"===o)return!1;if(t.isArray(o)&&i.ot&&i.ot._get_type&&(i.o.each(function(){if(-1===t.inArray(i.ot._get_type(this),o))return r=!1,!1}),!1===r))return!1;if(-2!==s.max_children&&-1!==n&&(-1===i.cr?this.get_container().find("> ul > li").not(i.o).length:i.cr.find("> ul > li").not(i.o).length)+i.o.length>n)return!1;if(-2!==s.max_depth&&-1!==a){if(r=0,0===a)return!1;if("undefined"==typeof i.o.d){for(e=i.o;e.length>0;)e=e.find("> ul > li"),r++;i.o.d=r}if(a-i.o.d<0)return!1}return!0},create_node:function(e,i,s,n,a,o){if(!o&&(a||this._is_loaded(e))){var r="string"==typeof i&&i.match(/^before|after$/i)&&-1!==e?this._get_parent(e):this._get_node(e),l=this._get_settings().types,c=this._check("max_children",r),h=this._check("max_depth",r),d=this._check("valid_children",r);if("string"==typeof s&&(s={data:s}),s||(s={}),"none"===d)return!1;if(t.isArray(d))if(s.attr&&s.attr[l.type_attr]){if(-1===t.inArray(s.attr[l.type_attr],d))return!1}else s.attr||(s.attr={}),s.attr[l.type_attr]=d[0];if(-2!==l.max_children&&-1!==c&&(-1===r?this.get_container().find("> ul > li").length:r.find("> ul > li").length)+1>c)return!1;if(-2!==l.max_depth&&-1!==h&&h-1<0)return!1}return this.__call_old(!0,e,i,s,n,a,o)}}})}(jQuery),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,i){var s=this;this.load_node_html(e,function(){s.__callback({obj:s._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){return-1==(t=this._get_node(t))||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,i,s){var n,a=this.get_settings().html_data,o=function(){},r=function(){};if((t=this._get_node(t))&&-1!==t){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case e.isFunction(a.data):a.data.call(this,t,e.proxy(function(s){s&&""!==s&&s.toString&&""!==s.toString().replace(/^[\s\n]+$/,"")?(s=e(s),s.is("ul")||(s=e("<ul />").append(s)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(s).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(s.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(t),i&&i.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!a.data&&!a.ajax:t&&-1!=t||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!!a.data&&!a.ajax||!!a.data&&!!a.ajax&&(!t||-1===t):t&&-1!=t||(n=e(a.data),n.is("ul")||(n=e("<ul />").append(n)),this.get_container().children("ul").empty().append(n.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!a.data&&!!a.ajax||!!a.data&&!!a.ajax&&t&&-1!==t:t=this._get_node(t),o=function(e,i,n){var o=this.get_settings().html_data.ajax.error;o&&o.call(this,e,i,n),-1!=t&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&a.correct_state&&this.correct_state(t)):"success"===i&&a.correct_state&&this.get_container().children("ul").empty(),s&&s.call(this)},r=function(s,n,r){var l=this.get_settings().html_data.ajax.success;if(l&&(s=l.call(this,s,n,r)||s),""===s||s&&s.toString&&""===s.toString().replace(/^[\s\n]+$/,""))return o.call(this,r,n,"");s?(s=e(s),s.is("ul")||(s=e("<ul />").append(s)),-1!=t&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(s).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(s.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&-1!==t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(t),
i&&i.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},a.ajax.context=this,a.ajax.error=o,a.ajax.success=r,a.ajax.dataType||(a.ajax.dataType="html"),e.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,t)),e.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,t)),e.ajax(a.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(jQuery),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(i){e(i.currentTarget).hasClass("jstree-loading")||e(this).addClass(t.item_h)}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,i){i.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,i){this.get_container().find("a."+t.item_h).not(i.rslt.obj).removeClass(t.item_h),i.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,i=["ui-icon"];e.each(t,function(e,t){t=t.split(" "),t.length&&(i=i.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+i.join(", .")).removeClass(i.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=e&&-1!=e?this._get_node(e).parent():this.get_container_ul(),e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),e(function(){e.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})}(jQuery),function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,i){var s,n,a=[],o=!0;if("move_node"==i.func&&!0===i.args[4]&&i.args[0].o&&i.args[0].o.length&&(i.args[0].o.children("a").each(function(){a.push(e(this).text().replace(/^\s+/g,""))}),o=this._check_unique(a,i.args[0].np.find("> ul > li").not(i.args[0].o),"move_node")),"create_node"==i.func&&(i.args[4]||this._is_loaded(i.args[0]))&&(s=this._get_node(i.args[0]),!i.args[1]||"before"!==i.args[1]&&"after"!==i.args[1]||(s=this._get_parent(i.args[0]))&&-1!==s||(s=this.get_container()),"string"==typeof i.args[2]?a.push(i.args[2]):i.args[2]&&i.args[2].data?a.push(i.args[2].data):a.push(this._get_string("new_node")),o=this._check_unique(a,s.find("> ul > li"),"create_node")),"rename_node"==i.func&&(a.push(i.args[1]),n=this._get_node(i.args[0]),s=this._get_parent(n),s&&-1!==s||(s=this.get_container()),o=this._check_unique(a,s.find("> ul > li").not(n),"rename_node")),!o)return t.stopPropagation(),!1},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,i,s){var n=[];return i.children("a").each(function(){n.push(e(this).text().replace(/^\s+/g,""))}),!n.length||!t.length||(n=n.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),n.length+t.length==n.concat(t).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length||(this._get_settings().unique.error_callback.call(null,t,i,s),!1))},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),i=[];return!t.o||!t.o.length||(t.o.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))}),this._check_unique(i,t.np.find("> ul > li").not(t.o),"check_move"))}}})}(jQuery),function(s){s.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",s.proxy(function(){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",s.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",s.proxy(function(e,t){this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",s.proxy(function(){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",s.proxy(function(e,t){t.rslt.obj.each(function(){t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((s(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")").children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",s.proxy(function(e,t){if(this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===e.type){this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=s(e.currentTarget);"A"===e.target.tagName||"INS"===e.target.tagName&&t.closest("li").is(".jstree-open, .jstree-closed")||(t.closest("li").children("a:visible:eq(0)").click(),e.stopImmediatePropagation())}).delegate("li","mouseover.jstree",s.proxy(function(e){return e.stopImmediatePropagation(),!s(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length&&(this.hover_node(e.currentTarget),!1)},this)).delegate("li","mouseleave.jstree",s.proxy(function(e){s(e.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(e.currentTarget)},this)),(t||e)&&s.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){!1!==(e=e&&-1!=e?this._get_node(e):this.get_container().find("> ul > li"))&&e.each(function(){s(this).find("li").andSelf().each(function(){var e=s(this);if(e.children(".jstree-wholerow-span").length)return!0;e.prepend("<span class='jstree-wholerow-span' style='width:"+18*e.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),i=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==i&&(this.data.wholerow.last_html=i,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",-1*(e.height()+(t?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),s(function(){var n=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";i&&(n+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(t||e)&&(n+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),s.vakata.css.add_sheet({str:n,title:"jstree"})})}(jQuery),function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],i=function(t,i){var s=!0;return t=t||{},i=[].concat(i),e.each(i,function(i,n){if(!e.isFunction(t[n]))return s=!1,!1}),s};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(s,n){var a=-1==s?this._get_settings().model.object:s.data("jstree_model");if(!i(a,t))return n.call(null,!1);this._get_settings().model.async?a.getChildren(e.proxy(function(e){this.model_done(e,n)},this)):this.model_done(a.getChildren(),n)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(t,i){var s=[],n=this._get_settings(),a=this;e.isArray(t)||(t=[t]),e.each(t,function(t,i){var o=i.getProps()||{};o.attr=i.getAttr()||{},i.getChildrenCount()&&(o.state="closed"),o.data=i.getName(),e.isArray(o.data)||(o.data=[o.data]),a.data.types&&e.isFunction(i.getType)&&(o.attr[n.types.type_attr]=i.getType()),o.attr.id&&n.model.id_prefix&&(o.attr.id=n.model.id_prefix+o.attr.id),o.metadata||(o.metadata={}),o.metadata.jstree_model=i,s.push(o)}),i.call(null,s)}}})}(jQuery)}}(),function(e,t){function i(t,i){var n,a,o,r=t.nodeName.toLowerCase();return"area"===r?(n=t.parentNode,a=n.name,!(!t.href||!a||"map"!==n.nodeName.toLowerCase())&&(!!(o=e("img[usemap=#"+a+"]")[0])&&s(o))):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||i:i)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,a=/^ui-id-\d+$/;e.ui=e.ui||{},e.extend(e.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({focus:function(t){return function(i,s){return"number"==typeof i?this.each(function(){var t=this;setTimeout(function(){e(t).focus(),s&&s.call(t)},i)}):t.apply(this,arguments)}}(e.fn.focus),scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var s,n,a=e(this[0]);a.length&&a[0]!==document;){if(("absolute"===(s=a.css("position"))||"relative"===s||"fixed"===s)&&(n=parseInt(a.css("zIndex"),10),!isNaN(n)&&0!==n))return n;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,s){return!!e.data(t,s[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var s=e.attr(t,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(t,!n)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,s){function n(t,i,s,n){return e.each(a,function(){i-=parseFloat(e.css(t,"padding"+this))||0,s&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),n&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var a="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+s]=function(i){return i===t?r["inner"+s].call(this):this.each(function(){e(this).css(o,n(this,i)+"px")})},e.fn["outer"+s]=function(t,i){return"number"!=typeof t?r["outer"+s].call(this,t):this.each(function(){e(this).css(o,n(this,t,!0,i)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,s){var n,a=e.ui[t].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(e,t,i){var s,n=e.plugins[t];if(n&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(s=0;n.length>s;s++)e.options[n[s][0]]&&n[s][1].apply(e.element,i)}},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return t[s]>0||(t[s]=1,n=t[s]>0,t[s]=0,n)}})}(jQuery),function(e,t){function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=s(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function s(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(i,"mouseout",function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(i,"mouseover",function(){e.datepicker._isDisabledDatepicker(a.inline?t.parent()[0]:a.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))})}function n(t,i){e.extend(t,i);for(var s in i)null==i[s]&&(t[s]=i[s]);return t}e.extend(e.ui,{datepicker:{version:"1.10.3"}});var a,o="datepicker";e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return n(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var s,n,a;s=t.nodeName.toLowerCase(),n="div"===s||"span"===s,t.id||(this.uuid+=1,t.id="dp"+this.uuid),a=this._newInst(e(t),n),a.settings=e.extend({},i||{}),"input"===s?this._connectDatepicker(t,a):n&&this._inlineDatepicker(t,a)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?s(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var s=e(t);i.append=e([]),i.trigger=e([]),s.hasClass(this.markerClassName)||(this._attachments(s,i),s.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(i),e.data(t,o,i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var s,n,a,o=this._get(i,"appendText"),r=this._get(i,"isRTL");i.append&&i.append.remove(),o&&(i.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[r?"before":"after"](i.append)),t.unbind("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),s=this._get(i,"showOn"),("focus"===s||"both"===s)&&t.focus(this._showDatepicker),("button"===s||"both"===s)&&(n=this._get(i,"buttonText"),a=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:a,alt:n,title:n}):e("<button type='button'></button>").addClass(this._triggerClass).html(a?e("<img/>").attr({src:a,alt:n,title:n}):n)),t[r?"before":"after"](i.trigger),i.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,s,n,a=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){for(i=0,s=0,n=0;e.length>n;n++)e[n].length>i&&(i=e[n].length,s=n);return s},a.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),a.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-a.getDay())),e.input.attr("size",this._formatDate(e,a).length)}},_inlineDatepicker:function(t,i){var s=e(t);s.hasClass(this.markerClassName)||(s.addClass(this.markerClassName).append(i.dpDiv),e.data(t,o,i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,s,a,r){var l,c,h,d,u,p=this._dialogInst;return p||(this.uuid+=1,l="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+l+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],o,p)),n(p.settings,a||{}),i=i&&i.constructor===Date?this._formatDate(p,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(c=document.documentElement.clientWidth,h=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[c/2-100+d,h/2-150+u]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=s,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],o,p),this},_destroyDatepicker:function(t){var i,s=e(t),n=e.data(t,o);s.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),e.removeData(t,o),"input"===i?(n.append.remove(),n.trigger.remove(),s.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"===i||"span"===i)&&s.removeClass(this.markerClassName).empty())},_enableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!1,a.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().removeClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,s,n=e(t),a=e.data(t,o);n.hasClass(this.markerClassName)&&(i=t.nodeName.toLowerCase(),"input"===i?(t.disabled=!0,a.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):("div"===i||"span"===i)&&(s=n.children("."+this._inlineClass),s.children().addClass("ui-state-disabled"),s.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;this._disabledInputs.length>t;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,o)}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(i,s,a){var o,r,l,c,h=this._getInst(i);return 2===arguments.length&&"string"==typeof s?"defaults"===s?e.extend({},e.datepicker._defaults):h?"all"===s?e.extend({},h.settings):this._get(h,s):null:(o=s||{},"string"==typeof s&&(o={},o[s]=a),h&&(this._curInst===h&&this._hideDatepicker(),r=this._getDateDatepicker(i,!0),l=this._getMinMaxDate(h,"min"),c=this._getMinMaxDate(h,"max"),n(h.settings,o),null!==l&&o.dateFormat!==t&&o.minDate===t&&(h.settings.minDate=this._formatDate(h,l)),null!==c&&o.dateFormat!==t&&o.maxDate===t&&(h.settings.maxDate=this._formatDate(h,c)),"disabled"in o&&(o.disabled?this._disableDatepicker(i):this._enableDatepicker(i)),this._attachments(e(i),h),this._autoSize(h),this._setDate(h,r),this._updateAlternate(h),this._updateDatepicker(h)),t)},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,s,n,a=e.datepicker._getInst(t.target),o=!0,r=a.dpDiv.is(".ui-datepicker-rtl");if(a._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return n=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",a.dpDiv),n[0]&&e.datepicker._selectDay(t.target,a.selectedMonth,a.selectedYear,n[0]),i=e.datepicker._get(a,"onSelect"),i?(s=e.datepicker._formatDate(a),i.apply(a.input?a.input[0]:null,[s,a])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(a,"stepBigMonths"):-e.datepicker._get(a,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,r?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(a,"stepBigMonths"):+e.datepicker._get(a,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(i){var s,n,a=e.datepicker._getInst(i.target);return e.datepicker._get(a,"constrainInput")?(s=e.datepicker._possibleChars(e.datepicker._get(a,"dateFormat")),n=String.fromCharCode(null==i.charCode?i.keyCode:i.charCode),i.ctrlKey||i.metaKey||" ">n||!s||s.indexOf(n)>-1):t},_doKeyUp:function(t){var i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i))&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!==t.nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),!e.datepicker._isDisabledDatepicker(t)&&e.datepicker._lastInput!==t){var i,s,a,o,r,l,c;i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),s=e.datepicker._get(i,"beforeShow"),!1!==(a=s?s.apply(t,[t,i]):{})&&(n(i.settings,a),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),o=!1,e(t).parents().each(function(){return!(o|="fixed"===e(this).css("position"))}),r={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),r=e.datepicker._checkOffset(i,r,o),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":o?"fixed":"absolute",display:"none",left:r.left+"px",top:r.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.focus(),e.datepicker._curInst=i))}},_updateDatepicker:function(t){this.maxRows=4,a=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i,s=this._getNumberOfMonths(t),n=s[1];t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),t.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.focus(),t.yearshtml&&(i=t.yearshtml,setTimeout(function(){i===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),i=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,s){var n=t.dpDiv.outerWidth(),a=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,r=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(s?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(s?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?n-o:0,i.left-=s&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=s&&i.top===t.input.offset().top+r?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+n>l&&l>n?Math.abs(i.left+n-l):0),i.top-=Math.min(i.top,i.top+a>c&&c>a?Math.abs(a+r):0),i},_findPos:function(t){for(var i,s=this._getInst(t),n=this._get(s,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[n?"previousSibling":"nextSibling"];return i=e(t).offset(),[i.left,i.top]},_hideDatepicker:function(t){var i,s,n,a,r=this._curInst
;!r||t&&r!==e.data(t,o)||this._datepickerShowing&&(i=this._get(r,"showAnim"),s=this._get(r,"duration"),n=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),s,n):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1,a=this._get(r,"onClose"),a&&a.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),s=e.datepicker._getInst(i[0]);(i[0].id!==e.datepicker._mainDivId&&0===i.parents("#"+e.datepicker._mainDivId).length&&!i.hasClass(e.datepicker.markerClassName)&&!i.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||i.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==s)&&e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,s){var n=e(t),a=this._getInst(n[0]);this._isDisabledDatepicker(n[0])||(this._adjustInstDate(a,i+("M"===s?this._get(a,"showCurrentAtPos"):0),s),this._updateDatepicker(a))},_gotoToday:function(t){var i,s=e(t),n=this._getInst(s[0]);this._get(n,"gotoCurrent")&&n.currentDay?(n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear):(i=new Date,n.selectedDay=i.getDate(),n.drawMonth=n.selectedMonth=i.getMonth(),n.drawYear=n.selectedYear=i.getFullYear()),this._notifyChange(n),this._adjustDate(s)},_selectMonthYear:function(t,i,s){var n=e(t),a=this._getInst(n[0]);a["selected"+("M"===s?"Month":"Year")]=a["draw"+("M"===s?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(n)},_selectDay:function(t,i,s,n){var a,o=e(t);e(n).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0])||(a=this._getInst(o[0]),a.selectedDay=a.currentDay=e("a",n).html(),a.selectedMonth=a.currentMonth=i,a.selectedYear=a.currentYear=s,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var s,n=e(t),a=this._getInst(n[0]);i=null!=i?i:this._formatDate(a),a.input&&a.input.val(i),this._updateAlternate(a),s=this._get(a,"onSelect"),s?s.apply(a.input?a.input[0]:null,[i,a]):a.input&&a.input.trigger("change"),a.inline?this._updateDatepicker(a):(this._hideDatepicker(),this._lastInput=a.input[0],"object"!=typeof a.input[0]&&a.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var i,s,n,a=this._get(t,"altField");a&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t)),e(a).each(function(){e(this).val(n)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(i,s,n){if(null==i||null==s)throw"Invalid arguments";if(""===(s="object"==typeof s?""+s:s+""))return null;var a,o,r,l,c=0,h=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,d="string"!=typeof h?h:(new Date).getFullYear()%100+parseInt(h,10),u=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,p=(n?n.dayNames:null)||this._defaults.dayNames,f=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,m=(n?n.monthNames:null)||this._defaults.monthNames,g=-1,v=-1,_=-1,b=-1,y=!1,w=function(e){var t=i.length>a+1&&i.charAt(a+1)===e;return t&&a++,t},k=function(e){var t=w(e),i="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,n=RegExp("^\\d{1,"+i+"}"),a=s.substring(c).match(n);if(!a)throw"Missing number at position "+c;return c+=a[0].length,parseInt(a[0],10)},x=function(i,n,a){var o=-1,r=e.map(w(i)?a:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(r,function(e,i){var n=i[1];return s.substr(c,n.length).toLowerCase()===n.toLowerCase()?(o=i[0],c+=n.length,!1):t}),-1!==o)return o+1;throw"Unknown name at position "+c},C=function(){if(s.charAt(c)!==i.charAt(a))throw"Unexpected literal at position "+c;c++};for(a=0;i.length>a;a++)if(y)"'"!==i.charAt(a)||w("'")?C():y=!1;else switch(i.charAt(a)){case"d":_=k("d");break;case"D":x("D",u,p);break;case"o":b=k("o");break;case"m":v=k("m");break;case"M":v=x("M",f,m);break;case"y":g=k("y");break;case"@":l=new Date(k("@")),g=l.getFullYear(),v=l.getMonth()+1,_=l.getDate();break;case"!":l=new Date((k("!")-this._ticksTo1970)/1e4),g=l.getFullYear(),v=l.getMonth()+1,_=l.getDate();break;case"'":w("'")?C():y=!0;break;default:C()}if(s.length>c&&(r=s.substr(c),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===g?g=(new Date).getFullYear():100>g&&(g+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=g?0:-100)),b>-1)for(v=1,_=b;!((o=this._getDaysInMonth(g,v-1))>=_);)v++,_-=o;if(l=this._daylightSavingAdjust(new Date(g,v-1,_)),l.getFullYear()!==g||l.getMonth()+1!==v||l.getDate()!==_)throw"Invalid date";return l},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864e9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(e,t,i){if(!t)return"";var s,n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=e.length>s+1&&e.charAt(s+1)===t;return i&&s++,i},c=function(e,t,i){var s=""+t;if(l(e))for(;i>s.length;)s="0"+s;return s},h=function(e,t,i,s){return l(e)?s[t]:i[t]},d="",u=!1;if(t)for(s=0;e.length>s;s++)if(u)"'"!==e.charAt(s)||l("'")?d+=e.charAt(s):u=!1;else switch(e.charAt(s)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=h("D",t.getDay(),n,a);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=h("M",t.getMonth(),o,r);break;case"y":d+=l("y")?t.getFullYear():(10>t.getYear()%100?"0":"")+t.getYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":u=!0;break;default:d+=e.charAt(s)}return d},_possibleChars:function(e){var t,i="",s=!1,n=function(i){var s=e.length>t+1&&e.charAt(t+1)===i;return s&&t++,s};for(t=0;e.length>t;t++)if(s)"'"!==e.charAt(t)||n("'")?i+=e.charAt(t):s=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":n("'")?i+="'":s=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,i){return e.settings[i]!==t?e.settings[i]:this._defaults[i]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),s=e.lastVal=e.input?e.input.val():null,n=this._getDefaultDate(e),a=n,o=this._getFormatConfig(e);try{a=this.parseDate(i,s,o)||n}catch(e){s=t?"":s}e.selectedDay=a.getDate(),e.drawMonth=e.selectedMonth=a.getMonth(),e.drawYear=e.selectedYear=a.getFullYear(),e.currentDay=s?a.getDate():0,e.currentMonth=s?a.getMonth():0,e.currentYear=s?a.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,s){var n=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var s=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,n=s.getFullYear(),a=s.getMonth(),o=s.getDate(),r=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=r.exec(i);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":a+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,a));break;case"y":case"Y":n+=parseInt(l[1],10),o=Math.min(o,e.datepicker._getDaysInMonth(n,a))}l=r.exec(i)}return new Date(n,a,o)},o=null==i||""===i?s:"string"==typeof i?a(i):"number"==typeof i?isNaN(i)?s:n(i):new Date(i.getTime());return o=o&&"Invalid Date"==""+o?s:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var s=!t,n=e.selectedMonth,a=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),n===e.selectedMonth&&a===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(s?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),s="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(s,-i,"M")},next:function(){e.datepicker._adjustDate(s,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(s)},selectDay:function(){return e.datepicker._selectDay(s,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(s,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(s,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,s,n,a,o,r,l,c,h,d,u,p,f,m,g,v,_,b,y,w,k,x,C,j,D,T,S,$,P,I,E,M,N,A,L,O,z,R,H=new Date,F=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),q=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),B=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),Y=this._get(e,"showCurrentAtPos"),K=this._get(e,"stepMonths"),Q=1!==V[0]||1!==V[1],X=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-Y,ee=e.drawYear;if(0>Z&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),t=G&&G>t?G:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)0>--Z&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=B?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-K,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"e":"w")+"'>"+i+"</span></a>",n=this._get(e,"nextText"),n=B?this.formatDate(n,this._daylightSavingAdjust(new Date(ee,Z+K,1)),this._getFormatConfig(e)):n,a=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+n+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(q?"w":"e")+"'>"+n+"</span></a>",o=this._get(e,"currentText"),r=this._get(e,"gotoCurrent")&&e.currentDay?X:F,o=B?this.formatDate(o,r,this._getFormatConfig(e)):o,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(q?l:"")+(this._isInRange(e,r)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(q?"":l)+"</div>":"",h=parseInt(this._get(e,"firstDay"),10),h=isNaN(h)?0:h,d=this._get(e,"showWeek"),u=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),_=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),y="",k=0;V[0]>k;k++){for(x="",this.maxRows=4,C=0;V[1]>C;C++){if(j=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),D=" ui-corner-all",T="",Q){if(T+="<div class='ui-datepicker-group",V[1]>1)switch(C){case 0:T+=" ui-datepicker-group-first",D=" ui-corner-"+(q?"right":"left");break;case V[1]-1:T+=" ui-datepicker-group-last",D=" ui-corner-"+(q?"left":"right");break;default:T+=" ui-datepicker-group-middle",D=""}T+="'>"}for(T+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+D+"'>"+(/all|left/.test(D)&&0===k?q?a:s:"")+(/all|right/.test(D)&&0===k?q?s:a:"")+this._generateMonthYearHeader(e,Z,ee,G,J,k>0||C>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",S=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",w=0;7>w;w++)$=(w+h)%7,S+="<th"+((w+h+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+u[$]+"'>"+p[$]+"</span></th>";for(T+=S+"</tr></thead><tbody>",P=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,P)),I=(this._getFirstDayOfMonth(ee,Z)-h+7)%7,E=Math.ceil((I+P)/7),M=Q&&this.maxRows>E?this.maxRows:E,this.maxRows=M,N=this._daylightSavingAdjust(new Date(ee,Z,1-I)),A=0;M>A;A++){for(T+="<tr>",L=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(N)+"</td>":"",w=0;7>w;w++)O=g?g.apply(e.input?e.input[0]:null,[N]):[!0,""],z=N.getMonth()!==Z,R=z&&!_||!O[0]||G&&G>N||J&&N>J,L+="<td class='"+((w+h+6)%7>=5?" ui-datepicker-week-end":"")+(z?" ui-datepicker-other-month":"")+(N.getTime()===j.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===N.getTime()&&b.getTime()===j.getTime()?" "+this._dayOverClass:"")+(R?" "+this._unselectableClass+" ui-state-disabled":"")+(z&&!v?"":" "+O[1]+(N.getTime()===X.getTime()?" "+this._currentClass:"")+(N.getTime()===F.getTime()?" ui-datepicker-today":""))+"'"+(z&&!v||!O[2]?"":" title='"+O[2].replace(/'/g,"&#39;")+"'")+(R?"":" data-handler='selectDay' data-event='click' data-month='"+N.getMonth()+"' data-year='"+N.getFullYear()+"'")+">"+(z&&!v?"&#xa0;":R?"<span class='ui-state-default'>"+N.getDate()+"</span>":"<a class='ui-state-default"+(N.getTime()===F.getTime()?" ui-state-highlight":"")+(N.getTime()===X.getTime()?" ui-state-active":"")+(z?" ui-priority-secondary":"")+"' href='#'>"+N.getDate()+"</a>")+"</td>",N.setDate(N.getDate()+1),N=this._daylightSavingAdjust(N);T+=L+"</tr>"}Z++,Z>11&&(Z=0,ee++),T+="</tbody></table>"+(Q?"</div>"+(V[0]>0&&C===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=T}y+=x}return y+=c,e._keyEvent=!1,y},_generateMonthYearHeader:function(e,t,i,s,n,a,o,r){var l,c,h,d,u,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),_=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",y="";if(a||!g)y+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{for(l=s&&s.getFullYear()===i,c=n&&n.getFullYear()===i,y+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",h=0;12>h;h++)(!l||h>=s.getMonth())&&(!c||n.getMonth()>=h)&&(y+="<option value='"+h+"'"+(h===t?" selected='selected'":"")+">"+r[h]+"</option>");y+="</select>"}if(_||(b+=y+(!a&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",a||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),u=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?u+parseInt(e,10):parseInt(e,10);return isNaN(t)?u:t},f=p(d[0]),m=Math.max(f,p(d[1]||"")),f=s?Math.max(f,s.getFullYear()):f,m=n?Math.min(m,n.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";m>=f;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),_&&(b+=(!a&&g&&v?"":"&#xa0;")+y),b+="</div>"},_adjustInstDate:function(e,t,i){var s=e.drawYear+("Y"===i?t:0),n=e.drawMonth+("M"===i?t:0),a=Math.min(e.selectedDay,this._getDaysInMonth(s,n))+("D"===i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(s,n,a)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"===i||"Y"===i)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),n=i&&i>t?i:t;return s&&n>s?s:n},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,s){var n=this._getNumberOfMonths(e),a=this._daylightSavingAdjust(new Date(i,s+(0>t?t:n[0]*n[1]),1));return 0>t&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(e,a)},_isInRange:function(e,t){var i,s,n=this._getMinMaxDate(e,"min"),a=this._getMinMaxDate(e,"max"),o=null,r=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),s=(new Date).getFullYear(),o=parseInt(i[0],10),r=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(o+=s),i[1].match(/[+\-].*/)&&(r+=s)),(!n||t.getTime()>=n.getTime())&&(!a||t.getTime()<=a.getTime())&&(!o||t.getFullYear()>=o)&&(!r||r>=t.getFullYear())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,s){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var n=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(s,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),n,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.3"}(jQuery),jQuery(function($){function defineDatepickers(){var e=$(".datepicker");$.each(e,defineDatepicker)}function defineDatepicker(e,t){var i=$(t);if(!i.hasClass("hasDatepicker")){i.datepicker();for(var s=i.data("datepicker-options"),n=Object.getOwnPropertyNames(s),e=0;e<n.length;e++){var a=n[e];assignOption(i,a,s[a])}}}function assignOption($datepicker,name,value){void 0!==value&&null!==value&&("onChangeMonthYear"===name||"onClose"===name||"onSelect"===name?$datepicker.datepicker("option",name,function(){eval(value)}):$datepicker.datepicker("option",name,value))}"object"==typeof $.datepicker&&($.datepicker.regional.ru={closeText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",prevText:"\u041f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0435",nextText:"\u0421\u043b\u0435\u0434\u0443\u044e\u0449\u0435\u0435",currentText:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",monthNames:["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],monthNamesShort:["\u044f\u043d\u0432.","\u0444\u0435\u0432.","\u043c\u0430\u0440.","\u0430\u043f\u0440.","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433.","\u0441\u0435\u043d.","\u043e\u043a\u0442.","\u043d\u043e\u044f.","\u0434\u0435\u043a."],dayNames:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],dayNamesShort:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],dayNamesMin:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"],changeYear:!0,changeMonth:!0,weekHeader:"\u041d\u0435\u0434.",firstDay:1,isRTL:!1,showMonthAfterYear:!1,dateFormat:"yy-mm-dd"},$.datepicker.setDefaults($.datepicker.regional.ru)),defineDatepickers(),$doc.on("ajaxComplete",defineDatepickers),$("#ui-datepicker-div").css("display","none")}),ProductGroups=function(){var e,t,i={},s=function(){var e=$(".js-product-groups-form");return $.ajax({data:e.serialize(),async:!1,dataType:"html",type:e.attr("method"),url:e.attr("action"),success:function(){location.reload(!0)}}),!1},n=function(e,t){$.ajax({url:t||i.deleteUrl,data:{id:e,redirect_to:$(".js-update-links").data("redirect-to")&&location.href},dataType:"html",contentType:"text/html",beforeSend:function(){u_showLoading()},success:function(e){$("#popup-content").html(e),$doc.trigger("showDeleteGroupPopup:productGroups")},complete:function(){u_reRenderPopup()}})},a=function(e,t){$.ajax({url:t||i.editUrl,data:{id:e},dataType:"html",contentType:"text/html",beforeSend:function(){u_showLoading()},success:function(e){$("#popup-content").html(e),$doc.trigger("showEditGroupPopup:productGroups")},complete:function(){u_reRenderPopup()}})},o=function(){var e=null,t=null;$doc.on("mouseenter",i.selector+".with-icons a",function(){var i,s=$(this),n=s.closest(".js-search-tree-cover"),a=n.offset(),o=s.offset(),r=o.top-a.top+n.scrollTop()+4,l=n.scrollLeft(),c=s.outerWidth(),h=c+(o.left-a.left)+l,d=o.left-a.left+l+c+7,u=n.outerWidth()<=h?h+5:d;clearTimeout(t),clearTimeout(e),$(".jstree-icons-list").remove(),n.append(HandlebarsTemplates["product_groups/popup"]({id:s.closest("li").data("id"),order_url:s.closest("li").data("order_url")})),i=$(".js-jstree-icons-list").css({top:r,left:u}),i.outerWidth(),s.on("mouseleave.jstree-link",function(){e=setTimeout(function(){i.remove()},2e3),s.off("mouseleave.jstree-link")})}),$doc.on("mouseenter",".jstree-icons-list",function(){clearTimeout(e),clearTimeout(t)}),$doc.on("mouseleave.jstree-icon",".jstree-icons-list",function(){var e=$(this);t=setTimeout(function(){e.remove()},2e3),e.off("mouseleave.jstree-icon")}),$doc.on("click",".jstree-icon",function(){$(".jil-icon").remove()})},r=function(e){formSubmitter.enableButtons(e),u_reRenderPopup()},l=function(e){e.find(".form-error").remove().end().append($("<p>").addClass("form-error mt5").text("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0433\u0440\u0443\u043f\u043f\u0443"))},c=function(){$doc.on("submit.productGroups",".js-product-groups-form",function(t){var i=$(this);if(!e)return l(i),r(this),!1;$("#js-product-group-id").val(e.id),"choose-group"===i.data("form")?h():s(),t.preventDefault()})},h=function(){var i,s,n=$(".js-choose-group-link"),a=$(".js-group-link"),o=$(".js-group-span"),r=function(e){$("#popup-content").html($("<div>").attr("id","popup-inner").html("<p>"+e+"</p>")),u_reRenderPopup(),s=setTimeout(function(){hidePopup("popup-container")},2e3),$doc.on("closepopup",function(){clearTimeout(s)})};if(e.id===n.data("id"))return void r("\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c\u0430\u044f \u0433\u0440\u0443\u043f\u043f\u0430 \u0443\u0436\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u0430.");a.length||(a=$("<a>").addClass("mr10 js-group-link"),o.length?o.replaceWith(a):(i=n.removeClass("dashed-span darker-gray").clone(),n.removeAttr("data-index").off("click"),$(".js-product-groups-block").after($("<div>").addClass("uf-dd m0").append(a,n=i.addClass("action-link change-group").attr("title","\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c").text(""))))),n.data("id",e.id),a.prop("href",t.prop("href")).text(e.title),$(".js-product-group-id").val(e.id),r("\u0418\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b.")},d=function(){var s,r=$(i.selector);if(!r.find("li").length)return!1;s=new Tree(i.selector),s.bind("expand",function(e){var t=i.expandUrl,s=e.id;return t+(/\?/.test(t)?"&":"?")+"parent_id="+s}),s.bind("select_node",function(s,n,a){return e=s,t=a,$(i.selector).jstree("toggle_node",$(i.selector).find("li[data-id="+s.id+"]")),!0}),s.bind("move",function(e,t,s,n){var a=new TreeNode(e);$.ajax({url:i.moveUrl,data:{id:a.id,position:"before"===n.rslt.p?n.rslt.cp+1:n.rslt.cp},dataType:"json",contentType:"text/html",success:function(e){e.success?alert(e.success):e.error&&(alert(e.error),$.jstree.rollback(n.rlbk))},error:function(){$.jstree.rollback(n.rlbk)}})}),$doc.off("click",".js-icon-group-edit").on("click",".js-icon-group-edit",function(){a($(this).closest(".js-jstree-icons-list").data("id"))}).off("click",".js-icon-group-delete").on("click",".js-icon-group-delete",function(){n($(this).closest(".js-jstree-icons-list").data("id"))}).off("edit:rubricsList").on("edit:rubricsList",function(e,t){a(t)}).off("delete:rubricsList").on("delete:rubricsList",function(e,t){n(t)}),$(i.selector).unbind("open_node.jstree close_node.jstree loaded.jstree").bind("open_node.jstree close_node.jstree loaded.jstree",function(){u_reRenderPopup()}),s.render(),$(i.selector).bind("before.jstree",function(e,t){if("start_drag"===t.func){if(i.dndoff)return e.stopImmediatePropagation(),!1;$doc.off("closepopup").on("closepopup",function(){location.reload()})}}),c(),o(),$doc.on("closepopup",function(){$doc.off("submit.productGroups")})};return{init:function(e){i=e,d()},editGroup:function(e,t){a(e,t)},deleteGroup:function(e,t){n(e,t)}}}(),SearchProductGroups=function(){var e={},t=function(){var t=$(e.selector),i=new Tree(e.selector);if(!t.find("li").length)return t.html($("<p>").html("\u0413\u0440\u0443\u043f\u043f\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b")),!1;i.bind("expand",function(t){var i=e.expandUrl,s=t.id;return i+(/\?/.test(i)?"&":"?")+"parent_id="+s}),i.bind("select_node",function(t,i,s){return e.group.id!=t.id&&(nodeObj=t,$selectedLink=s,$(e.inputSelector).val(0==t.id?"":t.id),!0)}),i.bind("deselect_node",function(){return $(e.inputSelector).val(null),!0}),$(e.selector).bind("before.jstree",function(e,t){if("start_drag"===t.func)return e.stopImmediatePropagation(),!1}),$(e.selector).unbind("open_node.jstree close_node.jstree loaded.jstree").bind("open_node.jstree close_node.jstree loaded.jstree",function(){u_reRenderPopup()}),i.render(),t.bind("loaded.jstree",function(){e.group.parentId?t.find("li[data-id="+e.group.parentId+"] a").trigger("click"):t.find('li[data-id="0"] a').trigger("click")}),$doc.on("submit",".js-destroy-product-group-form",function(e){var t=$(this),i=t.find(".js-product-group-move-children-to");"move"!==t.find(".js-group-action:checked").val()||i.val()||(t.find(".form-error").remove(),i.before($("<div>").addClass("form-error mt5").text($(".js-search-tree-cover").data("required-error"))),formSubmitter.enableButtons(this),u_reRenderPopup(),e.preventDefault())})};return{init:function(i){e=i,t()}}}(),$.jstree._themes=assetHost+"jstree/";var FullScreenGallery=function(e){var t,i,s={title:null,imgComment:null,smallImgPreview:null,bigImgPreview:null,mainPhotoIndex:1,minHeightImg:200,productId:0,galleryClass:"",galleryCoverClass:""},n=function(){e("body").append(e.JSONTemplate({div1:{"class":"full-screen-gallery "+s.galleryClass,"data-product-id":s.productId,div1:{"class":"fsg-close"},div2:{"class":"fsg-header",div1:{id:"yashare"},div2:{"class":"fsgh-h",text:s.title}},div3:{"class":"fsg-body",div:{"class":"img-block",div:{"class":"ib-body",img:{"class":"ibb-img fsg-main-img",src:s.bigImgPreview[s.mainPhotoIndex],alt:""}}}},div4:{"class":"fsg-footer",p:{"class":"fsgf-comment",text:s.imgComment[s.mainPhotoIndex],title:s.imgComment[s.mainPhotoIndex]},ul:{"class":"fsgf-list"}}}}).html()),e.each(s.smallImgPreview,function(i,n){t=e(".full-screen-gallery[data-product-id="+s.productId+"] .fsgf-list").append(e.JSONTemplate({li:{"class":"fsgfl-item",div:{"class":"img-block",div:{"class":"ib-body",img:{"class":"ibb-img fsgfl-img",src:n,alt:""}}}}}).html())}),t.flexibleSlider({activeItem:0,type:"circle",prevArrowText:"\u2190 \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0430\u044f",nextArrowText:"\u0441\u043b\u0435\u0434\u0443\u044e\u0449\u0430\u044f \u2192",initScroll:!0,toggleArrows:!1}),i=e(".fsgf-comment"),e(".full-screen-gallery #yashare").css("margin-top",u),d=e(".full-screen-gallery")},a=function(){var t,i,n,a,o=$win.height();d.outerHeight(o),t=e(".fsg-header").outerHeight(),i=e(".fsg-footer").outerHeight(),n=e(".fsgf-comment").outerHeight(),a=o-40-t-i-n-u,a=a<=s.minHeightImg?s.minHeightImg:a,e(".fsg-body").height(a).find(".img-block").height(a).find(".ibb-img").css({maxHeight:a}),d.css("min-height",a<=s.minHeightImg?t+i+n+s.minHeightImg+u:"")},o=function(e){i.html(s.imgComment[e]?s.imgComment[e]:"&nbsp;").toggleClass("hidden",!s.imgComment[e].length).attr("title",s.imgComment[e]),t.trigger("changePreview.fullScreenGallery",[e])},r=function(){e(".full-screen-gallery, .full-screen-gallery-cover").hide(),e("body").css("overflow","auto"),e(".js-wrapper-site").removeClass("with-scroll")},l=function(){e(".fsg-body").click(function(){t.trigger("changePreview.fullScreenGallery")}),$win.on("debouncedresize.fullScreenGallery",function(){a(),$win.trigger("debouncedresize.flexibleSlider")}),e(".fsg-close, .full-screen-gallery-cover").click(function(){r()}),$doc.on("keydown",function(e){27===e.keyCode&&r()}),t.on("showActiveItem.flexibleSlider",function(t,n){i.html(s.imgComment[n]?s.imgComment[n]:"&nbsp;").toggleClass("hidden",!s.imgComment[n].length).attr("title",s.imgComment[n]),e(".fsg-main-img").attr("src",s.bigImgPreview[n])})},c=function(){if("object"!=typeof Ya||!Ya.share2)return!1;new Ya.share2("yashare",{theme:{lang:"ru",services:"yaru,vkontakte,facebook,twitter,odnoklassniki,moimir,lj,moikrug",size:"s",copy:"first",limit:0},hooks:{onshare:function(){$doc.trigger("share:yandexShare")}}})},h=function(){e(".full-screen-gallery[data-product-id="+s.productId+"], .full-screen-gallery-cover").show()},d=e(""),u=-8;return{init:function(i){e.extend(s,i),d.length||e("body").append(e("<div>").addClass("full-screen-gallery-cover "+s.galleryClass)),e(".full-screen-gallery[data-product-id="+s.productId+"]").length?(h(),t.flexibleSlider("update")):(n(),l(),c(),h()),e("body").css("overflow","hidden"),e(".js-wrapper-site").addClass("with-scroll"),a(),o(s.index)}}}(jQuery);app.modules.regionsPopup=function(e){function t(e){var t,i,s,n=e.data("$popup"),a=e.data("$arrow"),o=g.alignDir,r=n.offset(),l=g.$container.offset(),c=n.outerHeight();"auto"===o&&n.addClass("region-popup_position_fixed"),r.left<l.left||"left"===o?s=l.left-r.left:(t=n.outerWidth(),i=g.$container.outerWidth(),
(r.left+t>l.left+i||"right"===o)&&(s=l.left+i-(r.left+t))),s&&(n.css({marginLeft:parseInt(n.css("marginLeft"))+s}),a.css({marginLeft:parseInt(a.css("marginLeft"))-s})),r.top+c+parseInt(n.css("marginTop"))>$doc.outerHeight()&&e.offset().top>c+parseInt(n.css("marginBottom"))&&n.addClass("top")}function i(e){var t=0,i=e.data("$items");if(!(i.length<=g.maxItems))return i.each(function(){var e=$(this);if(e.index()+1>g.maxItems)return!1;t+=e.outerHeight()}),t}function s(e){var t=0,i=e.data("$list");i.find(".js-rplln-val").each(function(){t=Math.max(t,$(this).width())}),i.find(".js-rpll-num").width(t)}function n(e){e.data("$list").css("height",i(e)?i(e):"auto")}function a(e,t){var i,s={UP:38,DOWN:40,ENTER:13},n=$(".js-rpl-item").height(),a=t.data("$popup"),o=t.data("$list"),r=o.data("jsp"),l=a.find(".js-rpl-item.selected").removeClass("selected"),c=o.offset().top,h=c+o.height();if("mouseenter"===e.type)return void(l=$(e.target).closest(".js-rpl-item").addClass("selected"));switch(e.keyCode){case s.UP:e.preventDefault(),l=l.prevAll(":visible:first").length?l.prevAll(":visible:first").addClass("selected"):a.find(".js-rpl-item:visible:last").addClass("selected");break;case s.DOWN:l=l.nextAll(":visible:first").length?l.nextAll(":visible:first").addClass("selected"):a.find(".js-rpl-item:visible:eq(0)").addClass("selected");break;case s.ENTER:l.find(".rpl-link").length&&l.find(".rpl-link")[0].click();default:return}l.length&&(i=parseInt(l.offset().top),i+n>h&&r.scrollByY(n),i<c&&r.scrollByY(i-c),i>h&&r.scrollByY(i-c-n))}function o(e){e.data({$list:e.find(".js-rp-list"),$popup:e.find(".js-modern-popup"),$items:e.find(".js-rpl-item"),$arrow:e.find(".js-mp-arrow"),visibleHeight:10})}function r(e,i){var a,r=$(".js-modern-popup"),l=e.data("$popup"),h=e.data(),u=h.popupContainer?$(h.popupContainer):e;if(i&&(a=$(i).addClass("js-modern-popup-new"),r.length?r.replaceWith(a):$("body").append(a),r=$(".js-modern-popup")),f||(f=r.clone()),$(".js-modern-popup").not(l||"").addClass("hidden"),l)return l.toggleClass("hidden"),!1;o(u),l=u.data("$popup"),r.length&&!l.length&&(u.append(f.clone()),o(u),l=u.data("$popup")),d(u),s(u),n(u),t(u),l&&l.removeClass("hidden"),app.config.isMobile&&c(e)}function l(e){$.ajax({url:app.config.regionsPopup.url,data:{popup_options:app.config.regionsPopup.options},success:function(t){r(e,t)},complete:function(){e.removeClass("loading"),$doc.trigger("spansToLinks")}})}function c(e){clearTimeout(m),m=setTimeout(function(){window.history.pushState("region-popup-open",null,""),$win.on("popstate",function(){e.data("$popup").addClass("hidden")})},150)}function h(){"region-popup-open"===window.history.state&&window.history.back()}function d(e){var t=e.data("$items"),i=e.data("$list");e.each(function(){e.data("$popup").on("click touchstart",function(e){e.stopPropagation()})}),i.find(".js-rpl-item").click(function(){$doc.trigger("clickRegionPopupItem",[$(this)])}),i.find(".js-rpl-item:not(.js-rpl-item-header ~ .js-rpl-item)").click(function(){$doc.trigger("clickRegionPopupFilledItems")}),e.find(".js-rp-input").on("input propertychange",function(){var s,n=new RegExp("^"+$(this).val(),"ig"),a=e.find(".js-not-found"),o=e.find(".js-rpl-item-header"),r=0;t.each(function(){var e=$(this),t=n.test(e.data("region")||e.find(".js-rpll-region").text());e.toggle(t),t&&(s=!0,r+=e.height())}),s?a.addClass("region-popup__text_hidden"):a.length?a.removeClass("region-popup__text_hidden"):i.before($("<p>").addClass("region-popup__text js-not-found").text("\u041d\u0435\u0442 "+("predl"===g.listingType?"\u0442\u043e\u0432\u0430\u0440\u043e\u0432":"firms"===g.listingType?"\u043a\u043e\u043c\u043f\u0430\u043d\u0438\u0439":"faq"===g.listingType?"\u0432\u043e\u043f\u0440\u043e\u0441\u043e\u0432":"\u0437\u0430\u044f\u0432\u043e\u043a")+" \u0432 \u0440\u0435\u0433\u0438\u043e\u043d\u0435")),e.data("visibleHeight")!==r&&e.data({visibleHeight:r}),o.toggle(o.nextAll(":visible").length>0)}),$doc.on("click.regionPopup touchstart.regionPopup",function(t){$(t.target).closest(".js-modern-popup, .js-show-regions-popup").length||(e.data("$popup").addClass("hidden"),$doc.trigger("hideRegionPopup",[e]),app.config.isMobile&&h())}),$(".js-rp-input").on("keydown",function(t){a(t,e)}),$(".js-rpl-item").on("mouseenter",function(t){a(t,e)})}function u(e){$.extend(g,e.data()),$(".js-modern-popup-new").length?r(e):l(e),$doc.trigger("closeAllPopup:popups")}function p(){$doc.on("showRegionPopup",function(e,t){u(t)})}var f,m,g={maxItems:10,listingType:"predl",$container:$(".js-base-width")};return e.load=function(){p()},e}(app.modules.regionsPopup||{}),app.modules.showRegionsPopup=function(e){function t(){var e={regionHint:"hclm-region-hint",regionLink:"hclm-region-link js-region-link"};$(".js-show-regions-popup-wrapper[data-hint-url]").each(function(){var t=$(this),i=t.data();t.find(".js-show-regions-popup").after($("<div>").addClass(e.regionHint).text(i.hintText).append($("<a>").addClass(e.regionLink).text(i.hintRegionName).prop({href:i.hintUrl})))})}function i(){$doc.on("click",".js-show-regions-popup",function(){$doc.trigger("showRegionPopup",[$(this)])})}return e.load=function(){i(),t()},e}(app.modules.showRegionsPopup||{}),app.modules.companySitesLightbox=function(e){function t(e){var t,i,s,n=$("<div>").addClass("company-popup"),a=$("<ul>").addClass("comp-list"),o=$("<li>").addClass("comp-item"),r=$("<div>").append($("<a>").addClass("comp-link").attr({href:"%href%"}).text("%content%")).html();for(a.append(t),s=0;s<e.names.length;s++)t=o.clone(),t.html($("<div>").addClass("comp-label").html($("<div>").addClass("comp-label-content").text(e.names[s].replace(/ /g,"\xa0")))),i=$("<div>").addClass("comp-link-wrapper").html($("<div>").addClass("comp-link-content").html(r.replace("%href%",e.hrefs[s]).replace("%content%",punycode.toUnicode(e.links[s])))),e.isPortalPage&&i.find(".comp-link").attr("target","_blank"),a.append(t.append(i));n.append($("<div>").addClass("company-popup-content").html(a)),$(".js-toolbar-link-sites").append(n)}function i(){var e,t,i=$(".company-popup"),s=$(".js-tl-body"),n=i.outerWidth();$(".company-popup:visible").length&&(e=$win.width()-(s.outerWidth()/2+s.offset().left),t=e<n/2?n/2-e:0,i.css({marginLeft:-n/2-t}))}function s(){$doc.click(function(e){var s=$(e.target),n=s.closest(".js-toolbar-link-sites"),a=$(".js-toolbar-link-sites, .js-top-helper");if(s.closest(".company-popup").length){if(!s.hasClass("comp-link"))return;a.removeClass("active")}if(n.length)return n.find(".company-popup").length||t(n.data()),a.toggleClass("active"),void i();a.removeClass("active")}),$win.on("debouncedresize",i)}return e.load=function(){s()},e}(app.modules.companySitesLightbox||{}),app.modules.commonBase=function(e){function t(e){var t=app.config.rootHost;~location.host.indexOf(t)||(t=punycode.toASCII(location.host)),$.cookie("prefer_mobile_view",e.data("mobile"),{path:"/",domain:t}),window.history&&history.pushState&&history.pushState(null,null,location.href.replace(/#.*/,"")),location.reload(!0)}function i(){$(".js-toggle-version").click(function(e){t($(this)),e.preventDefault()})}return e.load=function(){i()},e}(app.modules.commonBase||{}),app.modules.editDemand=function(e){function t(){$.cookie("demand_was_sent")&&$(".js-success-popup").length&&(openStaticPopup("js-success-popup"),o=setTimeout(function(){hidePopup("popup-container")},2e3))}function i(e,t){var i,s,n,a=new Date,o=parseInt(e);return o?a.setDate(a.getDate()+o):a=new Date(t),s=("0"+a.getDate()).slice(-2),n=("0"+(a.getMonth()+1)).slice(-2),i=s+"."+n+"."+a.getFullYear(),{date:a,dateString:i}}function s(e){return new Date<=new Date(e)}function n(){var e=$(".js-change-date"),t=e.next(".uf-err");if($(".js-save-demand").prop({disabled:!0}),!t.length)return void e.after($("<div>").addClass("uf-err").text("\u0434\u0430\u0442\u0430 \u043f\u0443\u0431\u043b\u0438\u043a\u0430\u0446\u0438\u0438 \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u043c\u0435\u043d\u044c\u0448\u0435 \u0442\u0435\u043a\u0443\u0449\u0435\u0439"));t.show()}function a(){$(".js-show-select").click(function(e){e.preventDefault(),$(".js-change-date").show(),$(".js-show-select, .js-valid-till").hide()}),$(".js-change-date").change(function(){var e=$(".js-change-date"),t=$(".js-date-data"),a=i(e.val(),t.attr("data-valid-till"));$(".js-show-select").show(),e.hide(),$(".js-valid-till").text("\u043f\u043e "+a.dateString).show(),t.data("valid-till",a.date),s(t.data("valid-till"))?($(".js-save-demand").prop({disabled:!1}),e.next(".uf-err").hide()):n()}),$(".js-create-demand, .js-edit-demand").submit(function(e){var t=$(".js-date-data").data("valid-till");if(!t||s(t))return $(".js-change-date").next(".uf-err").hide(),void($(e.target).is(".js-create-demand")&&$.cookie("demand_was_sent",1,{path:"/"}));e.preventDefault(),formSubmitter.enableButtons(this),n()}),$doc.on("closepopup",function(){clearTimeout(o)})}var o;return e.load=function(){$(".js-create-demand").length||t(),$.cookie("demand_was_sent",null,{path:"/"}),a()},e}(app.modules.editDemand||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates.admin_online_flash_message=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e){return"<div class='flash-with-timer'>\n  <div class='flash'>\n    <div class='flash-message "+this.escapeExpression(this.lambda(null!=e?e.type:e,e))+"'>\n      "+this.escapeExpression(this.lambda(null!=e?e.text:e,e))+"\n    </div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates.admin_online_flash_message}.call(this),app.modules.onlineFlashMessages=function(e){function t(e){return n.template?$(HandlebarsTemplates[n.template](n)):$("<div>").addClass([n.classNames.message,n.classNames[n.type]].join(" ")).html(e).prepend($("<i>").addClass(n.classNames[n.type+"Icon"]))}function i(e){n=$.extend(!0,{},a,e),$("."+n.classNames.message).remove(),$(n.anchor)[n.method](t(n.text))}function s(){$doc.on("render:onlineFlash",function(e,t){i(t)}).on("remove:onlineFlash",function(e,t){n=$.extend(!0,{},a,t),$("."+n.classNames.message).remove()})}var n,a={classNames:{message:"flash-message",errorIcon:"fa fa-exclamation-circle",successIcon:"fa fa-check-circle",error:"failure",success:"success"},type:"success",method:"prepend",anchor:".base-width",text:""};return e.load=function(){s()},e}(app.modules.onlineFlashMessages||{}),Object.keys||(Object.keys=function(){"use strict";var e=Object.prototype.hasOwnProperty,t=!{toString:null}.propertyIsEnumerable("toString"),i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],s=i.length;return function(n){if("object"!=typeof n&&("function"!=typeof n||null===n))throw new TypeError("Object.keys called on non-object");var a,o,r=[];for(a in n)e.call(n,a)&&r.push(a);if(t)for(o=0;o<s;o++)e.call(n,i[o])&&r.push(i[o]);return r}}());var swfobject=function(){function e(){if(!W){try{var e=L.getElementsByTagName("body")[0].appendChild(g("span"));e.parentNode.removeChild(e)}catch(e){return}W=!0;for(var t=R.length,i=0;i<t;i++)R[i]()}}function t(e){W?e():R[R.length]=e}function i(e){if(typeof A.addEventListener!=S)A.addEventListener("load",e,!1);else if(typeof L.addEventListener!=S)L.addEventListener("load",e,!1);else if(typeof A.attachEvent!=S)v(A,"onload",e);else if("function"==typeof A.onload){var t=A.onload;A.onload=function(){t(),e()}}else A.onload=e}function s(){z?n():a()}function n(){var e=L.getElementsByTagName("body")[0],t=g($);t.setAttribute("type",E);var i=e.appendChild(t);if(i){var s=0;!function(){if(typeof i.GetVariable!=S){var n=i.GetVariable("$version");n&&(n=n.split(" ")[1].split(","),V.pv=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)])}else if(s<10)return s++,void setTimeout(arguments.callee,10);e.removeChild(t),i=null,a()}()}else a()}function a(){var e=H.length;if(e>0)for(var t=0;t<e;t++){var i=H[t].id,s=H[t].callbackFn,n={success:!1,id:i};if(V.pv[0]>0){var a=m(i);if(a)if(!_(H[t].swfVersion)||V.wk&&V.wk<312)if(H[t].expressInstall&&r()){var h={};h.data=H[t].expressInstall,h.width=a.getAttribute("width")||"0",h.height=a.getAttribute("height")||"0",a.getAttribute("class")&&(h.styleclass=a.getAttribute("class")),a.getAttribute("align")&&(h.align=a.getAttribute("align"));for(var d={},u=a.getElementsByTagName("param"),p=u.length,f=0;f<p;f++)"movie"!=u[f].getAttribute("name").toLowerCase()&&(d[u[f].getAttribute("name")]=u[f].getAttribute("value"));l(h,d,i,s)}else c(a),s&&s(n);else y(i,!0),s&&(n.success=!0,n.ref=o(i),s(n))}else if(y(i,!0),s){var g=o(i);g&&typeof g.SetVariable!=S&&(n.success=!0,n.ref=g),s(n)}}}function o(e){var t=null,i=m(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=S)t=i;else{var s=i.getElementsByTagName($)[0];s&&(t=s)}return t}function r(){return!U&&_("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function l(e,t,i,s){U=!0,C=s||null,j={success:!1,id:i};var n=m(i);if(n){"OBJECT"==n.nodeName?(k=h(n),x=null):(k=n,x=i),e.id=M,(typeof e.width==S||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==S||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),L.title=L.title.slice(0,47)+" - Flash Player Installation";var a=V.ie&&V.win?"ActiveX":"PlugIn",o="MMredirectURL="+A.location.toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+L.title;if(typeof t.flashvars!=S?t.flashvars+="&"+o:t.flashvars=o,V.ie&&V.win&&4!=n.readyState){var r=g("div");i+="SWFObjectNew",r.setAttribute("id",i),n.parentNode.insertBefore(r,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}d(e,t,i)}}function c(e){if(V.ie&&V.win&&4!=e.readyState){var t=g("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(h(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(h(e),e)}function h(e){var t=g("div");if(V.win&&V.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName($)[0];if(i){var s=i.childNodes;if(s)for(var n=s.length,a=0;a<n;a++)1==s[a].nodeType&&"PARAM"==s[a].nodeName||8==s[a].nodeType||t.appendChild(s[a].cloneNode(!0))}}return t}function d(e,t,i){var s,n=m(i);if(V.wk&&V.wk<312)return s;if(n)if(typeof e.id==S&&(e.id=i),V.ie&&V.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var r="";for(var l in t)t[l]!=Object.prototype[l]&&(r+='<param name="'+l+'" value="'+t[l]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+r+"</object>",F[F.length]=e.id,s=m(e.id)}else{var c=g($);c.setAttribute("type",E);for(var h in e)e[h]!=Object.prototype[h]&&("styleclass"==h.toLowerCase()?c.setAttribute("class",e[h]):"classid"!=h.toLowerCase()&&c.setAttribute(h,e[h]));for(var d in t)t[d]!=Object.prototype[d]&&"movie"!=d.toLowerCase()&&u(c,d,t[d]);n.parentNode.replaceChild(c,n),s=c}return s}function u(e,t,i){var s=g("param");s.setAttribute("name",t),s.setAttribute("value",i),e.appendChild(s)}function p(e){var t=m(e);t&&"OBJECT"==t.nodeName&&(V.ie&&V.win?(t.style.display="none",function(){4==t.readyState?f(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function f(e){var t=m(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function m(e){var t=null;try{t=L.getElementById(e)}catch(e){}return t}function g(e){return L.createElement(e)}function v(e,t,i){e.attachEvent(t,i),q[q.length]=[e,t,i]}function _(e){var t=V.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function b(e,t,i,s){if(!V.ie||!V.mac){var n=L.getElementsByTagName("head")[0];if(n){var a=i&&"string"==typeof i?i:"screen";if(s&&(D=null,T=null),!D||T!=a){var o=g("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),D=n.appendChild(o),V.ie&&V.win&&typeof L.styleSheets!=S&&L.styleSheets.length>0&&(D=L.styleSheets[L.styleSheets.length-1]),T=a}V.ie&&V.win?D&&typeof D.addRule==$&&D.addRule(e,t):D&&typeof L.createTextNode!=S&&D.appendChild(L.createTextNode(e+" {"+t+"}"))}}}function y(e,t){if(B){var i=t?"visible":"hidden";W&&m(e)?m(e).style.visibility=i:b("#"+e,"visibility:"+i)}}function w(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=S?encodeURIComponent(e):e}var k,x,C,j,D,T,S="undefined",$="object",P="Shockwave Flash",I="ShockwaveFlash.ShockwaveFlash",E="application/x-shockwave-flash",M="SWFObjectExprInst",N="onreadystatechange",A=window,L=document,O=navigator,z=!1,R=[s],H=[],F=[],q=[],W=!1,U=!1,B=!0,V=function(){var e=typeof L.getElementById!=S&&typeof L.getElementsByTagName!=S&&typeof L.createElement!=S,t=O.userAgent.toLowerCase(),i=O.platform.toLowerCase(),s=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,r=[0,0,0],l=null;if(typeof O.plugins!=S&&typeof O.plugins[P]==$)!(l=O.plugins[P].description)||typeof O.mimeTypes!=S&&O.mimeTypes[E]&&!O.mimeTypes[E].enabledPlugin||(z=!0,o=!1,l=l.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),r[0]=parseInt(l.replace(/^(.*)\..*$/,"$1"),10),r[1]=parseInt(l.replace(/^.*\.(.*)\s.*$/,"$1"),10),r[2]=/[a-zA-Z]/.test(l)?parseInt(l.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof A.ActiveXObject!=S)try{var c=new ActiveXObject(I);c&&(l=c.GetVariable("$version"))&&(o=!0,l=l.split(" ")[1].split(","),r=[parseInt(l[0],10),parseInt(l[1],10),parseInt(l[2],10)])}catch(e){}return{w3:e,pv:r,wk:a,ie:o,win:s,mac:n}}();(function(){V.w3&&((typeof L.readyState!=S&&"complete"==L.readyState||typeof L.readyState==S&&(L.getElementsByTagName("body")[0]||L.body))&&e(),W||(typeof L.addEventListener!=S&&L.addEventListener("DOMContentLoaded",e,!1),V.ie&&V.win&&(L.attachEvent(N,function(){"complete"==L.readyState&&(L.detachEvent(N,arguments.callee),e())}),A==top&&function(){if(!W){try{L.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}e()}}()),V.wk&&function(){if(!W)/loaded|complete/.test(L.readyState)?e():setTimeout(arguments.callee,0)}(),i(e)))})(),function(){V.ie&&V.win&&window.attachEvent("onunload",function(){for(var e=q.length,t=0;t<e;t++)q[t][0].detachEvent(q[t][1],q[t][2]);for(var i=F.length,s=0;s<i;s++)p(F[s]);for(var n in V)V[n]=null;V=null;for(var a in swfobject)swfobject[a]=null;swfobject=null})}();return{registerObject:function(e,t,i,s){if(V.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=s,H[H.length]=n,y(e,!1)}else s&&s({success:!1,id:e})},getObjectById:function(e){if(V.w3)return o(e)},embedSWF:function(e,i,s,n,a,o,c,h,u,p){var f={success:!1,id:i};V.w3&&!(V.wk&&V.wk<312)&&e&&i&&s&&n&&a?(y(i,!1),t(function(){s+="",n+="";var t={};if(u&&typeof u===$)for(var m in u)t[m]=u[m];t.data=e,t.width=s,t.height=n;var g={};if(h&&typeof h===$)for(var v in h)g[v]=h[v];if(c&&typeof c===$)for(var b in c)typeof g.flashvars!=S?g.flashvars+="&"+b+"="+c[b]:g.flashvars=b+"="+c[b];if(_(a)){var w=d(t,g,i);t.id==i&&y(i,!0),f.success=!0,f.ref=w}else{if(o&&r())return t.data=o,void l(t,g,i,p);y(i,!0)}p&&p(f)})):p&&p(f)},switchOffAutoHideShow:function(){B=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:_,createSWF:function(e,t,i){return V.w3?d(e,t,i):undefined},showExpressInstall:function(e,t,i,s){V.w3&&r()&&l(e,t,i,s)},removeSWF:function(e){V.w3&&p(e)},createCSS:function(e,t,i,s){V.w3&&b(e,t,i,s)},addDomLoadEvent:t,addLoadEvent:i,getQueryParamValue:function(e){var t=L.location.search||L.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return w(t);for(var i=t.split("&"),s=0;s<i.length;s++)if(i[s].substring(0,i[s].indexOf("="))==e)return w(i[s].substring(i[s].indexOf("=")+1))}return""},expressInstallCallback:function(){if(U){var e=m(M);e&&k&&(e.parentNode.replaceChild(k,e),x&&(y(x,!0),V.ie&&V.win&&(k.style.display="block")),C&&C(j)),U=!1}}}}();(function(){Handlebars.registerPartial("barmen_client/partials/_preview_pulscen",Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return'<div class="showcase-product showcase-product_wide js-showcase">\n  <div class="showcase-product__wrapper">\n    <a class="showcase-product__image js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank">\n      <img src="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.banner_shape_extended_image:e)?n.public_url:n,e))+'" alt=""/>\n    </a>\n    <a class="showcase-product__main-info js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank">\n      <div class="showcase-product__content">\n        '+this.escapeExpression((a=null!=(a=t.extended_content||(null!=e?e.extended_content:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"extended_content",hash:{},data:s}):a))+'\n      </div>\n      <div class="showcase-product__company">\n        '+this.escapeExpression((a=null!=(a=t.company_name||(null!=e?e.company_name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"company_name",hash:{},data:s}):a))+'\n      </div>\n    </a>\n  </div>\n  <div class="showcase-product__additional-info">\n    <a class="showcase-product__more-button js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank">\n      \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435\n    </a>\n    <div class="showcase-product__phone">'+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:s}):a))+'</div>\n  </div>\n</div>\n<div class="showcase-product showcase-product_avarage js-showcase">\n  <div class="showcase-product__wrapper">\n    <a class="showcase-product__image js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank">\n      <img src="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.banner_shape_extended_image:e)?n.public_url:n,e))+'" alt=""/>\n    </a>\n    <a class="showcase-product__main-info js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank">\n      <div class="showcase-product__content">\n        '+this.escapeExpression((a=null!=(a=t.extended_content||(null!=e?e.extended_content:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"extended_content",hash:{},data:s}):a))+'\n      </div>\n      <div class="showcase-product__company">\n        '+this.escapeExpression((a=null!=(a=t.company_name||(null!=e?e.company_name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"company_name",hash:{},data:s}):a))+'\n      </div>\n    </a>\n  </div>\n  <div class="showcase-product__additional-info">\n    <a class="showcase-product__more-button js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank">\n      \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435\n    </a>\n    <div class="showcase-product__phone">'+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:s}):a))+"</div>\n  </div>\n</div>"},useData:!0}))}).call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["barmen_client/showcase_blizko"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return"<a class='showcase js-showcase-link' href='"+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+"' target='_blank'>\n  <h3 class='sc-header'>\n    "+this.escapeExpression((a=null!=(a=t.name||(null!=e?e.name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"name",hash:{},data:s}):a))+"\n  </h3>\n  <div class='sc-c'>\n    <div class='scc-i'>\n      <div class='scci-i'>\n        <img alt='' class='sc-img' src='"+this.escapeExpression(this.lambda(null!=(n=null!=e?e.banner_shape_image:e)?n.public_url:n,e))+"'>\n      </div>\n    </div>\n    <div class='scc-d scc-wi'>\n      <div class='sccd-t'>"+this.escapeExpression((a=null!=(a=t.content||(null!=e?e.content:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"content",hash:{},data:s}):a))+"</div>\n      <div class='sccd-contacts'>\n        <div class='sccd-c'>\n          "+this.escapeExpression((a=null!=(a=t.company_name||(null!=e?e.company_name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"company_name",hash:{},data:s}):a))+"\n        </div>\n        <div class='sccd-p'>\n          <div class='sccdp-i'>"+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:s}):a))+"</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</a>"},useData:!0}),this.HandlebarsTemplates["barmen_client/showcase_blizko"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["barmen_client/showcase_mobile"]=Handlebars.template({1:function(){return"cap"},3:function(e){var t;return"          <img alt='' class='ibb-img' src='"+this.escapeExpression(this.lambda(null!=(t=null!=e?e.banner_shape_image:e)?t.public_url:t,e))+"'>\n"},5:function(){return"          <div class='ibb-img'></div>\n"},7:function(e,t,i,s){var n;return"    <li class='spl-item company'>"+this.escapeExpression((n=null!=(n=t.company_name||(null!=e?e.company_name:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"company_name",hash:{},data:s}):n))+"</li>\n"},9:function(e,t,i,s){var n;return"    <li class='spl-item phone'>"+this.escapeExpression((n=null!=(n=t.phone||(null!=e?e.phone:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"phone",hash:{},data:s}):n))+"</li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return"<a href='"+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+"' target='_blank'>\n  <ul class='short-products-list'>\n    <li class='spl-item'>\n      <div class='img-block "+(null!=(n=t.unless.call(e,null!=(n=null!=e?e.banner_shape_image:e)?n.public_url:n,{name:"unless",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+"'>\n        <div class='ib-body'>\n"+(null!=(n=t["if"].call(e,null!=(n=null!=e?e.banner_shape_image:e)?n.public_url:n,{name:"if",hash:{},fn:this.program(3,s,0),inverse:this.program(5,s,0),data:s}))?n:"")+"        </div>\n      </div>\n    </li>\n    <li class='spl-item'>\n      <p class='spl-title'>"+this.escapeExpression((a=null!=(a=t.name||(null!=e?e.name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"name",hash:{},data:s}):a))+"</p>\n    </li>\n    <li class='spl-item content'>\n      <p>"+this.escapeExpression((a=null!=(a=t.content||(null!=e?e.content:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"content",hash:{},data:s}):a))+"</p>\n    </li>\n"+(null!=(n=t["if"].call(e,null!=e?e.company_name:e,{name:"if",hash:{},fn:this.program(7,s,0),inverse:this.noop,data:s}))?n:"")+(null!=(n=t["if"].call(e,null!=e?e.phone:e,{name:"if",hash:{},fn:this.program(9,s,0),inverse:this.noop,data:s}))?n:"")+"  </ul>\n</a>"},useData:!0}),this.HandlebarsTemplates["barmen_client/showcase_mobile"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["barmen_client/showcase_pulscen"]=Handlebars.template({1:function(e,t,i,s){var n;return null!=(n=this.invokePartial(i["barmen_client/partials/_preview_pulscen"],e,{name:"barmen_client/partials/_preview_pulscen",data:s,helpers:t,partials:i}))?n:""},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return(null!=(n=t["if"].call(e,null!=e?e.showPreview:e,{name:"if",hash:{},fn:this.program(1,s,0),inverse:this.noop,data:s}))?n:"")+'<div class="showcase-product js-showcase js-showcase-ecommerce"\n  data-ecommerce-id="'+this.escapeExpression((a=null!=(a=t.bannerId||(null!=e?e.bannerId:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"bannerId",hash:{},data:s}):a))+'"\n  data-ecommerce-name="banner_showcase"\n  data-ecommerce-creative="'+this.escapeExpression((a=null!=(a=t.companyId||(null!=e?e.companyId:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"companyId",hash:{},data:s}):a))+'"\n>\n  <div class="showcase-product__wrapper">\n    <a class="showcase-product__image js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank" data-ga-id="PC4-24382-1">\n      <img src="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.banner_shape_extended_image:e)?n.public_url:n,e))+'" alt="" data-ecommerce-type="image"/>\n    </a>\n    <a class="showcase-product__main-info js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank" data-ga-id="PC4-24382-1">\n      <div class="showcase-product__content" data-ecommerce-type="title">\n        '+this.escapeExpression((a=null!=(a=t.extended_content||(null!=e?e.extended_content:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"extended_content",hash:{},data:s}):a))+'\n      </div>\n      <div class="showcase-product__company" data-ecommerce-type="company_name">\n        '+this.escapeExpression((a=null!=(a=t.company_name||(null!=e?e.company_name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"company_name",hash:{},data:s}):a))+'\n      </div>\n    </a>\n  </div>\n  <div class="showcase-product__additional-info">\n    <a\n      class="showcase-product__more-button js-showcase-link js-ga-link"\n      href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank"\n      data-ga-id="PC4-24382-2"\n      data-ecommerce-type="button_more"\n    >\n      \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435\n    </a>\n    <div class="showcase-product__phone">'+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:s}):a))+"</div>\n  </div>\n</div>"},usePartial:!0,useData:!0}),this.HandlebarsTemplates["barmen_client/showcase_pulscen"]}.call(this),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["barmen_client/showcase_pulscen_mobile"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n,a;return'<div class="showcase-product js-showcase js-showcase-ecommerce"\n  data-ecommerce-id="'+this.escapeExpression((a=null!=(a=t.bannerId||(null!=e?e.bannerId:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"bannerId",hash:{},data:s}):a))+'"\n  data-ecommerce-name="banner_showcase"\n  data-ecommerce-creative="'+this.escapeExpression((a=null!=(a=t.companyId||(null!=e?e.companyId:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"companyId",hash:{},data:s}):a))+'"\n>\n  <div class="showcase-product__wrapper">\n    <a class="showcase-product__image js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank" data-ga-id="PC4-24382-1">\n      <img src="'+this.escapeExpression(this.lambda(null!=(n=null!=e?e.banner_shape_extended_image:e)?n.public_url:n,e))+'" alt="" data-ecommerce-type="image"/>\n    </a>\n    <a class="showcase-product__main-info js-showcase-link js-ga-link" href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'" target="_blank" data-ga-id="PC4-24382-1">\n      <div class="showcase-product__content" data-ecommerce-type="title">\n        '+this.escapeExpression((a=null!=(a=t.extended_content||(null!=e?e.extended_content:e))?a:t.helperMissing,
"function"==typeof a?a.call(e,{name:"extended_content",hash:{},data:s}):a))+'\n      </div>\n      <div class="showcase-product__company" data-ecommerce-type="company_name">\n        '+this.escapeExpression((a=null!=(a=t.company_name||(null!=e?e.company_name:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"company_name",hash:{},data:s}):a))+'\n      </div>\n    </a>\n  </div>\n  <div class="showcase-product__additional-info">\n    <a\n      class="showcase-product__more-button js-showcase-link js-ga-link"\n      href="'+this.escapeExpression((a=null!=(a=t.url||(null!=e?e.url:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"url",hash:{},data:s}):a))+'"\n      target="_blank"\n      data-ga-id="PC4-24382-2"\n      data-ecommerce-type="button_more"\n    >\n      \u041f\u043e\u0434\u0440\u043e\u0431\u043d\u0435\u0435\n    </a>\n    <div class="showcase-product__phone">'+this.escapeExpression((a=null!=(a=t.phone||(null!=e?e.phone:e))?a:t.helperMissing,"function"==typeof a?a.call(e,{name:"phone",hash:{},data:s}):a))+"</div>\n  </div>\n</div>"},useData:!0}),this.HandlebarsTemplates["barmen_client/showcase_pulscen_mobile"]}.call(this),app.modules.barmenIframeGA=function(e){function t(e){var t=$("#"+e),i=t.parents(".js-barmen-wrapper").data();t.contents().find("body").on("click",function(){$doc.trigger("send:googleAnalytics",i.gaId)})}function i(){$doc.on("renderIframe:barmen",function(e,i){t(i)})}return e.load=function(){i()},e}(app.modules.barmenIframeGA||{}),app.modules.hints=function(e){function t(){var e=$(".js-actum-slider");e.actum(e.data("actumOptions")),e.removeClass("loading")}function i(){var e=$(".js-plu-lamp-packets");$(".js-plu-lamp-close",e).on("click",function(){e.hide(),$.cookie("disable-packets-info",1,{path:"/"})}),$.cookie("disable-packets-info")||e.show()}return e.load=function(){t(),i()},e}(app.modules.hints||{}),app.modules.newOrdersInfoPopup=function(e){function t(){o.dialog({resizable:!1,dialogClass:"new-orders-info-popup",close:s})}function i(){o=$(".js-new-orders-info-popup"),o.length&&t()}function s(){$.cookie("hide_new_orders_info_popup",1,{expires:1,path:"/",domain:~location.host.indexOf(app.config.rootHost)?app.config.rootHost:punycode.toASCII(location.host)})}function n(){o.dialog("option","position",{at:"right bottom"})}function a(){$doc.on("renderPopup:newOrdersInfoPopup",i).on("click",".js-new-orders-info-popup-close",function(){o.dialog("close")}),$.throttle&&$win.on("resize",$.throttle(250,n))}var o;return e.load=function(){i(),a()},e}(app.modules.newOrdersInfoPopup||{}),app.modules.reminds=function(e){function t(){$doc.on("reminds:callToCustomer",function(e,t){t?($("<div>").addClass("js-reminds-popup").html(t).appendTo("body"),openStaticPopup("js-reminds-popup")):app.config.showPopupOrdersInfo&&$doc.trigger("renderPopup:newOrdersInfoPopup")}).on("closePopup:callToCustomer",function(){hidePopup("popup-container")})}return e.load=function(){t(),app.config.getReminds&&$doc.trigger("getReminds:callToCustomer")},e}(app.modules.reminds||{}),function(){return this.HandlebarsTemplates||(this.HandlebarsTemplates={}),this.HandlebarsTemplates["product_groups/popup"]=Handlebars.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,i,s){var n;return"<ul class='jstree-icons-list js-jstree-icons-list' data-id='"+this.escapeExpression((n=null!=(n=t.id||(null!=e?e.id:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"id",hash:{},data:s}):n))+"' data-order_url='"+this.escapeExpression((n=null!=(n=t.order_url||(null!=e?e.order_url:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"order_url",hash:{},data:s}):n))+"'>\n  <li>\n    <span class='icon-group edit js-icon-group-edit' title='\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c'></span>\n  </li>\n  <li>\n    <a class='icon-group increase-size' href='"+this.escapeExpression((n=null!=(n=t.order_url||(null!=e?e.order_url:e))?n:t.helperMissing,"function"==typeof n?n.call(e,{name:"order_url",hash:{},data:s}):n))+"' target='_blank' title='\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u043f\u043e\u0440\u044f\u0434\u043e\u043a \u0442\u043e\u0432\u0430\u0440\u043e\u0432'></a>\n  </li>\n  <li>\n    <span class='icon-group delete js-icon-group-delete' title='\u0443\u0434\u0430\u043b\u0438\u0442\u044c'></span>\n  </li>\n</ul>"},useData:!0}),this.HandlebarsTemplates["product_groups/popup"]}.call(this);