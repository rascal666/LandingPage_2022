app.modules.rubricsList=function(e){function t(e){var t,o=e.$link,s=o.closest(".js-prl-item");o.hasClass("loading")||(t=s.find(".js-product-rubrics-list"),s.toggleClass("opened"),t.toggle(),t.children().length||$.ajax({url:e.url.replace("_url_name_",s.data("url_name")),data:e.params,dataType:"html",beforeSend:function(){o.addClass("prl-toggle-loading")},success:function(e){if(!$(e).children().length)return void o.remove();s.append(e),o.removeClass("prl-toggle-loading"),$doc.trigger("appendRubricList",[s])}}))}function o(){var e=$(".js-product-rubrics-list"),t=$(".js-prl-item.opened");t.length&&e.scrollTop(t.offset().top-e.offset().top)}function s(){$doc.on("mouseenter mouseleave",".js-prl-toggle",function(e){$(this).closest(".js-prl-cover").toggleClass("prl-cover-icon-hovered","mouseenter"===e.type)}).on("click",".js-load-subrubrics",function(e){var o=$(".js-main-rubrics-navigation").data();e.preventDefault(),t({$link:$(this),url:o.url,params:o.params})}),i.length&&$doc.on("mouseenter",".js-prl-link",function(){var e=$(this),t=e.find(".js-prl-num"),o=e.closest(".js-prl-item"),s=t.offset();o.addClass("hover"),e.closest(".js-prl-item[data-id]").length&&(i.css({position:"absolute",top:s.top+t.outerHeight()/2-i.outerHeight()/2,left:s.left+t.outerWidth()-i.outerWidth()-5}).show(),o.addClass("active"))}).on("mouseleave",".js-prl-link",function(e){$(e.relatedTarget).closest(i).length||(i.hide(),$(this).closest(".js-prl-item").removeClass("active hover"))}).on("click",".js-action-box",function(){return $(this).toggleClass("active"),!1}).on("mouseleave",".js-action-box",function(){$(this).removeClass("active").hide(),$(".js-prl-item").removeClass("active hover")}).on("click",".js-edit-group",function(){$doc.trigger("edit:rubricsList",[$(".js-prl-item.active").data("id")])}).on("click",".js-change-products-order",function(){window.open($(".js-prl-item.active").data("order_url"),"_blank")}).on("click",".js-delete-group",function(){$doc.trigger("delete:rubricsList",[$(".js-prl-item.active").data("id")])})}var i;return e.load=function(){i=$(".js-action-box"),o(),s()},e}(app.modules.rubricsList||{});